<header>
  <!-- Nav Bar -->
  <nav
    id="navbar"
    class="navbar navbar-light navbar-expand-sm {% if site.navbar_fixed %}fixed-top{% else %}sticky-top{% endif %}"
  >
    <div class="container">
      {% if page.permalink != '/' -%}
      <a
        class="navbar-brand title font-weight-lighter"
        href="{{ site.baseurl | prepend: site.url }}/"
      >
        {%- if site.title == "blank" -%}
        <span class="font-weight-bold">{{ site.first_name }} </span>
        {{ site.middle_name }} {{ site.last_name }}{%- else -%}{{ site.title
        }}{%- endif -%}
      </a>
      {%- elsif site.enable_navbar_social -%}
      <!-- Social Icons -->
      <div class="navbar-brand social">{% include social.html %}</div>
      {% endif %}
      <!-- Navbar Toggle -->
      <button
        class="navbar-toggler collapsed ml-auto"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>

      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          {%- for page in site.pages -%} {% if page.permalink == '/' %} {%
          assign about_title = page.title-i18n %} {% endif %} {% endfor %}

          <!-- About -->
          <li class="nav-item {% if page.permalink == '/' %}active{% endif %}">
            <a class="nav-link" href="{% tl home %}"
              >{% t about_title %} {%- if page.permalink == '/' -%}
              <span class="sr-only">({% t global.current %})</span>
              {%- endif -%}
            </a>
          </li>
          {% if site.blog_nav_title %}
          <!-- Blog -->
          <li
            class="nav-item {% if page.url contains 'blog' %}active{% endif %}"
          >
            <a class="nav-link" href="{% tl blog %}"
              >{{ site.blog_nav_title }} {%- if page.url contains 'blog' -%}
              <span class="sr-only">({% t global.current %})</span>
              {%- endif -%}
            </a>
          </li>
          {%- endif %}

          <!-- Other pages -->
          {%- assign sorted_pages = site.pages | sort: "nav_order" -%} {%- for p
          in sorted_pages -%} {%- if p.nav and p.autogen == nil -%} {%- if
          p.dropdown %}
          <li
            class="nav-item dropdown {% if page.title == p.title %}active{% endif %}"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdown"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
              >{% if p.title-i18n != nil and p.title-i18n != '' %} {% t
              p.title-i18n %} {% else %} {{p.title}} {% endif %} {%- if
              page.title == p.title -%}
              <span class="sr-only">({% t global.current %})</span>
              {%- endif -%}
            </a>
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="navbarDropdown"
            >
              {%- for child in p.children -%} {%- if child.title == 'divider' %}
              <div class="dropdown-divider"></div>
              {%- else %}
              <a class="dropdown-item" href="{% tl child.namespace  %}"
                >{% if child.title-i18n != nil and child.title-i18n != '' %} {%
                t child.title-i18n %} {% else %} {{child.title}} {% endif %}</a
              >
              {%- endif -%} {% endfor %}
            </div>
          </li>
          {%- else %}
          <li class="nav-item {% if page.title == p.title %}active{% endif %}">
            <a class="nav-link" href="{% tl p.namespace  %}"
              >{% if p.title-i18n != nil and p.title-i18n != '' %} {% t
              p.title-i18n %} {% else %} {{p.title}} {% endif %} {%- if
              page.title == p.title -%}
              <span class="sr-only">({% t global.current %})</span>
              {%- endif -%}
            </a>
          </li>
          {%- endif -%} {%- endif -%} {% endfor -%} {%- if site.enable_darkmode
          %}
          <li class="nav-item">
            {% if site.lang == "id" %}
            <a
              class="nav-link"
              href="{% tl {{page.namespace}} en
              %}"
              ><i class="flag flag-united-kingdom"></i
            ></a>
            {% elsif site.lang == "en" %}
            <a class="nav-link" href="{% tl {{page.namespace}} id %}"
              ><i class="flag flag-indonesia"></i>
            </a>
            {% endif %}
          </li>
          <!-- Toogle theme mode -->
          <div class="toggle-container">
            <a id="light-toggle">
              <i class="fas fa-moon"></i>
              <i class="fas fa-sun"></i>
            </a>
          </div>
          {%- endif %}
        </ul>
      </div>
    </div>
  </nav>
</header>
