---
layout: page
title: Basic Lane Line Detection
description: Implementing Python and classic OpenCV to detect lane lines
img: assets/img/12.jpg
importance: 1
category: Computer Vision

---

<!-- VIDEO LINKS
https://youtu.be/zbxr5MJNSU8 "Solid White Video Output"
https://youtu.be/vj48U4v-hig "Solid Yellow Video Output"
https://youtu.be/VJY4PSqq33M "Challenge Video Output"
 -->

This program is used to detect lane lines using standard openCV library such as canny edge detection as well as Hough lines transformation. By implementing region of interest on top of that, you are able to eliminate unnecessary information on the image.

#### **Pipeline**

My pipeline consisted of 5 steps. Below are the details:
* Converting image from 3 color spaces to grayscale
* Applying Gaussian Blur with kernel size = 5
* Applying canny edge detection with 1:3 threshold ratio
* Defining vertices for region of interest masking
* Applying Hough line transformation inside the region of interest

After putting all the pipelines together, I was able to detect the lane lines inside the region of interest. However, the goal of this project is to draw a single line on the left and right lanes.

In order to draw a single line on the left and right lanes, I modified the draw_lines() function by extrapolating the lines. I separated the left and right lanes based on their slopes. Then I grouped them in two different categories in which the linear regression equation will be generated by calling np.polyfit()

The image below shows the slopes distribution in one image. Right lane will have a positive slope starting from 0.5 while the left lane has a negative slope starting from -0.5. Therefore, any values in between will be ignored.

<div class="row">
    <div class="col-sm mt-3 mt-md-0" align="center">
        {% include figure.html path="assets/img/basic_lane_lines/test_images_output/slopes_distribution.png" title="Slopes Distribution" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    Slope distribution on the video input
</div>

Once the draw_lines() is modified, I run back the pipelines on the input image and below is the result.

<div class="row">
    <div class="col-sm mt-3 mt-md-0" align="center">
        {% include figure.html path="assets\img\basic_lane_lines\test_images_output\solidWhiteCurve.jpg" title="Output Example" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    Output Example
</div>

If I put all the input images together, it will look like this

<div class="row">
    <div class="col-sm mt-3 mt-md-0" align="center">
        {% include figure.html path="assets\img\basic_lane_lines\test_images_output\all_images.png" title="All Output" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    All Output
</div>

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        <a href="https://youtu.be/zbxr5MJNSU8" title="Video Output">
            <img src="../../../assets/img/basic_lane_lines/out_white.png" alt="Alternate Text" />
        </a>
    </div>
    <div class="col-sm mt-3 mt-md-0">
        <a href="https://youtu.be/zbxr5MJNSU8" title="Video Output">
            <img src="../../../assets/img/basic_lane_lines/out_white.png" alt="Alternate Text" />
        </a>
    </div>
    <div class="col-sm mt-3 mt-md-0">
        <a href="https://youtu.be/zbxr5MJNSU8" title="Video Output">
            <img src="../../../assets/img/basic_lane_lines/out_white.png" alt="Alternate Text" />
        </a>
    </div>
</div>
<div class="caption">
    Caption photos easily. On the left, a road goes through a tunnel. Middle, leaves artistically fall in a hipster photoshoot. Right, in another hipster photoshoot, a lumberjack grasps a handful of pine needles.
</div>




<!-- [![Test Video](/../../../assets/img/basic_lane_lines/test_images_output/solidWhiteRight.jpg)](https://youtu.be/zbxr5MJNSU8 "Video Output") -->

After applying the pipelines to the video input, I managed to get satifying results on the solidWhiteRight.mp4 and solidYellowLeft.mp4. However, I am still struggling on how to optimize the pipeline so that it works for the challenge.mp4 as well


### 2. Identify potential shortcomings with your current pipeline


One potential shortcoming would be what would happen when the lane is not straight as my extrapolated formula is using a linear regression.

Another shortcoming could be if the slope range is -0.5 to 0.5 then it will be negleted. Every video footage may have different slope value so that putting a hardcoded threshold seems not the best way to achieve the goal.


### 3. Suggest possible improvements to your pipeline

A possible improvement would be to to use curve fitting lane instead of linear regression.

Another potential improvement could be to use filtering algorithm to remove some noise inside the region of interest instead of using a hardcoded slope range threshold.
