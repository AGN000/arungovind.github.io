var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.addEvent()},e.prototype.init=function(){},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){this.removeEvent()},e}(eui.Component);t.BaseEui=e,__reflect(e.prototype,"game.BaseEui",["game.EuiSkinInt"])}(game||(game={}));var DDZLoadingView=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.backgroud_bmp||(this.backgroud_bmp=MJLobby.LobbyResUtil.createBitmapByName("HZ_login_bg_png"),this.backgroud_bmp.width=uniLib.Global.screenWidth,this.backgroud_bmp.height=uniLib.Global.screenHeight,this.addChild(this.backgroud_bmp)),this.bigLogo||(this.bigLogo=MJLobby.LobbyResUtil.createBitmapByName("ddz_big_logo_png_png"),this.bigLogo.x=(uniLib.Global.screenWidth-this.bigLogo.width)/2,this.bigLogo.y=106,this.addChild(this.bigLogo)),this.darkLine_bmp||(this.darkLine_bmp=MJLobby.LobbyResUtil.createBitmapByName("lb_loading_darkLine",432,uniLib.Global.screenHeight-196*uniLib.ScreenUtils.scaleFactor),this.addChild(this.darkLine_bmp)),this.lightLine_bmp||(this.lightLine_bmp=MJLobby.LobbyResUtil.createBitmapByName("lb_loading_lightLine",this.darkLine_bmp.x+2,this.darkLine_bmp.y-10),this.lightLine_bmp.scale9Grid=new egret.Rectangle(12,18,10,2),this.addChild(this.lightLine_bmp)),this.explain_txf||(this.explain_txf=MJLobby.LobbyResUtil.createTextFeild(0,egret.HorizontalAlign.CENTER,"",22,500,uniLib.Global.screenHeight-171*uniLib.ScreenUtils.scaleFactor,276),this.addChild(this.explain_txf)),this._progTxt||(this._progTxt=MJLobby.LobbyResUtil.createTextFeild(0,egret.HorizontalAlign.CENTER,"",22,520,uniLib.Global.screenHeight-220*uniLib.ScreenUtils.scaleFactor,276),this.addChild(this._progTxt)),this._infoTxt||(this._infoTxt=MJLobby.LobbyResUtil.createTextFeild(0,egret.HorizontalAlign.CENTER,"抵制不良游戏 拒绝盗版游戏 注意自我保护 谨防受骗上当 适度游戏益脑 沉迷游戏伤身 合理安排时间 享受健康生活",20,0,uniLib.Global.screenHeight-44*uniLib.ScreenUtils.scaleFactor,MJLobby.LobbyDataCache.defaultWidth),this.addChild(this._infoTxt))},e.prototype.setProgress=function(t,n,a,i,r){if(void 0===r&&(r=!1),this._versionTxt||(this._versionTxt=MJLobby.LobbyResUtil.createTextFeild(10066329,egret.HorizontalAlign.RIGHT,MJLobby.LobbyDataCache.version,22,864),this._versionTxt.x=uniLib.Global.screenWidth-this._versionTxt.width,this._versionTxt.y=uniLib.Global.screenHeight-this._versionTxt.height,this.addChild(this._versionTxt),this._versionTxt.text=MJLobby.LobbyDataCache.version),n&&0!=n){var o=Math.ceil(t/n*100);a&&""!=a?this.explain_txf.text=a:this.explain_txf.text=e.explain,0==r&&o>93&&(o=93);var s=this.darkLine_bmp.width*(o/100)+27;this.lightLine_bmp.width=s,this.lightLine_bmp.width>this.darkLine_bmp.width&&(this.lightLine_bmp.width=this.darkLine_bmp.width),this._progTxt&&(this._progTxt.text=o+"%")}else this.explain_txf.text=a;this.explain_txf.x=(MJLobby.LobbyDataCache.defaultWidth-this.explain_txf.width)/2},e}(egret.Sprite);DDZLoadingView.explain="正在加载游戏资源...",__reflect(DDZLoadingView.prototype,"DDZLoadingView");var game;!function(t){var e=function(){function e(){this.playCard=new Array,this.playCardValue=new Array}return Object.defineProperty(e,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new e),this.m_Instance},enumerable:!0,configurable:!0}),e.clearInstance=function(){this.m_Instance=null},e.getCardPoints=function(t){var e=[];if(null==t)return e;for(var n=0,a=t;n<a.length;n++){var i=a[n];e.push(Math.floor(i/100))}return e},Object.defineProperty(e.prototype,"isPlay",{get:function(){var e=this.operateSeatId,a=t.RoomData.Instance.landlordUid,i=t.PokerFunction.GetSeatDataBySeatId(e);if(!i||!i.user)return!0;if(a==i.user.uid)return!0;var r=t.PokerFunction.GetSeatDataByUid(a),o=r?r.seatId:null,s=e-1;s=1>s?s+3:s;var h=this.getPlayCardValue(s);if(null==h)return!0;if(h.cardType==t.CardType.Error_Card)return!0;if(s==o)return!0;var d=this.getCardOperableList(e),l=null==d?null:d[0],u=new n(l),c=u.cardValue.value;return(u.cardType==t.CardType.Single_Card||u.cardType==t.CardType.Double_Card)&&14>c?!0:!1},enumerable:!0,configurable:!0}),e.getCardPoint=function(t){return Math.floor(t/100)},e.prototype.getMainCardByPoint=function(t){var e=this.operateHandCard;if(null!=e)return e.filter(function(e){return Math.floor(e/100)==t})},e.prototype.setPlayCard=function(e,a){var i=t.GameConstant.GetClientNoByUid(e);this.playCard[i]=a,this.playCardValue[i]=new n(a)},Object.defineProperty(e.prototype,"layCard",{get:function(){return this.playCard},enumerable:!0,configurable:!0}),e.prototype.removeOneCard=function(e){var n=t.GameConstant.GetClientNoByUid(e),a=this.playCard[n];a&&a instanceof Array&&a.clear()},e.prototype.removeAllPlayCard=function(){this.playCard.clear()},Object.defineProperty(e.prototype,"operationType",{get:function(){var e=this.beforePlayCardValue,n=t.RoomData.Instance.operate,a=null==n?null:n.cardSetList;return e.cardType==t.CardType.Error_Card?t.OperationType.FirstHand:a&&a instanceof Array&&a.length?t.OperationType.Play:t.OperationType.PassOnly},enumerable:!0,configurable:!0}),e.prototype.getPlayCardValue=function(t){return this.playCardValue[t]},Object.defineProperty(e.prototype,"beforePlayCardValue",{get:function(){return this.getBeforePlayCardValue(this.operateSeatId)},enumerable:!0,configurable:!0}),e.prototype.getBeforePlayCardValue=function(e){var a=e-1;a=1>a?a+3:a;var i=this.operateSeatId-2;i=1>i?i+3:i;var r=this.playCardValue,o=r[a]&&r[a].cardType!=t.CardType.Error_Card?r[a]:r[i];return o?o:new n(null)},e.prototype.clearPlayCard=function(){this.playCard.clear(),this.playCardValue.clear()},Object.defineProperty(e.prototype,"operateHandCard",{get:function(){var e=t.PokerFunction.GetSeatDataBySeatId(this.operateSeatId);if(null!=e)return e.handCards},enumerable:!0,configurable:!0}),e.prototype.getCardOperableList=function(e){this.operateSeatId=e,this.handCardAnalysis=new n(this.operateHandCard);var a,i=this.beforePlayCardValue;switch(i.cardType){case t.CardType.Single_Card:a=this.single();break;case t.CardType.Double_Card:a=this["double"]();break;case t.CardType.Three_Card:a=this.three();break;case t.CardType.ThreeOne_Card:a=this.threeOne();break;case t.CardType.ThreeTwo_Card:a=this.threeTwo();break;case t.CardType.Bomb_Card:a=this.bomb();break;case t.CardType.KingBomb_Card:break;case t.CardType.Four_TwoSingle_Card:a=this.fourTwoSingle();break;case t.CardType.Four_TwoDouble_Card:a=this.fourTwoDouble();break;case t.CardType.Feiji_Card:a=this.feiji();break;case t.CardType.Feiji_TwoSingle_Card:a=this.feijiTwoSingle();break;case t.CardType.Feiji_TwoDouble_Card:a=this.feijiTwoDouble();break;case t.CardType.Lian_Card:a=this.lian();break;case t.CardType.Double_Lian_Card:a=this.doubleLian();break;case t.CardType.Error_Card:a=this.firstHand()}return this.cardSetList=a,a},e.prototype.firstHand=function(){var e=this.handCardAnalysis,n=new Array;e.cardType!=t.CardType.Error_Card&&n.push(this.operateHandCard);for(var a=0,i=e.singles;a<i.length;a++){var r=i[a];n.push(this.getMainCardByPoint(r))}for(var o=0,s=e.doubles;o<s.length;o++){var r=s[o];n.push(this.getMainCardByPoint(r))}for(var h=function(t){var a=d.getMainCardByPoint(t);if(e.singleLength>0){var i=d.getMainCardByPoint(e.singles[0]);n.push(a.concat(i))}if(e.doublesLength>0){var r=d.getMainCardByPoint(e.doubles[0]);n.push(a.concat(r))}if(e.threesLength>1){var o=d.getMainCardByPoint(e.threes.first(function(e){return e!=t}));n.push(a.concat([o[0]]))}n.push(a)},d=this,l=0,u=e.threes;l<u.length;l++){var r=u[l];h(r)}for(var c=0,p=e.fours;c<p.length;c++){var r=p[c],m=this.getMainCardByPoint(r);if(n.push(m),e.singleLength>0){var g=this.getMainCardByPoint(e.singles[0]);n.push(m.concat(g))}if(e.doublesLength>0){var C=this.getMainCardByPoint(e.doubles[0]);n.push(m.concat(C))}}if(e.maxLian&&e.maxLian.length>0)for(var f=0,y=e.maxLian;f<y.length;f++){for(var r=y[f],v=new Array,b=0,_=r;b<_.length;b++){var T=_[b],L=this.getMainCardByPoint(T);v.push(L[0])}n.push(v)}if(e.maxDoubleLian&&e.maxDoubleLian.length>0)for(var I=0,S=e.maxDoubleLian;I<S.length;I++){for(var r=S[I],v=new Array,P=0,G=r;P<G.length;P++){var T=G[P],L=this.getMainCardByPoint(T);v.push(L[0]),v.push(L[1])}n.push(v)}if(e.kingBomb&&e.kingBomb.length>0){for(var k=new Array,w=0,B=e.kingBomb;w<B.length;w++){var r=B[w],E=this.getMainCardByPoint(r);k=k.concat(E)}n.push(k)}return n.sort(function(t,e){return t[0]-e[0]}),n},e.prototype.single=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=0,i=t.singles;a<i.length;a++){var r=i[a];r>n&&e.push(this.getMainCardByPoint(r))}for(var o=0,s=t.doubles;o<s.length;o++){var r=s[o];if(r>n){var h=this.getMainCardByPoint(r).first();e.push([h])}}for(var d=0,l=t.threes;d<l.length;d++){var r=l[d];if(r>n){var h=this.getMainCardByPoint(r).first();e.push([h])}}for(var u=0,c=t.fours;u<c.length;u++){var r=c[u],p=this.getMainCardByPoint(r);e.push(p)}if(t.kingBomb&&t.kingBomb.length>0){for(var m=new Array,g=0,C=t.kingBomb;g<C.length;g++){var r=C[g],f=this.getMainCardByPoint(r);m=m.concat(f)}e.push(m)}return e},e.prototype["double"]=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=0,i=t.doubles;a<i.length;a++){var r=i[a];r>n&&e.push(this.getMainCardByPoint(r))}for(var o=0,s=t.threes;o<s.length;o++){var r=s[o];if(r>n){var h=this.getMainCardByPoint(r);h.removeAt(2),e.push(h)}}for(var d=0,l=t.fours;d<l.length;d++){var r=l[d],u=this.getMainCardByPoint(r);if(e.push(u),r>n){var h=this.getMainCardByPoint(r);h.removeAt(2),h.removeAt(3),e.push(h)}}if(t.kingBomb&&t.kingBomb.length>0){for(var c=new Array,p=0,m=t.kingBomb;p<m.length;p++){var r=m[p],g=this.getMainCardByPoint(r);c=c.concat(g)}e.push(c)}return e},e.prototype.three=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=0,i=t.threes;a<i.length;a++){var r=i[a];r>n&&e.push(this.getMainCardByPoint(r))}for(var o=0,s=t.fours;o<s.length;o++){var r=s[o],h=this.getMainCardByPoint(r);if(e.push(h),r>n){var d=this.getMainCardByPoint(r);d.removeAt(3),e.push(d)}}if(t.kingBomb&&t.kingBomb.length>0){for(var l=new Array,u=0,c=t.kingBomb;u<c.length;u++){var r=c[u],p=this.getMainCardByPoint(r);l=l.concat(p)}e.push(l)}return e},e.prototype.threeOne=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=function(a){if(a>n){var r=i.getMainCardByPoint(a);if(t.singleLength>0){var o=i.getMainCardByPoint(t.singles[0]);e.push(r.concat(o))}if(t.doublesLength>0){var s=i.getMainCardByPoint(t.doubles[0]);e.push(r.concat([s[0]]))}if(t.threesLength>1){var h=i.getMainCardByPoint(t.threes.first(function(t){return t!=a}));e.push(r.concat([h[0]]))}}},i=this,r=0,o=t.threes;r<o.length;r++){var s=o[r];a(s)}for(var h=0,d=t.fours;h<d.length;h++){var s=d[h],l=this.getMainCardByPoint(s);e.push(l)}if(t.kingBomb&&t.kingBomb.length>0){for(var u=new Array,c=0,p=t.kingBomb;c<p.length;c++){var s=p[c],m=this.getMainCardByPoint(s);u=u.concat(m)}e.push(u)}return e},e.prototype.threeTwo=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=function(a){if(a>n){var r=i.getMainCardByPoint(a);if(t.doublesLength>0){var o=i.getMainCardByPoint(t.doubles[0]);e.push(r.concat(o))}if(t.threesLength>1){var s=i.getMainCardByPoint(t.threes.first(function(t){return t!=a}));e.push(r.concat([s[0],s[1]]))}if(t.foursLength>0){var h=i.getMainCardByPoint(t.fours[0]);e.push(r.concat([h[0],h[1]]))}}},i=this,r=0,o=t.threes;r<o.length;r++){var s=o[r];a(s)}for(var h=0,d=t.fours;h<d.length;h++){var s=d[h],l=this.getMainCardByPoint(s);e.push(l)}if(t.kingBomb&&t.kingBomb.length>0){for(var u=new Array,c=0,p=t.kingBomb;c<p.length;c++){var s=p[c],m=this.getMainCardByPoint(s);u=u.concat(m)}e.push(u)}return e},e.prototype.bomb=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=0,i=t.fours;a<i.length;a++){var r=i[a];if(r>n){var o=this.getMainCardByPoint(r);e.push(o)}}if(t.kingBomb&&t.kingBomb.length>0){for(var s=new Array,h=0,d=t.kingBomb;h<d.length;h++){var r=d[h],l=this.getMainCardByPoint(r);s=s.concat(l)}e.push(s)}return e},e.prototype.fourTwoSingle=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=0,i=t.fours;a<i.length;a++){var r=i[a];if(!(n>r)){var o=this.getMainCardByPoint(r);if(e.push(o),t.singleLength>1){var s=this.getMainCardByPoint(t.singles[0]),h=this.getMainCardByPoint(t.singles[1]);e.push(o.concat(s).concat(h))}else if(t.doublesLength>0){var d=this.getMainCardByPoint(t.doublesLength[0]);e.push(o.concat(d))}}}if(t.kingBomb&&t.kingBomb.length>0){for(var l=new Array,u=0,c=t.kingBomb;u<c.length;u++){var r=c[u],p=this.getMainCardByPoint(r);l=l.concat(p)}e.push(l)}return e},e.prototype.fourTwoDouble=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=0,i=t.fours;a<i.length;a++){var r=i[a];if(!(n>r)){var o=this.getMainCardByPoint(r);if(e.push(o),t.doublesLength>1){var s=this.getMainCardByPoint(t.doublesLength[0]),h=this.getMainCardByPoint(t.doublesLength[1]);e.push(o.concat(s).concat(h))}}}if(t.kingBomb&&t.kingBomb.length>0){for(var d=new Array,l=0,u=t.kingBomb;l<u.length;l++){var r=u[l],c=this.getMainCardByPoint(r);d=d.concat(c)}e.push(d)}return e},e.prototype.feiji=function(){var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=this.beforePlayCardValue.cardValue.length;if(9==a&&t.threesLength>2)for(var i=0;i<t.threesLength;i++){var r=t.threes[i],o=t.threes[i+1],s=t.threes[i+2];if(!(n>r)&&o&&r-o==-1&&s&&o-s==-1){var h=this.getMainCardByPoint(r),d=this.getMainCardByPoint(o),l=this.getMainCardByPoint(s);e.push(h.concat(d).concat(l))}}else if(6==a&&t.threesLength>1)for(var i=0;i<t.threesLength;i++){var r=t.threes[i],o=t.threes[i+1];if(!(n>r||o||r-o!=-1)){var h=this.getMainCardByPoint(r),d=this.getMainCardByPoint(o);e.push(h.concat(d))}}for(var u=0,c=t.fours;u<c.length;u++){var r=c[u],p=this.getMainCardByPoint(r);e.push(p)}if(t.kingBomb&&t.kingBomb.length>0){for(var m=new Array,g=0,C=t.kingBomb;g<C.length;g++){var r=C[g],f=this.getMainCardByPoint(r);m=m.concat(f)}e.push(m)}return e},e.prototype.feijiTwoSingle=function(){var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=this.beforePlayCardValue.cardValue.length;if(12==a&&t.threesLength>2)for(var i=this.operateHandCard,r=function(a){var r=t.threes[a],s=t.threes[a+1],h=t.threes[a+2];if(n>r||!s||r-s!=-1||!h||s-h!=-1)return"continue";var d=o.getMainCardByPoint(r),l=o.getMainCardByPoint(s),u=o.getMainCardByPoint(h);if(t.singleLength>2){var c=o.getMainCardByPoint(t.singles[0]),p=o.getMainCardByPoint(t.singles[1]),m=o.getMainCardByPoint(t.singles[2]);e.push(d.concat(l).concat(u).concat(c).concat(p).concat(m))}else{var g=i.filter(function(t){return d.seek(function(e){return e!=t})&&l.seek(function(e){return e!=t})&&u.seek(function(e){return e!=t})});g.length>3&&e.push(d.concat(l).concat(u).concat([g[0],g[1],g[2]]))}},o=this,s=0;s<t.threesLength;s++)r(s);else if(8==a&&t.threesLength>1)for(var s=0;s<t.threesLength;s++){var h=t.threes[s],d=t.threes[s+1];if(!(n>h)&&d&&h-d==-1){var l=this.getMainCardByPoint(h),u=this.getMainCardByPoint(d);if(t.singleLength>1){var c=this.getMainCardByPoint(t.singles[0]),p=this.getMainCardByPoint(t.singles[1]);e.push(l.concat(u).concat(c).concat(p))}else if(t.doublesLength>0){var m=this.getMainCardByPoint(t.doubles[0]);e.push(l.concat(u).concat(m))}}}for(var g=0,C=t.fours;g<C.length;g++){var h=C[g],f=this.getMainCardByPoint(h);e.push(f)}if(t.kingBomb&&t.kingBomb.length>0){for(var y=new Array,v=0,b=t.kingBomb;v<b.length;v++){var h=b[v],_=this.getMainCardByPoint(h);y=y.concat(_)}e.push(y)}return e},e.prototype.feijiTwoDouble=function(){var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue.value,a=this.beforePlayCardValue.cardValue.length;if(15==a&&t.threesLength>2)for(var i=function(a){var i=t.threes[a],o=t.threes[a+1],s=t.threes[a+2];if(n>i||!o||i-o!=-1||!s||o-s!=-1)return"continue";var h=r.getMainCardByPoint(i),d=r.getMainCardByPoint(o),l=r.getMainCardByPoint(s);if(t.doublesLength>2){var u=r.getMainCardByPoint(t.doubles[0]),c=r.getMainCardByPoint(t.doubles[1]),p=r.getMainCardByPoint(t.doubles[1]);e.push(h.concat(d).concat(l).concat(u).concat(c).concat(p))}else if(t.doublesLength+t.threesLength>5){for(var m=[],g=0,C=t.doubles;g<C.length;g++){var f=C[g],y=r.getMainCardByPoint(f[0]);m.concat(y)}for(var v=t.threes.filter(function(t){return t!=i&&t!=o&&t!=s}),b=0,_=v;b<_.length;b++){var T=_[b],L=r.getMainCardByPoint(T[0]);m.concat([L[0],L[1]])}m.splice(0,6),e.push(h.concat(d).concat(l).concat(m))}},r=this,o=0;o<t.threesLength;o++)i(o);else if(11==a&&t.threesLength>1)for(var o=0;o<t.threesLength;o++){var s=t.threes[o],h=t.threes[o+1];if(!(n>s)&&h&&s-h==-1){var d=this.getMainCardByPoint(s),l=this.getMainCardByPoint(h);if(t.doublesLength>1){var u=this.getMainCardByPoint(t.doubles[0]),c=this.getMainCardByPoint(t.doubles[1]);e.push(d.concat(l).concat(u).concat(c))}}}for(var p=0,m=t.fours;p<m.length;p++){var s=m[p],g=this.getMainCardByPoint(s);e.push(g)}if(t.kingBomb&&t.kingBomb.length>0){for(var C=new Array,f=0,y=t.kingBomb;f<y.length;f++){var s=y[f],v=this.getMainCardByPoint(s);C=C.concat(v)}e.push(C)}return e},e.prototype.lian=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue,a=0,i=t.maxLian;a<i.length;a++){var r=i[a],o=r.length-n.length;if(!(r[r.length-1]-n.value<=0||0>o)){for(var s=0;o>=s;s++){var h=r.length-1-s;if(!(r[h]<=n.value)){for(var d=new Array,l=h;l>h-n.length;l--){var u=this.getMainCardByPoint(r[l]);d.push(u[0])}e.push(d)}}e.sort(function(t,e){return t[0]-e[0]})}}for(var c=0,p=t.fours;c<p.length;c++){var r=p[c],m=this.getMainCardByPoint(r);e.push(m)}if(t.kingBomb&&t.kingBomb.length>0){for(var g=new Array,C=0,f=t.kingBomb;C<f.length;C++){var r=f[C],y=this.getMainCardByPoint(r);g=g.concat(y)}e.push(g)}return e},e.prototype.doubleLian=function(){for(var t=this.handCardAnalysis,e=new Array,n=this.beforePlayCardValue.cardValue,a=0,i=t.maxDoubleLian;a<i.length;a++){var r=i[a],o=r.length-n.length;if(!(r[r.length-1]-n.value<=0||0>o)){for(var s=0;o>=s;s++){var h=r.length-1-s;if(!(r[h]<=n.value)){for(var d=new Array,l=h;l>h-n.length;l--){var u=this.getMainCardByPoint(r[l]);d.push(u[0]),d.push(u[1])}e.push(d)}}e.sort(function(t,e){return t[0]-e[0]})}}for(var c=0,p=t.fours;c<p.length;c++){var r=p[c],m=this.getMainCardByPoint(r);e.push(m)}if(t.kingBomb&&t.kingBomb.length>0){for(var g=new Array,C=0,f=t.kingBomb;C<f.length;C++){var r=f[C],y=this.getMainCardByPoint(r);g=g.concat(y)}e.push(g)}return e},e}();e.SmallKingPoint=20,e.LargeKingPoint=21,t.DDZAI=e,__reflect(e.prototype,"game.DDZAI");var n=function(){function n(t){this.m_singles=new Array,this.m_dobles=new Array,this.m_threes=new Array,this.m_fours=new Array,this.m_kingBomb=new Array,this.m_maxLian=new Array,this.m_maxDoubleLian=new Array,this.cardList=t,this.m_points=e.getCardPoints(t),this.m_points&&this.m_points.sort(function(t,e){return t-e}),this.initCardValue(),this.line(),this.doubleLine(),this.checkKingBomb()}return Object.defineProperty(n.prototype,"points",{get:function(){return this.m_points},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"singles",{get:function(){return this.m_singles},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"singleLength",{get:function(){return this.m_singles.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"doubles",{get:function(){return this.m_dobles},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"doublesLength",{get:function(){return this.m_dobles.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"threes",{get:function(){return this.m_threes},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"threesLength",{get:function(){return this.m_threes.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fours",{get:function(){return this.m_fours},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"foursLength",{get:function(){return this.m_fours.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kingBomb",{get:function(){return this.m_kingBomb},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxLian",{get:function(){return this.m_maxLian},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxDoubleLian",{get:function(){return this.m_maxDoubleLian},enumerable:!0,configurable:!0}),n.prototype.initCardValue=function(){for(var t=this.points,e=0;e<t.length;){for(var n=0,a=e;a<t.length;a++)t[e]==t[a]&&n++;1==n?this.m_singles.push(t[e]):2==n?this.m_dobles.push(t[e]):3==n?this.m_threes.push(t[e]):4==n&&this.m_fours.push(t[e]),e+=n}},n.prototype.line=function(){var t=this.points,e=t.distinct();if(e&&!(e.length<5)){var n=new Array,a=0;n[a]=new Array;for(var i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r-o==-1?n[a].push(r):(n[a].length>3&&n[a].push(r),n[a].length<5?n[a].clear():(a++,n[a]=new Array))}n[a]&&n[a].length>3&&e[e.length-2]-e[e.length-1]==-1?n[a].push(e[e.length-1]):n.removeAt(a),this.m_maxLian=n}},n.prototype.doubleLine=function(){var t=this.doubles,e=t.distinct();if(e&&!(e.length<3)){var n=new Array,a=0;n[a]=new Array;for(var i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r-o==-1?n[a].push(r):(n[a].length>1&&n[a].push(r),n[a].length<3?n[a].clear():(a++,n[a]=new Array))}n[a]&&n[a].length>1&&e[e.length-2]-e[e.length-1]==-1?n[a].push(e[e.length-1]):n.removeAt(a),this.m_maxDoubleLian=n}},n.prototype.checkKingBomb=function(){for(var t=!1,n=!1,a=0,i=this.points;a<i.length;a++){var r=i[a];r==e.SmallKingPoint&&(t=!0),r==e.LargeKingPoint&&(n=!0)}t&&n&&(this.m_kingBomb.push(e.SmallKingPoint),this.m_kingBomb.push(e.LargeKingPoint))},n.prototype.checkContinuous=function(){if(0!=this.foursLength||0!=this.threesLength||0!=this.doublesLength||this.singleLength<5)return!1;for(var t,e=0,n=this.singles;e<n.length;e++){var a=n[e];if(t-a!=-1)return!1;t=a}return!0},n.prototype.checkDoubleContinuous=function(){if(0!=this.foursLength||0!=this.threesLength||this.doublesLength<3||0!=this.singleLength)return!1;for(var t,e=0,n=this.doubles;e<n.length;e++){var a=n[e];if(t-a!=-1)return!1;t=a}return!0},Object.defineProperty(n.prototype,"cardType",{get:function(){return this.cardValue.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cardValue",{get:function(){return null==this.m_cardValue&&(this.m_cardValue=this.getCardValue()),this.m_cardValue},enumerable:!0,configurable:!0}),n.prototype.getCardValue=function(){var n=new a,i=this.cardList;if(null==i||0==i.length)return n.type=t.CardType.Error_Card,n;var r=i.length;if(1==r)return n.type=t.CardType.Single_Card,n.value=this.singles[0],n;if(2==r){if(2==this.singleLength&&this.singles[0]==e.SmallKingPoint&&this.singles[1]==e.LargeKingPoint)return n.type=t.CardType.KingBomb_Card,n.value=e.LargeKingPoint,n;if(1==this.doublesLength)return n.type=t.CardType.Double_Card,n.value=this.doubles[0],n}if(3==r&&1==this.threesLength)return n.type=t.CardType.Three_Card,n.value=this.threes[0],n;if(4==r){if(1==this.foursLength)return n.type=t.CardType.Bomb_Card,n.value=this.fours[0],n;if(1==this.threesLength)return n.type=t.CardType.ThreeOne_Card,n.value=this.threes[0],n}if(5==r&&1==this.threesLength&&1==this.doublesLength)return n.type=t.CardType.ThreeTwo_Card,n.value=this.threes[0],n;if(6==r){if(1==this.foursLength&&(2==this.singleLength||1==this.doublesLength))return n.type=t.CardType.Four_TwoSingle_Card,n.value=this.fours[0],n;if(2==this.threesLength&&this.threes[0]-this.threes[1]==-1)return n.type=t.CardType.Feiji_Card,n.length=r,n.value=this.threes[1],n}if(8==r){if(1==this.foursLength&&2==this.doublesLength)return n.type=t.CardType.Four_TwoSingle_Card,n.value=this.fours[0],n;if(2==this.threesLength&&this.threes[0]-this.threes[1]==-1&&(2==this.singleLength||1==this.doublesLength))return n.type=t.CardType.Feiji_TwoSingle_Card,n.length=r,n.value=this.threes[1],n}return 10==r&&2==this.threesLength&&this.threes[0]-this.threes[1]==-1&&2==this.doublesLength?(n.type=t.CardType.Feiji_TwoDouble_Card,n.length=r,n.value=this.threes[1],n):9==r&&3==this.threesLength&&this.threes[0]-this.threes[1]==-1&&this.threes[1]-this.threes[2]==-1?(n.type=t.CardType.Feiji_Card,n.length=r,n.value=this.threes[2],n):12==r&&3==this.threesLength&&this.threes[0]-this.threes[1]==-1&&this.threes[1]-this.threes[2]==-1?(n.type=t.CardType.Feiji_TwoSingle_Card,n.length=r,n.value=this.threes[2],n):15==r&&3==this.threesLength&&this.threes[0]-this.threes[1]==-1&&this.threes[1]-this.threes[2]==-1?(n.type=t.CardType.Feiji_TwoDouble_Card,n.length=r,n.value=this.threes[2],n):this.threesLength>3?(n.type=t.CardType.Feiji_Card,n.length=r,n.value=this.threes[2],n):this.maxLian&&this.maxLian.length>0&&this.maxLian[0].length>4&&this.maxLian[0].length==this.cardList.length?(n.type=t.CardType.Lian_Card,n.length=this.maxLian[0].length,n.value=this.maxLian[0][this.maxLian[0].length-1],n):this.maxDoubleLian&&this.maxDoubleLian.length>0&&this.maxDoubleLian[0].length>2&&2*this.maxDoubleLian[0].length==this.cardList.length?(n.type=t.CardType.Double_Lian_Card,n.length=this.maxDoubleLian[0].length,n.value=this.maxDoubleLian[0][this.maxDoubleLian[0].length-1],n):(n.type=t.CardType.Error_Card,n)},n}();t.CardAnalysis=n,__reflect(n.prototype,"game.CardAnalysis");var a=function(){function t(){}return t}();t.CardValue=a,__reflect(a.prototype,"game.CardValue")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new e),this.m_Instance},enumerable:!0,configurable:!0}),e.clearInstance=function(){egret.clearTimeout(this.timeId),this.m_Instance=null},e.prototype.initCardList=function(){this.CardList=[];for(var t=3;15>t;t++)for(var e=100*t,n=1;5>n;n++){var a=e+10*n;a+=1,this.CardList.push(a)}this.CardList.push(1611),this.CardList.push(1621),this.CardList.push(1631),this.CardList.push(1641),this.CardList.push(2051),this.CardList.push(2151)},e.prototype.initUser=function(){var t="",e=MJLobby.MJLobbyData.getInstance().myBaseInfo;e&&(t=e.headUrl),uniLib.NetMgr.UID=111111;var n={roomData:{seatList:[{handCardList:{},seatId:1,isReady:!1,role:{diamond:100,seatId:1,gender:"男",onlineState:0,name:"1401304",headurl:t,uid:uniLib.NetMgr.UID,points:0,ip:"36.47.160.36"},outCardList:{}},{handCardList:{},seatId:2,isReady:!0,role:{diamond:100,seatId:2,gender:"男",onlineState:0,name:"电脑",headurl:"http://img.bwgame.com.cn/img/230.jpg",uid:1401306,points:0,ip:"36.47.160.35"},outCardList:{}},{handCardList:{},seatId:3,isReady:!0,role:{diamond:100,seatId:3,gender:"男",onlineState:0,name:"电脑",headurl:"http://img.bwgame.com.cn/img/231.jpg",uid:1401308,points:0,ip:"36.47.160.35"},outCardList:{}}],roomId:"练习场",props:{}}};Cmd.OnRoomDataUpdateCmd_S(n)},e.prototype.deal=function(){for(var e=0,n=t.RoomData.Instance.seatList;e<n.length;e++){var a=n[e];a.clearHandCard()}t.RoomData.Instance.landlordUid=null,t.RoomData.Instance.startGame=!0;for(var i=this.CardList,r=function(t){var e=i.randomItems(17);e.sort(function(t,e){return e-t});for(var n=0,a=e;n<a.length;n++){var r=a[n];t.addHandCard(r)}i=i.filter(function(t){return!e.seek(function(e){return e==t})})},o=0,s=t.RoomData.Instance.seatList;o<s.length;o++){var a=s[o];r(a)}this.threeCard=i,GX.PokerEvent.Instance.dealCardAnimation.call(),egret.setTimeout(this.landlordRob,this,2550)},e.prototype.landlordRob=function(){for(var e=0,n=t.RoomData.Instance.seatList;e<n.length;e++){var a=n[e];if(a.user.uid!=uniLib.NetMgr.UID){var i=new Cmd.LandlordRobCmd_CS;i.uid=a.user.uid,i.yesOrNo=!1,Cmd.OnLandlordRobCmd_CS(i)}}var r=new t.RobLordOperateData;r.uid=uniLib.NetMgr.UID,r.endTime=Date.now()+3e4,t.RoomData.Instance.robLordOperate=r},e.prototype.roundResultCmd=function(e){var n=new Cmd.RoundResultCmd_S;n.resultList=[];for(var a=0,i=t.RoomData.Instance.seatList;a<i.length;a++){var r=i[a],o=new Cmd.GameObjectData,s=new Cmd.UserBriefInfo;s.headurl=r.user.headUrl,s.name=r.user.nickName,s.uid=r.user.uid,s.point=0,o.user=s,o.profit=0,o.multiple=0,n.haveNextRound=!0,n.resultList.push(o)}n.landlord=t.RoomData.Instance.landlordUid,n.winnerList=[e],Cmd.OnRoundResultCmd_S(n)},e.prototype.tcpSend=function(e){var n=this,a=uniLib.NetMgr.UID;if("Cmd.DissolveRoomRequestCmd_C"==e.GetType())Cmd.OnLeaveRoomCmd_CS(e);else if("Cmd.LeaveRoomCmd_CS"==e.GetType())Cmd.OnLeaveRoomCmd_CS(e);else if("Cmd.ReadyUpdateRoomCmd_CS"==e.GetType()){var i=e;i.uid=a,i.yesOrNo=!0,Cmd.OnReadyUpdateRoomCmd_CS(i);for(var r=0,o=t.RoomData.Instance.seatList;r<o.length;r++){var s=o[r];s.isReady=!0}this.deal()}else if("Cmd.PlayCardCmd_CS"==e.GetType()){var i=e;i.uid=a;var h=new t.CardAnalysis(i.cardList);if(i.cardList&&h.cardType==t.CardType.Error_Card)return;Cmd.OnPlayCardCmd_CS(i);var d=this.getCardTypeTime(i.cardList);if(0==t.PokerFunction.MainSeat.handCards.length)return void egret.setTimeout(function(){return n.roundResultCmd(a)},this,d);egret.setTimeout(this.playerAI,this,d)}else if("Cmd.LandlordRobCmd_CS"==e.GetType()){var i=e;if(i.yesOrNo){var l=new Cmd.LandlordRobCmd_CS;l.uid=a,l.yesOrNo=!0,Cmd.OnLandlordRobCmd_CS(l);var u=new Cmd.LandlordUpdateCmd_S;u.uid=a,u.threeCard=this.threeCard,Cmd.OnLandlordUpdateCmd_S(u);var c=new Cmd.NewOperateSeatCmd_S;c.seatId=1,c.endTime=Date.now()+3e4,egret.setTimeout(function(){return Cmd.OnNewOperateSeatCmd_S(c)},this,1e3)}else this.deal()}},e.prototype.playerAI=function(){var n=this,a=new Cmd.NewOperateSeatCmd_S;a.seatId=2,a.endTime=Date.now()+3e4,Cmd.OnNewOperateSeatCmd_S(a);var i=(uniLib.NetMgr.UID,t.RoomData.Instance.seatList,t.DDZAI.Instance.getCardOperableList(2)),r=null==i?null:i[0];e.timeId=egret.setTimeout(function(){var e=new Cmd.PlayCardCmd_CS;t.PokerFunction.GetUserInfoBySeatId(2)&&(e.uid=t.PokerFunction.GetUserInfoBySeatId(2).uid),t.DDZAI.Instance.isPlay?e.cardList=r:e.cardList=[],Cmd.OnPlayCardCmd_CS(e);var a=n.getCardTypeTime(e.cardList);return t.PokerFunction.GetSeatDataBySeatId(2)&&0==t.PokerFunction.GetSeatDataBySeatId(2).handCards.length?void egret.setTimeout(function(){return n.roundResultCmd(e.uid)},n,a):void egret.setTimeout(function(){var e=new Cmd.NewOperateSeatCmd_S;e.seatId=3,e.endTime=Date.now()+3e4,Cmd.OnNewOperateSeatCmd_S(e),i=t.DDZAI.Instance.getCardOperableList(3),r=null==i?null:i[0],a+=n.getCardTypeTime(r),egret.setTimeout(function(){var e=new Cmd.PlayCardCmd_CS;if(t.PokerFunction.GetUserInfoBySeatId(3)&&(e.uid=t.PokerFunction.GetUserInfoBySeatId(3).uid),t.DDZAI.Instance.isPlay?e.cardList=r:e.cardList=[],Cmd.OnPlayCardCmd_CS(e),t.PokerFunction.GetSeatDataBySeatId(3)&&0==t.PokerFunction.GetSeatDataBySeatId(3).handCards.length)return void egret.setTimeout(function(){return n.roundResultCmd(e.uid)},n,a);var i=new Cmd.NewOperateSeatCmd_S;i.seatId=1,i.endTime=Date.now()+3e4,egret.setTimeout(function(){return Cmd.OnNewOperateSeatCmd_S(i)},n,a)},n,2e3)},n,a)},this,2e3)},e.prototype.getCardTypeTime=function(e){var n=new t.CardAnalysis(e).cardType;switch(n){case t.CardType.Error_Card:return 0;case t.CardType.Single_Card:case t.CardType.Double_Card:case t.CardType.Lian_Card:return 500;default:return 1500}},e}();t.DDZStandAlone=e,__reflect(e.prototype,"game.DDZStandAlone")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new e),this.m_Instance},enumerable:!0,configurable:!0}),e.prototype.warningEffect=function(){if(this.warnArmature)return this.warnArmature.display;
var t=uniLib.DisplayUtils.createDragonBonesDisplay("doudizhu_jingbao_effect_ske_json","doudizhu_jingbao_effect_tex_json","doudizhu_jingbao_effect_tex_png","MovieClip");return dragonBones.WorldClock.clock.add(t),this.warnArmature=t,t.display},e.prototype.stopWarning=function(){null!=this.warnArmature&&this.warnArmature.animation.stop()},e.prototype.playWarning=function(){null!=this.warnArmature&&this.warnArmature.animation.play("jingbaoqi")},e.prototype.cardTypeEffect=function(){if(this.cardTypeArmature)return this.cardTypeArmature.display;var t=uniLib.DisplayUtils.createDragonBonesDisplay("doudizhu_paixing_effect_ske_json","doudizhu_paixing_effect_tex_json","doudizhu_paixing_effect_tex_png","MovieClip");return dragonBones.WorldClock.clock.add(t),this.cardTypeArmature=t,this.cardTypeArmature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onAnimationComplete,this),t.display},e.prototype.stopCardType=function(){null!=this.cardTypeArmature&&this.cardTypeArmature.animation.stop()},e.prototype.playCardType=function(e,n){if(null!=this.cardTypeArmature){var a=this.getEffectByCardType(e,n);if(null==a)return void this.onAnimationComplete();e==Cmd.CardSetType.CardSetType_TexasFullHouse&&ShakeTool.Instance.shakeObj(t.GameInfo.uiLayer,.5,60,5),this.cardTypeArmature.animation.play(a,1)}},e.prototype.playChuntian=function(){this.cardTypeArmature.animation.play("chuntian",1)},e.prototype.playFanChun=function(){this.cardTypeArmature.animation.play("fanchun",1)},e.prototype.onAnimationComplete=function(){var t=this.cardTypeArmature.display;t.parent&&t.parent.removeChild(t)},e.prototype.callCardAnimation=function(e,n,a){t.OperateLayer.Instance.sCard;if(null!=e&&null!=n&&null!=a){var i=t.GameConstant.GetClientNoByUid(a),r=t.GameConstant.SeatPosArr[i];if(null!=r){var o=t.PokerFunction.MainSeat.handCards.first(function(t){return t==n});a==uniLib.NetMgr.UID&&null!=o?egret.Tween.get(e).wait(800).to({scaleX:1.5,scaleY:1.5,y:t.GameConstant.HandCardY},800,egret.Ease.sineOut).call(function(){t.OperateLayer.Instance.removeCallCard()}):egret.Tween.get(e).wait(800).to({scaleX:0,scaleY:0,x:r.x,y:r.y},800,egret.Ease.sineOut).call(function(){t.OperateLayer.Instance.removeCallCard()})}}},e.prototype.getEffectByCardType=function(t,e){if(t){var n;switch(t){case 0:case Cmd.CardSetType.CardSetType_TexasHighCard:case Cmd.CardSetType.CardSetType_TexasOnePair:break;case Cmd.CardSetType.CardSetType_TexasTwoPairs:n=this.getZhang(e);break;case Cmd.CardSetType.CardSetType_TexasFlush:case Cmd.CardSetType.CardSetType_TexasThreeOfKind:case Cmd.CardSetType.CardSetType_TexasStraight:n="long";break;case Cmd.CardSetType.CardSetType_TexasFullHouse:case Cmd.CardSetType.CardSetType_TexasFourOfKind:n="zhadan";break;case Cmd.CardSetType.CardSetType_TexasFourOfKind:n="hun"}return n}},e.prototype.getZhang=function(t){if(t&&t instanceof Array&&!(t.length<3)){var e=t.length,n="";switch(e){case 3:n="sanzhang";break;case 4:n="sizhang";break;case 5:n="wuzhang";break;case 6:n="liuzhang";break;case 7:n="qizhang";break;case 8:n="bazhang";break;case 9:n="jiuzhang";break;case 10:n="shizhang";break;case 11:n="shiyizhang";break;case 12:n="shierzhang";break;case 13:n="shisanzhang";break;case 14:n="shisizhang";break;case 15:n="shiwuzhang";break;case 16:n="shiliuzhang";break;case 17:n="shiqizhang";break;case 18:n="shibazhang";break;case 19:n="shijiuzhang";break;case 20:n="ershizhang"}return n}},e.prototype.dealCardAnimation=function(){return},e.prototype.cardAnimation=function(){for(var e=this,n=t.CardLayer.Instance.handCards,a=n.length,i=t.CardLayer.Instance.handCardX,r=0;a>r;r++){var o=n[r];egret.Tween.removeTweens(o),egret.Tween.get(o).to({x:i+t.GameConstant.CardGap*r},t.GameConstant.DealCardTime),a==t.GameConstant.HandCardSum&&r==a-1&&egret.Tween.get(o).call(function(){return e.dealCardEnd()})}},e.prototype.dealCardEnd=function(){t.CardLayer.Instance.updataHandCardPosition()},e.prototype.dealThreeCardAnimation=function(){for(var e=3*t.GameConstant.BluffCardGap-(t.GameConstant.BluffCardGap-t.GameConstant.BluffCardWidth),n=(uniLib.Global.screenWidth-e)/2+t.GameConstant.BluffCardWidth/2,a=t.GameView.Instance.threeCards,i=function(e){var i=a[e];i.x=0,i.parent&&t.GameView.Instance.removeChild(i),egret.Tween.get(i).wait(e*t.GameConstant.DealCardTime).call(function(){return t.GameView.Instance.addChild(i)}).to({x:n+t.GameConstant.BluffCardGap*e},t.GameConstant.DealCardTime)},r=0;r<a.length;r++)i(r)},e.prototype.pointNotic=function(e,n){var a=t.GameConstant.GetHeadPointByUid(e),i=t.GameConstant.GetClientNoByUid(e);if(null!=a){var r=a.x+t.GameConstant.HeadWidth/2,o=a.y+t.GameConstant.HeadHeight/2,s=new eui.Group,h=new eui.BitmapLabel,d=new eui.Image("user_bg2");s.addChild(d),s.addChild(h),n>0?(h.font="game_win_fnt",h.text="+"+n):(h.font="game_lose_fnt",h.text=""+n),h.horizontalCenter=h.verticalCenter=0,t.GameInfo.topLayer.addChild(s),s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.x=r,s.y=o;var l=function(){this.parent&&this.parent.removeChild(this)},u=o-70;t.GameView.Instance.maxNum>6&&i>4&&9>i&&(u=o),2==i&&(u+=20),egret.Tween.get(s).to({y:u},1200).wait(800).to({alpha:0},100).call(l)}},e.prototype.brightThreeCardEffect=function(){for(var e=t.GameView.Instance.threeCards,n=t.RoomData.Instance.threeCard,a=function(a){var r=n[a],o=e[a];o.texture=RES.getRes("BackCard"),egret.Tween.removeTweens(o),egret.Tween.get(o).wait(a*t.GameConstant.BrightThreeCardBack).to({scaleX:0},t.GameConstant.BrightThreeCardBack).call(function(){return o.texture=t.GameConstant.GetPokerTextureByCardId(r)}).to({scaleX:1},t.GameConstant.BrightThreeCardPositive),a==e.length-1&&egret.Tween.get(o).call(i.threeCardGoHandEffect,i)},i=this,r=0;r<e.length;r++)a(r)},e.prototype.threeCardGoHandEffect=function(){var e=t.RoomData.Instance.threeCard,n=t.CardLayer.Instance.handCards.filter(function(t){return e.seek(function(e){return e==t.cardId})});if(n)for(var a=0,i=n;a<i.length;a++){var r=i[a];r.y=t.GameConstant.HandCardY-t.GameConstant.CardHeight,egret.Tween.get(r).wait(200).to({y:t.GameConstant.HandCardY},300,egret.Ease.circOut)}},e.prototype.multipleEffect=function(e){var n=this,a="x"+(e%1==0?e:Math.ceil(e));null==this.label&&(this.label=new eui.BitmapLabel(a),this.label.font="glodBrightFont_fnt",this.label.y=t.GameConstant.OperationY-200,t.GameView.Instance.addChild(this.label),this.label.x=(uniLib.Global.screenWidth-this.label.width)/2,uniLib.SetUniEventTimeout(t.GameView.Instance,function(){t.GameView.Instance.removeChild(n.label),n.label=null},1e3,1,this)),null!=this.label&&(this.label.text=a),this.lastValue=e},e.prototype.flyCardMeEffect=function(e,n){var a=t.GameConstant.GetClientNoByUid(n),i=new egret.Point,r=t.TriSelectCard.Instance.gongList,o=r.first(function(t){return t.cardData==e});if(o){i.x=o.localToGlobal().x,i.y=o.localToGlobal().y,o.parent&&(o.parent.removeChild(o),t.GameView.Instance.addChild(o));var s=o;s.x=i.x,s.y=i.y;var h=new egret.Point,d=t.GameConstant.SeatPosArr[a];h.x=d.x+27,h.y=d.y+18,t.TriSelectCard.Instance.removeGongAndRefresh(s),t.TriSelectCard.Instance.setBtnsVisible(!1),egret.Tween.removeTweens(s),egret.Tween.get(s).to({x:h.x,y:h.y,scaleX:0,scaleY:0},500).call(function(){s&&s.parent&&(egret.Tween.removeTweens(s),s.parent.removeChild(s))})}},e.prototype.changeEffect=function(){var t,e=RES.getRes("change_json"),n=RES.getRes("change_png"),a=new egret.MovieClipDataFactory(e,n);return t=new egret.MovieClip(a.generateMovieClipData("change")),t.frameRate=12,t.gotoAndPlay(1,1),t},e.prototype.farmerWinEffect=function(){var t,e=RES.getRes("farmer_laugh_json"),n=RES.getRes("farmer_laugh_png"),a=new egret.MovieClipDataFactory(e,n);return t=new egret.MovieClip(a.generateMovieClipData("farmer_laugh")),t.frameRate=6,t.gotoAndPlay(1,-1),t},e.prototype.farmerLoseEffect=function(){var t,e=RES.getRes("farmer_cry_json"),n=RES.getRes("farmer_cry_png"),a=new egret.MovieClipDataFactory(e,n);return t=new egret.MovieClip(a.generateMovieClipData("farmer_cry")),t.frameRate=6,t.gotoAndPlay(1,-1),t},e.prototype.gameLoseEffect=function(){var t,e=RES.getRes("gameLose_json"),n=RES.getRes("gameLose_png"),a=new egret.MovieClipDataFactory(e,n);return t=new egret.MovieClip(a.generateMovieClipData("lose")),t.frameRate=24,t.gotoAndPlay(1,1),t},e.prototype.winLightEffect=function(){var t,e=RES.getRes("winLight_DDZ_json"),n=RES.getRes("winLight_DDZ_png"),a=new egret.MovieClipDataFactory(e,n);return t=new egret.MovieClip(a.generateMovieClipData("winLight")),t.frameRate=24,t.gotoAndPlay(0,-1),t},e.prototype.giftEffect=function(e,n,a){var i=new t.GiftAnItem;i.giftId=e;var r=t.GameConstant.SeatPosArr[t.GameConstant.GetClientNoByUid(n)],o=t.GameConstant.SeatPosArr[t.GameConstant.GetClientNoByUid(a)];r&&o&&(t.GameConstant.isShowTeam&&2==t.GameConstant.GetClientNoByUid(n)&&(r.x=395,r.y=-5),i.x=o.x+t.GameConstant.HeadWidth/2,i.y=o.y+t.GameConstant.HeadHeight/2,t.GameInfo.topLayer.addChild(i),egret.Tween.get(i).to({x:r.x+t.GameConstant.HeadWidth/2,y:(r.y+t.GameConstant.HeadHeight/2)*uniLib.ScreenUtils.scaleFactor},400,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(i),i.play()}))},e}();t.EffectCreate=e,__reflect(e.prototype,"game.EffectCreate")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"_SeatPosArr",{get:function(){return[new egret.Point(20,607),new egret.Point(uniLib.Global.screenWidth-132,180),new egret.Point(uniLib.Global.screenWidth/2-50,10),new egret.Point(20,180)]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"_ReadyPos",{get:function(){return[new egret.Point(uniLib.Global.screenWidth/2-40,430),new egret.Point(uniLib.Global.screenWidth-360,217),new egret.Point(uniLib.Global.screenWidth/2-145,70),new egret.Point(270,217)]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"_SixSeatPosArr",{get:function(){return[new egret.Point(20,607),new egret.Point(uniLib.Global.screenWidth-125,395),new egret.Point(uniLib.Global.screenWidth-125,200),new egret.Point(uniLib.Global.screenWidth/2+160,15),new egret.Point(uniLib.Global.screenWidth/2-277,15),new egret.Point(13,250)]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"_SixReadyPos",{get:function(){return[new egret.Point(uniLib.Global.screenWidth/2-40,430),new egret.Point(uniLib.Global.screenWidth-240,400),new egret.Point(uniLib.Global.screenWidth-240,185),new egret.Point(uniLib.Global.screenWidth/2+72,50),new egret.Point(uniLib.Global.screenWidth/2-160,50),new egret.Point(158,272)]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"keycardPos",{get:function(){return[new egret.Point(80,550),new egret.Point(uniLib.Global.screenWidth-130,100),new egret.Point(uniLib.Global.screenWidth/2-120,8),new egret.Point(150,217)]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"_TimePos",{get:function(){return[new egret.Point(0,0),new egret.Point(uniLib.Global.screenWidth-260,405),new egret.Point(uniLib.Global.screenWidth-260,210),new egret.Point(uniLib.Global.screenWidth/2+330,80),new egret.Point(uniLib.Global.screenWidth/2-110,80),new egret.Point(190,260)]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SeatPosArr",{get:function(){return 6==t.RoomData.Instance.maxuserNbr?e._SixSeatPosArr:e._SeatPosArr},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ReadyPos",{get:function(){return 6==t.RoomData.Instance.maxuserNbr?e._SixReadyPos:e._ReadyPos},enumerable:!0,configurable:!0}),Object.defineProperty(e,"YouPosArr",{get:function(){return 6==t.RoomData.Instance.maxuserNbr?e._SixyouPos:e._FouryouPos},enumerable:!0,configurable:!0}),e.GetShowTypeByClient=function(e){var n=0;return 6==t.RoomData.Instance.maxuserNbr?1==e||2==e?n=1:3==e&&(n=2):1==e?n=1:2==e&&(n=2),n},e.GetWidthForCardNumber=function(t){return e.PlayCardWidth+(t-1)*e.PlayCardGap_new},Object.defineProperty(e,"startX",{get:function(){return uniLib.Global.screenWidth/2-630},enumerable:!0,configurable:!0}),e.GetClientNoBySeatId=function(e){var n=t.PokerFunction.MainSeatId,a=t.RoomData.Instance.maxuserNbr;if(t.GameConstant.isFourPeople){if(null==n)return e-1;var i=e-n;return i>=0?i:i+4}if(null==n||!a)return e-1;var i=(e-n+a)%a;return i},e.GetClientNoByUid=function(e){var n=t.SeatLayer.Instance.seatSprites.first(function(t){return t.uid==e});return null==n?null:n.clientNo},e.GetSeatSpriteByUid=function(e){return t.SeatLayer.Instance.seatSprites.first(function(t){return t.uid==e})},e.GetSeatSpriteBySeatId=function(e){return t.SeatLayer.Instance.seatSprites.first(function(t){return t.seatData.seatId==e})},e.GetHeadPointByUid=function(e){var n=t.SeatLayer.Instance.seatSprites.first(function(t){return t.uid==e});if(null!=n){var a=n.headPoint;if(a)return{x:n.x+a.x,y:n.y+a.y}}},e.GetPokerTextureByCardId=function(t){var e="";return e=table.TablePokerCard.resNormal(t),RES.getRes(e)},e.setTeamData=function(){e.teamArr=[0,2,4]},e.getTeamType=function(t){return-1!=e.teamArr.indexOf(t)?1:0},e}();e._FouryouPos=[new egret.Point(10,598),new egret.Point(1139,168),new egret.Point(578,0),new egret.Point(10,172)],e._SixyouPos=[new egret.Point(10,598),new egret.Point(1145,390),new egret.Point(1145,195),new egret.Point(790,7),new egret.Point(350,7),new egret.Point(-5,240)],e.HeadWidth=114,e.HeadHeight=114,e.HandCardY=577,e.HandCardSelectY=530,e.OperationY=370,e.PlayCardMainY=340,e.CardGap=35,e.CardWidth=90,e.CardHeight=97,e.twoCardWidth=124*.9,e.twoCardHeight=173*.9,e.PlayCardWidth=53*1.2,e.PlayCardHeight=69.6,e.PlayCardGap=40,e.PlayCardGap_new=30,e.BluffCardWidth=50,e.BluffCardHeight=70,e.BluffCardGap=60,e.DealCardTime=55,e.CountDown=15,e.HandCardSum=17,e.LandlordHandCardSum=20,e.BrightThreeCardBack=150,e.BrightThreeCardPositive=150,e.OperationOffsetRight=130,e.RobLordOperateTimerButtonX=310,e.CallLordOperateTimerButtonX=120,e.OperateTimerButtonX=210,e.GongTimerButtonX=300,e.PassOnlyTimerButtonX=440,e.MaxCardNumLine=10,e.PokerTextureType=0,e.hunPoint=0,e.isRankMode=!0,e.isFourPeople=!0,e.isShowTeam=!1,e.isGoldMode=!1,e.PartnerCardGap=25,e.DrawCard=new egret.Point(640,246),e.FlyCardPoint=new egret.Point(600,530),e.cardGroupType=!1,e.startY=535,e.tgap=40,e.twoLineNum=21,e.CardGapX=90,e.zhaProp=0,e.isSetHongzha=!1,e.ResGroup_DDZ="DZ_gameres",e.teamArr=[],t.GameConstant=e,__reflect(e.prototype,"game.GameConstant")}(game||(game={}));var game;!function(t){var e=function(e){function r(){var t=e.call(this)||this;return t.landlordRobImage=new Array,t.curMaxPoint=0,t.playCardSprites=new Array,t}return __extends(r,e),Object.defineProperty(r,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new r),this.m_Instance},enumerable:!0,configurable:!0}),r.clearInstance=function(){this.m_Instance=null},r.prototype.addListener=function(){},r.prototype.destroy=function(){this.removeListener()},r.prototype.removeListener=function(){this.removeRobLandlord(),this.removeOperateMain(),this.removeTributetion(),this.removeChangeTeam(),this.stopTimer(),r.clearInstance(),h.clearInstance(),n.clearInstance(),s.clearInstance()},r.prototype.operateChanged=function(e){for(var n=0,a=t.SeatLayer.Instance.seatSprites;n<a.length;n++){var i=a[n];i.removeReadyIcon()}null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),t.CardLayer.Instance.removeupNotUp(),this.addTimeButton();var r=e.uid;this.setTimeButtonPosition(r);var o=e.operateList?e.operateList:[],s=o.find(function(t){return t==Cmd.Operation.PlayMust}),h=-1==s?!0:!1;if(r==uniLib.NetMgr.UID){this.timeButton.y=180,this.timeButton.x=(uniLib.Global.screenWidth-this.timeButton.width)/2;var d=!1,l=t.PokerFunction.MainSeat;l.recommendList&&l.recommendList instanceof Array&&0!=l.recommendList.length&&(d=!0),this.addOperateMain(e.cardSetList,d),this.operateMain.setEnable(h)}else this.removeOperateMain();this.removeYouCard(h),this.removeSelectCard(),this.removePlayCard(r),t.DDZAI.Instance.removeOneCard(r),this.removeRobLandlord()},r.prototype.removeYouCard=function(e){if(!e){for(var n=[],a=t.SeatLayer.Instance.seatSprites,i=0,r=a;i<r.length;i++){var o=r[i];if(o.userSprite.IsYou&&o.userSprite.IsYou.source){var s=o.uid;n.push(s)}}if(0!=n.length)for(var h=0,d=n;h<d.length;h++){var o=d[h];this.removePlayCard(o)}}},r.prototype.tributetionChanged=function(e){for(var n=0,a=t.SeatLayer.Instance.seatSprites;n<a.length;n++){var i=a[n];i.removeReadyIcon()}null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),t.CardLayer.Instance.removeupNotUp();var r=e.uid;r==uniLib.NetMgr.UID&&this.addTributetion(e.operateList[0]),this.removePlayCard(r),t.DDZAI.Instance.removeOneCard(r),this.removeRobLandlord()},r.prototype.ReturntributetionChanged=function(e){for(var n=0,a=t.SeatLayer.Instance.seatSprites;n<a.length;n++){var i=a[n];i.removeReadyIcon()}null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),t.CardLayer.Instance.removeupNotUp(),this.addTimeButton();var r=e.uid;this.setTimeButtonPosition(r),this.removeSelectCard(),r==uniLib.NetMgr.UID&&(this.addTributetion(e.operateList[0]),this.timeButton.x=t.GameConstant.GongTimerButtonX,this.timeButton.y=250)},r.prototype.selectCardJGChanged=function(e){for(var n=0,a=t.SeatLayer.Instance.seatSprites;n<a.length;n++){var i=a[n];i.removeReadyIcon()}null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),t.CardLayer.Instance.removeupNotUp(),this.addTimeButton();var r=e.uid;this.setTimeButtonPosition(r),r==uniLib.NetMgr.UID?(this.triSelectCard&&this.triSelectCard.setBtnsVisible(!0),this.timeButton.x=t.GameConstant.GongTimerButtonX,this.timeButton.y=250):this.triSelectCard.setBtnsVisible(!1)},r.prototype.kickOperateChanged=function(e){null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),this.addTimeButton();var n=e.uid;t.PokerFunction.GetUserInfoByUid(e.uid);this.setTimeButtonPosition(n),n==uniLib.NetMgr.UID?(this.addRobLandlord(),this.robLandlord.kickPlayOperate(!0),this.timeButton.x=t.GameConstant.RobLordOperateTimerButtonX):this.removeRobLandlord()},r.prototype.addOperateMain=function(t,e){null==this.operateMain&&(this.operateMain=n.Instance),this.addChild(this.operateMain),this.setButtonAndTime(),this.operateMain.updata(t,e),this.operateMain.addListener()},r.prototype.removeOperateMain=function(){this.operateMain&&this.operateMain.parent&&(this.operateMain.removeListener(),this.removeChild(this.operateMain))},r.prototype.setButtonAndTime=function(){this.operateMain&&this.operateMain.parent&&(this.operateMain.x=(uniLib.Global.screenWidth-this.operateMain.width)/2,t.GameConstant.cardGroupType?this.operateMain.y=135:this.operateMain.y=354,this.operateMain.setButtonPosition())},r.prototype.addPickOutCard=function(t){null==this.pickOutCard&&(this.pickOutCard=a.Instance,this.pickOutCard.x=(uniLib.Global.screenWidth-this.pickOutCard.width)/2,this.pickOutCard.y=0),this.pickOutCard.setPickOutList(t),this.checkScroll(t.length),this.addChild(this.pickOutCard)},r.prototype.removePickOutCard=function(){this.pickOutCard&&this.pickOutCard.parent&&(this.pickOutCard.removeListener(),this.removeChild(this.pickOutCard),this._arrowMc&&(this._arrowMc.destory(),this._arrowMc=null))},r.prototype.checkScroll=function(t){t>6?(this._arrowMc||(this._arrowMc=new i,this._arrowMc.x=760,this._arrowMc.y=180*uniLib.ScreenUtils.scaleFactor,this._arrowMc.scaleX=this._arrowMc.scaleY=.8,a.Instance.addChild(this._arrowMc)),this._arrowMc.show()):this._arrowMc&&this._arrowMc.hide()},r.prototype.addTributetion=function(e){null==this.tributetionPlay&&(this.tributetionPlay=s.Instance,this.tributetionPlay.x=(uniLib.Global.screenWidth-this.tributetionPlay.width)/2,this.tributetionPlay.y=t.GameConstant.OperationY-70),this.tributetionPlay.setBtn(e),this.tributetionPlay.addListener(),this.addChild(this.tributetionPlay)},r.prototype.removeTributetion=function(){this.tributetionPlay&&this.tributetionPlay.parent&&(this.tributetionPlay.removeListener(),this.removeChild(this.tributetionPlay))},r.prototype.addSelectCard=function(t){null==this.triSelectCard&&(this.triSelectCard=u.Instance,this.triSelectCard.x=(uniLib.Global.screenWidth-this.triSelectCard.width)/2,this.triSelectCard.y=200),this.triSelectCard.updata(t),this.triSelectCard.addListener(),this.addChild(this.triSelectCard)},r.prototype.removeSelectCard=function(){this.triSelectCard&&this.triSelectCard.parent&&(this.triSelectCard.removeListener(),this.removeChild(this.triSelectCard),this.triSelectCard=null),u.Instance.resetGroup()},r.prototype.changeTeam=function(e,n){for(var a=0,i=t.SeatLayer.Instance.seatSprites;a<i.length;a++){var r=i[a];r.removeReadyIcon()}null!=n&&(this.endTime=t.GameTime.localNow()+1e3*n),this.addTimeButton(),this.timeButton.x=920,this.timeButton.y=300,null==this.changeTeamPanel&&(this.changeTeamPanel=new d,this.changeTeamPanel.x=(uniLib.Global.screenWidth-this.changeTeamPanel.width)/2,this.changeTeamPanel.y=(uniLib.Global.screenHeight-this.changeTeamPanel.height)/2),this.changeTeamPanel.startChange(e),this.addChild(this.changeTeamPanel)},r.prototype.removeChangeTeam=function(){this.changeTeamPanel&&this.changeTeamPanel.parent&&(this.changeTeamPanel.removeListener(),this.removeChild(this.changeTeamPanel),this.changeTeamPanel=null)},r.prototype.addLandlordRobResult=function(e){this.stopTimer();var n=t.GameConstant.GetClientNoByUid(e.uid),a=t.PokerFunction.GetUserInfoByUid(e.uid),i=new egret.Bitmap;if(e.yesOrNo?this.landlordUid?(i.texture=RES.getRes("player_grab_landlord"),t.SoundHand.Instance.playCallLandlord(3,a.gender),this.landlordUid=e.uid):(i.texture=RES.getRes("player_call_landlord"),this.landlordUid=e.uid,t.SoundHand.Instance.playCallLandlord(1,a.gender)):this.landlordUid?(t.SoundHand.Instance.playCallLandlord(4,a.gender),i.texture=RES.getRes("player_pass_call")):(t.SoundHand.Instance.playCallLandlord(2,a.gender),i.texture=RES.getRes("player_pass_score")),e.uid==uniLib.NetMgr.UID)i.x=(uniLib.Global.screenWidth-i.width)/2,i.y=t.GameConstant.OperationY,this.removeRobLandlord();else{var r=t.GameConstant.GetSeatSpriteByUid(e.uid),o=r.localToGlobal();i.y=o.y+t.GameConstant.HeadHeight+70-i.height,1==n?i.x=o.x-i.width-40:i.x=o.x+t.GameConstant.HeadWidth+40}var s=this.landlordRobImage[n];s&&s.parent&&this.removeChild(s),this.landlordRobImage[n]=i,this.addChild(i)},r.prototype.removeLandlordRobImage=function(){for(var t=0,e=this.landlordRobImage;t<e.length;t++){var n=e[t];n&&n.parent&&this.removeChild(n)}this.landlordRobImage.clear(),this.landlordUid=null,this.curMaxPoint=0},r.prototype.addCalllordRobResult=function(e){this.stopTimer();var n=t.GameConstant.GetClientNoByUid(e.uid),a=t.PokerFunction.GetUserInfoByUid(e.uid),i=new egret.Bitmap;if(0!=e.point&&(this.curMaxPoint=e.point),e.point?(i.texture=RES.getRes("callScore"+e.point),t.SoundHand.Instance.playPoint(a?a.gender:null,e.point)):(i.texture=RES.getRes("player_pass_score"),t.SoundHand.Instance.playCallLandlord(2,a?a.gender:null)),e.uid==uniLib.NetMgr.UID||1==t.RoomInfo.getInstance().video&&0==n)i.x=(uniLib.Global.screenWidth-i.width)/2,i.y=t.GameConstant.OperationY,this.removeRobLandlord();else{var r=t.GameConstant.GetSeatSpriteByUid(e.uid),o=r.localToGlobal();i.y=o.y+t.GameConstant.HeadHeight+70-i.height,1==n?i.x=o.x-i.width-40:i.x=o.x+t.GameConstant.HeadWidth+40}var s=this.landlordRobImage[n];s&&s.parent&&this.removeChild(s),this.landlordRobImage[n]=i,this.addChild(i)},r.prototype.updataRobLandlord=function(e){this.removeCallCard();var n=t.GameConstant.GetClientNoByUid(e.uid),a=this.landlordRobImage[n];a&&a.parent&&this.removeChild(a),null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),this.addTimeButton(),this.setTimeButtonPosition(e.uid),e.uid==uniLib.NetMgr.UID?(this.addRobLandlord(e.operateList),this.robLandlord.kickPlayOperate(!1),t.RoomData.Instance.callOrRob?this.timeButton.x=t.GameConstant.CallLordOperateTimerButtonX:this.timeButton.x=t.GameConstant.RobLordOperateTimerButtonX):this.removeRobLandlord()},r.prototype.autoLandLord=function(){var e=new Cmd.LandlordRobCmd_CS;e.yesOrNo=!1,t.PokerFunction.tcpSend(e)},r.prototype.addTimeButton=function(){null==this.timeButton&&(this.timeButton=new p),this.addChild(this.timeButton),this.updataTimer(),this.timer&&this.timer.stop(),this.timer=uniLib.SetUniTimerTimeout(this,this.updataTimer,1e3,!1,this)},r.prototype.addWarningEffect=function(){var e=t.RoomData.Instance.operateSeatId;if(!(null==e||this.changeTeamPanel&&this.changeTeamPanel.parent)){null==this.warningEffect&&(this.warningEffect=t.EffectCreate.Instance.warningEffect()),t.SeatLayer.Instance.addChild(this.warningEffect),t.EffectCreate.Instance.playWarning();var n=t.GameConstant.GetClientNoBySeatId(e),a=t.GameConstant.GetSeatSpriteBySeatId(e);if(null!=a){var i=a.localToGlobal();return 0==n?(this.warningEffect.x=i.x+t.GameConstant.HeadWidth/2,void(this.warningEffect.y=i.y-30)):void(t.GameConstant.isFourPeople?2==n?(this.warningEffect.x=i.x+t.GameConstant.HeadWidth+25-180,this.warningEffect.y=i.y+t.GameConstant.HeadHeight/2-10,t.GameConstant.isShowTeam&&(this.warningEffect.x=650)):3==n?(this.warningEffect.x=i.x+140,this.warningEffect.y=i.y+t.GameConstant.HeadHeight/2-10):(this.warningEffect.x=i.x-25,this.warningEffect.y=i.y+t.GameConstant.HeadHeight/2-10):1==n||2==n?(this.warningEffect.x=i.x-25,this.warningEffect.y=i.y+t.GameConstant.HeadHeight/2-10):3==n||4==n?(this.warningEffect.x=i.x+140,this.warningEffect.y=i.y+t.GameConstant.HeadHeight/2-10):(this.warningEffect.x=i.x+137,this.warningEffect.y=i.y+t.GameConstant.HeadHeight/2-10))}}},r.prototype.removeWarningEffect=function(){this.warningEffect&&this.warningEffect.parent&&(t.SeatLayer.Instance.removeChild(this.warningEffect),t.EffectCreate.Instance.stopWarning())},r.prototype.setNotUpTimeButton=function(){this.timeButton.x=400,this.timeButton.y=138,t.GameConstant.isFourPeople||(this.timeButton.y=180)},r.prototype.setTimeButtonPosition=function(e){if(null!=e){var n=t.GameConstant.GetClientNoByUid(e),a=t.GameConstant.GetSeatSpriteByUid(e);if(null!=a){var i=a.localToGlobal();if(0==n)return this.timeButton.x=(uniLib.Global.screenWidth-this.timeButton.width)/2,void(this.timeButton.y=t.GameConstant.OperationY+10);if(6==t.RoomData.Instance.maxuserNbr){var r=t.GameConstant._TimePos[n];return this.timeButton.x=r.x,void(this.timeButton.y=r.y)}2==n?(this.timeButton.x=i.x+t.GameConstant.HeadWidth+40,this.timeButton.y=i.y+t.GameConstant.HeadHeight-this.timeButton.height/2+10,t.GameConstant.isShowTeam&&(this.timeButton.y=-9)):(this.timeButton.x=i.x-this.timeButton.width-40,this.timeButton.y=i.y+t.GameConstant.HeadHeight-this.timeButton.height/2+10,3==n&&(this.timeButton.x=i.x-this.timeButton.width+234))}}},r.prototype.stopTimer=function(){this.timeButton&&this.timeButton.parent&&this.removeChild(this.timeButton),this.timer&&this.timer.stop()},Object.defineProperty(r.prototype,"Endtime",{get:function(){return this.endTime},set:function(t){this.endTime=t},enumerable:!0,configurable:!0}),r.prototype.updataTimer=function(){this.time=Math.floor(this.endTime/1e3-t.GameTime.localNow()/1e3),this.time>5?this.removeWarningEffect():(this.addWarningEffect(),t.RoomData.Instance.operateSeatId==t.PokerFunction.MainSeatId&&t.SoundHand.Instance.playReminded()),this.time<0&&(this.time=0),this.timeButton.label=this.time+""},r.prototype.addRobLandlord=function(e){null==this.robLandlord&&(this.robLandlord=h.Instance,this.robLandlord.x=(uniLib.Global.screenWidth-this.robLandlord.width)/2,this.robLandlord.y=t.GameConstant.OperationY),this.landlordUid?this.robLandlord.setBtnsVisible(!1):this.robLandlord.setBtnsVisible(!0),this.robLandlord.updata(),this.robLandlord.addListener(),this.addChild(this.robLandlord),this.robLandlord.showBtns(e)},r.prototype.removeRobLandlord=function(){this.robLandlord&&this.robLandlord.parent&&(this.robLandlord.removeListener(),this.removeChild(this.robLandlord))},r.prototype.playCard=function(e,n,a){void 0===a&&(a=!1),e.cardList&&e.cardList instanceof Array&&e.cardList.length>0&&t.SoundHand.Instance.playOutCard(),e.uid==uniLib.NetMgr.UID&&t.CardLayer.Instance.revertDark(),this.stopTimer();var i=t.GameConstant.GetClientNoByUid(e.uid);if(e.uid==uniLib.NetMgr.UID&&(this.removeOperateMain(),a))return this.removePlayCard(e.uid),t.DDZAI.Instance.removeOneCard(e.uid),void this.removeRobLandlord();var o=this.getPlayCardSprite(e.cardList,e.uid,e.replaceCard);this.playCardSprites[i]&&this.playCardSprites[i].parent&&this.removeChild(this.playCardSprites[i]),this.addChild(o),this.playCardSprites[i]=o;var s=t.PokerFunction.GetSeatDataByUid(e.uid),h=this.getPlayCardPosition(o,e.uid);if(!e.cardList||!e.cardList.length){if(a)return;return o.x=h.x,o.y=h.y,4==i&&(o.x+=22),void t.SoundHand.Instance.playPass(s.user.gender)}var d;a||(d=t.PokerFunction.GetSeatDataByUid(e.uid).seatId);var l=function(){n&&(t.SoundHand.Instance.playCard(s.user.gender,e.cardListType,e.cardList),r.Instance.addCardTypeEffect(),t.EffectCreate.Instance.playCardType(e.cardListType,e.cardList))},u=t.PokerFunction.GetSeatDataByUid(e.uid),c=u.handCardSum;if(2==c||1==c&&t.SoundHand.Instance.playLast(u.user.gender,1),uniLib.Global.lobbyMode&&1003==MJLobby.MJLobbyData.getInstance().lobbyId)return o.x=h.x,o.y=h.y,void l();if(o.alpha=.2,o.scaleX=1.2,o.scaleY=1.2,4==t.RoomData.Instance.maxuserNbr){if(0==i)o.x=h.x-50,o.y=h.y+50,egret.Tween.get(o).wait(50).to({alpha:1,y:h.y,scaleX:1,scaleY:1},200,egret.Ease.circIn).to({alpha:1,x:h.x},300,egret.Ease.circIn).call(l,this);else if(3==i){if(o.x=h.x-30,o.y=h.y-50,a)return o.x=h.x,o.y=h.y-70,o.alpha=1,o.scaleX=1,void(o.scaleY=1);egret.Tween.get(o).wait(50).to({alpha:1,x:h.x,y:h.y,scaleX:1,scaleY:1},500,egret.Ease.circInOut).call(l,this)}else if(1==i){if(o.x=h.x+30,o.y=h.y-50,a)return o.x=h.x,o.y=h.y+20,o.alpha=1,o.scaleX=1,void(o.scaleY=1);egret.Tween.get(o).wait(50).to({alpha:1,x:h.x,y:h.y,scaleX:1,scaleY:1},500,egret.Ease.circInOut).call(l,this)}else if(2==i){if(o.x=h.x+30,o.y=h.y-50,a)return o.x=h.x,o.y=h.y+20,void o.parent.removeChild(o);egret.Tween.get(o).wait(50).to({alpha:1,x:h.x,y:h.y,scaleX:1,scaleY:1},500,egret.Ease.circInOut).call(l,this)}}else{var p=t.GameConstant.GetShowTypeByClient(i);1==p?(o.x=h.x+30,o.y=h.y-50,a&&(o.x=h.x,o.y=h.y)):(o.x=h.x-30,o.y=h.y-50,a&&(o.x=h.x,o.y=h.y)),egret.Tween.get(o).wait(50).to({alpha:1,x:h.x,y:h.y,scaleX:1,scaleY:1},500,egret.Ease.circInOut).call(l,this)}for(var m=t.PokerFunction.GetSeatDataByUid(e.uid).seatId,g=this.getSeatIdByM(m),C=0,f=t.SeatLayer.m_Instance.seatSprites;C<f.length;C++){var y=f[C];y.seatData.seatId==g&&y.userSprite.IsYou&&(t.OperateLayer.Instance.removePlayCard(y.seatData.user.uid),t.DDZAI.Instance.removeOneCard(y.seatData.user.uid))}},r.prototype.getSeatIdByM=function(t){var e=4>t?t+1:t-3;return e},r.prototype.playNineCard=function(e){if(null!=e||e instanceof Array){null==this.nineCard&&(this.nineCard=this.getPlayCardSprite(e),this.addChild(this.nineCard));var n=t.GameConstant.SeatPosArr[2];this.nineCard.x=n.x,this.nineCard.y=n.y,this.nineCard.alpha=.2,this.nineCard.scaleX=1.2,this.nineCard.scaleY=1.2,egret.Tween.get(this.nineCard).wait(50).to({alpha:1,x:n.x,scaleX:1,y:n.y,scaleY:1},500,egret.Ease.circInOut)}},r.prototype.removeNineCard=function(){this.nineCard&&this.nineCard.parent&&(this.nineCard.removeChildren(),this.removeChild(this.nineCard),this.nineCard=null)},r.prototype.chechChuntian=function(){for(var e=0,n=0,a=0,i=t.RoomData.Instance.seatList;a<i.length;a++){var r=i[a];if(0!=r.handCardSum){if(r.user.uid==t.RoomData.Instance.landlordUid){if(20==r.handCardSum){e++;continue}}else if(17==r.handCardSum){e++;continue}}else n++}return 2==e&&1==n?!0:!1},r.prototype.getPlayCardPosition=function(e,n){var a=new egret.Point,i=t.GameConstant.GetClientNoByUid(n);if(n==uniLib.NetMgr.UID||1==t.RoomInfo.getInstance().video&&0==i)a.x=(uniLib.Global.screenWidth-e.width)/2,a.y=340;else{var r=t.GameConstant.SeatPosArr[i];a.y=r.y+t.GameConstant.HeadHeight+70-e.height-40,t.GameConstant.isFourPeople?1==i?a.x=r.x-e.width-40:(a.x=r.x+t.GameConstant.HeadWidth+40,2==i&&(a.y=36),t.GameConstant.isShowTeam&&2==i&&(a.y=112)):(1==i?(a.x=r.x-e.width-18,a.y=395):2==i?(a.x=r.x-e.width-18,a.y=200):3==i?(a.x=uniLib.Global.screenWidth/2+293,a.y=73):4==i?(a.x=uniLib.Global.screenWidth/2-165,a.y=73):a.x=r.x+t.GameConstant.HeadWidth+20,1!=t.RoomInfo.getInstance().video||1!=i&&2!=i||(a.y=a.y+88))
}return a},r.prototype.removePlayCardSprites=function(){for(var t=0,e=this.playCardSprites;t<e.length;t++){var n=e[t];n&&egret.Tween.removeTweens(n),n&&n.parent&&this.removeChild(n)}this.playCardSprites.clear(),this.removeNineCard()},r.prototype.showCallCard=function(e,n){this.sCard||(this.callCardId=e,this.sCard=new egret.Bitmap,this.sCard.width=t.GameConstant.PlayCardWidth,this.sCard.height=t.GameConstant.PlayCardHeight,this.sCard.texture=t.GameConstant.GetPokerTextureByCardId(e),t.GameInfo.topLayer.addChild(this.sCard),this.sCard.x=(uniLib.Global.screenWidth-this.sCard.width)/2,this.sCard.y=(uniLib.Global.screenHeight-this.sCard.height)/2,t.EffectCreate.Instance.callCardAnimation(this.sCard,e,n))},r.prototype.removeCallCard=function(){this.sCard&&this.sCard.parent&&(t.GameInfo.topLayer.removeChild(this.sCard),this.sCard=null)},r.prototype.getPlayCardSprite=function(e,n,a){var i=new egret.Sprite,r=!1;a&&a instanceof Array&&a.length>0&&(r=!0);var o=[];if(!e||!e.length){var s=new egret.Bitmap(RES.getRes("player_pass"));return i.addChild(s),i.width=s.width,i.height=s.height,i}for(var h,d=function(a){var s=new egret.Bitmap;s.width=t.GameConstant.PlayCardWidth,s.height=t.GameConstant.PlayCardHeight,s.texture=t.GameConstant.GetPokerTextureByCardId(e[a]),s.x=t.GameConstant.PlayCardGap_new*a,i.addChild(s),r&&19==Math.floor(e[a]/100)&&o.push(s),a>=t.GameConstant.MaxCardNumLine&&n!=uniLib.NetMgr.UID&&(s.x=(t.GameConstant.GetWidthForCardNumber(t.GameConstant.MaxCardNumLine)-t.GameConstant.GetWidthForCardNumber(e.length-t.GameConstant.MaxCardNumLine))/2+t.GameConstant.PlayCardGap_new*(a-t.GameConstant.MaxCardNumLine),s.y=50),a==e.length-1&&(h=s);var d=t.GameConstant.hunPoint;if(d){var l=table.TablePokerCard.hunCardArr(d),u=l.find(function(t){return t==e[a]});if(-1!=u){var c=new egret.Bitmap(RES.getRes("Poker_bg"));c.anchorOffsetX=10,c.scaleX=c.scaleY=.6,c.x=s.x+7,c.y=s.y+37,i.addChild(c)}}},l=0;l<e.length;l++)d(l);if(r)for(var l=0;l<a.length;l++){var u=table.TablePokerCard.cardPlace(a[l]),c=this.updateLevel(u);if(o[l]){var p=new eui.BitmapLabel;p.font="xq_text_fnt",p.text=c,p.x=o[l].x+7,p.y=o[l].y+18;var m=new eui.Image("xq_bg");m.x=o[l].x+2,m.y=o[l].y+5,i.addChild(m),m.visible=!1,i.addChild(p)}}return e.length>11&&n!=uniLib.NetMgr.UID?(i.width=t.GameConstant.GetWidthForCardNumber(t.GameConstant.MaxCardNumLine),i.height=t.GameConstant.PlayCardHeight+50):(i.width=t.GameConstant.GetWidthForCardNumber(e.length),i.height=t.GameConstant.PlayCardHeight),i},r.prototype.removePlayCard=function(e){var n=t.GameConstant.GetClientNoByUid(e);this.playCardSprites[n]&&this.playCardSprites[n].parent&&this.removeChild(this.playCardSprites[n])},r.prototype.updateLevel=function(t){return t>=10?10==t?"S":11==t?"J":12==t?"Q":13==t?"K":14==t?"A":16==t?"2":void 0:t+""},r.prototype.addCardTypeEffect=function(){null==this.cardTypeEffect&&(this.cardTypeEffect=t.EffectCreate.Instance.cardTypeEffect(),this.cardTypeEffect.x=uniLib.Global.screenWidth/2,this.cardTypeEffect.y=uniLib.Global.screenHeight/2-20),this.addChild(this.cardTypeEffect)},r.prototype.removeCardTypeEffect=function(){this.cardTypeEffect&&this.cardTypeEffect.parent&&(this.removeChild(this.cardTypeEffect),t.EffectCreate.Instance.stopCardType())},r}(egret.DisplayObjectContainer);t.OperateLayer=e,__reflect(e.prototype,"game.OperateLayer");var n=function(n){function a(){var t=n.call(this)||this;return t.tipNumber=0,t.skinName=new OperationPlay_DZ_Skin,t.addListener(),t}return __extends(a,n),Object.defineProperty(a,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new a),this.m_Instance},enumerable:!0,configurable:!0}),a.clearInstance=function(){this.m_Instance=null},a.prototype.addListener=function(){this.passButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.tipButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.playButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.passOnlyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},a.prototype.removeListener=function(){this.passButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.tipButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.playButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.passOnlyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},a.prototype.setButtonPosition=function(){t.GameConstant.cardGroupType?(this.tipButton.x=740,this.playButton.x=903,this.passButton.x=225,this.passOnlyBtn.y=45):(this.tipButton.x=557,this.playButton.x=767,this.passButton.x=357,this.passOnlyBtn.y=15)},a.prototype.updata=function(t,e){if(t||e||this.setNotUp(),t){var n=(t[0],t[0]);if(!(n instanceof Array&&n.length))return void this.setNotUp();this.buttonVisible(!0),this.passButton.enabled=!0,t instanceof Array?(this.tipButton.enabled=!0,this.playButton.enabled=!1):(this.tipButton.enabled=!1,this.playButton.enabled=!1),this.playButtonEnabled()}},a.prototype.setNotUp=function(){t.CardLayer.Instance.notUp(),this.buttonVisible(!1),e.Instance.setNotUpTimeButton()},a.prototype.updatePassButton=function(){var e=t.DDZAI.Instance.layCard,n=this.checkLenght(e);0==n?this.passButton.enabled=!1:this.passButton.enabled=!0},a.prototype.checkLenght=function(t){for(var e=0,n=0,a=t;n<a.length;n++){var i=a[n];i&&i instanceof Array&&i.length>0&&e++}return e},a.prototype.setData=function(t){this.tipPlayCardList=t,this.selectTip()},a.prototype.buttonVisible=function(t){this.passOnlyBtn.visible=!t,this.passButton.visible=t,this.tipButton.visible=t,this.playButton.visible=t},a.prototype.setEnable=function(t){this.passButton.enabled=t},a.prototype.playButtonEnabled=function(){for(var e=t.CardLayer.Instance.handCards,n=new Array,a=0,i=e;a<i.length;a++){var r=i[a];r.darken&&n.push(r.cardId)}return n.length<1?void(this.playButton.enabled=!1):void(this.playButton.enabled=!0)},a.prototype.selectTip_old=function(){if(null!=this.tipCardList){this.tipNumber>this.tipCardList.length-1&&(this.tipNumber=0);for(var e=t.CardLayer.Instance.handCards,n=0,a=e;n<a.length;n++){var i=a[n];i.darken=!1}for(var r=this.tipCardList[this.tipNumber],o=null==r?null:r,s=function(t){var n=e.first(function(e){return e.cardId==t});n.darken=!0},h=0,d=o;h<d.length;h++){var i=d[h];s(i)}this.tipNumber++}},a.prototype.selectTip=function(){if(null!=this.tipPlayCardList){for(var e=t.CardLayer.Instance.handCards,n=0,a=e;n<a.length;n++){var i=a[n];i.darken=!1}for(var r=this.tipPlayCardList,o=null==r?null:r,s=function(t){var n=e.first(function(e){return e.cardId==t});return n?void(n.darken=!0):"continue"},h=0,d=o;h<d.length;h++){var i=d[h];s(i)}this.playButton.enabled=!0}},a.prototype.onClickTap=function(e){if(e.target==this.passButton||e.target==this.passOnlyBtn){var n=new Cmd.PlayCardCmd_CS;t.PokerFunction.tcpSend(n),t.CardLayer.Instance.revertDark()}else if(e.target==this.tipButton){var n=new Cmd.OperatGameReq_C;t.PokerFunction.tcpSend(n)}else if(e.target==this.playButton){var n=new Cmd.PlayCardCmd_CS,a=t.CardLayer.Instance.handCards;if(a.length<1)return;for(var i=new Array,r=0,o=a;r<o.length;r++){var s=o[r];if(s.darken&&(i.push(s.cardId),s.locked))return void t.PublicManage.getInstance().showMildWarnShow("存在已锁的牌,请重新操作！")}if(i.length<1)return;n.cardList=i,t.PokerFunction.tcpSend(n)}t.SoundHand.Instance.playButtonClick()},a}(eui.Component);t.OperationPlay=n,__reflect(n.prototype,"game.OperationPlay");var a=function(e){function n(){var t=e.call(this)||this;return t.tipNumber=0,t.skinName=new PickOutCard_DZ_Skin,t.addListener(),t}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){this.m_Instance=null},n.prototype.addListener=function(){this.pickOutList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onPickListTap,this)},n.prototype.removeListener=function(){this.pickOutList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onPickListTap,this)},n.prototype.onPickListTap=function(e){var n=e.itemIndex+1;if(n){var a=new Cmd.PickOutCardCmd_CS;a.pos=n,a.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(a)}t.SoundHand.Instance.playButtonClick()},n.prototype.setPickOutList=function(t){if(null!=t){var e=null!=t&&t instanceof Array?t:[];this.pickOutList.itemRenderer=r,this.pickOutList.dataProvider=new eui.ArrayCollection(e)}},n.prototype.updata=function(t){},n.prototype.setData=function(t){},n.prototype.onClickTap=function(e){t.SoundHand.Instance.playButtonClick()},n}(eui.Component);t.PickOutCard=a,__reflect(a.prototype,"game.PickOutCard");var i=function(e){function n(){var n=e.call(this)||this;return n._arrowIcon=t.ResUtil.createBitmapByName("mjl_create_arrow"),n.addChild(n._arrowIcon),n}return __extends(n,e),n.prototype.show=function(){this.stopTimer(),this._arrowIcon.visible=!0,this._arrowIcon.y=0,this._timer=new egret.Timer(400,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start()},n.prototype.stopTimer=function(){this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.stop(),this._timer=null)},n.prototype.onTimer=function(t){0==this._arrowIcon.y?this._arrowIcon.y=-15:this._arrowIcon.y=0},n.prototype.hide=function(){this.stopTimer(),this._arrowIcon.visible=!1},n.prototype.destory=function(){this.hide(),t.ResUtil.removeAllChildren(this),t.ResUtil.removeFromParent(this),this._arrowIcon=null},n}(egret.DisplayObjectContainer);t.ArrowMc=i,__reflect(i.prototype,"game.ArrowMc");var r=function(t){function e(e){var n=t.call(this)||this;return n.skinName=new PickOutCardItem_DZ_Skin,n}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t){var e=t.cardSet?t.cardSet:[],n=t.replaceSet?t.replaceSet:[],a=this.setCardList(e,n);this.addCard(a)}},e.prototype.setCardList=function(t,e){if(0!=e.length){for(var n=t.clone(),a=[],i=-1,r=0;r<n.length;r++){var o=new Cmd.CardSetList;19==Math.floor(n[r]/100)&&(i++,n[r]=e[i],o.sNum=1),o.num=n[r],a.push(o)}return a}},e.prototype.addCard=function(t){this.pickCardList.itemRenderer=o;var e=new eui.ArrayCollection(t);this.pickCardList.dataProvider=e},e}(eui.ItemRenderer);t.PickCardItem=r,__reflect(r.prototype,"game.PickCardItem");var o=function(e){function n(){var t=e.call(this)||this;return t.skinName=new Card_DZ_Skin,t}return __extends(n,e),n.prototype.dataChanged=function(){var e=this.data;e&&(this.cardSource.source=t.GameConstant.GetPokerTextureByCardId(e.num),e.sNum&&this.setKey())},n.prototype.setKey=function(){var t=new eui.Image("game_keyicon");t.bottom=-2,t.left=1,this.addChild(t)},n}(eui.ItemRenderer);t.cardItem=o,__reflect(o.prototype,"game.cardItem");var s=function(e){function n(){var t=e.call(this)||this;return t.tipNumber=0,t.skinName=new TributetionSkin,t.addListener(),t}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){this.m_Instance=null},n.prototype.setBtn=function(t){t==Cmd.Operation.PayTribute?(this.TributeButton.visible=!0,this.returnTributeButton.visible=!1):t==Cmd.Operation.BackTribute&&(this.TributeButton.visible=!1,this.returnTributeButton.visible=!0)},n.prototype.addListener=function(){this.TributeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.returnTributeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this.TributeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.returnTributeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.onClickTap=function(e){if(e.target==this.TributeButton){var n=new Cmd.PlayCardCmd_CS,a=t.CardLayer.Instance.handCards;if(a.length<1)return;for(var i=new Array,r=0,o=a;r<o.length;r++){var s=o[r];s.darken&&i.push(s.cardId)}if(i.length<1)return;n.cardList=i,t.PokerFunction.tcpSend(n),t.CardLayer.Instance.revertDark()}else if(e.target==this.returnTributeButton){var n=new Cmd.PlayCardCmd_CS,a=t.CardLayer.Instance.handCards;if(a.length<1)return;for(var i=new Array,h=0,d=a;h<d.length;h++){var s=d[h];s.darken&&i.push(s.cardId)}if(i.length<1)return;n.cardList=i,t.PokerFunction.tcpSend(n),t.CardLayer.Instance.revertDark()}t.SoundHand.Instance.playButtonClick()},n}(eui.Component);t.TributetionPlay=s,__reflect(s.prototype,"game.TributetionPlay");var h=function(n){function a(){var t=n.call(this)||this;return t.skinName=new OperateRobLandlord_DZ_Skin,t.addListener(),t.passCallButton.name="0",t.callScoreButton1.name="1",t.callScoreButton2.name="2",t.callScoreButton3.name="3",t}return __extends(a,n),Object.defineProperty(a,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new a),this.m_Instance},enumerable:!0,configurable:!0}),a.clearInstance=function(){a.Instance.removeListener(),this.m_Instance=null},a.prototype.showBtns=function(t){null!=t&&t instanceof Array&&!(t.length<1)&&(this.passCallButton.enabled=t.seek(function(t){return t==Cmd.Operation.LordCall0}),this.callScoreButton1.enabled=t.seek(function(t){return t==Cmd.Operation.LordCall1}),this.callScoreButton2.enabled=t.seek(function(t){return t==Cmd.Operation.LordCall2}),this.callScoreButton3.enabled=t.seek(function(t){return t==Cmd.Operation.LordCall3}),this.noRobBtn.enabled=t.seek(function(t){return t==Cmd.Operation.LordRobNo}),this.RobBtn.enabled=t.seek(function(t){return t==Cmd.Operation.LordRobYes}),this.passButton.enabled=t.seek(function(t){return t==Cmd.Operation.LordCallNo}),this.landlordButton.enabled=t.seek(function(t){return t==Cmd.Operation.LordCallYes}))},a.prototype.setBtnsVisible=function(t){this.passButton.visible=t,this.landlordButton.visible=t,this.noRobBtn.visible=!t,this.RobBtn.visible=!t},a.prototype.updata=function(){t.RoomData.Instance.callOrRob?(this.callLordGroup.visible=!0,this.robLordGroup.visible=!1):(this.callLordGroup.visible=!1,this.robLordGroup.visible=!0);for(var n=e.Instance.curMaxPoint,a=1;4>a;a++){var i=this.skin["callScoreButton"+a];n>=a?i.enabled=!1:i.enabled=!0}},a.prototype.kickPlayOperate=function(t){this.kickPlayGroup.visible=t,this.kickPlayGroup.visible&&(this.callLordGroup.visible=!1,this.robLordGroup.visible=!1)},a.prototype.addListener=function(){this.passButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.landlordButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.noRobBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.RobBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.callScoreButton1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.callScoreButton2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.callScoreButton3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.passCallButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.kickPlayButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.noKickButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},a.prototype.removeListener=function(){this.passButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.landlordButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.noRobBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.RobBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.callScoreButton1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.callScoreButton2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.callScoreButton3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.passCallButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.kickPlayButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.noKickButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},a.prototype.onClickTap=function(e){if(e.target==this.passButton||e.target==this.noRobBtn){var n=new Cmd.LandlordRobCmd_CS;n.yesOrNo=!1,t.PokerFunction.tcpSend(n)}else if(e.target==this.landlordButton||e.target==this.RobBtn){var n=new Cmd.LandlordRobCmd_CS;n.yesOrNo=!0,t.PokerFunction.tcpSend(n)}else if(e.target==this.callScoreButton1||e.target==this.callScoreButton2||e.target==this.callScoreButton3||e.target==this.passCallButton){var n=new Cmd.LandlordCallCmd_CS;n.point=Number(e.target.name),t.PokerFunction.tcpSend(n)}else if(e.target==this.kickPlayButton){var n=new Cmd.KickPlayCmd_CS;n.uid=uniLib.NetMgr.UID,n.yesOrNo=!0,t.PokerFunction.tcpSend(n)}else if(e.target==this.noKickButton){var n=new Cmd.KickPlayCmd_CS;n.uid=uniLib.NetMgr.UID,n.yesOrNo=!1,t.PokerFunction.tcpSend(n)}t.SoundHand.Instance.playButtonClick()},a}(eui.Component);t.OperateRobLandlord=h,__reflect(h.prototype,"game.OperateRobLandlord");var d=function(e){function n(){var n=e.call(this)||this;return n.pos=0,n.teamItemList=new Array,t.GameConstant.isFourPeople?n.skinName=new ChangeTeam_DZ_Skin:n.skinName=new ChangeTeam_DZSix_Skin,n.addListener(),n.initCard(),n}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){n.Instance.removeListener(),this.m_Instance=null},n.prototype.setBtnsVisible=function(t){this._selectBtn.visible=t},n.prototype.setBigPanel=function(){this._selectBtn.scaleX=this._selectBtn.scaleY=.5,this._selectBtn.horizontalCenter=-50,this._selectBtn.verticalCenter=-80},Object.defineProperty(n.prototype,"CardList",{get:function(){return this.cardList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"teamList",{get:function(){return this.teamItemList},enumerable:!0,configurable:!0}),n.prototype.resetGroup=function(){this.cardGroup.removeChildren(),this._selectBtn.visible=!1},Object.defineProperty(n.prototype,"cardSelectGroup",{get:function(){return this.cardGroup},enumerable:!0,configurable:!0}),n.prototype.initCard=function(){for(var e=t.RoomData.Instance.maxuserNbr?t.RoomData.Instance.maxuserNbr:4,n=1;e>=n;n++){var a=new l;this.teamItemList.push(a),a.x+=79+124*(n-1),a.y=110,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.width=111,a.height=161,a.pos=n,this.cardGroup.addChild(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)}this._selectBtn.visible=!0},n.prototype.updateTeamItemList=function(){this.teamItemList},n.prototype.startChange=function(e){if(e&&e.uid){var n=e.uid,a=e.pos,i=e.teamType,r=1==i?"Poker_5_21":"Poker_5_20",o=this.teamItemList;n==uniLib.NetMgr.UID&&(this._selectBtn.visible=!1);for(var s=this,h=t.GameConstant.GetSeatSpriteByUid(n).userSprite.user.headUrl,d=function(t){var e=t.imgSource;return"BackCard"!=e?void(t.head=h):(egret.Tween.removeTweens(t),void egret.Tween.get(t).wait(500).to({scaleX:0},300).call(function(){return t.imgSource=r}).to({scaleX:1},300).call(function(){return s.setCard(t,h)}))},l=0,u=o;l<u.length;l++){var c=u[l];c.pos==a&&d(c)}}},n.prototype.setCard=function(t,e){t.head=e,t.darken=!1},n.prototype.updata=function(t){},n.prototype.onTouchTap=function(t){for(var e=t.currentTarget,n=0;n<this.cardGroup.numChildren;n++){var a=this.cardGroup.getChildAt(n);a.darken=!1}e.darken=!0,this.pos=e.pos},n.prototype.kickPlayOperate=function(t){},n.prototype.addListener=function(){this._selectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this._selectBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.onClickTap=function(e){if(e.target==this._selectBtn){for(var n=!1,a=0;a<this.cardGroup.numChildren;a++){var i=this.cardGroup.getChildAt(a);if(1==i.darken){n=!0;break}}if(n||t.GameInfo.manage.showMildWarnShow("请先翻牌！"),this.pos){var r=new Cmd.PlayerChangeTeam_CS,o=new Cmd.TeamData,s=uniLib.NetMgr.UID,h=this.pos;o.uid=s,o.pos=h,r.teamData=o,t.PokerFunction.tcpSend(r)}}t.SoundHand.Instance.playButtonClick()},n}(eui.Component);t.ChangeTeamPanel=d,__reflect(d.prototype,"game.ChangeTeamPanel");var l=function(e){function n(t){var n=e.call(this)||this;return n.m_darken=!1,n.skinName=new TeamCardItemSkin,t&&(n.m_cardId=t,n.dataChanged(t)),n.headMc.source="",n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onRemoveFromStage,n),n}return __extends(n,e),Object.defineProperty(n.prototype,"cardData",{get:function(){return this.m_cardId},enumerable:!0,configurable:!0}),n.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},n.prototype.onRemoveFromStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},Object.defineProperty(n.prototype,"head",{set:function(t){t&&(this.headMc.source=t)},enumerable:!0,configurable:!0}),n.prototype.onTouchTap=function(t){},Object.defineProperty(n.prototype,"darken",{get:function(){return this.m_darken},set:function(t){this.m_darken!=t&&(this.m_darken=t,this.darkenChanged(t))},enumerable:!0,configurable:!0}),n.prototype.darkenChanged=function(t){t?this.addDarken():this.removeDarken()},n.prototype.addDarken=function(){null==this.darkenImage&&(this.darkenImage=new egret.Bitmap(RES.getRes("Poker_dark"))),this.darkenImage.width=this.width,this.darkenImage.height=this.height,this.addChild(this.darkenImage)},n.prototype.removeDarken=function(){this.darkenImage&&this.darkenImage.parent&&this.removeChild(this.darkenImage)},Object.defineProperty(n.prototype,"imgSource",{get:function(){return this.imageSousrce.source.toString()},set:function(t){this.imageSousrce.source=t},enumerable:!0,configurable:!0}),n.prototype.dataChanged=function(e){this.imageSousrce.source=t.GameConstant.GetPokerTextureByCardId(e)},n}(eui.Component);t.TeamCardItem=l,__reflect(l.prototype,"game.TeamCardItem");var u=function(e){function n(){var n=e.call(this)||this;return n.gongItemList=new Array,t.GameConstant.isFourPeople?n.skinName=new Tribute_DZ_Skin:n.skinName=new Tribute_DZSix_Skin,n.addListener(),n}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){n.Instance.removeListener(),this.m_Instance=null},n.prototype.showBtns=function(t){},n.prototype.setBtnsVisible=function(t){this._selectBtn.visible=t},Object.defineProperty(n.prototype,"CardList",{get:function(){return this.cardList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gongList",{get:function(){return this.gongItemList},enumerable:!0,configurable:!0}),n.prototype.removeGongAndRefresh=function(e){1==this.gongItemList.length&&t.OperateLayer.Instance.removeSelectCard(),this.gongItemList.remove(e)},n.prototype.resetGroup=function(){this.cardGroup.removeChildren(),this._selectBtn.visible=!1,this.gongItemList.clear(),this.cardId=0},Object.defineProperty(n.prototype,"cardSelectGroup",{get:function(){return this.cardGroup},enumerable:!0,configurable:!0}),n.prototype.updata=function(t){if(t){this.cardList=[],this.cardList=t;for(var e=0,n=t;e<n.length;e++){var a=n[e],i=new c(a);this.gongItemList.push(i),this.cardGroup.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)}}},n.prototype.onTouchTap=function(t){for(var e=t.currentTarget,n=0;n<this.cardGroup.numChildren;n++){var a=this.cardGroup.getChildAt(n);a.darken=!1}e.cardData&&(e.darken=!0,this.cardId=e.cardData)},n.prototype.kickPlayOperate=function(t){},n.prototype.addListener=function(){this._selectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this._selectBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.onClickTap=function(e){if(e.target==this._selectBtn){var n=void 0;if(1==this.gongItemList.length?n=this.gongItemList[0].cardData:this.cardId&&(n=this.cardId),!n)return void t.GameInfo.manage.showMildWarnShow("请选择一张牌！");var a=new Cmd.UserActionCmd_CS,i=new Cmd.Action,r=[],o=new Cmd.CardSetList;i.uid=uniLib.NetMgr.UID,i.op=Cmd.Operation.SelectCard,r.push(n),o.cardSet=r,i.cardSetList=o,a.act=i,t.PokerFunction.tcpSend(a)}t.SoundHand.Instance.playButtonClick()},n}(eui.Component);t.TriSelectCard=u,__reflect(u.prototype,"game.TriSelectCard");var c=function(e){function n(t){var n=e.call(this)||this;return n.m_darken=!1,t&&(n.m_cardId=t,n.skinName=new PlayItemSkin,n.dataChanged(t)),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onRemoveFromStage,n),n}return __extends(n,e),Object.defineProperty(n.prototype,"cardData",{get:function(){return this.m_cardId},enumerable:!0,configurable:!0}),n.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},n.prototype.onRemoveFromStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},n.prototype.onTouchTap=function(t){},Object.defineProperty(n.prototype,"darken",{get:function(){return this.m_darken},set:function(t){this.m_darken!=t&&(this.m_darken=t,this.darkenChanged(t))},enumerable:!0,configurable:!0}),n.prototype.darkenChanged=function(t){t?this.addDarken():this.removeDarken()},n.prototype.addDarken=function(){null==this.darkenImage&&(this.darkenImage=new egret.Bitmap(RES.getRes("Poker_dark"))),this.darkenImage.width=this.width,this.darkenImage.height=this.height,this.addChild(this.darkenImage)},n.prototype.removeDarken=function(){this.darkenImage&&this.darkenImage.parent&&this.removeChild(this.darkenImage)},n.prototype.dataChanged=function(e){this.imageSousrce.source=t.GameConstant.GetPokerTextureByCardId(e)},n}(eui.Component);t.GongCardItem=c,__reflect(c.prototype,"game.GongCardItem");var p=function(t){function e(){var e=t.call(this)||this;return e.skinName=new TimeButton_DZ_Skin,e.scaleX=e.scaleY=.8,e}return __extends(e,t),Object.defineProperty(e.prototype,"label",{set:function(t){null!=t&&"NaN"!=t&&(this.labelDisplay.text=t)},enumerable:!0,configurable:!0}),e}(eui.Component);t.TimerButton=p,__reflect(p.prototype,"game.TimerButton")}(game||(game={}));var game;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.start=function(){e.prototype.start.call(this),t.DataCache.gameInfo&&t.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!0),t.GameInfo.uiLayer=this.uiLayer,t.GameInfo.mainUILayer=this.topLayer,t.GameInfo.topLayer=this.mainUILayer,t.GameInfo.main=this.tipsLayer,t.GameInfo.uiLayer.name="uiLayer",t.GameInfo.mainUILayer.name="mainUILayer",t.GameInfo.topLayer.name="topLayer",t.GameInfo.main.name="tipsLayer",this.initPositionData(),t.GameViewConfig.mainMediatorName=uniLib.getQualifiedClassName(t.DZPokerMediator),t.MahJongFourFacede.getInstance().startUp(this),t.GameData.getInstance().ShortTalkArr=["又断线了，网络怎么这么差啊！","各位，真不好意思，我要离开一会","你的牌打得也忒好了！","下次咱们再玩吧！","不要走，决战到天亮！","快点吧，都等得我花都谢了！","李云龙：干什么干什么，眼睛瞪的跟牛蛋似的","李云龙：开炮","李云龙：我看你们谁敢动一个手指头","李云龙：打歪了","李云龙：真是个天才","李云龙：意大利炮呢","李云龙：我李云龙别的能耐没有，就会抢","李云龙：想想办法干他一炮","李云龙：谢谢你啦","李云龙：直接瞄准了轰"]},n.prototype.destroy=function(){e.prototype.destroy.call(this),t.MahJongFourFacede.getInstance().sendNotification(t.MahjongFourFacadeConst.DESTORY)},n.prototype.initPositionData=function(){this.width=t.DataCache.defaultWidth=uniLib.Global.screenWidth,this.height=t.DataCache.defaultHeight=uniLib.Global.screenHeight},n}(uniLib.GameScene);t.PokerGameScene=e,__reflect(e.prototype,"game.PokerGameScene")}(game||(game={}));var game;!function(t){var e=function(e){function n(n,a){var i=e.call(this)||this;return i.width=n,i.height=a,i._headMc=t.ResUtil.createBitmapByName("room_default_head_icon"),i.addChild(i._headMc),i._headMc.x=(i.width-i._headMc.width)/2,i._headMc.y=(i.height-i._headMc.height)/2,i._headBg=t.ResUtil.createBitmapByName("Room_HeadFrame"),i.addChild(i._headBg),i._headBg.x=(n-i._headBg.width)/2,i._headBg.y=(a-i._headBg.height)/2,i}return __extends(n,e),n.prototype.destory=function(){t.ResUtil.removeAllChildren(this),t.ResUtil.removeFromParent(this),this._headLoad&&(this._headLoad.destroy(),this._headLoad=null),this._headMc=null},Object.defineProperty(n.prototype,"headUrl",{set:function(e){return e?(this._headUrl=e,this._headLoad||(this._headLoad=new t.HeadLoader),void this._headLoad.load(this._headUrl,this.loaded,null,this)):void(this._headMc.texture=null)},enumerable:!0,configurable:!0}),n.prototype.setPlayerIconMask=function(t){var e=new eui.Rect;e.ellipseWidth=20,e.ellipseHeight=20,this.addChild(e),e.width=101,e.height=101,e.x=6,e.y=7,t.mask=e},n.prototype.loaded=function(t){this._headMc?this._headMc.bitmapData=t:(this._headMc=new egret.Bitmap(t),this.addChild(this._headMc)),this._headMc.width=this._headMc.height=110,this._headMc.x=(this.width-this._headMc.width)/2,this._headMc.y=(this.height-this._headMc.height)/2,this.setPlayerIconMask(this._headMc)},n}(egret.Sprite);t.PokerHead=e,__reflect(e.prototype,"game.PokerHead")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.m_seatSprites=new Array,t.addListen(),t}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.prototype.addListen=function(){t.RoomData.Instance.addSeatChanged.removeAll(),t.RoomData.Instance.delectSeatChanged.removeAll(),t.RoomData.Instance.addSeatChanged.add(this.addSeatSprite,this),t.RoomData.Instance.delectSeatChanged.add(this.delectSeatSprite,this)},n.prototype.removeListen=function(){},n.prototype.addSeatSprite=function(e){var n=new t.SeatSprite(e);this.m_seatSprites.push(n)},n.prototype.delectSeatSprite=function(t){var e=this.m_seatSprites.first(function(e){return e.seatData.seatId==t});e&&(e&&e.parent&&e.parent.removeChild(e),e.destroy(),this.m_seatSprites.removeFirst(function(t){return t==e}))},n.prototype.updateSign=function(){var e=!1,n=t.PokerFunction.MainSeatId;e=n&&n%2==0?!0:!1;for(var a=0,i=this.m_seatSprites;a<i.length;a++){var r=i[a],o=!1,s=r.seatData.seatId;o=s%2==0?!0:!1,e==o?r.userSprite.InfoGroup=!0:r.userSprite.InfoGroup=!1}},n.prototype.initSeatSprite=function(){for(var e=t.RoomData.Instance.seatList,n=0;n<e.length;n++)if(null!=e[n]){var a=new t.SeatSprite(e[n]);this.m_seatSprites.push(a),this.addChild(a);var i=t.GameConstant.SeatPosArr[n];a.x=i.x,a.y=i.y}},n.prototype.resetSeat=function(){for(var t=0;t<this.m_seatSprites.length;t++)this.m_seatSprites[t].resetUserSprite()},Object.defineProperty(n.prototype,"seatSprites",{get:function(){return this.m_seatSprites},enumerable:!0,configurable:!0}),n.prototype.addTeammateListener=function(){for(var e=0;e<this.m_seatSprites.length;e++)0!=this.m_seatSprites[e].clientNo&&t.GameConstant.getTeamType(this.m_seatSprites[e].clientNo)},n}(egret.DisplayObjectContainer);t.SeatLayer=e,__reflect(e.prototype,"game.SeatLayer")}(game||(game={}));var ShakeTool=function(){function t(){this.count=0,this.timer=new egret.Timer(1e3)}return Object.defineProperty(t,"Instance",{get:function(){return null==this.instance&&(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.shakeObj=function(t,e,n,a){this.target=t,this.initX=t.x,this.initY=t.y,this.maxDis=a,this.count=e*n,this.rate=n,this.timer.delay=1e3/n,this.timer.repeatCount=this.count,this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},t.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},999/this.rate)
},t.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this)},t.prototype.stop=function(){this.shakeComplete()},t}();__reflect(ShakeTool.prototype,"ShakeTool");var game;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new t),this.m_Instance},enumerable:!0,configurable:!0}),t.prototype.playCard=function(t,e,n){switch(e){case Cmd.CardSetType.CardSetType_TexasHighCard:this.playSingle(t,n);break;case Cmd.CardSetType.CardSetType_TexasOnePair:this.playDouble(t,n);break;case Cmd.CardSetType.CardSetType_TexasTwoPairs:this.playMultiple(t,n);break;case Cmd.CardSetType.CardSetType_TexasFlush:case Cmd.CardSetType.CardSetType_TexasThreeOfKind:case Cmd.CardSetType.CardSetType_TexasStraight:this.playLong(t);break;case Cmd.CardSetType.CardSetType_TexasFourOfKind:case Cmd.CardSetType.CardSetType_TexasFullHouse:var a=Math.floor(n[0]/100);21==a||20==a?this.playKingBomb(t):this.playBomb(t);break;case Cmd.CardSetType.CardSetType_TexasTwoPairs:this.playThree(t);break;case Cmd.CardSetType.CardSetType_TexasThreeOfKind:this.playThreeTakeOne(t);break;case Cmd.CardSetType.CardSetType_TexasFourOfKind:this.playTongHua(t);break;case 0:}},t.prototype.playDDZBg=function(){uniLib.SoundMgr.instance.playBgMusic(["DouDiZhu_Bg_mp3"])},t.prototype.playDDZWin=function(){uniLib.SoundMgr.instance.playSound("You_Win_mp3")},t.prototype.playDDZLose=function(){uniLib.SoundMgr.instance.playSound("You_Lose_mp3")},t.prototype.playReminded=function(){uniLib.SoundMgr.instance.playSound("Reminded_Myself_mp3")},t.prototype.playUser=function(){uniLib.SoundMgr.instance.playSound("User_AI_mp3")},t.prototype.playPass=function(t){var e=["DZ_Pass1_","DZ_Pass2_","DZ_Pass3_"],n=e.random()+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(n)},t.prototype.playYaSi=function(t){var e=["DZ_Yasi1_","DZ_Yasi2_","DZ_Yasi3_"],n=e.random()+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(n)},t.prototype.playButtonClick=function(){uniLib.SoundMgr.instance.playSound("ButtonClick_mp3")},t.prototype.playCardClick=function(){uniLib.SoundMgr.instance.playSound("Card_Click_mp3")},t.prototype.playCallLandlord=function(t,e){var n="";1==t&&(n+="CallLandlord_JDZ_"),2==t&&(n+="CallLandlord_BJDZ_"),3==t&&(n+="CallLandlord_QDZ_"),4==t&&(n+="CallLandlord_BQDZ_"),n+=this.getNameForGender(e),n+="_mp3",uniLib.SoundMgr.instance.playSound(n)},t.prototype.playSingle=function(t,e){var n="DZ_Card_Single_"+this.getNameForCardId(e[0])+"_"+this.getNameForGender(t)+"_mp3";"19"!=this.getNameForCardId(e[0])&&uniLib.SoundMgr.instance.playSound(n)},t.prototype.playDouble=function(t,e){var n="DZ_Card_Double_"+this.getNameForCardId(e[0])+"_"+this.getNameForGender(t)+"_mp3";"19"!=this.getNameForCardId(e[0])&&uniLib.SoundMgr.instance.playSound(n)},t.prototype.playStraightSingle=function(t){var e="DZ_Card_StraightSingle_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playStraightDouble=function(t){var e="DZ_Card_StraightDouble_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playMultiple=function(t,e){if(e&&e instanceof Array&&!(e.length<3)){var n;if(3==e.length){var a=Math.floor(e[0]/100);if(21==a)return void this.playThreeKing(t,!0);if(20==a)return void this.playThreeKing(t,!1);n="DZ_Card_Three_"+this.getNameForGender(t)+"_mp3"}else n="Card_"+this.getZhang(e)+"_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(n)}},t.prototype.getZhang=function(t){if(t&&t instanceof Array&&!(t.length<3)){var e=t.length,n="";switch(e){case 3:n="Three";break;case 4:n="Four";break;case 5:n="Five";break;case 6:n="Six";break;case 7:n="Seven";break;case 8:n="Eight";break;case 9:n="Nine";break;case 10:n="Ten";break;case 11:n="Eleven";break;case 12:n="Twelve";break;case 13:n="Thirteen";break;case 14:n="Fourteen";break;case 15:n="Fifteen";break;case 16:n="Sixteen";break;case 17:n="Seventeen";break;case 18:n="Eighteen";break;case 19:n="Nineteen";break;case 20:n="Twenty"}return n}},t.prototype.playLong=function(t){var e="long_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playThree=function(t){},t.prototype.playThreeTakeOne=function(t){var e="Card_Three_Take_One_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playTongHua=function(t){var e="tonghuashun_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playThreeTakeDouble=function(t){var e="Card_Three_Take_Double_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playPlane=function(t){var e="Card_Plane_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playFourTake2=function(t){var e="Card_Four_Take_2_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playFourTake2Double=function(t){var e="Card_Four_Take_2Double_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playBomb=function(t){var e="DZ_Card_Bomb_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playKingBomb=function(t){var e="DZ_Card_KingBomb_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(e)},t.prototype.playThreeKing=function(t,e){var n;n=e?"DZ_Card_ThreeKing1_"+this.getNameForGender(t)+"_mp3":"DZ_Card_ThreeKing2_"+this.getNameForGender(t)+"_mp3",uniLib.SoundMgr.instance.playSound(n)},t.prototype.playLast=function(t,e){var n="DZ_Card_Last_"+e+"_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(n)},t.prototype.playChat=function(t,e){var n="Chat_String"+e+"_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(n)},t.prototype.playPoint=function(t,e){var n="CallLandlord_Score"+e+"_"+this.getNameForGender(t)+"_mp3";uniLib.SoundMgr.instance.playSound(n)},t.prototype.playRedouble=function(t,e){var n;n=e?"Redouble_"+this.getNameForGender(t)+"_mp3":"No_Redouble_"+this.getNameForGender(t)+"_mp3",uniLib.SoundMgr.instance.playSound(n)},t.prototype.playOutCard=function(){uniLib.SoundMgr.instance.playSound("Out_Card_Table_mp3")},t.prototype.getNameForCardId=function(t){var e,n=table.TablePokerCard.instance().first(function(e){return e.thisId==t});return null!=n?(e=n.point+"",16==n.point?e="2":1==n.point?e="A":11==n.point?e="J":12==n.point?e="Q":13==n.point?e="K":14==n.point?e="A":20==n.point?e="Joker1":21==n.point&&(e="Joker2"),e):void 0},t.prototype.getNameForGender=function(t){return"男"==t?"M":"W"},t.prototype.getNameForCardType=function(t){switch(t){case Cmd.CardSetType.CardSetType_None:return"";case Cmd.CardSetType.CardSetType_Single:return"Single";case Cmd.CardSetType.CardSetType_Double:return"Double";case Cmd.CardSetType.CardSetType_StraightSingle:return"StraightSingle";case Cmd.CardSetType.CardSetType_StraightDouble:return"StraightDouble";case Cmd.CardSetType.CardSetType_ThreeWithX:return"Three";case Cmd.CardSetType.CardSetType_FourWithX:return"Four";case Cmd.CardSetType.CardSetType_Bomb:return"Bomb"}},t}();t.SoundHand=e,__reflect(e.prototype,"game.SoundHand")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new e),this.m_Instance},enumerable:!0,configurable:!0}),e.clearInstance=function(){this.m_Instance=null},e.prototype.initCardList=function(){this.CardList=[];for(var t=3;15>t;t++)for(var e=100*t,n=1;5>n;n++){var a=e+10*n;a+=1,this.CardList.push(a)}this.CardList.push(1611),this.CardList.push(1621),this.CardList.push(1631),this.CardList.push(1641),this.CardList.push(2051),this.CardList.push(2151)},e.prototype.initUser=function(){uniLib.NetMgr.UID=111111;var t={roomData:{seatList:[{handCardList:{},seatId:1,isReady:!1,role:{diamond:100,seatId:1,gender:"男",onlineState:0,nickName:"1401304",headUrl:"http://img.bwgame.com.cn/img/254.jpg",uid:uniLib.NetMgr.UID,points:0,ip:"36.47.160.35"},outCardList:{}},{handCardList:{},seatId:2,isReady:!0,role:{diamond:100,seatId:2,gender:"男",onlineState:0,nickName:"电脑",headUrl:"http://img.bwgame.com.cn/img/256.jpg",uid:1401306,points:0,ip:"36.47.160.35"},outCardList:{}},{handCardList:{},seatId:3,isReady:!0,role:{diamond:100,seatId:3,gender:"男",onlineState:0,nickName:"电脑",headUrl:"http://img.bwgame.com.cn/img/258.jpg",uid:1401308,points:0,ip:"36.47.160.35"},outCardList:{}}],roomId:"练习场",props:{}}};Cmd.OnRoomDataUpdateCmd_S(t)},e.prototype.deal=function(){for(var e=0,n=t.RoomData.Instance.seatList;e<n.length;e++){var a=n[e];a.clearHandCard()}t.RoomData.Instance.landlordUid=null,t.RoomData.Instance.startGame=!0;for(var i=this.CardList,r=function(t){var e=i.randomItems(17);e.sort(function(t,e){return e-t});for(var n=0,a=e;n<a.length;n++){var r=a[n];t.addHandCard(r)}i=i.filter(function(t){return!e.seek(function(e){return e==t})})},o=0,s=t.RoomData.Instance.seatList;o<s.length;o++){var a=s[o];r(a)}this.threeCard=i,GX.PokerEvent.Instance.dealCardAnimation.call(),egret.setTimeout(this.landlordRob,this,2550)},e.prototype.landlordRob=function(){for(var e=0,n=t.RoomData.Instance.seatList;e<n.length;e++){var a=n[e];if(a.user.uid!=uniLib.NetMgr.UID){var i=new Cmd.LandlordRobCmd_CS;i.uid=a.user.uid,i.yesOrNo=!1,Cmd.OnLandlordRobCmd_CS(i)}}var r=new t.RobLordOperateData;r.uid=uniLib.NetMgr.UID,r.endTime=Date.now()+3e4,t.RoomData.Instance.robLordOperate=r},e.prototype.roundResultCmd=function(e){var n=new Cmd.RoundResultCmd_S;n.resultList=[];for(var a=0,i=t.RoomData.Instance.seatList;a<i.length;a++){var r=i[a],o=new Cmd.GameObjectData,s=new Cmd.UserBriefInfo;s.headurl=r.user.headUrl,s.name=r.user.nickName,s.uid=r.user.uid,s.point=1e3,o.user=s,o.profit=0,o.multiple=0,o.point=1e3,n.resultList.push(o)}n.landlord=t.RoomData.Instance.landlordUid,n.winnerList=[e],Cmd.OnRoundResultCmd_S(n)},e.prototype.tcpSend=function(e){var n=this,a=uniLib.NetMgr.UID;if("Cmd.DissolveRoomRequestCmd_C"==e.GetType())Cmd.OnLeaveRoomCmd_CS(e);else if("Cmd.LeaveRoomCmd_CS"==e.GetType())Cmd.OnLeaveRoomCmd_CS(e);else if("Cmd.ReadyUpdateRoomCmd_CS"==e.GetType()){var i=e;i.uid=a,i.yesOrNo=!0,Cmd.OnReadyUpdateRoomCmd_CS(i);for(var r=0,o=t.RoomData.Instance.seatList;r<o.length;r++){var s=o[r];s.isReady=!0}this.deal()}else if("Cmd.PlayCardCmd_CS"==e.GetType()){var i=e;i.uid=a;var h=new t.CardAnalysis(i.cardList);if(i.cardList&&h.cardType==t.CardType.Error_Card)return;Cmd.OnPlayCardCmd_CS(i);var d=this.getCardTypeTime(i.cardList);if(0==t.PokerFunction.MainSeat.handCards.length)return void egret.setTimeout(function(){return n.roundResultCmd(a)},this,d);egret.setTimeout(this.playerAI,this,d)}else if("Cmd.LandlordRobCmd_CS"==e.GetType()){var i=e;if(i.yesOrNo){var l=new Cmd.LandlordRobCmd_CS;l.uid=a,l.yesOrNo=!0,Cmd.OnLandlordRobCmd_CS(l);var u=new Cmd.LandlordUpdateCmd_S;u.uid=a,u.threeCard=this.threeCard,Cmd.OnLandlordUpdateCmd_S(u);var c=new Cmd.NewOperateSeatCmd_S;c.seatId=1,c.endTime=Date.now()+3e4,egret.setTimeout(function(){return Cmd.OnNewOperateSeatCmd_S(c)},this,1e3)}else this.deal()}},e.prototype.playerAI=function(){var e=this,n=new Cmd.NewOperateSeatCmd_S;n.seatId=2,n.endTime=Date.now()+3e4,Cmd.OnNewOperateSeatCmd_S(n);var a=(uniLib.NetMgr.UID,t.RoomData.Instance.seatList,t.DDZAI.Instance.getCardOperableList(2)),i=null==a?null:a[0];egret.setTimeout(function(){var n=new Cmd.PlayCardCmd_CS;t.PokerFunction.GetUserInfoBySeatId(2)&&(n.uid=t.PokerFunction.GetUserInfoBySeatId(2).uid),t.DDZAI.Instance.isPlay?n.cardList=i:n.cardList=[],Cmd.OnPlayCardCmd_CS(n);var r=e.getCardTypeTime(n.cardList);return t.PokerFunction.GetSeatDataBySeatId(2)&&0==t.PokerFunction.GetSeatDataBySeatId(2).handCards.length?void egret.setTimeout(function(){return e.roundResultCmd(n.uid)},e,r):void egret.setTimeout(function(){var n=new Cmd.NewOperateSeatCmd_S;n.seatId=3,n.endTime=Date.now()+3e4,Cmd.OnNewOperateSeatCmd_S(n),a=t.DDZAI.Instance.getCardOperableList(3),i=null==a?null:a[0],r+=e.getCardTypeTime(i),egret.setTimeout(function(){var n=new Cmd.PlayCardCmd_CS;if(t.PokerFunction.GetUserInfoBySeatId(3)&&(n.uid=t.PokerFunction.GetUserInfoBySeatId(3).uid),t.DDZAI.Instance.isPlay?n.cardList=i:n.cardList=[],Cmd.OnPlayCardCmd_CS(n),t.PokerFunction.GetSeatDataBySeatId(3)&&0==t.PokerFunction.GetSeatDataBySeatId(3).handCards.length)return void egret.setTimeout(function(){return e.roundResultCmd(n.uid)},e,r);var a=new Cmd.NewOperateSeatCmd_S;a.seatId=1,a.endTime=Date.now()+3e4,egret.setTimeout(function(){return Cmd.OnNewOperateSeatCmd_S(a)},e,r)},e,2e3)},e,r)},this,2e3)},e.prototype.getCardTypeTime=function(e){var n=new t.CardAnalysis(e).cardType;switch(n){case t.CardType.Error_Card:return 0;case t.CardType.Single_Card:case t.CardType.Double_Card:case t.CardType.Lian_Card:return 500;default:return 1500}},e}();t.StandAlone=e,__reflect(e.prototype,"game.StandAlone")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.leftCardRecrods=[],t.skinName=new CardNotePanel_DZ_Skin,t.addListener(),t}return __extends(n,e),Object.defineProperty(n,"Instatnce",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){n._instance&&(n._instance=null)},n.prototype.getLabel=function(t){return this["label_"+t]},n.prototype.addListener=function(){t.RoomData.Instance.leftCardChangeHandel.add(this.leftCardChanged,this),this.leftCardChanged(t.RoomData.Instance.leftCardList),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandel,this)},n.prototype.removeListener=function(){t.RoomData.Instance.leftCardChangeHandel.remove(this.leftCardChanged),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandel,this)},n.prototype.clickHandel=function(t){this.parent&&this.parent.removeChild(this),this.removeListener(),n.clearInstance()},n.prototype.leftCardChanged=function(t){if(t=t&&t instanceof Array?t:[],!(t.length<1)){this.visible=!0;for(var e=function(e){var n=a.getLabel(e),i=t.filter(function(t){return Math.floor(t/100)==e});n.text=i&&0!=i.length?i.length+"":""},a=this,i=0,r=n.CardPoint;i<r.length;i++){var o=r[i];e(o)}}},n.prototype.showRecord=function(){if(0!=this.leftCardRecrods.length)for(var t=0,e=this.leftCardRecrods;t<e.length;t++){var n=e[t],a=n.point;this.getLabel(a).text=n.count+""}},n}(eui.Component);e.CardPoint=[3,4,5,6,7,8,9,10,11,12,13,14,16,20,21],t.CardNotePanel=e,__reflect(e.prototype,"game.CardNotePanel");var n=function(){function t(t,e){this._point=t,this._count=e}return Object.defineProperty(t.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t},enumerable:!0,configurable:!0}),t}();__reflect(n.prototype,"CardRecordItem")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._isClick=!0,t.skinName=new Chat_2d5_new_Skin,t.initUI(),t}return __extends(n,e),n.prototype.initUI=function(){for(var e=1;42>=e;e++){var n=new eui.RadioButton;n.skinName=new FaceButton_2d5_new_Skin,n.iconDisplay.texture=RES.getRes("face_DDZ"+e),n.groupName="face",n.value=e,this.faceGroup.addChild(n)}for(var e=0;16>e;e++){var a=new eui.RadioButton;a.skinName=new ChatRadioButton_2d5_new_Skin,a.groupName="chat",a.value=e,a.label=e+1+"."+t.GameData.getInstance().ShortTalkArr[e],a.y=56*e,this.chatGroup.addChild(a)}this.touchEnabled=!1,this.chatScroller.visible=!0,this.btnGroup=[],this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.faceGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFaceGroupTap,this),this.chatGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroupTap,this),this.textField.name="short_input",this.textField.size=28,this.textField.type=egret.TextFieldType.INPUT,this.textField.text="请输入聊天内容",this.touchEnabled=!0,this.textField.addEventListener(egret.FocusEvent.FOCUS_IN,this.onTextFieldFocusIn,this),this.textField.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),this.sendBtn.name="short_send",this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendClickHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},n.prototype.onChatGroupTap=function(e){var n=this;if(!this._isClick)return void t.PublicManage.getInstance().showMildWarnShow("您的操作太频繁了！请休息一下吧");var a=e.target;if(a instanceof eui.RadioButton){var i="2"+a.value,r=new Cmd.CommonChat_C;r.words=i,t.PokerFunction.tcpSend(r),t.PopupManager.removePopUp(this),this._isClick=!1,uniLib.SetUniEventTimeout(this,function(){n._isClick=!0},3e3,1,this)}},n.prototype.onFaceGroupTap=function(e){var n=this;if(!this._isClick)return void t.PublicManage.getInstance().showMildWarnShow("您的操作太频繁了！请休息一下吧");var a=e.target;if(a instanceof eui.RadioButton){var i=new Cmd.CommonChat_C,r="1"+a.value;i.words=r,t.PokerFunction.tcpSend(i),t.PopupManager.removePopUp(this),this._isClick=!1,uniLib.SetUniEventTimeout(this,function(){n._isClick=!0},3e3,1,this)}},n.prototype.onTouchTap=function(t){t.target==this.textField&&t.target.setFocus()},n.prototype.sendClickHandler=function(e){var n=this.textField.text;if(-1!=n.indexOf("请输入聊天内容"))return this.textField.text="",void(this._isClick=!0);if(""==n)return this._isClick=!0,void t.PublicManage.getInstance().showMildWarnShow("聊天内容不能为空");var a=new Cmd.CommonChat_C;a.words=this.textField.text,t.PokerFunction.tcpSend(a),this.textField.text="",t.PopupManager.removePopUp(this)},n.prototype.onTextFieldFocusIn=function(t){t.target.setFocus(),-1!=this.textField.text.indexOf("请输入聊天内容")&&(this.textField.text="")},n.prototype.onTextFieldFocusOut=function(t){""==this.textField.text&&(this.textField.text="请输入聊天内容")},n.prototype.btnClickHandler=function(t){var e=t.currentTarget.name;switch(e){case"short_chat":this.initBarStatus(),this.btnGroup[0].select=!0,this._yetOpen&&(this._yetOpen.visible=!1);break;case"short_record":this.initBarStatus(),this.btnGroup[1].select=!0,this.createRecordYetOpen()}},n.prototype.createRecordYetOpen=function(){this._yetOpen||(this._yetOpen=t.ResUtil.createTextFeild(1456961,egret.HorizontalAlign.CENTER,"此功能暂未开放",30),this.addChild(this._yetOpen),this._yetOpen.x=540,this._yetOpen.y=280),this._yetOpen.visible=!0},n.prototype.createBarBtn=function(e,n,a,i,r,o){var s=new t.ToggleButton(e,n,"",a);s.select=i,s.x=r,s.y=o,this.addChild(s),this.btnGroup.push(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClickHandler,this)},n.prototype.initBarStatus=function(){for(var t=0;t<this.btnGroup.length;t++){var e=this.btnGroup[t];e.select=!1}},n.prototype.destory=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this);for(var t=0;t<this.btnGroup.length;t++){var e=this.btnGroup[t];e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClickHandler,this)}this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.faceGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFaceGroupTap,this),this.chatGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroupTap,this),this.textField.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onTextFieldFocusIn,this),this.textField.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendClickHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.sendBtn=null,uniLib.DisplayUtils.removeAllChildren(this._content),uniLib.DisplayUtils.removeFromParent(this._content),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n.prototype.setRecordData=function(t){},n.prototype.onClose=function(e){this.visible=!1,t.PopupManager.removePopUp(this)},n}(eui.Component);t.ChatPanel=e,__reflect(e.prototype,"game.ChatPanel")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.init(),t}return __extends(n,e),n.prototype.init=function(){this._facePanel=[];for(var e=t.RoomData.Instance.maxuserNbr,n=0;e>n;n++){var a=new egret.Sprite;this._facePanel.push(a),this.addChild(a)}this._quickTalkPanel=[];for(var n=0;e>n;n++){var a=new egret.Sprite;this._quickTalkPanel.push(a),this.addChild(a)}this._talkPanel=[];for(var n=0;e>n;n++){var a=new egret.Sprite;this._talkPanel.push(a),this.addChild(a)}},n.prototype.showCommonChat=function(e,n){var a=t.GameConstant.GetSeatSpriteByUid(e);if(a&&a.uid){var i=a.clientNo,r=a.seatData.user?a.seatData.user.gender:null,o=Number(n.substr(1,n.length-1));if(t.GameConstant.isFourPeople)switch(i){case 0:case 2:case 3:this._quickTalkPanel[i].x=t.GameConstant.SeatPosArr[i].x+115,this._quickTalkPanel[i].y=t.GameConstant.SeatPosArr[i].y,31>=o?(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x+120,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y):(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y-20);break;case 1:this._quickTalkPanel[i].x=t.GameConstant.SeatPosArr[i].x-190,this._quickTalkPanel[i].y=t.GameConstant.SeatPosArr[i].y,31>=o?(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x-150,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y):(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y-20)}else switch(i){case 0:case 3:case 4:case 5:this._quickTalkPanel[i].x=t.GameConstant.SeatPosArr[i].x+115,this._quickTalkPanel[i].y=t.GameConstant.SeatPosArr[i].y,31>=o?(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x+120,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y):(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y-20);break;case 1:case 2:this._quickTalkPanel[i].x=t.GameConstant.SeatPosArr[i].x-190,this._quickTalkPanel[i].y=t.GameConstant.SeatPosArr[i].y,31>=o?(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x-105,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y):(this._facePanel[i].x=t.GameConstant.SeatPosArr[i].x,this._facePanel[i].y=t.GameConstant.SeatPosArr[i].y-20)}var s;if("1"==n.charAt(0)){s=n.substr(1,n.length-1);var h=uniLib.DisplayUtils.createMovieClicp("face_"+s+"_new");this._facePanel[i].addChild(h),31>=o?(h.scaleX=1,h.scaleY=1):(h.scaleX=.7,h.scaleY=.7),h.play(-1),GX.GameLayerManager.addUIToEffect(h),31>=o?t.Timer.setTimeout(function(){h.stop(),GX.GameLayerManager.removeUI(h)},this,2e3):t.Timer.setTimeout(function(){h.stop(),GX.GameLayerManager.removeUI(h)},this,2500)}else if("2"==n.charAt(0)){s=n.substr(1,n.length-1),t.SoundHand.Instance.playChat(r,s);var d=this._quickTalkPanel[i];if(!d)return;this.creatChatPop(i,t.GameData.getInstance().ShortTalkArr[s],d),egret.Tween.get(d).wait(3e3).call(this.quickTalkCompelete,this,[d])}else{var d=this._quickTalkPanel[i];if(!d)return;var l=["轰他","我来","管他"];if(1!=t.RoomInfo.getInstance().video&&-1!=l.indexOf(n)){var u=!1,c=!1,p=t.PokerFunction.MainSeatId;u=p&&p%2==0?!0:!1;var m=t.GameConstant.GetSeatSpriteByUid(e).seatData.seatId;if(c=m&&m%2==0?!0:!1,u!=c)return}this.showCommonTalk(e,n),egret.Tween.get(this._quickTalkPanel[i]).wait(3e3).call(this.quickTalkCompelete,this,[d])}}},n.prototype.showCommonTalk=function(e,n){var a=t.GameConstant.GetClientNoByUid(e);if(!(0>a||a>5)){var i=this._talkPanel[a],r=t.GameConstant.SeatPosArr[a];if(i){if(t.GameConstant.isFourPeople)switch(a){case 0:case 2:case 3:i.x=r.x+115,i.y=r.y;break;case 1:i.x=r.x-190,i.y=r.y}else switch(a){case 0:case 3:case 4:case 5:i.x=r.x+115,i.y=r.y;break;case 1:case 2:i.x=r.x-190,i.y=r.y}this.creatChatPop(a,n,i),egret.Tween.get(i).wait(3e3).call(this.talkCompelete,this,[i,a])}}},n.prototype.creatChatPop=function(e,n,a){if(a){var i=t.ResUtil.createBitmapByName("chat_pop_DDZ");i.scale9Grid=new egret.Rectangle(28,33,13,5),i.width=245,a.addChild(i);var r=t.ResUtil.createTextFeild(1456961,egret.HorizontalAlign.LEFT,"",28,35,10,210,!1,4);r.text=n,a.addChild(r),i.height=10+r.height+20,t.GameConstant.isFourPeople?1==e?(i.scaleX=-1,i.x=180,r.x=-45):r.x-=10:1==e||2==e?(i.scaleX=-1,i.x=180,r.x=-45):r.x-=10}},n.prototype.talkCompelete=function(t,e){t&&egret.Tween.removeTweens(t),uniLib.DisplayUtils.removeAllChildren(this._talkPanel[e]),this.parent&&this.parent.removeChild(this)},n.prototype.showCompelete=function(e,n){e&&egret.Tween.removeTweens(e),uniLib.DisplayUtils.removeAllChildren(this._facePanel[n]),t.GameInfo.topLayer.removeChild(this)},n.prototype.quickTalkCompelete=function(e,n){e&&egret.Tween.removeTweens(e),uniLib.DisplayUtils.removeAllChildren(e),t.GameInfo.topLayer.removeChild(this)},n}(eui.Component);t.ChatPop=e,__reflect(e.prototype,"game.ChatPop")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.protocolType=1,t.skinName=new DissPanel_2d5_new_Skin,t.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onAgreeHandler,t),t.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onRefuse,t),t}return __extends(n,e),n.prototype.updataTimer=function(){this.time=Math.floor(this.endTime/1e3-t.GameTime.localNow()/1e3),this.time<0&&(this.time=0,egret.clearInterval(this.timer)),this._timeTxt.text=this.time+""},n.prototype.setData=function(e){t.GameConstant.isFourPeople||(this.playerListGroup.verticalCenter=2),this.protocolType=1,this.playerListGroup.removeChildren(),null!=e.leftSec?this.endTime=t.GameTime.localNow()+1e3*e.leftSec:this.endTime=t.GameTime.localNow()+(e.endTime-t.GameTime.serverNow()),this.time=Math.floor(this.endTime/1e3-t.GameTime.localNow()/1e3),e.sponsor&&(this.info.textFlow=[{text:"玩家",style:{textColor:8345395}},{text:"<"+e.sponsor+">",style:{textColor:14638603}},{text:"申请解散房间是否同意？",style:{textColor:8345395}},{text:"\n(超过"+this.time+"s未作出选择，则默认同意)",style:{textColor:8345395,size:24}}]),this.playerList=[];for(var n=e.voterList,a=0;a<n.length;a++)if(n[a]){var i=new eui.ItemRenderer;i.skinName=new DissmissPanelListItem_2d5_new_Skin,i.nameLabel.text="<"+n[a].name.slice(0,5)+">",i.stateLabel.text="等待选择",1==n[a].yesOrWait&&(i.stateLabel.text="已同意",i.stateLabel.textColor=3450744),this.playerListGroup.addChild(i);var r={};r.id=n[a].uid,r.item=i,this.playerList.push(r),n[a].uid==uniLib.NetMgr.UID&&1==n[a].yesOrWait&&this.enableBtns()}this.updataTimer(),egret.clearInterval(this.timer),this.timer=egret.setInterval(this.updataTimer,this,1e3)},n.prototype.enableBtns=function(){this.yesBtn.currentState="disabled",this.yesBtn.horizontalCenter="0",this.noBtn.visible=!1},n.prototype.updateStatus=function(t,e){for(var n=0,a=this.playerList;n<a.length;n++){var i=a[n];1==t&&i.id==e&&(i.item.stateLabel.text="已同意",i.item.stateLabel.textColor=3450744)}uniLib.UserInfo.uid==e&&this.enableBtns()},n.prototype.onAgreeHandler=function(e){if(2==this.protocolType){var n=new Cmd.ReplyDissolveRoom_C;return n.isAgree=1,void t.PokerFunction.tcpSend(n)}var a=new Cmd.DissolveRoomReturnCmd_C;a.yesOrNo=!0,t.PokerFunction.tcpSend(a)},n.prototype.onRefuse=function(e){if(2==this.protocolType){var n=new Cmd.ReplyDissolveRoom_C;return n.isAgree=0,void t.PokerFunction.tcpSend(n)}var a=new Cmd.DissolveRoomReturnCmd_C;a.yesOrNo=!1,t.PokerFunction.tcpSend(a)},n.prototype.destory=function(){this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgreeHandler,this),this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefuse,this),this.info=null,this._timeTxt=null},n}(eui.Component);t.DismissPanel=e,__reflect(e.prototype,"game.DismissPanel")}(game||(game={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function a(a){e.call(n,a,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?a(i):RES.getResAsync(t,a,this)}else RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var game;!function(t){var e=function(e){function a(){var n=e.call(this)||this;return t.GameConstant.isRankMode?n.skinName=new TotalResultG_DZ_Skin:n.skinName=new TotalResultS_DZ_Skin,n.init(),n}return __extends(a,e),a.prototype.init=function(){this.reasonLabel.visible=!1,this._winList.itemRenderer=n,this._loseList.itemRenderer=n},a.prototype.adaptationWidth=function(){e.prototype.adaptationWidth.call(this)},a.prototype.setData=function(e){e&&(t.GameConstant.isRankMode?this.resetGuo(e):this.resetScore(e))},a.prototype.share=function(){var t=new uniLib.WXShareVo;t.shareWay=0;var e=new egret.Bitmap(uniLib.DisplayUtils.catchScreenToTex(this,new egret.Rectangle(0,0,this.width,this.height),.6));t.shareImageData=uniLib.DisplayUtils.catchScreen(e,new egret.Rectangle(0,0,this.width,this.height)),MJLobby.MJLobbyData.getInstance().hasXianLiao?uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,t,!1):uniLib.ZQGameSdk.share(t,null,this)},a.prototype.resetScore=function(e){e.reason?(this.reasonLabel.visible=!0,this.reasonLabel.text=e.reason):this.reasonLabel.visible=!1;var n=e.gameNum,a=new eui.ArrayCollection,i=new eui.ArrayCollection;e.recordList.sort(function(t,e){return e.profitSum-t.profitSum});var r=!1,o=e.recordList.filter(function(t){return 0==t.profitSum});if((2==o.length||4==o.length||6==o.length)&&(r=!0),r)for(var s=!1,h=e.recordList.length/2-1,d=0;d<e.recordList.length;d++){var l=e.recordList[d];s=l.profitSum>0?!0:!1,d>h?i.addItem({gameNum:n,user:l.user,score:l.profitSum,isWin:s}):a.addItem({gameNum:n,user:l.user,score:l.profitSum,isWin:s})}else for(var u=0,d=0;d<e.recordList.length;d++){var l=e.recordList[d],c=(t.RoomData.Instance.ownerId==l.user.uid?!0:!1,l.profitSum>0?!0:!1);c?(u++,1==u?a.addItem({gameNum:n,user:l.user,score:l.profitSum,isWin:c,rank:1,isWinner:!0}):2==u?a.addItem({gameNum:n,user:l.user,score:l.profitSum,isWin:c,rank:2,isWinner:!1}):3==u&&a.addItem({gameNum:n,user:l.user,score:l.profitSum,isWin:c,rank:3,isWinner:!1})):i.addItem({gameNum:n,user:l.user,score:l.profitSum,isWin:c})}this._winList.dataProvider=a,this._loseList.dataProvider=i;var p=new Date(Date.now()),m=p.getUTCFullYear(),g=p.getUTCMonth()+1,C=p.getUTCDate(),f=p.getHours()>=10?p.getHours():"0"+p.getHours(),y=p.getMinutes()>=10?p.getMinutes():"0"+p.getMinutes();p.getSeconds()>=10?p.getSeconds():"0"+p.getSeconds();this._datatime.text=m+"."+g+"."+C+"   "+f+":"+y},a.prototype.resetGuo=function(e){var n=e.recordList;if(n||e.recordList instanceof Array){e.reason?(this.reasonLabel.visible=!0,this.reasonLabel.text=e.reason):this.reasonLabel.visible=!1;var a=e.gameNum,i=new eui.ArrayCollection,r=new eui.ArrayCollection,o=this.checkIsPing(e.recordList);if(o)for(var s=t.PokerFunction.MainSeatId,h=s%2==0?!0:!1,d=e.recordList[0].totalInfo.first(function(t){return 9==t.honor}),l=0;l<e.recordList.length;l++){var u=e.recordList[l],c=u.totalInfo,p=t.GameView.Instance.bottomPoint?!0:!1,m=u.profitSum?u.profitSum:0,g=t.GameConstant.GetSeatSpriteByUid(u.user.uid).seatData.seatId,C=g%2==0?!0:!1;p?d?h==C?i.addItem({gameNum:a,user:u.user,score:m,isWin:!0}):r.addItem({gameNum:a,user:u.user,score:m,isWin:!0}):h==C?i.addItem({gameNum:a,user:u.user,score:m,isWin:!1}):r.addItem({gameNum:a,user:u.user,score:m,isWin:!1}):d?h==C?i.addItem({gameNum:a,user:u.user,isWin:!0}):r.addItem({gameNum:a,user:u.user,isWin:!0}):h==C?i.addItem({gameNum:a,user:u.user,isWin:!1}):r.addItem({gameNum:a,user:u.user,isWin:!1})}else for(var l=0;l<e.recordList.length;l++){for(var u=e.recordList[l],c=u.totalInfo,f=!1,p=t.GameView.Instance.bottomPoint?!0:!1,m=u.profitSum?u.profitSum:0,y=0,v=c;y<v.length;y++){var b=v[y];if(b.honor&&9==b.honor){f=!0;break}}f?p?i.addItem({gameNum:a,user:u.user,score:m,isWin:f}):i.addItem({gameNum:a,user:u.user,isWin:f}):p?r.addItem({gameNum:a,user:u.user,score:m,isWin:f}):r.addItem({gameNum:a,user:u.user,isWin:f})}this._winList.dataProvider=i,this._loseList.dataProvider=r}},a.prototype.checkIsPing=function(t){var e=t.length,n=0,a=!1,i=t[0].totalInfo.first(function(t){return 9==t.honor});if(i){for(var r=0,o=t;r<o.length;r++){var s=o[r],h=s.totalInfo,d=h.first(function(t){return 9==t.honor
});d&&n++}a=e==n?!0:!1}else{for(var l=0,u=t;l<u.length;l++){var s=u[l],h=s.totalInfo,d=h.first(function(t){return 9==t.honor});d||n++}a=e==n?!0:!1}return a},a.prototype.oneMoreAgain=function(){t.GameInfo.topLayer.removeChild(this),t.GameView.exitGame(),uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"game_request_continue")},a.prototype.addUIListener=function(){this._shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.share,this),this.playAgainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oneMoreAgain,this),this._backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackHandler,this)},a.prototype.onBackHandler=function(){t.GameInfo.topLayer.removeChild(this),t.GameView.exitGame()},a.prototype.removeUIListener=function(){this._shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.share,this),this.playAgainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oneMoreAgain,this),this._backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackHandler,this)},a.prototype.destory=function(){this._shareBtn=null,this._backBtn=null,this._datatime=null,this.reasonLabel&&(this.reasonLabel=null),this._itemNode.numChildren&&uniLib.DisplayUtils.removeAllChildren(this._itemNode),this._itemNode=null},a}(t.EuiPanel);t.GameOverPanel=e,__reflect(e.prototype,"game.GameOverPanel");var n=function(e){function n(){var n=e.call(this)||this;return t.GameConstant.isRankMode?n.skinName=new TotalItemSkinG_DZ_Skin:n.skinName=new TotalItemSkinS_DZ_Skin,n.init(),n}return __extends(n,e),n.prototype.init=function(){},n.prototype.dataChanged=function(){var e=this.data,n=e.user;if(n&&(this._username.text=n.name+"",this._uid.text=n.uid+"",this._headmc.source=n.headurl),t.GameConstant.isRankMode){var a=e.isWin;if(this.resultType.source=a?"total_wintitle":"total_losetitle",e.score)if(this.winBitMapLabel.visible=!0,this.winBitMapLabel.font=a?"game_win_fnt":"game_lose_fnt",e.score>=1e4||e.score<=-1e4){var i=(e.score/1e4).toFixed(1);this.winBitMapLabel.text=i+"万"}else this.winBitMapLabel.text=e.score+"";else this.winBitMapLabel.visible=!1}else{this.rankIcon.visible=this.winner.visible=!1;var a=e.isWin;this.winBitMapLabel.font=a?"game_win_fnt":"game_lose_fnt",this.winBitMapLabel.text=""+e.score==null?"":e.score;var r=e.rank;1==r?(this.rankIcon.visible=!0,this.rankIcon.source="total_resultfirst",this.winner.visible=!0):2==r?(this.rankIcon.visible=!0,this.rankIcon.source="total_resultsecond",this.winner.visible=!1):3==r&&(this.rankIcon.visible=!0,this.rankIcon.source="total_resultthird",this.winner.visible=!1)}},n}(eui.ItemRenderer);t.TotalItemSkin=n,__reflect(n.prototype,"game.TotalItemSkin")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._maxNum=0,t.tableClickTime=0,t.isTribute=0,t._count=0,t.skinName=new GameView_DZ_Skin,t.initUI(),t}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){this.m_Instance=null},n.prototype.destroy=function(){this.removeHelp(),this.removeEventTimer(),egret.clearInterval(this.timer)},n.prototype.showTime=function(){egret.clearInterval(this.timer),this.updataTime(),this.timer=egret.setInterval(this.updataTime,this,1e4)},n.prototype.setBtnTouch=function(t){this.terminationButton.touchEnabled=!0,this.spButton.touchEnabled=!0,this.hzButton.touchEnabled=!0},n.prototype.updataTime=function(){var t=new Date(Date.now()),e=t.getHours()>=10?t.getHours():"0"+t.getHours(),n=t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes();this.timeNowLabel.text=e+":"+n,uniLib.ZQGameSdk.getNetStateType(),uniLib.ZQGameSdk.getBatteryPer()},Object.defineProperty(n.prototype,"VoiceBtn",{get:function(){return this.voiceBtn},set:function(t){this.voiceBtn=t},enumerable:!0,configurable:!0}),n.prototype.adaptationWidth=function(){e.prototype.adaptationWidth.call(this)},n.prototype.addUIListener=function(){t.RoomData.Instance.maxuserNbrChanged.add(this.maxnumchanged,this),this.readyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.dissRoomButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.backLobbyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.tableclothImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.shareButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.inviteFBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.inviteQQFBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.inviteWeChatFBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.gameStartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.chatButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.lookButton.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLookTable,this),this.lookButton.addEventListener(egret.TouchEvent.TOUCH_END,this.onLookTable,this),this.selectCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.noteCardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.addEventListener(uniLib.ZqEvent.NATIVE_TO_EGERET,this.onNativeMessage,this),GX.PokerEvent.Instance.dealCardEnd.add(this.dealCardFinish,this),GX.PokerEvent.Instance.rankUpdateMulticast.add(this.playRankChanged,this),GX.PokerEvent.Instance.UserRecommendCardEvent.add(this.tipPlayCard,this),this.gpsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),t.RoomData.Instance.roomIdChanged.add(this.roomIdChanged,this),t.RoomData.Instance.inningsChanged.add(this.ShowNumberOfGame,this),uniLib.Global.addEventListener(uniLib.ZqEvent.EVENT_L2G,this.onMoon,this),t.RoomData.Instance.startGameChanged.add(this.startGameChanged,this),t.RoomData.Instance.landlordChanged.add(this.landlordChanged,this),GX.PokerEvent.Instance.ShowRandomCard.add(this.oneCardChanged,this),t.RoomData.Instance.operateChanged.add(this.operateChanged,this),t.RoomData.Instance.robLordOperateChanged.add(this.robLordOperateChanged,this),t.RoomData.Instance.roomTypeChange.add(this.roomTypeChange,this),t.RoomData.Instance.pointBaseChanged.add(this.pointBaseChanged,this),t.RoomData.Instance.kickOperateChanged.add(this.kickOperateChange,this),t.RoomData.Instance.roomLevelChanged.add(this.roomLevelChangeHandle,this),t.RoomData.Instance.bottomPointChange.add(this.bottomPointChange,this),t.RoomData.Instance.matchidChanged.add(this.matchIdChange,this),uniLib.Global.addEventListener(uniLib.ZqEvent.EVENT_L2G,this.eventInfoChangeHandle,this),GX.PokerEvent.Instance.reconnectOpSeatList.add(this.reconnectTribute,this),GX.PokerEvent.Instance.reconnectSelectCardList.add(this.updateSelectCard,this),GX.PokerEvent.Instance.bottomCardUpdate.add(this.setbottomCard,this),GX.PokerEvent.Instance.reconnectLevelList.add(this.reconnectRank,this),GX.PokerEvent.Instance.rankListMulticast.add(this.reconnectYouImage,this),GX.PokerEvent.Instance.roomDataUpdateEvent.add(this.updateRoomDate,this),this.changeSeatBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.changeSeatBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.changeSeatBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),t.Action.playerChangeTeamEvent.add(this.playerChangeTeam,this),t.Action.pickOutCardEvent.add(this.pickOutCard,this),this.qqhButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.hongicon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickQ,this),this.woicon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickQ,this),this.guanicon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickQ,this)},n.prototype.removeUIListener=function(){t.RoomData.Instance.maxuserNbrChanged.remove(this.maxnumchanged),this.readyButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.dissRoomButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.backLobbyButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.tableclothImage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.shareButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.inviteFBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.inviteQQFBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.inviteWeChatFBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.gameStartBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.chatButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.lookButton.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLookTable,this),this.lookButton.removeEventListener(egret.TouchEvent.TOUCH_END,this.onLookTable,this),this.selectCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.noteCardBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.terminationButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.hzButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.spButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.NATIVE_TO_EGERET,this.onNativeMessage,this),t.RoomData.Instance.landlordChanged.remove(this.landlordChanged,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.EVENT_L2G,this.onMoon,this),uniLib.Global.removeEventListener(t.UIEventConsts.EXCHANGE_DESK,this.onMoon,this),t.RoomData.Instance.bottomPointChange.remove(this.bottomPointChange,this),t.RoomData.Instance.matchidChanged.remove(this.matchIdChange,this),this.gpsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),GX.PokerEvent.Instance.dealCardEnd.remove(this.dealCardFinish,this),GX.PokerEvent.Instance.ShowRandomCard.remove(this.oneCardChanged,this),GX.PokerEvent.Instance.rankUpdateMulticast.remove(this.playRankChanged,this),GX.PokerEvent.Instance.reconnectOpSeatList.remove(this.reconnectTribute,this),GX.PokerEvent.Instance.reconnectSelectCardList.remove(this.updateSelectCard,this),GX.PokerEvent.Instance.bottomCardUpdate.remove(this.setbottomCard,this),GX.PokerEvent.Instance.reconnectLevelList.remove(this.reconnectRank,this),GX.PokerEvent.Instance.rankListMulticast.remove(this.reconnectYouImage,this),GX.PokerEvent.Instance.roomDataUpdateEvent.remove(this.updateRoomDate),this.changeSeatBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.changeSeatBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.changeSeatBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.sixchangeSeatBtn4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),t.Action.playerChangeTeamEvent.remove(this.playerChangeTeam,this),t.Action.pickOutCardEvent.remove(this.pickOutCard,this),t.RoomData.Instance.pointBaseChanged.remove(this.pointBaseChanged,this),this.qqhButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.hongicon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickQ,this),this.woicon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickQ,this),this.guanicon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickQ,this)},Object.defineProperty(n.prototype,"maxNum",{get:function(){return this._maxNum},enumerable:!0,configurable:!0}),n.prototype.maxnumchanged=function(t){this._maxNum=t},Object.defineProperty(n.prototype,"playLabels",{get:function(){return this.playLabel},enumerable:!0,configurable:!0}),n.prototype.initUI=function(){this.addChild(t.SeatLayer.Instance),this.addChild(t.CardLayer.Instance),t.SeatLayer.Instance.initSeatSprite(),this.addChild(t.OperateLayer.Instance),this.showEnterButtons(),this.updataReadyButton(!1),this.checkTeam(),t.GameInfo.topLayer.addChild(t.MenuPanel.Instance),this.removeChild(this.qqGroup),t.GameInfo.topLayer.addChild(this.qqGroup),this.qqGroup.x=uniLib.Global.screenWidth-132,this.qqGroup.y=uniLib.Global.screenHeight-192,t.MenuPanel.Instance.x=uniLib.Global.screenWidth-380,t.MenuPanel.Instance.y=-20;var e=new t.VoiceChat;e.updateBtnRes(["NDvoice_btn1","NDvoice_btn2"]),t.GameInfo.uiLayer.addChild(e),t.GameInfo.topLayer.addChild(t.Ping.instance),t.Ping.instance.x=45,t.Ping.instance.y=107;var n=[65280,16771584,14423100];t.Ping.instance.setPingTextColorList(n),t.Ping.instance.setPingPos(this.wifiOrDataImage.x-110,this.wifiOrDataImage.y),this.showTime(),"true"==uniLib.BrowersUtils.GetRequest("debug")?this.selectCard.visible=!0:this.selectCard.visible=!1,0!=uniLib.Global.is_sandbox&&(this.gpsBtn.visible=!1,this.removeChild(this.shareButton)),this.signalLabel.visible=!1,this.showVersion(),this.showVideoPanel(),this.showEventInfo(),this.updateButton(),this.updateSpButton(!0),this.suspendPrompt.visible=!1,"blue"!=uniLib.Utils.getLocalStorage("tabelMode")&&uniLib.Utils.getLocalStorage("tabelMode")?(this.tableclothImage.source="bg_desk_1_jpg",t.RoomInfo.getInstance().tableclothMode="green"):(this.tableclothImage.source="bg_desk_2_jpg",t.RoomInfo.getInstance().tableclothMode="blue")},n.prototype.eventInfoChangeHandle=function(t){"EVENT_INFO"==t.param&&this.showEventInfo()},n.prototype.onNativeMessage=function(e){e.param.cmd==uniLib.ZQGameSdk.NETSTATE&&0==e.param.code?(uniLib.ZQGameSdk.lastNetState&&uniLib.ZQGameSdk.lastNetState.data[uniLib.ZQGameSdk.NETSTATE]!=e.param.data[uniLib.ZQGameSdk.NETSTATE]&&(t.PokerFunction.tcpSend(new Cmd.ClientEchoRoomCmd_SC),uniLib.Global.isH5?uniLib.NetMgr.setMsgTimeout(30,"ClientEchoRoomCmd_SC"):uniLib.NetMgr.setMsgTimeout(5,"ClientEchoRoomCmd_SC")),e.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.NO_SIGNAL?(this.signalLabel.visible=!0,this.wifiOrDataImage.visible=!1):e.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.WIFI?(this.signalLabel.visible=!1,this.wifiOrDataImage.visible=!0,this.wifiOrDataImage.source="wifi_DDZ"):e.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.DATA_FLOWS?(this.signalLabel.visible=!1,this.wifiOrDataImage.visible=!0,this.wifiOrDataImage.source="data_DDZ"):e.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.WIFI_AND_DATA&&(this.signalLabel.visible=!1,this.wifiOrDataImage.visible=!0,this.wifiOrDataImage.source="wifi_DDZ")):e.param.cmd==uniLib.ZQGameSdk.BATTERY&&0==e.param.code&&(this.betteryButton.skin.image.width=e.param.data[uniLib.ZQGameSdk.BATTERY]/100*25)},Object.defineProperty(n.prototype,"bottomPoint",{get:function(){return this._bottomPoint},enumerable:!0,configurable:!0}),n.prototype.bottomPointChange=function(e){e?(this.bottomLabel.visible=!0,this.bottomLabel.text="底注："+t.RoomData.Instance.bottomPoint,this._bottomPoint=e,this.backLobbyButton.visible=!1,this.dissRoomButton.visible=!1,this.shareButton.visible=!1,this.numberOfGame.visible=!1,this.jubg.visible=!1):(this.bottomLabel.text="",this.bottomLabel.visible=!1,this.numberOfGame.visible=!0,this.jubg.visible=!0)},n.prototype.dealCardFinish=function(){this.noteCardBtn.visible=t.RoomData.Instance.cardNoteVisible},n.prototype.matchIdChange=function(t){},n.prototype.showVersion=function(){var t=new eui.Label;t.fontFamily="黑体",t.size=20,t.textColor=7186632,t.text=uniLib.Global.version.toString(),t.x=uniLib.Global.screenWidth-t.width,t.y=uniLib.Global.screenHeight-t.height-50,this.addChild(t)},n.prototype.updateRoomDate=function(){t.GameConstant.setTeamData()},n.prototype.roomLevelChangeHandle=function(e){null!=e&&t.RoomData.Instance.roomType==Cmd.RoomType.RoomType_Quick&&(this.roomNumber.text=1==e?"初级场":2==e?"中级场":3==e?"高级场":"")},n.prototype.setListener=function(){this.terminationButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.spButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.hzButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.onClickTap=function(e){if(e.target==this.tableclothImage)return this.qqGroup.visible=!1,t.OperateLayer.Instance.removePickOutCard(),t.MenuPanel.Instance.refreshButton(!1),t.SoundHand.Instance.playButtonClick(),t.CardLayer.Instance.revertDark(),t.CardLayer.Instance.paizuGroup.clear(),void t.OperationPlay.Instance.playButtonEnabled();if(e.target==this.readyButton){var a=new Cmd.ReadyUpdateRoomCmd_CS;"up"==this.readyButton.currentState?a.yesOrNo=!0:a.yesOrNo=!1,t.PokerFunction.tcpSend(a),t.SoundHand.Instance.playButtonClick()}else if(e.target==this.dissRoomButton){var i="你确定请求解散房间？";t.PublicMethod.Instance.showConfirmPanel(i,["确定","取消"],[this.confirmHandler],null,this),t.SoundHand.Instance.playButtonClick()}else if(e.target==this.backLobbyButton){if(t.PokerData.isStandAlone)return void n.exitGame();if(t.RoomData.Instance.roomType==Cmd.RoomType.RoomType_Match)this.showMessageBox();else{var a=new Cmd.LeaveRoomCmd_CS;a.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(a)}t.SoundHand.Instance.playButtonClick()}else if(e.target==this.helpBtn)this.showHelp(),t.SoundHand.Instance.playButtonClick();else if(e.target==this.chatButton){var r=new t.ChatPanel;t.PopupManager.addPopUp(r,!0,!0),t.SoundHand.Instance.playButtonClick()}else if(e.target==this.lookButton)t.SoundHand.Instance.playButtonClick();else if(e.target==this.shareButton)this.showShare(),t.SoundHand.Instance.playButtonClick();else if(e.target==this.inviteFBtn||e.target==this.inviteQQFBtn)MJLobby.LobbyPopupManager.showMildWarnShow("此功能还未开放"),t.SoundHand.Instance.playButtonClick();else if(e.target==this.inviteWeChatFBtn)this.showShare(),t.SoundHand.Instance.playButtonClick();else if(e.target==this.gameStartBtn){if(!t.RoomData.Instance.roomId)return;var a=new Cmd.ReadyUpdateRoomCmd_CS;a.yesOrNo=!0,t.PokerFunction.tcpSend(a),this.gameStartBtn.visible=!1,t.SoundHand.Instance.playButtonClick()}else if(e.target==this.selectCard){var o=new Cmd.GmAvailableCardUpdateCmd_CS;t.PokerFunction.tcpSend(o),this.showTestPanel()}else if(e.target==this.noteCardBtn)this.showNoteCardPanel();else if(e.target==this.gpsBtn)this.showDistancePanel();else if(e.target==this.terminationButton){if(!t.CardLayer.Instance.cardEnd)return;"up"==this.terminationButton.currentState?t.GameConstant.cardGroupType=!0:t.GameConstant.cardGroupType=!1,t.CardLayer.Instance.resetHandCard(),t.CardLayer.Instance.setHandCardType(),this.updateButton(),t.GameConstant.isSetHongzha=!1,this.updateHzButton(),t.OperateLayer.Instance.setButtonAndTime()}else if(e.target==this.hzButton){if(!t.CardLayer.Instance.cardEnd)return;t.CardLayer.Instance.resetHandCard(),"up"==this.hzButton.currentState?t.GameConstant.isSetHongzha=!0:t.GameConstant.isSetHongzha=!1,t.CardLayer.Instance.setHongZha(),this.updateHzButton()}else if(e.target==this.spButton){if(!t.CardLayer.Instance.cardEnd)return;var s=t.CardLayer.Instance.getSelectCard(!1);if(s.length<1)return;console.error(222222),"up"==this.spButton.currentState?t.CardLayer.Instance.setLocked(!0):t.CardLayer.Instance.setLocked(!1),t.CardLayer.Instance.resetHandCard()}else if(e.target==this.changeSeatBtn0){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=1,t.PokerFunction.tcpSend(o)}else if(e.target==this.changeSeatBtn1){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=2,t.PokerFunction.tcpSend(o)}else if(e.target==this.changeSeatBtn2){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=3,t.PokerFunction.tcpSend(o)}else if(e.target==this.sixchangeSeatBtn0){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=1,t.PokerFunction.tcpSend(o)}else if(e.target==this.sixchangeSeatBtn1){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=2,t.PokerFunction.tcpSend(o)}else if(e.target==this.sixchangeSeatBtn2){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=3,t.PokerFunction.tcpSend(o)}else if(e.target==this.sixchangeSeatBtn3){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=4,t.PokerFunction.tcpSend(o)}else if(e.target==this.sixchangeSeatBtn4){var o=new Cmd.RequestChangeSeatRoom_C;o.seatid=5,t.PokerFunction.tcpSend(o)}else e.target==this.qqhButton&&(this.qqGroup.visible=!this.qqGroup.visible)},n.prototype.setHzBtnVisible=function(t){this.hzButton.visible=t},n.prototype.updateHzButton=function(){var e=t.GameConstant.isSetHongzha;this.hzButton.currentState=e?"down":"up"},n.prototype.updateButton=function(){var e=t.GameConstant.cardGroupType;this.terminationButton.currentState=e?"down":"up"},n.prototype.updateSpButton=function(t){this.spButton.currentState=t?"up":"down"},n.prototype.onLookTable=function(e){var n=t.CardLayer.Instance.handCards;if(0!=n.length)if(e.type==egret.TouchEvent.TOUCH_BEGIN)for(var a=0,i=n;a<i.length;a++){var r=i[a];r.alpha=.07}else if(e.type==egret.TouchEvent.TOUCH_END||e.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)for(var o=0,s=n;o<s.length;o++){var r=s[o];r.alpha=1}},n.prototype.clickQ=function(e){var n=new Cmd.CommonChat_C,a="";e.target==this.hongicon?a="轰他":e.target==this.woicon?a="我来":e.target==this.guanicon&&(a="管他"),n.words=a,t.PokerFunction.tcpSend(n),this.qqGroup.visible=!this.qqGroup.visible},n.prototype.tableclothChange=function(){t.GameView.Instance.changeTablecloth()},n.prototype.changeTablecloth=function(){"green"==t.RoomInfo.getInstance().tableclothMode?this.tableclothImage.source="bg_desk_1_jpg":this.tableclothImage.source="bg_desk_2_jpg"},n.prototype.testPickOut=function(){for(var t=new Cmd.PickOutCardCmd_CS,e=[],n=0;8>n;n++){var a=new Cmd.CardSetList,i=void 0;i=0==n||2==n?[924,1041,1142,1221,1344]:1==n?[422,513,613,723,814,1913,1014,1112,1221,1312,1412,1913,1014,1112,1221,1312,1412]:[444,443,441,431,1913],a.cardSet=i,e.push(a)}return t.cardSetList=e,t},n.prototype.showDistancePanel=function(){function e(t){if(0==t.code){n.lng=t.data.longitude,n.lat=t.data.latitude;var e=new Cmd.GetGPSLocationCmd_C;e.lat=n.lat,e.lng=n.lng,uniLib.NetMgr.tcpSend(e)}}var n;n=uniLib.ZQGameSdk.getLocation(e,this);var a=new Cmd.RequestIpGPSCmd_C;t.PokerFunction.tcpSend(a)},n.prototype.showVideoPanel=function(){0!=t.RoomInfo.getInstance().video&&(this._videoPanel=new t.VideoPanel,t.GameInfo.main.addChild(this._videoPanel),t.RoomInfo.getInstance().GM_Mode=!0)},n.prototype.onMoon=function(t){switch(t.param){case"video_play_finish":this.showVideoFinish(0)}},n.prototype.showNoteCardPanel=function(){var e=t.CardNotePanel.Instatnce;t.GameInfo.topLayer.addChild(e),e.x=(uniLib.Global.screenWidth-e.width)/2,e.y=uniLib.Global.screenHeight-e.height},n.prototype.showVideoFinish=function(e){var n="";0==e?(n="录像播放完毕!",t.PublicManage.getInstance().showVideoCommonPanel(n,["是"],[this.videoExit],null,this)):(n="确定退出录像？",t.PublicManage.getInstance().showVideoCommonPanel(n,["是","否"],[this.videoExit],null,this))},n.prototype.videoExit=function(){uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_close"),t.RoomInfo.getInstance().GM_Mode=!1,t.RoomInfo.getInstance().video=0,t.RoomInfo.getInstance().videoUid=0,n.exitGame()},n.prototype.videoReplay=function(){uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_replay")},n.prototype.showSuspendPrompt=function(t,e){t?e?this.suspendPrompt.text=e:this.suspendIcon.visible=!0:this.suspendIcon.visible=!1},Object.defineProperty(n.prototype,"gameState",{get:function(){return this.status},set:function(t){this.status=t},enumerable:!0,configurable:!0}),n.prototype.updateTimeout=function(t){if(this.stopTimer(),t.leftsec){this.dissNickName=null,this.dissNickName=t.nickname,this.leftSec=null!=t.leftsec?t.leftsec:100;var e=new Date;this._startTime=e.getTime(),this._timerDiss=new egret.Timer(1e3),this._timerDiss.addEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this._timerDiss.start();var n=t.nickname+"("+this.leftSec+")";this.suspendPrompt.text=n}else this.suspendPrompt.text=""},n.prototype.timerHandle=function(t){var e=new Date,n=e.getTime(),a=this.leftSec-(n-this._startTime)/1e3;if(a>0){var i=this.dissNickName+"离线中！("+Math.floor(this.leftSec-(n-this._startTime)/1e3)+"秒后房间将解散)";this.suspendPrompt.text=i}else this.stopTimer()},n.prototype.stopTimer=function(){this._timerDiss&&(this._timerDiss.stop(),this._timerDiss.removeEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this._timerDiss=null)},n.prototype.ShowNumberOfGame=function(){var e=t.RoomData.Instance.roomCurrentInnings,n=t.RoomData.Instance.roomTotalInnings;if(!e||!n)return void(this.numberOfGame.text="");var a=t.RoomData.Instance.roomType;if(t.PokerData.isStandAlone||null!=a&&a==Cmd.RoomType.RoomType_Normal||a==Cmd.RoomType.RoomType_Match){if(t.GameConstant.isRankMode){var i=Math.floor(n);this.numberOfGame.text="第"+e+"/"+i+"锅",1==e&&(this.guang_we.visible=this.guang_other.visible=!0)}else this.numberOfGame.text="第"+e+"/"+n+"局";this.jubg.visible=!0}else this.numberOfGame.text="";e&&e>1&&this.removeControlButton()},n.prototype.removeControlButton=function(){this.backLobbyButton.parent&&this.removeChild(this.backLobbyButton),this.dissRoomButton.parent&&this.removeChild(this.dissRoomButton),this.shareButton.parent&&this.removeChild(this.shareButton)},n.prototype.showTestPanel=function(){var e=t.TestPanel.Instance;e.x=(uniLib.Global.screenWidth-e.width)/2,e.y=80,t.GameInfo.topLayer.addChild(e)},n.prototype.showMyChips=function(t){this.chipsLabel.text=t},n.prototype.setGuoIcon=function(t){this.chipsLabel.visible=!t,this.userIcon.visible=t},n.prototype.showShare=function(){var e=new uniLib.WXShareVo;e.shareWay=0,t.DataCache.platParam&&(e.title=t.DataCache.platParam.shareInfo.title,e.description=t.DataCache.platParam.shareInfo.content,e.webpageUrl=t.DataCache.platParam.shareInfo.webPageUrl),MJLobby.MJLobbyData.getInstance().hasXianLiao?uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,e,!1):uniLib.ZQGameSdk.share(e,null,this)},n.prototype.gameTrusteeshipRquest=function(){var e=t.PokerFunction.GetUserInfoByUid(uniLib.NetMgr.UID);if(!e||!e.isTrust){var n=new Cmd.HostUpdateRoomCmd_CS;n.yesOrNo=!0,n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)}},n.prototype.setBtnsVisible=function(t){this.dissRoomButton.visible=t,this.backLobbyButton.visible=t,this.shareButton.visible=t,this.setChangeGroup(t)},n.prototype.setChangeGroup=function(e){t.RoomData.Instance.roomCurrentInnings>=1?this.fourGroup.visible=this.sixGroup.visible=!1:e?t.GameConstant.isFourPeople?(this.fourGroup.visible=e,this.sixGroup.visible=!e):(this.sixGroup.visible=e,this.fourGroup.visible=!e):this.fourGroup.visible=this.sixGroup.visible=!1},n.prototype.dissRoom=function(){this.msgBox&&(this.msgBox=null);var e=function(e){this.msgBox&&(t.GameInfo.topLayer.removeChild(this.msgBox),this.msgBox=null)};if(!this.msgBox){var n="你确定请求解散房间？";this.msgBox=new t.MsgBoxPanel,this.msgBox.x=uniLib.Global.screenWidth-this.msgBox.width>>1,this.msgBox.y=uniLib.Global.screenHeight-this.msgBox.height>>1,this.msgBox.setData(n,["确定","取消"],[this.confirmHandler,e])}t.GameInfo.topLayer.addChild(this.msgBox)},n.prototype.confirmHandler=function(e){this.msgBox&&(t.GameInfo.topLayer.removeChild(this.msgBox),this.msgBox=null);var n=new Cmd.DissolveRoomRequestCmd_C;t.PokerFunction.tcpSend(n)},n.prototype.roomIdChanged=function(){t.PokerData.isStandAlone?this.roomNumber.text="练习场(不结算)":this.roomNumber.text="房间ID:"+t.RoomData.Instance.roomId},n.prototype.roomTypeChange=function(){if(t.RoomData)switch(t.RoomData.Instance.roomType){case Cmd.RoomType.RoomType_Normal:break;case Cmd.RoomType.RoomType_Quick:this.setBtnsVisible(!1),this.shareButton.visible=!1;break;default:this.setBtnsVisible(!1),this.shareButton.visible=!1}},n.prototype.pointBaseChanged=function(e){(null==e||0/0==e)&&(e=0),t.GameConstant.hunPoint=e},n.prototype.startGameChanged=function(){t.RoomData.Instance.startGame&&(this.setBtnsVisible(!1),this.readyButton.visible=!1,this.shareButton.visible=!1,this.fourGroup.visible=this.sixGroup.visible=!1),t.PokerData.isStandAlone,this.noteCardBtn.visible=t.RoomData.Instance.cardNoteVisible;for(var e=0,n=t.SeatLayer.Instance.seatSprites;e<n.length;e++){var a=n[e];a.removeCardKeyIcon()}this.removeYouImage(),1==t.RoomInfo.getInstance().video&&t.GameConstant.isRankMode&&t.SeatLayer.Instance.updateSign()},n.prototype.removeYouImage=function(){for(var e=0,n=t.SeatLayer.Instance.seatSprites;e<n.length;e++){var a=n[e];a.clearState(),a.deleteState(),a.userSprite.clearYouImage()}},n.prototype.landlordChanged=function(e){if(e){var n=t.RoomData.Instance.roomCurrentInnings;if(1!=n&&t.GameConstant.isRankMode){var a=t.GameConstant.GetSeatSpriteByUid(e).seatData.seatId,i=!0;a%2==0&&(i=!1),i?this.updateGuang(!0):this.updateGuang(!1)}}},n.prototype.addLandlordImage=function(e){this.removeLandlordImage(),null==this.landlordImage&&(this.landlordImage=new egret.Bitmap(RES.getRes("landlord_hat"))),this.landlordImage.scaleX=.3,this.landlordImage.scaleY=.3,this.landlordImage.anchorOffsetX=this.landlordImage.width/2,this.landlordImage.anchorOffsetY=this.landlordImage.height,this.landlordImage.x=60,this.landlordImage.y=25;var n=t.GameConstant.GetSeatSpriteByUid(e);null!=n&&n.addChild(this.landlordImage)},n.prototype.removeLandLordImage=function(){this.landlordImage&&this.landlordImage.parent.removeChild(this.landlordImage),this.landlordImage=null},n.prototype.removeLandlordImage=function(){var t=this.landlordImage;t&&t.parent&&t.parent.removeChild(t)},Object.defineProperty(n.prototype,"goldCard",{get:function(){return this._goldCard},set:function(t){this._goldCard=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"oneCard",{get:function(){return this._oneCard},enumerable:!0,configurable:!0}),n.prototype.oneCardChanged=function(e){if(e){e.point&&(t.GameConstant.hunPoint=e.point);var n=t.RoomData.Instance.roomCurrentInnings;if(1!=n)return void(this.threeCardImage.visible=!1);var a=e.list.cardSet;a&&this.addOneCard(a)}},n.prototype.addOneCard=function(e){if(this._goldCard=e[0],null==this._oneCard){this._oneCard=new Array;for(var n=3*t.GameConstant.BluffCardGap-(t.GameConstant.BluffCardGap-t.GameConstant.BluffCardWidth),a=((uniLib.Global.screenWidth-n)/2+t.GameConstant.BluffCardWidth/2,function(n){var a=new egret.Bitmap;a.width=t.GameConstant.CardWidth,a.height=t.GameConstant.CardHeight,a.anchorOffsetX=t.GameConstant.BluffCardWidth/2,a.x=(uniLib.Global.screenWidth-a.width)/2+15,a.y=(uniLib.Global.screenHeight-a.height)/2,i._oneCard[n]=a;var r=i._oneCard[0];r.texture=RES.getRes("BackCard"),i.addChild(r),egret.Tween.removeTweens(r),egret.Tween.get(r).wait(500).to({scaleX:0},300).call(function(){return r.texture=t.GameConstant.GetPokerTextureByCardId(e[n])}).to({scaleX:1},300).wait(300).to({x:158,y:20,scaleX:.6,scaleY:.6},500)}),i=this,r=0;r<e.length;r++)a(r)}this.threeCardImage.visible=!1},n.prototype.setCardBackGround=function(){if(this._goldCard)for(var e=t.CardLayer.Instance.handCards,n=0,a=e;n<a.length;n++){var i=a[n];i.cardId==this._goldCard&&i.addBackGround()}},n.prototype.removeOneCard=function(){if(this._oneCard){for(var t=0,e=this._oneCard;t<e.length;t++){var n=e[t];n.parent&&this.removeChild(n)}this.threeCardImage.visible=!1}},n.prototype.setbottomCard=function(e,n){this._goldCard=e[0],null==this._oneCard&&(this._oneCard=new Array);var a=new egret.Bitmap;a.texture=t.GameConstant.GetPokerTextureByCardId(e[0]),a.width=t.GameConstant.CardWidth,a.height=t.GameConstant.CardHeight,a.scaleX=a.scaleY=.6,this._oneCard[0]=a,a.x=143,a.y=22,this.addChild(a)
},Object.defineProperty(n.prototype,"threeCards",{get:function(){return this.threeCard},enumerable:!0,configurable:!0}),n.prototype.threeCardChanged=function(e){if(this.addThreeCard(),null!=e){for(var n=0;n<e.length;n++)this.threeCard[n]?this.threeCard[n].texture=t.GameConstant.GetPokerTextureByCardId(e[n]):t.PublicManage.getInstance().showMildWarnShow("error threeCard.length:"+e.length);if(1==t.RoomInfo.getInstance().video){var a=t.RoomData.Instance.landlordUid,i=t.GameConstant.GetClientNoByUid(a);if(1==i||2==i){var r=t.PokerFunction.GetSeatDataByUid(a),o=r.handCards.deepcopy();r.clearHandCard();for(var s=0,h=e;s<h.length;s++){var d=h[s];o.push(d)}var l=t.PokerFunction.handCardSort;l&&(o=l(o));for(var u=0,c=o;u<c.length;u++){var d=c[u];r.addHandCard(d)}r.handCardSum+=e.length}}}else for(var n=0;3>n;n++)this.threeCard[n].texture=RES.getRes("BackCard")},n.prototype.addThreeCard=function(){if(null==this.threeCard){this.threeCard=new Array;for(var e=3*t.GameConstant.BluffCardGap-(t.GameConstant.BluffCardGap-t.GameConstant.BluffCardWidth),n=(uniLib.Global.screenWidth-e)/2+t.GameConstant.BluffCardWidth/2,a=0;3>a;a++){var i=new egret.Bitmap;i.width=t.GameConstant.BluffCardWidth,i.height=t.GameConstant.BluffCardHeight,i.anchorOffsetX=t.GameConstant.BluffCardWidth/2,i.x+=t.GameConstant.BluffCardWidth/2,i.x=n+t.GameConstant.BluffCardGap*a,i.y=10,this.threeCard[a]=i}}for(var r=0,o=this.threeCard;r<o.length;r++){var s=o[r];this.addChild(s)}this.threeCardImage.visible=!1},n.prototype.removeThreeCard=function(){if(this.threeCard){for(var t=0,e=this.threeCard;t<e.length;t++){var n=e[t];n.parent&&this.removeChild(n)}this.threeCardImage.visible=!0}},n.prototype.operateChanged=function(e){var n=t.PokerFunction.GetSeatDataByUid(e.uid);if(n){var a=e.operateList;if(!a&&!this.isTribute)return void t.OperateLayer.Instance.operateChanged(e);if(!a)return;a.first(function(t){return 45==t})?t.OperateLayer.Instance.tributetionChanged(e):a.first(function(t){return 46==t})?t.OperateLayer.Instance.ReturntributetionChanged(e):a.first(function(t){return 47==t})?t.OperateLayer.Instance.selectCardJGChanged(e):t.OperateLayer.Instance.operateChanged(e)}},n.prototype.tipPlayCard=function(e){var n=e.cardSet,a=t.CardLayer.Instance.handCards;t.OperationPlay.Instance.setData(n);for(var i=function(e){var n=a.first(function(t){return t.cardId==e});return n.locked?(t.PublicManage.getInstance().showMildWarnShow("提示出牌有已锁的牌！"),r.updateSpButton(!1),{value:void 0}):void 0},r=this,o=0,s=n;o<s.length;o++){var h=s[o],d=i(h);if("object"==typeof d)return d.value}this.updateSpButton(!0)},n.prototype.reconnectTribute=function(e){e&&(this.isTribute=1,e.forEach(function(e){t.PokerFunction.GetUserInfoBySeatId(e.seatId).uid==uniLib.NetMgr.UID?45==e.opList[0]||46==e.opList[0]?(t.OperateLayer.Instance.removeTributetion(),t.OperateLayer.Instance.addTributetion(e.opList[0])):47==e.opList[0]&&(t.OperateLayer.Instance.addSelectCard(null),t.TriSelectCard.Instance.setBtnsVisible(!0)):47==e.opList[0]&&(t.OperateLayer.Instance.addSelectCard(null),t.TriSelectCard.Instance.setBtnsVisible(!1))}))},n.prototype.updateSelectCard=function(e,n){var a=[];n instanceof Array&&n.forEach(function(t){a.push(t)}),a.length>0&&t.OperateLayer.Instance.addSelectCard(a)},n.prototype.robLordOperateChanged=function(e){t.OperateLayer.Instance.updataRobLandlord(e)},n.prototype.kickOperateChange=function(e){t.OperateLayer.Instance.kickOperateChanged(e)},n.prototype.multipleChanged=function(e){this.beforeMultiple&&0!=this.beforeMultiple&&e&&t.EffectCreate.Instance.multipleEffect(e/this.beforeMultiple),this.beforeMultiple=e,this.addMultipleLabel(),this.otherpointBaseLabel.text=null!=e?(e%1==0?e:e.toFixed(1))+"":"1"},n.prototype.addMultipleLabel=function(){null==this.multipleLabel&&(this.multipleLabel=new eui.Label,this.multipleLabel.size=25,this.multipleLabel.stroke=1,this.multipleLabel.y=110),this.addChild(this.multipleLabel)},n.prototype.removeMultipleLabel=function(){this.multipleLabel&&this.multipleLabel.parent&&this.removeChild(this.multipleLabel)},n.prototype.pickOutCard=function(e){if(e&&e.cardSetList&&e.cardSetList instanceof Array){e.cardSetList;t.OperateLayer.Instance.addPickOutCard(e.cardSetList)}},n.prototype.playerChangeTeam=function(e){if(e&&e.teamData){var n=e.teamData;t.OperateLayer.Instance.changeTeam(n,e.leftSec)}},Object.defineProperty(n.prototype,"weRank",{get:function(){return this.wepointBaseLabel.text},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"otherRank",{get:function(){return this.otherpointBaseLabel.text},enumerable:!0,configurable:!0}),n.prototype.updateGuang=function(t){this.guang_we.visible=t,this.guang_other.visible=!t},n.prototype.playRankChanged=function(e){if(e){var n=t.RoomData.Instance.roomCurrentInnings;if(e.rankList){var a=[1,3,5],i=e.rankList,r=t.PokerFunction.MainSeatId;if(r||1!=t.RoomInfo.getInstance().video||(r=1),null!=r)if(-1!=a.indexOf(r))for(var o=0;o<i.length;o++)0==o&&0!=Object.keys(i[0]).length&&(this.wepointBaseLabel.text=this.updateLevel(i[0].level),t.GameConstant.isRankMode&&1!=n&&this.updateGuang(!0)),1==o&&0!=Object.keys(i[1]).length&&(this.otherpointBaseLabel.text=this.updateLevel(i[1].level),t.GameConstant.isRankMode&&1!=n&&this.updateGuang(!1));else for(var o=0;o<i.length;o++)0==o&&0!=Object.keys(i[0]).length&&(this.otherpointBaseLabel.text=this.updateLevel(i[0].level),t.GameConstant.isRankMode&&1!=n&&this.updateGuang(!1)),1==o&&0!=Object.keys(i[1]).length&&(this.wepointBaseLabel.text=this.updateLevel(i[1].level),t.GameConstant.isRankMode&&1!=n&&this.updateGuang(!0));for(var s=0,h=i;s<h.length;s++){var d=h[s];if(0!=Object.keys(d).length){t.GameConstant.hunPoint||(t.GameConstant.hunPoint=d.level);break}}}else for(var l=e.place,u=this.selectName(l),c=0,p=t.SeatLayer.Instance.seatSprites;c<p.length;c++){var m=p[c];m.seatData.seatId==e.seatId&&m.userSprite.addYouImage(u)}}},n.prototype.updateLevel=function(t){return t>=10?10==t?t+"":11==t?"J":12==t?"Q":13==t?"K":14==t?"A":void 0:t+""},n.prototype.selectName=function(e){var n="";if(t.GameConstant.isFourPeople)switch(e){case 1:n="game_first";break;case 2:n="game_second";break;case 3:n="game_third";break;case 4:n="game_last"}else switch(e){case 1:n="game_first";break;case 2:n="game_second";break;case 3:n="game_third";break;case 4:n="game_four";break;case 5:n="game_five";break;case 6:n="game_last"}return n},n.prototype.reconnectRank=function(e){if(e&&e instanceof Array){var n=[1,3,5];-1!=n.indexOf(t.PokerFunction.MainSeat.seatId)?(this.wepointBaseLabel.text=this.updateLevel(e[0]),this.otherpointBaseLabel.text=this.updateLevel(e[1])):(this.wepointBaseLabel.text=this.updateLevel(e[1]),this.otherpointBaseLabel.text=this.updateLevel(e[0]))}},n.prototype.reconnectYouImage=function(e){if(e&&e instanceof Array&&e.length>0)for(var n=0;n<e.length;n++)for(var a=this.selectName(n+1),i=0,r=t.SeatLayer.Instance.seatSprites;i<r.length;i++){var o=r[i];o.seatData.seatId==e[n]&&o.userSprite.addYouImage(a)}},n.prototype.showEnterButtons=function(){if(this.backLobbyButton&&this.shareButton&&this.dissRoomButton){if(t.DataCache.platParam){var e=Number(t.DataCache.platParam.roomId);if(1e5>e)return}this.backLobbyButton.visible=!0,1!=uniLib.Global.is_sandbox&&(this.shareButton.visible=!0),1==uniLib.Global.is_sandbox,this.dissRoomButton.visible=!0}},n.prototype.checkTeam=function(){var e=t.RoomData.Instance.roomPlayProps;if(e&&e instanceof Array&&0!=e.length)for(var n=0,a=e;n<a.length;n++){var i=a[n];10602==i&&(t.GameConstant.isShowTeam=!0)}},n.prototype.updataReadyButton=function(e){e?this.readyButton.currentState="down":this.readyButton.currentState="up",t.RoomData.Instance.roomType==Cmd.RoomType.RoomType_Quick||t.RoomData.Instance.roomType==Cmd.RoomType.RoomType_Match?this.setBtnsVisible(!1):this.setBtnsVisible(!e),t.RoomData.Instance.roomType==Cmd.RoomType.RoomType_Match&&this.setChangeGroup(!e)},n.prototype.setReadyButton=function(){},n.prototype.setReadyBtnVisible=function(t,e){t&&(this.readyButton.visible=t,null!=e&&(this.readyButton.currentState=e)),this.readyButton.visible=t},n.prototype.restart=function(){console.error("游戏重开"),t.OperateLayer.Instance.removeOperateMain(),t.OperateLayer.Instance.removeTributetion(),t.OperateLayer.Instance.removeChangeTeam(),t.OperateLayer.Instance.stopTimer(),t.OperateLayer.Instance.removeWarningEffect(),t.OperateLayer.Instance.removePlayCardSprites(),t.DDZAI.Instance.removeAllPlayCard(),t.SeatLayer.Instance.resetSeat(),this.removeLandLordImage();for(var e=0;e<t.RoomData.Instance.seatList.length;e++){var n=t.RoomData.Instance.seatList[e];n&&n.clearHandCard()}t.RoomData.Instance.multiple=0,t.RoomData.Instance.landlordUid=null,this.readyButton.visible=!0,this.readyButton.currentState="down",t.CardLayer.Instance.removeupNotUp()},n.prototype.showSetting=function(){var e=new t.SettingPanel;t.PopupManager.addPopUp(e,!0,!1)},n.prototype.showHelp=function(){this._helpPanel||(this._helpPanel=new t.HelpPanel,this._helpPanel.addEventListener(t.UIEventConsts.CLOSE,this.removeHelp,this)),t.PopupManager.addPopUp(this._helpPanel,!0)},n.prototype.removeHelp=function(){this._helpPanel&&(this._helpPanel.removeEventListener(t.UIEventConsts.CLOSE,this.removeHelp,this),uniLib.DisplayUtils.removeFromParent(this._helpPanel),this._helpPanel.destory(),t.PopupManager.removePopUp(this._helpPanel),this._helpPanel=null)},n.exitGame=function(){if(t.GameData.iskPoker=!1,t.PokerFunction.exitGame(),n.Instance.destroy(),t.CardLayer.Instance.destroy(),t.OperateLayer.Instance.destroy(),t.DDZAI.clearInstance(),t.DDZStandAlone.clearInstance(),t.MenuPanel.clearInstance(),t.Ping.clearInstance(),DDZ.EventManage.clearResultTimer(),t.DataCache.gameInfo&&t.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),uniLib.GameModuleUtils.ExitGame(!1),t.DataCache.destroyResOnExit){var e=RES.destroyRes(t.GameConstant.ResGroup_DDZ,!0);uniLib.ResUtils.clearResConfigByGroupName([t.GameConstant.ResGroup_DDZ]),console.error("销毁"+t.GameConstant.ResGroup_DDZ+":"+e)}t.GameInfo.uiLayer=null,t.GameInfo.mainUILayer=null,t.GameInfo.topLayer=null,t.GameInfo.main=null},n.prototype.showMessageBox=function(){this.msgbox||(this.msgbox=new t.MsgBoxPanel),this.msgbox.setData("不能返回大厅，你要解散游戏么",["确定","取消"],[this.confirmHandel,this.cancelHandel],this),this.msgbox.x=uniLib.Global.screenWidth-this.msgbox.width>>1,this.msgbox.y=uniLib.Global.screenHeight-this.msgbox.height>>1,t.PopupManager.addPopUp(this.msgbox)},n.prototype.confirmHandel=function(e){var n=new Cmd.DissolveRoomRequestCmd_C;t.PokerFunction.tcpSend(n)},n.prototype.cancelHandel=function(t){this.removeTips()},n.prototype.removeTips=function(){this.msgbox&&(t.PopupManager.removePopUp(this.msgbox),this.msgbox=null)},n.prototype.showEventInfo=function(){var t=MJLobby.MJLobbyData.getInstance().eventData;return null==t?(this.removeEventTimer(),this.eventInfoLabel.text="",void(this.eventInfoLabel.visible=!1)):(this.eventInfoLabel.visible=!0,this.removeEventTimer(),this._count=0,this._eventTimer=new egret.Timer(1e3),this._eventTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),void this._eventTimer.start())},n.prototype.onTimer=function(t){var e=MJLobby.MJLobbyData.getInstance().eventData;this._count++,null!=e.time?this.eventInfoLabel.textFlow=[{text:"第",style:{textColor:5826415,size:23}},{text:e.level,style:{textColor:5826415,size:23}},{text:"轮 ",style:{textColor:5826415,size:23}},{text:e.myOrder+"/"+e.userNumber+" ",style:{textColor:16776960,size:25}},{text:this.formateTime(e.time+this._count),style:{textColor:5826415,size:23}},{text:"基础分:",style:{textColor:16777215,size:23}},{text:e.bottomPoint+" ",style:{textColor:5826415,size:23}},{text:"淘汰分:",style:{textColor:16777215,size:23}},{text:e.leavingPoint,style:{textColor:5826415,size:23}}]:this.eventInfoLabel.textFlow=[{text:"第",style:{textColor:5826415,size:23}},{text:e.level,style:{textColor:5826415,size:23}},{text:"轮 ",style:{textColor:5826415,size:23}},{text:e.myOrder+"/"+e.userNumber+" ",style:{textColor:16776960,size:25}},{text:"基础分:",style:{textColor:16777215,size:23}},{text:e.bottomPoint+" ",style:{textColor:5826415,size:23}},{text:"淘汰分:",style:{textColor:16777215,size:23}},{text:e.leavingPoint,style:{textColor:5826415,size:23}}]},n.prototype.removeEventTimer=function(){null!=this._eventTimer&&(this._eventTimer.stop(),this._eventTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._eventTimer=null)},n.prototype.formateTime=function(t){var e="",n=Math.round(t/3600)+"",a=parseInt(t%3600/60+"").toString().padLeft(2,"0"),i=(t%3600%60).toString().padLeft(2,"0");return e=n+":"+a+":"+i+" "},n}(t.EuiPanel);t.GameView=e,__reflect(e.prototype,"game.GameView")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.gspBgList=[],t.skinName=new GpsPanel_DZ_Skin,t.initUI(),t}return __extends(n,e),n.prototype.initUI=function(){this.updateGpsAdd(),this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandle,this);var e="",n=t.RoomData.Instance.getPlayTypeByList();if(n.length<=0)return void(this.ruleTxt.text="房主什么都没选择,你们随意");for(var a=0;a<n.length;a++)e=e+n[a]+"  ";this.ruleTxt.text=e},n.prototype.addUIListener=function(){},n.prototype.removeUIListener=function(){},n.prototype.updataGroupVisible=function(t){this.ruleGroup.visible=t},n.prototype.updateGpsAdd=function(){var e=t.RoomData.Instance.playerNumber;this.gpsTips.visible=2==e?!0:!1,this.gpsGroup.visible=!1,this.gpsListGroup.visible=2==e?!1:!0},n.prototype.destory=function(){this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandle,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n.prototype.closeHandle=function(e){t.PopupManager.removePopUp(this)},n.prototype.addUserGpsListIcon=function(e){this.distanceGroup.width=142*(e.list.length-1),this.usernameColumnGroup.removeChildren(),this.usernameRowGroup.removeChildren(),this.distanceGroup.removeChildren();for(var n=0,a=this.gspBgList;n<a.length;n++){var i=a[n];i&&i.parent&&i.parent.removeChild(i)}for(var r=-1,o=0;o<e.list.length;o++){var s=t.PokerFunction.GetUserByUid(e.list[o].uid);if(s.uid!=uniLib.NetMgr.UID){r++;var h=new eui.Label(s.nickName);h.textColor=9395756,h.size=20,h.width=142,h.height=50,h.horizontalCenter=0,h.verticalCenter=0,h.verticalAlign="middle",h.textAlign="center",this.usernameColumnGroup.addChild(h);var d=new eui.Label(s.nickName);if(d.textColor=9395756,d.size=20,d.width=142,d.height=50,d.horizontalCenter=0,d.verticalCenter=0,d.verticalAlign="middle",d.textAlign="center",this.usernameRowGroup.addChild(d),r%2==0){var l=new eui.Image("room_TDK_bg2");l.height=50,l.left=0,l.right=0,this.gpsListGroup.addChildAt(l,1),this.gspBgList.push(l),0==r&&(l.top=72),2==r&&(l.top=172),4==r&&(l.top=272)}for(var u=0;u<e.list.length;u++){var c=t.PokerFunction.GetUserByUid(e.list[u].uid);if(c.uid!=uniLib.NetMgr.UID)if(c.uid!=s.uid){var p=new eui.Label("");p.size=20,p.width=142,p.height=50,p.horizontalCenter=0,p.verticalCenter=0,p.textAlign="center",p.textColor=9075052,p.verticalAlign="middle",this.distanceGroup.addChild(p);var m=-1;e.list[o].lat&&e.list[o].lng&&e.list[u].lat&&e.list[u].lng&&(m=Math.floor(uniLib.Utils.getDistance(e.list[o].lat,e.list[o].lng,e.list[u].lat,e.list[u].lng))),-1!=m?p.text=m>1e3?Math.floor(m/1e3)+"km":m.toString()+"m":p.text="!"}else{var l=new eui.Image("room_TDK_icon1");this.distanceGroup.addChild(l)}}}}},n}(t.EuiPanel);t.GpsPanel=e,__reflect(e.prototype,"game.GpsPanel")}(game||(game={}));var game;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.m_selected=!1,n.m_darken=!1,n.isLock=!1,t&&(n.m_cardId=t,n.addCard(),n.selectChanged(!1)),n}return __extends(n,e),Object.defineProperty(n.prototype,"cardId",{get:function(){return this.m_cardId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.m_selected},set:function(t){this.m_selected=t,this.selectChanged(t)},enumerable:!0,configurable:!0}),n.prototype.selectChanged=function(e){e?this.y=t.GameConstant.HandCardSelectY:this.y=t.GameConstant.HandCardY},Object.defineProperty(n.prototype,"darken",{get:function(){return this.m_darken},set:function(t){this.m_darken!=t&&(this.m_darken=t,this.darkenChanged(t))},enumerable:!0,configurable:!0}),n.prototype.darkenChanged=function(e){if(e?this.addDarken():this.removeDarken(),!t.GameConstant.cardGroupType){var n=e?-22:22;this.y=this.y+n}},n.prototype.addDarken=function(){null==this.darkenImage&&(t.GameConstant.cardGroupType?this.darkenImage=new egret.Bitmap(RES.getRes("Poker_dark")):this.darkenImage=new egret.Bitmap(RES.getRes("DL_Poker_dark"))),this.darkenImage.width=this.card.width,this.darkenImage.height=this.card.height,this.addChild(this.darkenImage)},Object.defineProperty(n.prototype,"cardPlace",{get:function(){return table.TablePokerCard.cardPlace(this.m_cardId)},enumerable:!0,configurable:!0}),n.prototype.addLordLogo=function(){this.lordLogo||(this.lordLogo=new egret.Bitmap(RES.getRes("lord"))),this.addChild(this.lordLogo),this.lordLogo.width=80,this.lordLogo.height=80,this.lordLogo.y=2,this.lordLogo.x=this.width-this.lordLogo.width-2},n.prototype.removeLordLogo=function(){this.lordLogo&&this.lordLogo.parent&&this.removeChild(this.lordLogo)},n.prototype.removeDarken=function(){this.darkenImage&&this.darkenImage.parent&&(this.removeChild(this.darkenImage),this.darkenImage=null)},n.prototype.addBackCard=function(t){RES.hasRes(t)&&(this.card=new egret.Bitmap(RES.getRes(t)),this.addChildAt(this.card,0))},n.prototype.addNormalCard=function(e){var n=t.GameConstant.GetPokerTextureByCardId(e);n&&(this.removeCard(),this.m_cardId=e,this.card=new egret.Bitmap(n),this.card.width=t.GameConstant.CardWidth,this.card.height=t.GameConstant.CardHeight,this.addChildAt(this.card,0))},n.prototype.removeCard=function(){this.card&&(this.removeChild(this.card),this.card=null)},n.prototype.addCard=function(){this.card=new egret.Bitmap(t.GameConstant.GetPokerTextureByCardId(this.cardId)),this.card.width=t.GameConstant.CardWidth,this.card.height=t.GameConstant.CardHeight,this.addChildAt(this.card,0)},n.prototype.setCardSize=function(t,e){this.card.width=t,this.card.height=e},Object.defineProperty(n.prototype,"cardWidth",{set:function(t){this.card.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cardHeight",{set:function(t){this.card.height=t},enumerable:!0,configurable:!0}),n.prototype.changePai=function(){this.removeCard(),t.GameConstant.cardGroupType?(this.card=new egret.Bitmap(t.GameConstant.GetPokerTextureByCardId(this.cardId)),this.card.width=t.GameConstant.CardWidth,this.card.height=t.GameConstant.CardHeight):(this.card=new egret.Bitmap(RES.getRes("DL_"+table.TablePokerCard.resNormal(this.cardId))),this.card.width=t.GameConstant.twoCardWidth,this.card.height=t.GameConstant.twoCardHeight),this.addChildAt(this.card,0),this.isLock&&this.upLockImg()},n.prototype.addBackGround=function(){RES.hasRes("Poker_bg")&&!this.backGround&&(this.backGround=new egret.Bitmap(RES.getRes("Poker_bg"))),this.backGround.anchorOffsetX=10,t.GameConstant.cardGroupType?(this.backGround.x=5,this.backGround.y=56):(this.backGround.x=10,this.backGround.y=130),this.backGround.width=90,this.backGround.height=97,this.backGround.scaleX=this.backGround.scaleY=.4,this.addChild(this.backGround)},n.prototype.removeBackGround=function(){this.backGround&&this.backGround.parent&&(this.backGround.parent.removeChild(this.backGround),this.backGround=null)},n.prototype.darkCard=function(){},Object.defineProperty(n.prototype,"locked",{get:function(){return this.isLock},set:function(t){this.isLock!=t&&(this.isLock=t,this.lockChanged(t))},enumerable:!0,configurable:!0}),n.prototype.lockChanged=function(t){console.error(t),t?this.addLock():this.removeLock()},n.prototype.addLock=function(){null==this.lockImage&&(this.lockImage=new egret.Bitmap(RES.getRes("dz_suoicon"))),this.lockImage.name="gogo",this.addChild(this.lockImage),console.error(33333333333333),this.upLockImg()},n.prototype.upLockImg=function(){console.error(22222222),t.GameConstant.cardGroupType?(this.lockImage.scaleX=this.lockImage.scaleY=.9,this.lockImage.x=1,this.lockImage.y=1):(this.lockImage.scaleX=this.lockImage.scaleY=1,this.lockImage.x=6,this.lockImage.y=2)},n.prototype.removeLock=function(){this.lockImage&&this.lockImage.parent&&(this.removeChild(this.lockImage),this.lockImage=null)},n}(egret.DisplayObjectContainer);t.HandCardSprite=e,__reflect(e.prototype,"game.HandCardSprite")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=new Help_DZ_Skin,t}return __extends(n,e),n.prototype.init=function(){e.prototype.init.call(this);var t=null;RES.hasRes("help_4085_txt")&&(t=RES.getRes("help_4085_txt"))},n.prototype.hide=function(){uniLib.PopUpMgr.removePopUp(this),this.dispatchEventWith(t.UIEventConsts.CLOSE),t.SoundHand.Instance.playButtonClick()},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hide,this)},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hide,this)},n.prototype.destory=function(){e.prototype.destroy.call(this),this._txt=null},n}(t.BaseEui);t.HelpPanel=e,__reflect(e.prototype,"game.HelpPanel")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=new RoundLiuJu_DZ_Skin,t.init(),t}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!0,configurable:!0}),n.prototype.setData=function(t){this.originzeRoundResultInfo(t),this.showBtns(t.haveNextRound)},n.prototype.init=function(){this._we_list.itemRenderer=t.RoundResultItem,this._other_list.itemRenderer=t.RoundResultItem},n.prototype.addUIListener=function(){},n.prototype.removeUIListener=function(){},n.prototype.adaptationWidth=function(){e.prototype.adaptationWidth.call(this)},n.prototype.showBtns=function(e){var n=t.RoomData.Instance.roomCurrentInnings,a=t.RoomData.Instance.roomTotalInnings;null!=n&&null!=a&&n==a||(e?this._prepare_btn.visible=!0:this._prepare_btn.visible=!1),t.PokerData.isStandAlone&&(this._prepare_btn.visible=!0)},n.prototype.originzeRoundResultInfo=function(e){var n=new eui.ArrayCollection,a=new eui.ArrayCollection,i=t.GameView.Instance.bottomPoint?!0:!1,r=i&&e.resultList&&e.resultList instanceof Array?e.resultList:[],o=uniLib.NetMgr.UID,s=t.GameConstant.GetSeatSpriteByUid(o).seatData.seatId,h=!1;h=s%2==0?!1:!0;var d=this.getAll();if(h)for(var l=function(e){var i=t.GameConstant.GetSeatSpriteByUid(d[e]).seatData.seatId;if(i%2==0){var o=r.first(function(t){return t.user.uid==d[e]});o?a.addItem({uid:d[e],gold:o.profit}):a.addItem({uid:d[e]})}else{var o=r.first(function(t){return t.user.uid==d[e]});o?n.addItem({uid:d[e],gold:o.profit}):n.addItem({uid:d[e]})}},u=0;u<d.length;u++)l(u);else for(var c=function(e){var i=t.GameConstant.GetSeatSpriteByUid(d[e]).seatData.seatId;if(i%2==0){var o=r.first(function(t){return t.user.uid==d[e]});o?n.addItem({uid:d[e],gold:o.profit}):n.addItem({uid:d[e]})}else{var o=r.first(function(t){return t.user.uid==d[e]});o?a.addItem({uid:d[e],gold:o.profit}):a.addItem({uid:d[e]})}},u=0;u<d.length;u++)c(u);this._we_list.dataProvider=n,this._other_list.dataProvider=a,this.addEvent()},n.prototype.getAll=function(){for(var e=[],n=t.SeatLayer.Instance.seatSprites,a=0,i=n;a<i.length;a++){var r=i[a];e.push(r.seatData.user.uid)}return e},n.prototype.onRadioClick=function(t){var e=t.target;e==this.resultRadioButton?this.lookTable(!0):e==this.tableRadioButton&&this.lookTable(!1)},n.prototype.lookTable=function(e){this.resultGroup.visible=e,e||t.GameView.Instance.setReadyButton()},n.prototype.prepare=function(e){if(t.RoomData.Instance.fianlData){var n=t.RoomData.Instance.fianlData;return void this.gameFianlSettle(n)}if(t.PokerFunction.MainSeat.isReady)return void t.GameInfo.topLayer.removeChild(this);var a=new Cmd.ReadyUpdateRoomCmd_CS;a.yesOrNo=!0,t.PokerFunction.tcpSend(a)},n.prototype.clostPanel=function(){t.GameInfo.topLayer.removeChild(this)},n.prototype.gameFianlSettle=function(e){t.GameInfo.topLayer.removeChildren();var n=new t.GameOverPanel;t.GameInfo.topLayer.addChild(n),n.x=uniLib.Global.screenWidth-n.width>>1,n.y=uniLib.Global.screenHeight-n.height>>1,n.setData(e),t.RoomData.Instance.clearSeatList(),GX.MulticastEvent.EventList.removeAllEvent()},n.prototype.changeTableHandel=function(e){var n=new Cmd.ChangeRoomCmd_C;t.PokerFunction.tcpSend(n)},n.prototype.backLobbyHandel=function(e){var n=new Cmd.LeaveRoomCmd_CS;n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)},n.prototype.addEvent=function(){this._prepare_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prepare,this),this.resultRadioButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this),this.tableRadioButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this)},n.prototype.removeEvent=function(){this._prepare_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.prepare,this),this.resultRadioButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this),this.tableRadioButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this)},n}(t.EuiPanel);t.LiuJuResultPanel=e,__reflect(e.prototype,"game.LiuJuResultPanel")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isOpen=!1,t.skinName=new MenuSkin,t.init(),t}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){this._instance=null},n.prototype.init=function(){this.menuGroup.scrollH=-this.menuGroup.width,this.addListener()},n.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.onClickTap=function(e){if(e.target==this.menuRect)this.refreshButton(!1);else if(e.target==this.setBtn)this.refreshButton(!1),this.showSetting(),t.SoundHand.Instance.playButtonClick();else if(e.target==this.menuBtn)this.refreshButton(!this.isOpen),t.SoundHand.Instance.playButtonClick();else if(e.target==this.trusteeshipBtn)this.refreshButton(!1),this.gameTrusteeshipRquest(),t.SoundHand.Instance.playButtonClick();else if(e.target==this.gpsBtn)this.refreshButton(!1),t.GameView.Instance.showDistancePanel(),t.SoundHand.Instance.playButtonClick();else if(e.target==this.backLobbyBtn){if(this.refreshButton(!1),t.PokerData.isStandAlone)return void t.GameView.exitGame();if(t.RoomData.Instance.roomType==Cmd.RoomType.RoomType_Match){if(t.CardLayer.Instance.handCards.length<=0){var n=new Cmd.LeaveRoomCmd_CS;return n.uid=uniLib.NetMgr.UID,void t.PokerFunction.tcpSend(n)}this.dissRoom()}else{var n=new Cmd.LeaveRoomCmd_CS;n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)}}else if(e.target==this.chatBtn){this.refreshButton(!1);var a=new t.ChatPanel;t.PopupManager.addPopUp(a,!0,!0),t.SoundHand.Instance.playButtonClick()}},n.prototype.dissRoom=function(){this.msgBox&&(this.msgBox=null);var e=function(e){this.msgBox&&(t.GameInfo.topLayer.removeChild(this.msgBox),this.msgBox=null)};if(!this.msgBox){var n="你确定请求解散房间？";this.msgBox=new t.MsgBoxPanel,this.msgBox.x=uniLib.Global.screenWidth-this.msgBox.width>>1,this.msgBox.y=uniLib.Global.screenHeight-this.msgBox.height>>1,this.msgBox.setData(n,["确定","取消"],[this.confirmHandler,e])}t.GameInfo.topLayer.addChild(this.msgBox)},n.prototype.confirmHandler=function(e){this.msgBox&&(t.GameInfo.topLayer.removeChild(this.msgBox),this.msgBox=null);var n=new Cmd.DissolveRoomRequestCmd_C;t.PokerFunction.tcpSend(n)},n.prototype.showSetting=function(){var e=new t.SettingPanel;e.addEventListener(t.UIEventConsts.CHANGE_TABLECLOTH,t.GameView.Instance.tableclothChange,this),t.PopupManager.addPopUp(e,!0,!0)},n.prototype.gameTrusteeshipRquest=function(){var e=t.PokerFunction.GetUserInfoByUid(uniLib.NetMgr.UID);if(!e||!e.isTrust){var n=new Cmd.HostUpdateRoomCmd_CS;n.yesOrNo=!0,n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)}},n.prototype.showMessageBox=function(){this.msgbox||(this.msgbox=new t.MsgBoxPanel),this.msgbox.setData("不能返回大厅，你要解散游戏么",["确定","取消"],[this.confirmHandel,this.cancelHandel],this),this.msgbox.x=uniLib.Global.screenWidth-this.msgbox.width>>1,this.msgbox.y=uniLib.Global.screenHeight-this.msgbox.height>>1,t.PopupManager.addPopUp(this.msgbox)},n.prototype.confirmHandel=function(e){var n=new Cmd.DissolveRoomRequestCmd_C;t.PokerFunction.tcpSend(n)},n.prototype.cancelHandel=function(t){this.removeTips()},n.prototype.removeTips=function(){this.msgbox&&(t.PopupManager.removePopUp(this.msgbox),this.msgbox=null)},n.prototype.refreshButton=function(t){this.isOpen=t;var e=-this.menuGroup.width;egret.Tween.removeTweens(this.menuBtn),egret.Tween.removeTweens(this.menuGroup),t?(this.menuGroup.scrollH=e,egret.Tween.get(this.menuBtn).to({rotation:-135},200)):(this.menuGroup.scrollH=0,egret.Tween.get(this.menuBtn).to({rotation:0},200));var n=this,a=function(){n.menuGroup.parent&&(n.menuGroup.parent.visible=n.isOpen)};t?(a(),egret.Tween.get(this.menuGroup).to({scrollH:0},200)):egret.Tween.get(this.menuGroup).to({scrollH:e},200).call(a)},n.prototype.destroy=function(){this.removeListener()},n}(eui.Component);t.MenuPanel=e,__reflect(e.prototype,"game.MenuPanel")}(game||(game={}));var game;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.skinName=new MsgBox_DZ_Skin,t.init(),t}return __extends(a,e),a.prototype.init=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},a.prototype.setData=function(t,e,a,i,r){this.desLabel.text=t,this.labelArray=e,this.funcArray=a,this._backObj=i,this.btnsGroup.removeChildren(),this.yesBtn=null,this.noBtn=null,1==e.length?(this.yesBtn=new n("确定","bt_green_bg"),this.btnsGroup.addChild(this.yesBtn),this.closeBtn.visible=!1):2==e.length&&(this.yesBtn=new n("确定","bt_green_bg"),this.btnsGroup.addChild(this.yesBtn),this.noBtn=new n("取消","bt_orange_bg"),this.btnsGroup.addChild(this.noBtn)),this.funcArray&&this.funcArray[0]&&this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.funcArray[0],this._backObj),this.funcArray&&this.funcArray[1]&&(this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.funcArray[1],this._backObj),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.funcArray[1],this._backObj)),this.yesBtn&&this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.noBtn&&this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},a.prototype.onClose=function(e){t.PopupManager.removePopUp(this)},a.prototype.destroy=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},a}(eui.Component);t.MsgBoxPanel=e,__reflect(e.prototype,"game.MsgBoxPanel");var n=function(t){function e(e,n){var a=t.call(this)||this;return a.skinName=new Button_DZ_Skin,a.labelDisplay.text=e,a.iconDisplay.source=n,a}return __extends(e,t),e}(eui.Button);t.GameButtonItem=n,__reflect(n.prototype,"game.GameButtonItem")}(game||(game={}));var game;!function(t){var e=function(t){function e(e,n){var a=t.call(this)||this;return a.p_cardId=e,a.addCard(n),a}return __extends(e,t),Object.defineProperty(e.prototype,"cardId",{get:function(){return this.p_cardId},enumerable:!0,configurable:!0}),e.prototype.addCard=function(t){var e=table.TablePokerCard.resNormal(this.cardId);this.card=new egret.Bitmap(RES.getRes(e)),t?(this.card.scaleX=.6,this.card.scaleY=.6):(this.card.scaleX=.5,this.card.scaleY=.5),this.addChildAt(this.card,0)},e}(egret.DisplayObjectContainer);t.PartnerHandCardSprite=e,__reflect(e.prototype,"game.PartnerHandCardSprite")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isStartMove=!1,t.startX=0,t.zuGroup=new Array,t.selectedCard=new Array,t.fenList=new Array,t.handCardList=new Array,t.suoCardList=[],t.isEnd=0,t.normalGroupArr=[],t.formatGroupArr=[],t.twoHandCardArr=[],t.dealCardType=0,t.twoindex=-1,t.partnerHandCardList=new Array,t.gongCardList=[],t.cardAllList=[[]],t.touchEnabled=!0,t.addListener(),t
}return __extends(n,e),Object.defineProperty(n,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new n),this.m_Instance},enumerable:!0,configurable:!0}),n.clearInstance=function(){this.m_Instance=null},n.prototype.destroy=function(){this.removeListener(),n.clearInstance()},n.prototype.addListener=function(){t.RoomData.Instance.startGameChanged.add(this.startGameChanged,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCardTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCardTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onCardTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCardTouch,this),GX.PokerEvent.Instance.dealCardEnd.add(this.initGroupCard,this)},n.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCardTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCardTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onCardTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCardTouch,this),GX.PokerEvent.Instance.dealCardEnd.remove(this.initGroupCard,this)},n.prototype.startGameChanged=function(){if("1"!=egret.localStorage.getItem("cardType")?t.GameConstant.PokerTextureType=0:t.GameConstant.PokerTextureType=1,1!=t.RoomInfo.getInstance().video){for(var e=0,n=t.RoomData.Instance.seatList;e<n.length;e++){var a=n[e];a.addHandCardEvent.removeAll(),a.delectHandCardEvent.removeAll(),a.outCardChanged.removeAll()}if(t.RoomData.Instance.startGame){var i=t.PokerFunction.MainSeat;if(null==i)return;if(i.addHandCardEvent.add(this.addHandCard,this),i.delectHandCardEvent.add(this.delectHandCard,this),i.outCardChanged.add(this.outCardChanged,this),t.GameConstant.isShowTeam){var r=null;if(r=1==i.seatId?t.PokerFunction.GetSeatDataBySeatId(3):2==i.seatId?t.PokerFunction.GetSeatDataBySeatId(4):3==i.seatId?t.PokerFunction.GetSeatDataBySeatId(1):t.PokerFunction.GetSeatDataBySeatId(2),null==r)return;r.addHandCardEvent.add(this.addPartnerHandCard,this),r.delectHandCardEvent.add(this.delectPartnerHandCard,this)}for(var o=0,s=t.SeatLayer.Instance.seatSprites;o<s.length;o++){var a=s[o];a.removeReadyIcon()}}}else if(t.RoomData.Instance.startGame)for(var h=0,d=t.SeatLayer.Instance.seatSprites;h<d.length;h++){var a=d[h];a.removeReadyIcon()}},Object.defineProperty(n.prototype,"paizuGroup",{get:function(){return this.zuGroup},enumerable:!0,configurable:!0}),n.prototype.onCardTouch=function(e){if(e.target instanceof t.HandCardSprite)if(e.type==egret.TouchEvent.TOUCH_BEGIN)this.isStartMove=!0,this.startX=e.stageX,this.onTouchCard(e);else if(e.type==egret.TouchEvent.TOUCH_MOVE){if(!this.isStartMove)return;this.onTouchCard(e)}else if(e.type==egret.TouchEvent.TOUCH_END||e.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE){t.OperationPlay.Instance.playButtonEnabled(),this.zuGroup.clear();var n=this.getSelectCard(!0);if(n.length<1)return;var a=n.first(function(t){return 0==t.locked}),i=a?!0:!1;t.GameView.Instance.updateSpButton(i)}},n.prototype.getSelectCard=function(t){for(var e=n.Instance.handCards,a=new Array,i=0,r=e;i<r.length;i++){var o=r[i];o.darken&&(t?a.push(o):a.push(o.cardId))}return a},n.prototype.setLocked=function(t){var e=this.getSelectCard(!0);if(!(e.length<1))for(var n=0,a=e;n<a.length;n++){var i=a[n];i.locked=t}},n.prototype.setUnLocked=function(){},n.prototype.onTouchCard=function(t){var e=this.zuGroup.first(function(e){return e.cardId==t.target.cardId});e||(this.zuGroup.push(t.target),t.target.darken=!t.target.darken)},n.prototype.onEndTouch=function(e,n){this.selectedCard.clear();for(var a=this.touchIndex(e,n),i=this.handCardList.length,r=0;i>r;r++)this.handCardList[r].darken=!1,r>=a.min&&r<=a.max&&(this.handCardList[r].selected=!this.handCardList[r].selected,this.selectedCard.push(this.handCardList[r]));this.checkLianByTouch(),t.OperationPlay.Instance.playButtonEnabled()},n.prototype.checkLianByTouch=function(){for(var e=[],n=0,a=this.selectedCard;n<a.length;n++){var i=a[n];e.push(i.cardId)}var r=[];r.clear();var o=[];o.clear();var s=!1,h=new t.CardAnalysis(e),d=h.maxLian,l=h.maxDoubleLian;if(!d||d.length<1){if(!l||l.length<1)return;s=!0,r=l[0]}else s=!1,r=d[0];for(var u=0,c=this.handCardList;u<c.length;u++){var i=c[u];i.selected=!1}for(var p=function(t){var e=m.handCardList.filter(function(e){return Math.floor(e.cardId/100)==t});s?(o.push(e[0]),o.push(e[1])):o.push(e[0])},m=this,g=0,C=r;g<C.length;g++){var i=C[g];p(i)}for(var f=0,y=o;f<y.length;f++){var v=y[f];v.selected=!0}},n.prototype.touchIndex=function(e,n){var a=this.handCardList.length,i=this.handCardX,r=(this.handCardWidth,Math.floor((e-i)/t.GameConstant.CardGap));r=0>r?0:r>a-1?a-1:r;var o=Math.floor((n-i)/t.GameConstant.CardGap);o=0>o?0:o>a-1?a-1:o;var s=o>r?r:o,h=r>o?r:o;return{min:s,max:h}},Object.defineProperty(n.prototype,"handCards",{get:function(){return this.handCardList},enumerable:!0,configurable:!0}),n.prototype.addHandCard=function(e,n,a){if(this.dealCardType=a,!this.handCards.seek(function(t){return t.cardId==e})){if(n==t.CardActionType.INIT){var i=new t.HandCardSprite(e);i.touchEnabled=!0,i.touchChildren=!1,i.visible=!1,this.addChild(i),this.handCardList.push(i),this.gongCardList.clear()}else if(n==t.CardActionType.ADD){this.dealCardType=2;var r=t.GameConstant.GetSeatSpriteByUid(uniLib.NetMgr.UID);if(!r||!r.uid)return;var i=(r.seatData.user?r.seatData.user.gender:null,new t.HandCardSprite(e));i.touchEnabled=!0,i.touchChildren=!1,i.visible=!1,this.addChild(i),this.handCardList.push(i)}else if(n==t.CardActionType.RECONNEC){var i=new t.HandCardSprite(e);i.touchEnabled=!0,i.touchChildren=!1,i.visible=!1,this.addChild(i),this.handCardList.push(i)}t.GameView.Instance.setBtnTouch(!0)}},n.prototype.delectHandCard=function(e){var n=this.handCardList.first(function(t){return t.cardId==e});null!=n&&null!=n.parent&&(this.removeChild(n),this.handCardList.deletefirst(function(t){return t==n}),t.GameConstant.cardGroupType?this.removerFromCountArr(n):this.twoHandCardArr.deletefirst(function(t){return t==n}),this.updataHandCardPosition())},n.prototype.removerFromCountArr=function(t){for(var e=0;e<this.normalGroupArr.length;e++){var n=this.normalGroupArr[e];if(n&&!(n.length<=0)){for(var a=0;a<n.length;a++)if(n[a].cardId==t.cardId){n.remove(n[a]);break}0==n.length&&this.normalGroupArr.remove(n)}}},n.prototype.updataLordLogo=function(){for(var e=this.handCardList.length,n=0;e>n;n++)t.RoomData.Instance.landlordUid==uniLib.NetMgr.UID&&n==e-1?this.handCardList[n].addLordLogo():this.handCardList[n].removeLordLogo()},Object.defineProperty(n.prototype,"cardEnd",{get:function(){return this.isEnd},enumerable:!0,configurable:!0}),n.prototype.initGroupCard=function(e){this.checkRev(e);if(this.revertDark(),this.setHunCard(),t.GameConstant.cardGroupType)this.setZuArray(),this.updataHandCardPosition();else{this.removeHandCards();var n=this.handCardList;if(!n||!n.length)return;n.sort(function(t,e){return e.cardId-t.cardId});this.setTwoPosition(!0)}var a=function(){this.isEnd=1,t.GameView.Instance.setListener(),t.GameView.Instance.setBtnTouch(!0)};uniLib.SetUniEventTimeout(this,a,1e3,1,this)},n.prototype.setFormat=function(t){for(var e=[],n=-1,a=0;a<t.length;a++)if(t[a]&&t[a]instanceof Array){n++;var i=t[a];e.push(i)}return e},n.prototype.setTwoArrFormat=function(e){for(var n=[],a=t.GameConstant.hunPoint,i=0,r=e;i<r.length;i++){var o=r[i];o&&o.cardPlace==a&&n.push(o)}for(var s=0,h=e;s<h.length;s++){var o=h[s];o&&o.cardPlace!=a&&n.push(o)}return n},n.prototype.setHandCardType=function(){if(t.GameConstant.cardGroupType)this.setZuArray();else{this.removeHandCards();var e=this.handCardList;if(!e||!e.length)return;e.sort(function(t,e){return e.cardId-t.cardId}),this.twoHandCardArr=[],this.twoHandCardArr=this.setTwoArrFormat(e),this.addHandCards()}this.updataHandCardPosition()},n.prototype.setZuArray=function(){var e=t.GameConstant.hunPoint;if(this.normalGroupArr=[],this.formatGroupArr=[],!(this.handCardList.length<=0)){for(var n=0;n<this.handCardList.length;n++){for(var a=this.handCardList[n].cardPlace,i=a,r=0,o=t.SeatLayer.Instance.seatSprites;r<o.length;r++){var s=o[r];s.handCardCountChanged(n+1)}if(t.SoundHand.Instance.playCardClick(),n==this.handCardList.length-1)for(var h=0,d=t.SeatLayer.Instance.seatSprites;h<d.length;h++){var s=d[h];s.handCardCountChanged(s.seatData.handCardSum)}i==e&&(this.normalGroupArr[22]||(this.normalGroupArr[22]=[]),this.normalGroupArr[22].push(this.handCardList[n])),i!=e&&(this.normalGroupArr[i]||(this.normalGroupArr[i]=[]),this.normalGroupArr[i].push(this.handCardList[n]))}this.formatGroupArr=this.setFormat(this.normalGroupArr)}},n.prototype.removeHandCards=function(){for(var t=0,e=this.handCardList;t<e.length;t++){var n=e[t];this.removeChild(n)}},n.prototype.addHandCards=function(){for(var t=0,e=this.twoHandCardArr;t<e.length;t++){var n=e[t];this.addChild(n)}},n.prototype.setHunCard=function(){for(var e=t.GameConstant.hunPoint,n=0,a=this.handCardList;n<a.length;n++){var i=a[n];i.cardPlace==e&&i.addBackGround()}},n.prototype.cardAnimation=function(){for(var e=this.twoHandCardArr.length,n=this.getStartX(),a=-1,i=0;e>i;i++){var r=this.twoHandCardArr[i];a++,i==e-29&&(a=0),egret.Tween.removeTweens(r),e>29?egret.Tween.get(r).to({x:n+t.GameConstant.tgap*a},t.GameConstant.DealCardTime):egret.Tween.get(r).to({x:n+t.GameConstant.tgap*i},t.GameConstant.DealCardTime)}},n.prototype.dealCardEnd=function(){n.Instance.updataHandCardPosition()},n.prototype.updataHandCardPosition=function(){if(t.GameConstant.cardGroupType){if(this.formatGroupArr.length<=0)return;var e=-1,n=t.GameConstant.CardGapX,a=this.handCardX,i=this.checkGap();n=i?i:n,i&&(a=this.getZuHandX()),this.removeHandCards();for(var r=this.formatGroupArr.length-1;r>=0;r--){var o=this.formatGroupArr[r];if(o&&!(o.length<=0)){e++;for(var s=-1,h=o.length,d=8,l=h-8,u=0;u<o.length;u++)s++,0!=s&&s%8==0&&e++,o[u].visible=!0,o[u].x=a+e*n,h>8?s>=8?(l--,o[u].y=t.GameConstant.HandCardY-36*l):(d--,o[u].y=t.GameConstant.HandCardY-36*d):o[u].y=t.GameConstant.HandCardY-36*(h-1-s),this.addChild(o[u]),o[u].changePai()}}}else this.setTwoPosition();this.setHunCard()},n.prototype.setTwoPosition=function(e){if(void 0===e&&(e=!1),!(this.handCardList.length<=0)){e&&(this.twoHandCardArr=[],this.twoHandCardArr=this.setTwoArrFormat(this.handCardList));var n=this.twoHandCardArr,a=n.length,i=this.getTwoGap();t.GameConstant.tgap=i;for(var r=this.getStartX(),o=-1,s=0;a>s;s++){var h=n[s];if(this.addChild(h),h.changePai(),h.visible=!0,o++,s==a-t.GameConstant.twoLineNum&&(o=0),a>t.GameConstant.twoLineNum?h.x=r+t.GameConstant.tgap*o:h.x=r+t.GameConstant.tgap*s,a>t.GameConstant.twoLineNum&&s<a-t.GameConstant.twoLineNum?h.y=451:h.y=521,e){for(var d=0,l=t.SeatLayer.Instance.seatSprites;d<l.length;d++){var u=l[d];u.handCardCountChanged(s+1)}if(s==a-1)for(var c=0,p=t.SeatLayer.Instance.seatSprites;c<p.length;c++){var u=p[c];u.handCardCountChanged(u.seatData.handCardSum)}}}}},n.prototype.getTwoGap=function(){var e=uniLib.Global.screenWidth-t.GameConstant.HeadWidth-80,n=(e-t.GameConstant.twoCardWidth)/(t.GameConstant.twoLineNum-1);return n},Object.defineProperty(n.prototype,"TwoY",{get:function(){var e=0;this.twoindex++;var a=n.Instance.handCards.length;return e=a>29&&this.twoindex<a-29?t.GameConstant.startY:t.GameConstant.HandCardY},enumerable:!0,configurable:!0}),n.prototype.getStartX=function(){var e=this.twoHandCardArr.length,n=0;if(e>=t.GameConstant.twoLineNum){var a=t.GameConstant.tgap*(t.GameConstant.twoLineNum-1)+t.GameConstant.twoCardWidth;n=(uniLib.Global.screenWidth-a)/2}else{var a=t.GameConstant.tgap*(e-1)+t.GameConstant.twoCardWidth;n=(uniLib.Global.screenWidth-a)/2}return n},n.prototype.removeAllHandCard=function(){var t=this.handCardList;if(t&&t instanceof Array){for(var e=0,n=t;e<n.length;e++){var a=n[e];a&&a.parent&&this.removeChild(a)}t.clear()}},n.prototype.refreshOtherCard=function(t){for(var e=t.length,a=n.otherHandCard,i=0;e>i;i++)this.handCardList[i].x=a+30*i},n.prototype.checkGap=function(){for(var e=11*t.GameConstant.CardWidth,n=0,a=0,i=this.normalGroupArr;a<i.length;a++){var r=i[a];r instanceof Array&&r.length>0&&n++,r instanceof Array&&r.length>8&&n++}if(11>n)return 0;var o=(e-t.GameConstant.CardWidth)/(n-1);return o},n.prototype.getZuHandX=function(){var e=11*t.GameConstant.CardWidth;return(uniLib.Global.screenWidth-e)/2},n.prototype.checkRev=function(e){if(e instanceof Object)for(var n=e.seatCardList,a=0,i=n;a<i.length;a++){var r=i[a];if(r.catchCards){if(r.seatId){var o=t.GameConstant.GetSeatSpriteBySeatId(r.seatId).seatData.user;t.EffectCreate.Instance.flyCardMeEffect(r.catchCards[0],o.uid)}return!0}}return!1},n.prototype.setHongZha_old=function(){var e=t.GameConstant.hunPoint;if(t.GameConstant.cardGroupType){if(!this.formatGroupArr.length)return;this.formatGroupArr.sort(function(t,e){return t.length==e.length?t[0].cardPlace-e[0].cardPlace:t.length-e.length});var n=this.formatGroupArr.first(function(t){return t[0].cardPlace==e});n&&(this.formatGroupArr.remove(n),this.formatGroupArr.unshift(n))}else{if(!this.twoHandCardArr.length)return;this.twoHandCardArr=this.reGroup()}this.updataHandCardPosition()},n.prototype.reGroup_old=function(){var e=[];if(!(this.handCardList.length<=0)){for(var n=0;n<this.handCardList.length;n++){var a=this.handCardList[n].cardPlace,i=a;e[i]||(e[i]=[]),e[i].push(this.handCardList[n])}e=this.setFormat(e),e.sort(function(t,e){return t.length==e.length?e[0].cardPlace-t[0].cardPlace:e.length-t.length});var r=e.first(function(e){return e[0].cardPlace==t.GameConstant.hunPoint});r&&(e.remove(r),e.push(r));for(var o=[],s=0,h=e;s<h.length;s++){var d=h[s];o=o.concat(d)}return o}},n.prototype.setHongZha=function(){var e=this;if(t.GameConstant.isSetHongzha){var n=t.GameConstant.zhaProp;t.GameConstant.hunPoint;if(t.GameConstant.cardGroupType){if(!this.formatGroupArr.length)return;var a=[];this.formatGroupArr.forEach(function(t,e){t.length>=n&&a.push(t)}),a.sort(function(t,e){return t.length==e.length?t[0].cardPlace-e[0].cardPlace:t.length-e.length}),a.forEach(function(t,n){e.formatGroupArr.remove(t),e.formatGroupArr.push(t)})}else{if(!this.twoHandCardArr.length)return;this.reGroup()}this.updataHandCardPosition()}else this.setHandCardType()},n.prototype.reGroup=function(){var e=this,n=[],a=[];if(!(this.handCardList.length<=0)){for(var i=t.GameConstant.hunPoint,r=t.GameConstant.zhaProp,o=0;o<this.handCardList.length;o++){var s=this.handCardList[o].cardPlace,h=s;h!=i?(n[h]||(n[h]=[]),n[h].push(this.handCardList[o])):(n[22]||(n[22]=[]),n[22].push(this.handCardList[o]))}n=this.setFormat(n),n.forEach(function(t,e){t.length>=r&&a.push(t)}),a.sort(function(t,e){return t.length==e.length?t[0].cardPlace-e[0].cardPlace:t.length-e.length}),a.forEach(function(t,n){t.length&&t.forEach(function(t,n){e.twoHandCardArr.remove(t)})});for(var d=[],l=0,u=a;l<u.length;l++){var c=u[l];this.twoHandCardArr=c.concat(this.twoHandCardArr)}return d}},n.prototype.handCardsForbidOp=function(){for(var t=0,e=this.handCards;t<e.length;t++){var n=e[t];n.darken=!0}this.touchEnabled=!1,this.touchChildren=!1},n.prototype.handCardsAllowOp=function(){for(var e=t.PokerFunction.GetUserInfoByUid(uniLib.NetMgr.UID),n=0,a=this.handCards;n<a.length;n++){var i=a[n];e&&e.isTrust?(i.darken=!0,this.touchEnabled=!1,this.touchChildren=!1):(i.darken=!1,this.touchEnabled=!0,this.touchChildren=!0)}},n.prototype.addPartnerHandCard=function(e){this.delectPartnerHandCard(e);var n=new t.PartnerHandCardSprite(e);n.touchEnabled=!0,n.touchChildren=!1,this.addChild(n),this.partnerHandCardList.push(n),this.updataPartnerHandCardPosition()},n.prototype.delectPartnerHandCard=function(t){var e=this.partnerHandCardList.first(function(e){return e.cardId==t});null!=e&&null!=e.parent&&(this.removeChild(e),this.partnerHandCardList.deletefirst(function(t){return t==e}),this.updataPartnerHandCardPosition())},n.prototype.updataPartnerHandCardPosition=function(){var e=this.partnerHandCardList.length,n=this.partnerHandCardX;this.partnerHandCardList.deepcopy();this.partnerHandCardList.sort(function(t,e){return e.cardId-t.cardId});for(var a=0;e>a;a++){var i=this.partnerHandCardList[a];i.x=n+t.GameConstant.PartnerCardGap*a,i.y=80,this.setChildIndex(i,a)}},n.getSortSpriteIndexforCardIdP=function(t,e){var n=t.filter(function(t){return Math.floor(t.cardId/100)==Math.floor(e/100)}),a=0;return a=e>2e3?1e3+Math.floor(e/100):100*n.length+Math.floor(e/100)},Object.defineProperty(n.prototype,"partnerHandCardWidth",{get:function(){var e=this.partnerHandCardList.length;return t.GameConstant.CardWidth+e*t.GameConstant.PartnerCardGap},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"partnerHandCardX",{get:function(){return(uniLib.Global.screenWidth-this.partnerHandCardWidth)/2+25},enumerable:!0,configurable:!0}),n.prototype.notUp=function(){null==this.notUpBitmap&&(this.notUpBitmap=new egret.Bitmap(RES.getRes("tips_onlypass"))),this.notUpBitmap.x=(uniLib.Global.screenWidth-this.notUpBitmap.width)/2,this.notUpBitmap.y=t.GameConstant.HandCardY+(t.GameConstant.CardHeight-this.notUpBitmap.height)/2,this.addChild(this.notUpBitmap),this.handCardsForbidOp(),this.revertDark()},n.prototype.removeupNotUp=function(){this.notUpBitmap&&this.notUpBitmap.parent&&this.removeChild(this.notUpBitmap),this.touchEnabled=!0,this.touchChildren=!0},n.prototype.removePlayCardupNotUp=function(){this.notUpBitmap&&this.notUpBitmap.parent&&this.removeChild(this.notUpBitmap),this.touchEnabled=!0,this.touchChildren=!0},n.prototype.getGongList=function(){return this.gongCardList},n.prototype.setGongCard=function(e,n){var a=t.GameConstant.GetClientNoByUid(n);this.gongCardList[a]||(this.gongCardList[a]=[]),this.gongCardList[a].push(e)},n.prototype.trust=function(){null==this.trustButton&&(this.trustButton=new eui.Button,this.trustButton.skinName=new CancelEntrustButton_DZ_Skin),this.trustButton.touchEnabled=!0,t.OperateLayer.Instance.addChild(this.trustButton),this.trustButton.x=(uniLib.Global.screenWidth-this.trustButton.width)/2,this.trustButton.y=550,this.handCardsForbidOp(),this.trustButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelTrustHandel,this)},n.prototype.cancelTrust=function(){this.trustButton&&(this.trustButton.parent&&t.OperateLayer.Instance.removeChild(this.trustButton),this.trustButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelTrustHandel,this),this.trustButton=null,this.handCardsAllowOp())},n.prototype.cancelTrustHandel=function(e){var n=new Cmd.HostUpdateRoomCmd_CS;n.yesOrNo=!1,n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)},Object.defineProperty(n.prototype,"handCardWidth",{get:function(){if(t.GameConstant.cardGroupType){for(var e=0,n=0,a=this.normalGroupArr;n<a.length;n++){var i=a[n];i instanceof Array&&i.length>0&&e++,i instanceof Array&&i.length>8&&e++}return t.GameConstant.CardWidth+(e-1)*t.GameConstant.CardGapX}var e=this.handCardList.length;return t.GameConstant.CardWidth+(e-1)*t.GameConstant.CardGap},enumerable:!0,configurable:!0}),n.prototype.revertDark=function(){for(var t=0,e=this.handCardList;t<e.length;t++){var n=e[t];n.darken=!1}},n.prototype.resetHandCard=function(){for(var t=0,e=this.handCardList;t<e.length;t++){var n=e[t];n.darken=!1}},Object.defineProperty(n.prototype,"handCardX",{get:function(){return t.GameConstant.cardGroupType?(uniLib.Global.screenWidth-this.handCardWidth)/2:this.handCardList.length>17?(uniLib.Global.screenWidth-this.handCardWidth)/2+42:(uniLib.Global.screenWidth-t.GameConstant.HeadWidth-this.handCardWidth)/2+t.GameConstant.OperationOffsetRight},enumerable:!0,configurable:!0}),n.prototype.outCardChanged=function(t){},n.prototype.clearAllCard=function(){for(var e=0,n=this.cardAllList;e<n.length;e++){var a=n[e];if(a instanceof Array)for(var i=0,r=a;i<r.length;i++){var o=r[i];o&&o.parent&&t.CardLayer.Instance.removeChild(o)}}this.cardAllList.clear()},n.prototype.getCardList=function(e){var n=new Array,a=e.cardList;a.sort(function(t,e){return Math.floor(e/100)-Math.floor(t/100)});for(var i=e.uid,r=(t.GameConstant.GetClientNoByUid(i),0),o=a;r<o.length;r++){var s=o[r],h=new t.ScardSprite(s);h.touchEnabled=!0,h.touchChildren=!1,h.cardWidth=41,h.cardHeight=29,t.CardLayer.Instance.addChild(h),n.push(h)}return this.cardAllList.push(n),n},n.prototype.updataResultCardPosition=function(e,n){if(0!=e.length){var a=t.GameConstant.GetClientNoByUid(n);this.setResultHunCard(e);for(var i=e.length,r=this.resultCardX[a],o=this.resultCardY[a],s=-1,h=0,d=-1,l=Math.floor(e.length/2),u=0;i>u;u++){var c=e[u];if(0==a){var p=(uniLib.Global.screenWidth-this.resultCardWidth(e))/2;u>l?(d++,c.y=640,c.x=p+t.GameConstant.CardGap*d):(c.y=o,c.x=p+t.GameConstant.CardGap*u)}else s++,0!=u&&u%12==0&&(h++,s=0),c.y=o+29*h,c.x=r+30*s}}},n.prototype.setResultHunCard=function(e){for(var n=t.GameConstant.hunPoint,a=0,i=e;a<i.length;a++){var r=i[a];r.cardPlace==n&&r.addBackGround()}},Object.defineProperty(n.prototype,"resultCardX",{get:function(){var e;return e=t.GameConstant.isFourPeople?[140,uniLib.Global.screenWidth-500,uniLib.Global.screenWidth/2-190,130]:[140,uniLib.Global.screenWidth-500,uniLib.Global.screenWidth-500,uniLib.Global.screenWidth/2+164,uniLib.Global.screenWidth/2-274,130]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"resultCardY",{get:function(){var e;return e=t.GameConstant.isFourPeople?[611,150,1,150]:[611,400,206,1,1,255]},enumerable:!0,configurable:!0}),n.prototype.resultCardWidth=function(e){var n=Math.floor(e.length/2);return 41+(n-1)*t.GameConstant.CardGap},n}(egret.DisplayObjectContainer);e.otherHandCard=500,t.CardLayer=e,__reflect(e.prototype,"game.CardLayer")}(game||(game={}));var game;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.weLevel=3,t.otherLevel=3,t.daji=3,t.shengLevel=0,t.oldWe=0,t.oldOther=0,t.skinName=new RoundResult_DZ_Skin,t.init(),t}return __extends(a,e),Object.defineProperty(a,"Instance",{get:function(){return a._instance||(a._instance=new a),a._instance},enumerable:!0,configurable:!0}),a.prototype.setData=function(t){this.originzeRoundResultInfo(t),this.showBtns(t.haveNextRound)},a.prototype.addUIListener=function(){},a.prototype.removeUIListener=function(){},a.prototype.adaptationWidth=function(){e.prototype.adaptationWidth.call(this)},a.prototype.init=function(){this._we_list.itemRenderer=n,this._other_list.itemRenderer=n},a.prototype.showBtns=function(e){var n=t.RoomData.Instance.roomCurrentInnings,a=t.RoomData.Instance.roomTotalInnings;null!=n&&null!=a&&n==a||(e?this._prepare_btn.visible=!0:this._prepare_btn.visible=!1),t.PokerData.isStandAlone&&(this._prepare_btn.visible=!0)},a.prototype.originzeRoundResultInfo=function(e){var n=e.doorsData,a=e.winnerList;if(n||n instanceof Array){var i=new eui.ArrayCollection,r=new eui.ArrayCollection,o=t.GameView.Instance.bottomPoint?!0:!1,s=o&&e.resultList&&e.resultList instanceof Array?e.resultList:[],h=this.checkType();h?(this.weLevel=n[0].level,this.otherLevel=n[1].level):(this.weLevel=n[1].level,this.otherLevel=n[0].level);var d,l=uniLib.NetMgr.UID,u=a.find(function(t){return t==l}),c=this.getAll();if(-1!=u){d=!0,this.daji=this.weLevel;for(var p=function(t){var e=s.first(function(e){return e.user.uid==t});e?i.addItem({uid:t,gold:e.profit}):i.addItem({uid:t})},m=0,g=a;m<g.length;m++){var C=g[m];p(C)}for(var f=c.filter(function(t){return-1==a.indexOf(t)}),y=function(t){var e=s.first(function(e){return e.user.uid==t});e?r.addItem({uid:t,gold:e.profit}):r.addItem({uid:t})},v=0,b=f;v<b.length;v++){var C=b[v];y(C)}}else{d=!1,this.daji=this.otherLevel;for(var _=function(t){var e=s.first(function(e){return e.user.uid==t});e?r.addItem({uid:t,gold:e.profit}):r.addItem({uid:t})},T=0,L=a;T<L.length;T++){var C=L[T];_(C)}for(var f=c.filter(function(t){return-1==a.indexOf(t)}),I=function(t){var e=s.first(function(e){return e.user.uid==t});e?i.addItem({uid:t,gold:e.profit}):i.addItem({uid:t})},S=0,P=f;S<P.length;S++){var C=P[S];I(C)}}this._we_list.dataProvider=i,this._other_list.dataProvider=r,this.addEvent(),this.wintitle.visible=d,this.levelNum.visible=d,this._victory_image.source=d?"win_anim_18":"lose_anim_30";var G=this.updateLevel(this.daji);this.dajiBitMapLabel.text=G,t.GameConstant.hunPoint=this.daji;var k=n.first(function(t){return null!=t.score});if(k&&(this.shengLevel=k.score),d?(this.levelNum.source="resultlevel_"+this.shengLevel,this.welevelBitMapLabel.text=this.formatRank(this.weLevel-this.shengLevel+""),this.otherlevelBitMapLabel.text=this.formatRank(this.otherLevel+""),this.wintitle.source="result_wintitle"):(this.welevelBitMapLabel.text=this.formatRank(this.weLevel+""),this.otherlevelBitMapLabel.text=this.formatRank(this.otherLevel-this.shengLevel+"")+"+"+this.shengLevel),0==this.shengLevel&&(this._victory_image.source="win_anim_18",this.wintitle.visible=!0,this.wintitle.source="result_pingju",this.levelNum.visible=!0,this.levelNum.source="resultlevel_"+this.shengLevel,this.welevelBitMapLabel.text=this.formatRank(this.weLevel+""),this.otherlevelBitMapLabel.text=this.formatRank(this.otherLevel+"")),null==e.honor)return void(this.daimaoLabel.visible=!1);var w=e.honor&&e.honor instanceof Array?e.honor:[],B=w.first(function(t){return t==Cmd.GameHonor.GameHonor_Hat});B?(this.daimaoLabel.visible=!1,this.daimaoLabel.text="满足带帽",this.levelNum.visible=this.dajiBitMapLabel.visible=this._victory_image.visible=!1,d?(this.wintitle.visible=!0,this.wintitle.source="result_wintitle"):this.wintitle.visible=!1):d&&(this.daimaoLabel.visible=!0,this.daimaoLabel.text="不满足带帽")}},a.prototype.updateIcon=function(){},a.prototype.updateLevel=function(t){return t>=10?10==t?"S":11==t?"J":12==t?"Q":13==t?"K":14==t?"A":void 0:t+""},a.prototype.formatRank=function(t){return t},a.prototype.checkType=function(){var e=!0,n=t.PokerFunction.MainSeat.seatId;return e=n%2==0?!1:!0},a.prototype.getAll=function(){for(var e=[],n=t.SeatLayer.Instance.seatSprites,a=0,i=n;a<i.length;a++){var r=i[a];e.push(r.seatData.user.uid)}return e},a.prototype.judgeVictoryOrFailed=function(e){var n=!1,a=uniLib.NetMgr.UID,i=e.first(function(t){return t==a});n=i?!0:!1,n?(this._victory_image.visible=!0,t.SoundHand.Instance.playDDZWin()):(this._victory_image.visible=!1,t.SoundHand.Instance.playDDZLose()),this.effect.play()},a.prototype.removeEffect=function(){this.effect&&this.effect.parent&&this.effect.stop(),this.effect=null,this.winEffect&&this.winEffect.parent&&(this.winEffect.stop(),this.removeChild(this.winEffect)),this.winEffect=null},a.prototype.prepare=function(e){if(t.RoomData.Instance.fianlData){var n=t.RoomData.Instance.fianlData;return void this.gameFianlSettle(n)}if(t.PokerFunction.MainSeat.isReady)return t.GameInfo.topLayer.removeChild(this),void this.removeEffect();var a=new Cmd.ReadyUpdateRoomCmd_CS;a.yesOrNo=!0,t.PokerFunction.tcpSend(a)},a.prototype.clostPanel=function(){t.GameInfo.topLayer.removeChild(this),this.removeEffect()},a.prototype.gameFianlSettle=function(e){t.GameInfo.topLayer.removeChildren();var n=new t.GameOverPanel;t.GameInfo.topLayer.addChild(n),n.x=uniLib.Global.screenWidth-n.width>>1,n.y=uniLib.Global.screenHeight-n.height>>1,n.setData(e),t.RoomData.Instance.clearSeatList(),GX.MulticastEvent.EventList.removeAllEvent()},a.prototype.onRadioClick=function(t){var e=t.target;e==this.resultRadioButton?this.lookTable(!0):e==this.tableRadioButton&&this.lookTable(!1)},a.prototype.lookTable=function(e){this.resultGroup.visible=e,e||t.GameView.Instance.setReadyButton()},a.prototype.changeTableHandel=function(e){var n=new Cmd.ChangeRoomCmd_C;t.PokerFunction.tcpSend(n)},a.prototype.backLobbyHandel=function(e){var n=new Cmd.LeaveRoomCmd_CS;n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)},a.prototype.setBtnVisible=function(){var e=(Date.now(),t.RoomData.Instance.roomType);t.GameView.Instance.bottomPoint?(this.changeTableBtn.visible=!1,this.backLobbyButton.visible=!0,this._prepare_btn.x=664):t.PokerData.isStandAlone||null!=e&&(e==Cmd.RoomType.RoomType_Normal||e==Cmd.RoomType.RoomType_Match)?(this.changeTableBtn.visible=!1,this.backLobbyButton.visible=!1,this._prepare_btn.x=516):e==Cmd.RoomType.RoomType_Quick?(this.backLobbyButton.visible=!0,this.changeTableBtn.visible=!1,this._prepare_btn.x=664):t.RoomData.Instance.roomCurrentInnings&&t.RoomData.Instance.roomCurrentInnings<2?(this.changeTableBtn.visible=!0,this._prepare_btn.x=664):(this.changeTableBtn.visible=!1,this._prepare_btn.x=516)},a.prototype.addEvent=function(){this._prepare_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prepare,this),this.changeTableBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTableHandel,this),this.backLobbyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backLobbyHandel,this),this.resultRadioButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this),this.tableRadioButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this)},a.prototype.removeEvent=function(){this._prepare_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.prepare,this),this.changeTableBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTableHandel,this),this.backLobbyButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backLobbyHandel,this),this.resultRadioButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this),this.tableRadioButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRadioClick,this)},a.prototype.destory=function(){egret.Tween.removeTweens(this)},a.prototype.showWinEffect=function(){this.winEffect||(this.winEffect=t.EffectCreate.Instance.winLightEffect()),this.addChildAt(this.winEffect,1),this.winEffect.x=400,this.winEffect.y=20,this.winEffect.play()},a}(t.EuiPanel);t.RoundResultPanel=e,__reflect(e.prototype,"game.RoundResultPanel");var n=function(e){function n(){var t=e.call(this)||this;return t.skinName=new RoundResultItem_DZ_Skin,t}return __extends(n,e),n.prototype.dataChanged=function(){var e=this.data,n=e.uid,a=t.SeatLayer.Instance.seatSprites,i=a.first(function(t){return t.seatData.user.uid==n});if(i){var r=i.userSprite.user;this._headmc.source=r.headUrl,this._headmc.mask=this.headRect,this.nameLabel.text=r.nickName,e.gold?(this.goldLabel.visible=!1,e.gold>0?(this.goldLabel.font="gold_win_fnt",this.goldLabel.text="+"+e.gold):(this.goldLabel.font="gold_lose_fnt",this.goldLabel.text=""+e.gold)):this.goldLabel.visible=!1}},n}(eui.ItemRenderer);t.RoundResultItem=n,__reflect(n.prototype,"game.RoundResultItem")}(game||(game={}));var game;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.m_selected=!1,n.m_darken=!1,t&&(n.m_cardId=t,n.addCard(),n.selectChanged(!1)),n}return __extends(n,e),Object.defineProperty(n.prototype,"cardId",{get:function(){return this.m_cardId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.m_selected},set:function(t){this.m_selected=t,this.selectChanged(t)},enumerable:!0,configurable:!0}),n.prototype.selectChanged=function(e){e?this.y=t.GameConstant.HandCardSelectY:this.y=t.GameConstant.HandCardY},Object.defineProperty(n.prototype,"darken",{get:function(){return this.m_darken},set:function(t){this.m_darken!=t&&(this.m_darken=t,this.darkenChanged(t))},enumerable:!0,configurable:!0}),n.prototype.darkenChanged=function(t){t?this.addDarken():this.removeDarken()},n.prototype.addDarken=function(){null==this.darkenImage&&(this.darkenImage=new egret.Bitmap(RES.getRes("Poker_dark"))),this.darkenImage.width=this.card.width,this.darkenImage.height=this.card.height,this.addChild(this.darkenImage)},Object.defineProperty(n.prototype,"cardPlace",{get:function(){return table.TablePokerCard.cardPlace(this.m_cardId)},enumerable:!0,configurable:!0}),n.prototype.addLordLogo=function(){this.lordLogo||(this.lordLogo=new egret.Bitmap(RES.getRes("lord"))),this.addChild(this.lordLogo),this.lordLogo.width=80,this.lordLogo.height=80,this.lordLogo.y=2,this.lordLogo.x=this.width-this.lordLogo.width-2},n.prototype.removeLordLogo=function(){this.lordLogo&&this.lordLogo.parent&&this.removeChild(this.lordLogo)},n.prototype.removeDarken=function(){this.darkenImage&&this.darkenImage.parent&&this.removeChild(this.darkenImage)
},n.prototype.addBackCard=function(t){RES.hasRes(t)&&(this.card=new egret.Bitmap(RES.getRes(t)),this.addChildAt(this.card,0))},n.prototype.addNormalCard=function(e){var n=t.GameConstant.GetPokerTextureByCardId(e);n&&(this.removeCard(),this.m_cardId=e,this.card=new egret.Bitmap(n),this.card.width=t.GameConstant.CardWidth,this.card.height=t.GameConstant.CardHeight,this.addChildAt(this.card,0))},n.prototype.removeCard=function(){this.card&&(this.removeChild(this.card),this.card=null)},n.prototype.addCard=function(){var t=table.TablePokerCard.resNormal(this.cardId),e=t.replace(/Poker/,"scard");this.card=new egret.Bitmap(RES.getRes(e)),this.card.width=41,this.card.height=29,this.addChildAt(this.card,0)},n.prototype.setCardSize=function(t,e){this.card.width=t,this.card.height=e},Object.defineProperty(n.prototype,"cardWidth",{set:function(t){this.card.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cardHeight",{set:function(t){this.card.height=t},enumerable:!0,configurable:!0}),n.prototype.addBackGround=function(){RES.hasRes("scard_xing")&&(this.backGround=new egret.Bitmap(RES.getRes("scard_xing")),this.backGround.x=15,this.backGround.y=16,this.backGround.scaleX=this.backGround.scaleY=.7,this.addChild(this.backGround))},n.prototype.removeBackGround=function(){this.backGround&&this.backGround.parent&&(this.backGround.parent.removeChild(this.backGround),this.backGround=null)},n.prototype.darkCard=function(){},n}(egret.DisplayObjectContainer);t.ScardSprite=e,__reflect(e.prototype,"game.ScardSprite")}(game||(game={}));var game;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.handCardList=new Array,n.m_seatData=t,n.addListener(),n.clientNoChanged(),n}return __extends(n,e),Object.defineProperty(n.prototype,"seatData",{get:function(){return this.m_seatData},enumerable:!0,configurable:!0}),n.prototype.addListener=function(){this.seatData.userChanged.add(this.userChanged,this),this.seatData.readyChanged.add(this.readyChanged,this),this.seatData.handCardCountChanged.add(this.handCardCountChanged,this),this.seatData.onlineChanged.add(this.onlineChangeHandel,this),1==t.RoomInfo.getInstance().video&&(this.m_seatData.addHandCardEvent.add(this.addHandCard,this),this.m_seatData.delectHandCardEvent.add(this.delectHandCard,this)),this.seatData.seatStateAdd.add(this.seatStateAdd,this)},n.prototype.removeListener=function(){1==t.RoomInfo.getInstance().video&&(this.m_seatData.addHandCardEvent.remove(this.addHandCard,this),this.m_seatData.delectHandCardEvent.remove(this.delectHandCard,this)),this.seatData.userChanged.remove(this.userChanged),this.seatData.readyChanged.remove(this.readyChanged),this.seatData.handCardCountChanged.remove(this.handCardCountChanged),this.seatData.onlineChanged.remove(this.onlineChangeHandel),this.seatData.seatStateAdd.remove(this.seatStateAdd,this)},Object.defineProperty(n.prototype,"clientNo",{get:function(){return this.m_clientNo},enumerable:!0,configurable:!0}),n.prototype.clientNoChanged=function(){if(this.m_clientNo=t.GameConstant.GetClientNoBySeatId(this.seatData.seatId),!(null==this.clientNo||this.clientNo<0)){0==this.clientNo?t.GameInfo.topLayer.addChild(this):t.SeatLayer.Instance.addChild(this);var e=t.GameConstant.SeatPosArr[this.clientNo];this.x=e.x,this.y=e.y}},n.prototype.onlineChangeHandel=function(t){this.m_userSprite&&(t==Cmd.OnlineState.OnlineState_Offline?this.m_userSprite.showOffline():this.m_userSprite.removeOffline())},n.prototype.readyChanged=function(e){if(!(null==this.clientNo||this.clientNo<0)&&(null==this.readyIcon&&(this.readyIcon=new egret.Bitmap(RES.getRes("player_ready")),this.readyIcon.x=t.GameConstant.ReadyPos[this.clientNo].x,this.readyIcon.y=t.GameConstant.ReadyPos[this.clientNo].y),e?t.SeatLayer.Instance.addChild(this.readyIcon):this.removeReadyIcon(),this.seatData.user&&this.seatData.user.uid==uniLib.NetMgr.UID)){if(t.CardLayer.Instance.removeAllHandCard(),t.CardLayer.Instance.clearAllCard(),e){t.GameView.Instance.restart();var n=t.RoundResultPanel.Instance;n&&n.parent&&n.clostPanel();var a=t.LiuJuResultPanel.Instance;a&&a.parent&&a.clostPanel();var i=t.TributetionPlay.Instance;i&&i.parent&&i.parent.removeChild(i);var r=t.TriSelectCard.Instance;r&&r.parent&&(r.parent.removeChild(r),r.resetGroup())}t.GameView.Instance.updataReadyButton(e)}},n.prototype.removeReadyIcon=function(){this.readyIcon&&this.readyIcon.parent&&this.readyIcon.parent.removeChild(this.readyIcon)},Object.defineProperty(n.prototype,"uid",{get:function(){return this.seatData.user?this.seatData.user.uid:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"State",{get:function(){return this.stateImage},set:function(t){this.stateImage=t},enumerable:!0,configurable:!0}),n.prototype.addState=function(e){this.clearState(),this.stateImage=new eui.Image(e);var n=t.GameConstant.GetClientNoBySeatId(this.seatData.seatId),a=t.GameConstant.SeatPosArr[n],i=function(){this.parent&&this.parent.removeChild(this)};if(a&&this.seatData.user.uid!=uniLib.NetMgr.UID)if(t.CardLayer.Instance.addChild(this.stateImage),"jiefeng"==e){egret.Tween.removeTweens(this.stateImage),this.stateImage.x=570,this.stateImage.y=300;var r=a.x+(2*t.GameConstant.PlayCardGap+t.GameConstant.PlayCardWidth-this.stateImage.width)/2-11,o=a.y+(t.GameConstant.PlayCardHeight-this.stateImage.height)+27;t.GameConstant.isShowTeam&&(2==this.clientNo?(r=397,o=20):o=240),egret.Tween.get(this.stateImage).to({scaleX:.5,scaleY:.5}).to({x:r,y:o},400).to({scaleX:1,scaleY:1}).wait(2e3).to({alpha:0},100).call(i)}else this.stateImage.x=a.x+(2*t.GameConstant.PlayCardGap+t.GameConstant.PlayCardWidth-this.stateImage.width)/2-18,this.stateImage.y=a.y+(t.GameConstant.PlayCardHeight-this.stateImage.height),t.GameConstant.isShowTeam&&2==this.clientNo&&(this.stateImage.x=415,this.stateImage.y=8);else if(this.seatData.user.uid==uniLib.NetMgr.UID){if(this.addChild(this.stateImage),"jiefeng"==e){egret.Tween.removeTweens(this.stateImage);var s=570,h=-280;this.stateImage.x=s,this.stateImage.y=h;var d=7,l=34;t.GameConstant.isShowTeam&&(l=58),egret.Tween.get(this.stateImage).to({scaleX:.5,scaleY:.5}).to({x:d,y:l},400).to({scaleX:1,scaleY:1}).wait(2e3).to({alpha:0},100).call(i)}("kanggong"==e||"fangong"==e)&&(this.stateImage.y=25),"kanggong"==e&&t.GameConstant.isShowTeam&&(this.stateImage.x=25,this.stateImage.y=45)}this.stateImage.touchEnabled=!1},n.prototype.clearState=function(){this.stateImage&&this.stateImage.parent&&(this.stateImage.parent.removeChild(this.stateImage),this.stateImage=null),this.userSprite&&(this.userSprite.alpha=1)},n.prototype.seatStateAdd=function(e){if(this.clearState(),e==Cmd.GameState.State_AntiTribute)this.addState("kanggong");else if(e==Cmd.GameState.State_ReversalTribute)this.addState("fangong");else if(e==Cmd.GameState.State_Fold)this.addState("qipai"),this.userSprite.alpha=.5,this.uid!=uniLib.NetMgr.UID;else if(e==Cmd.GameState.State_ShowCard);else if(e==Cmd.GameState.State_Relay){this.addState("jiefeng");for(var n=t.SeatLayer.Instance.seatSprites,a=0,i=n;a<i.length;a++){var r=i[a];r.seatData.seatId!=this.seatData.seatId&&r.State&&"jiefeng"==r.State.source&&r.State.parent&&(r.State.parent.removeChild(r.State),r.State=null)}}},n.prototype.deleteState=function(){this.seatData.seatStateList.deletefirst(function(t){return t==Cmd.GameState.State_AntiTribute})},Object.defineProperty(n.prototype,"headPoint",{get:function(){return null!=this.m_userSprite?this.m_userSprite.headPoint:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"userSprite",{get:function(){return this.m_userSprite},enumerable:!0,configurable:!0}),n.prototype.userChanged=function(t){t?this.addUser(t):this.removeUser()},n.prototype.addUser=function(e){this.removeUser(),this.m_userSprite||(this.m_userSprite=new t.UserSprite(e)),this.addChild(this.m_userSprite),e.uid==uniLib.NetMgr.UID},n.prototype.removeUser=function(){this.m_userSprite&&this.m_userSprite.parent&&(this.removeChild(this.m_userSprite),this.m_userSprite.destroy(),this.m_userSprite=null)},n.prototype.resetUserSprite=function(){this.m_userSprite&&this.m_userSprite.resetHeadIcon()},n.prototype.handCardCountChanged=function(t){this.m_userSprite&&this.m_userSprite.handCardCountChanged(t)},n.prototype.destroy=function(){this.clearState(),this.m_userSprite&&this.m_userSprite.removeListener(),this.removeReadyIcon(),this.removeListener()},n.prototype.addKey=function(e){var n=t.RoomData.Instance.roomCurrentInnings;if(1==n){var a;if(e&&e.seatCardList){for(var i=t.PokerFunction.MainSeat.seatId,r=0,o=e.seatCardList;r<o.length;r++){var s=o[r];s.handCardList&&1==s.handCardList.length&&this.seatData.seatId==s.seatId&&(a=s.seatId,this.addCardKeyIcon())}if(!a){for(var h=0,d=0,l=e.seatCardList;d<l.length;d++){var s=l[d];s.handCardList&&h++}if(2>h)for(var u=0,c=e.seatCardList;u<c.length;u++){var s=c[u];s.handCardList&&s.handCardList.length>1&&this.seatData.seatId==i&&this.addCardKeyIcon()}}}}},n.prototype.removeKey=function(){},n.prototype.addCardKeyIcon=function(){null==this.cardIcon&&(this.cardIcon=new egret.Bitmap(RES.getRes("tool_note_card")),this.cardIcon.x=t.GameConstant.keycardPos[this.clientNo].x,this.cardIcon.y=t.GameConstant.keycardPos[this.clientNo].y),t.SeatLayer.Instance.addChild(this.cardIcon)},n.prototype.removeCardKeyIcon=function(){this.cardIcon&&this.cardIcon.parent&&this.cardIcon.parent.removeChild(this.cardIcon)},Object.defineProperty(n.prototype,"handCards",{get:function(){return this.handCardList},enumerable:!0,configurable:!0}),n.prototype.addHandCard=function(e){this.delectHandCard(e);var n=new t.ScardSprite(e);n.touchEnabled=!0,n.touchChildren=!1,n.cardWidth=41,n.cardHeight=29,t.CardLayer.Instance.addChild(n),this.handCardList.push(n),this.updataHandCardPosition()},n.prototype.delectHandCard=function(e){var n=this.handCardList.first(function(t){return t.cardId==e});null!=n&&null!=n.parent&&(t.CardLayer.Instance.removeChild(n),this.handCardList.deletefirst(function(t){return t==n}),this.updataHandCardPosition())},n.prototype.updataLordLogo=function(){for(var e=this.handCardList.length,n=0;e>n;n++)this.seatData.user&&t.RoomData.Instance.landlordUid==this.seatData.user.uid&&n==e-1?this.handCardList[n].addLordLogo():this.handCardList[n].removeLordLogo()},n.prototype.showKickIcon=function(){this.m_userSprite.showKickIcon()},n.prototype.updataHandCardPosition=function(){this.setHunCard();for(var e=this.handCardList.length,n=this.handCardX[this.clientNo],a=this.handCardY[this.clientNo],i=-1,r=0,o=-1,s=Math.floor(this.handCards.length/2),h=t.GameConstant.GetClientNoBySeatId(this.seatData.seatId),d=0;e>d;d++){var l=this.handCardList[d];if(0==h){var u=(uniLib.Global.screenWidth-this.handCardWidth)/2;d>s?(o++,l.y=640,l.x=u+t.GameConstant.CardGap*o):(l.y=a,l.x=u+t.GameConstant.CardGap*d)}else i++,0!=d&&d%12==0&&(r++,i=0),l.y=a+29*r,l.x=n+30*i}},n.prototype.setHunCard=function(){for(var e=t.GameConstant.hunPoint,n=0,a=this.handCardList;n<a.length;n++){var i=a[n];i.cardPlace==e&&i.addBackGround()}},Object.defineProperty(n.prototype,"handCardX",{get:function(){var e;return e=t.GameConstant.isFourPeople?[140,780,450,130]:[140,780,780,800,363,130]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"handCardY",{get:function(){var e;return e=t.GameConstant.isFourPeople?[611,150,1,150]:[611,395,200,1,1,250]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"handCardWidth",{get:function(){var e=Math.floor(this.handCards.length/2);return 41+(e-1)*t.GameConstant.CardGap},enumerable:!0,configurable:!0}),n}(egret.Sprite);e.HeadCardWidth=[{width:41,height:29},{width:41,height:29},{width:41,height:29},{width:41,height:29}],t.SeatSprite=e,__reflect(e.prototype,"game.SeatSprite")}(game||(game={}));var game;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=new Setting_DZ_Skin,t.addListener(),t.init(),t}return __extends(n,e),n.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.init=function(){this.updateViewtype(),uniLib.SoundMgr.instance.soundOpen?(this.soundButton.currentState="up",uniLib.SoundMgr.instance.soundVolume=.7):(this.soundButton.currentState="down",uniLib.SoundMgr.instance.soundVolume=0),uniLib.SoundMgr.instance.musicOpen?(this.musicButton.currentState="up",uniLib.SoundMgr.instance.musicVolume=.7):(this.musicButton.currentState="down",uniLib.SoundMgr.instance.musicVolume=0),this.updateTableCheck()},n.prototype.onClickTap=function(t){t.target instanceof eui.Button&&RES.hasRes("buttonClick_mp3")&&uniLib.SoundMgr.instance.playSound("buttonClick_mp3"),t.target==this.dismissButton&&this.onDismiss(t),t.target==this.replaceButton?this.refrenshHandel(t):t.target==this.closeButton?this.onClose(t):t.target==this.soundButton?(uniLib.SoundMgr.instance.soundOpen?(uniLib.SoundMgr.instance.soundVolume=0,uniLib.SoundMgr.instance.soundOpen=!1,this.soundButton.currentState="down"):(uniLib.SoundMgr.instance.soundVolume=.7,uniLib.SoundMgr.instance.soundOpen=!0,this.soundButton.currentState="up"),uniLib.Utils.setLocalStorage("sound_toggle",Number(uniLib.SoundMgr.instance.soundOpen)),uniLib.Utils.setLocalStorage("soundVolume",uniLib.SoundMgr.instance.soundVolume)):t.target==this.musicButton?(uniLib.SoundMgr.instance.musicOpen?(uniLib.SoundMgr.instance.musicVolume=0,uniLib.SoundMgr.instance.musicOpen=!1,this.musicButton.currentState="down"):(uniLib.SoundMgr.instance.musicVolume=.7,uniLib.SoundMgr.instance.musicOpen=!0,this.musicButton.currentState="up"),uniLib.Utils.setLocalStorage("music_toggle",Number(uniLib.SoundMgr.instance.musicOpen)),uniLib.Utils.setLocalStorage("musicVolume",uniLib.SoundMgr.instance.musicVolume)):(t.target==this.bg_1||t.target==this.bg_2)&&this.onCheckTable(t)},n.prototype.onCheckTable=function(e){RES.hasRes("buttonClick_mp3")&&uniLib.SoundMgr.instance.playSound("buttonClick_mp3"),e.target==this.bg_1?t.RoomInfo.getInstance().tableclothMode="blue":t.RoomInfo.getInstance().tableclothMode="green",this.updateTableCheck(),uniLib.Utils.setLocalStorage("tabelMode",t.RoomInfo.getInstance().tableclothMode),this.dispatchEventWith(t.UIEventConsts.CHANGE_TABLECLOTH)},n.prototype.updateTableCheck=function(){"blue"==t.RoomInfo.getInstance().tableclothMode?this.bg_1.selected=!0:"green"==t.RoomInfo.getInstance().tableclothMode&&(this.bg_2.selected=!0)},n.prototype.updateViewtype=function(){},n.prototype.refrenshHandel=function(t){uniLib.ZQGameSdk.getConfig("确定要更新游戏吗?","","确定","取消")},n.prototype.onDismiss=function(e){t.PopupManager.removePopUp(this),this.destory(),this.showDismissConfirm()},n.prototype.showDismissConfirm=function(){var e="你确定请求解散房间？";t.PublicMethod.Instance.showConfirmPanel(e,["确定","取消"],[this.confirmHandler],null,this)},n.prototype.dissRoom=function(){this.msgBox&&(this.msgBox=null);var e=function(e){this.msgBox&&(t.GameInfo.topLayer.removeChild(this.msgBox),this.msgBox=null)};if(!this.msgBox){var n="你确定请求解散房间？";this.msgBox=new t.MsgBoxPanel,this.msgBox.x=uniLib.Global.screenWidth-this.msgBox.width>>1,this.msgBox.y=uniLib.Global.screenHeight-this.msgBox.height>>1,this.msgBox.setData(n,["确定","取消"],[this.confirmHandler,e])}t.GameInfo.topLayer.addChild(this.msgBox)},n.prototype.confirmHandler=function(e){var n=new Cmd.DissolveRoomRequestCmd_C;t.PokerFunction.tcpSend(n)},n.prototype.getSoundData=function(){var e=new Cmd.SetInfo;return e.sound=uniLib.SoundMgr.instance.soundOpen,e.music=uniLib.SoundMgr.instance.musicOpen,e.control=t.GameData.getInstance().audioPlayMode,e},n.prototype.destory=function(){this.removeListener()},n.prototype.onClose=function(e){t.PopupManager.removePopUp(this),this.destory()},n.prototype.restartGame=function(t){uniLib.ZQGameSdk.getConfig("确定要更新游戏吗?","","确定","取消")},n}(eui.Component);t.SettingPanel=e,__reflect(e.prototype,"game.SettingPanel")}(game||(game={}));var game;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.skinName=new SelectCard_DZ_Panel,t.init(),t}return __extends(a,e),Object.defineProperty(a,"Instance",{get:function(){return null==this._instance&&(this._instance=new a),this._instance},enumerable:!0,configurable:!0}),a.TestPanel=function(){if(this._instance)throw new Error("Sington已经创建!")},a.prototype.init=function(){this.addListener(),this.create(),this.selectId=[]},a.prototype.create=function(){this.touchChildren=!0,this.touchEnabled=!0,uniLib.Global.debugLevel>=1&&this.setGameButton()},a.prototype.addListener=function(){this._cardList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.cardListClickHandel,this)},a.prototype.removeListener=function(){this._cardList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.cardListClickHandel,this)},a.prototype.cardListClickHandel=function(t){for(var e=0,n=this.selectId;e<n.length;e++){var a=n[e];if(a==t.item)return}this.selectId.push(t.item),this.refrenshSelected(),this.setItemVisible(t.item,!1)},a.prototype.setItemVisible=function(t,e){var n=t+"";this._cardList.getChildByName(n).visible=e},a.prototype.refrenshSelected=function(){this.selectedCards.itemRenderer=n,this.selectedCards.dataProvider=new eui.ArrayCollection(this.selectId)},a.prototype.initCardList=function(){this.cardList=[];for(var t=3;15>t;t++)for(var e=100*t,a=1;5>a;a++){var i=e+10*a;i+=1,this.cardList.push(i)}this.cardList.push(1611),this.cardList.push(1621),this.cardList.push(1631),this.cardList.push(1641),this.cardList.push(2051),this.cardList.push(2151),this._cardList.itemRenderer=n,this._cardList.dataProvider=new eui.ArrayCollection(this.cardList)},a.prototype.setCardList=function(t){this.cardList=new Array,this.cardList=t,this.cardList.sort(function(t,e){return t-e}),this._cardList.itemRenderer=n,this._cardList.dataProvider=new eui.ArrayCollection(this.cardList)},a.prototype.setGameButton=function(){this.cardButtonArr=["确定","取消","重选","删除","结束"],this.buttonList.itemRenderer=n,this.buttonList.dataProvider=new eui.ArrayCollection(this.cardButtonArr),this.buttonList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.buttonClickHandel,this)},a.prototype.buttonClickHandel=function(e){switch(e.itemIndex){case 0:if(this.selectId.length<1)return;var n=new Cmd.GmSelectCardCmd_C;n.cardList=this.selectId,t.PokerFunction.tcpSend(n),t.GameInfo.topLayer.removeChild(this),this.dispose();break;case 1:t.GameInfo.topLayer.removeChild(this),this.dispose();break;case 2:this.selectId.clear(),this.refrenshSelected();for(var a=0;a<this.cardList.length;a++)this._cardList.getChildByName(this.cardList[a]+"").visible||this.setItemVisible(this.cardList[a],!0);break;case 3:if(this.selectId.length<1)return;var i=this.selectId.pop();this.setItemVisible(i,!0),this.refrenshSelected();break;case 4:var r=new Cmd.GmFinishRoundCmd_C;t.PokerFunction.tcpSend(r),t.GameInfo.topLayer.removeChild(this),this.dispose()}},a.prototype.dispose=function(){this.cardList=[],this.selectId=[],this.refrenshSelected()},a}(eui.Component);t.TestPanel=e,__reflect(e.prototype,"game.TestPanel");var n=function(t){function e(){var e=t.call(this)||this;return e.skinName=new CardItem_DZ_Skin,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;isNaN(t)?(this.cardName.text=t,this.background.fillColor=16776960):this.cardName.text=table.TablePokerCard.cardName(t),this.name=t+""},e}(eui.ItemRenderer);t.CardItem=n,__reflect(n.prototype,"game.CardItem")}(game||(game={}));var game;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.initUI=function(){this.bgRect=new eui.Rect(uniLib.Global.screenWidth,uniLib.Global.screenHeight),this.bgRect.alpha=.1,this.bgRect.x=-291,this.bgRect.y=-185,this.addChildAt(this.bgRect,0),this.bgRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseHandle,this),uniLib.Global.addEventListener(uniLib.ZqEvent.EVENT_L2G,this.diamondChange,this);var e=t.DataCache.langObj.uiTxt.PlayerInfoPanel,a=t.ResUtil.createBitmapByName("public_DDZ3");a.scale9Grid=new egret.Rectangle(71,48,448,113),a.touchEnabled=!0,a.width=697,a.x=-8,a.height=360,this.addChild(a);var i=t.ResUtil.createTextFeild(8204032,egret.HorizontalAlign.LEFT,e.nickLabel,24,182,45,300);this.addChild(i);var r=t.ResUtil.createTextFeild(8204032,egret.HorizontalAlign.LEFT,e.idLabel,24,183,90,90);this.addChild(r);var o=t.ResUtil.createTextFeild(8204032,egret.HorizontalAlign.LEFT,e.levelLabel,24,185,131,90);this.addChild(o);var s=new egret.Bitmap(RES.getRes("userinfo_fangka_DDZ"));s.x=455,s.y=125,this._nickTxt=t.ResUtil.createTextFeild(11622706,egret.HorizontalAlign.LEFT,"",24,260,45,159),this._nickTxt.height=26,this.addChild(this._nickTxt),this._idTxt=t.ResUtil.createTextFeild(11622706,egret.HorizontalAlign.LEFT,"",24,258,90,136),this.addChild(this._idTxt),this._diamondTxt=t.ResUtil.createTextFeild(11622706,egret.HorizontalAlign.LEFT,"",24,535,130,136),this.addChild(this._diamondTxt),this._ipTxt=t.ResUtil.createTextFeild(11622706,egret.HorizontalAlign.LEFT,"",24,258,131,200),this.addChild(this._ipTxt),this._distance=t.ResUtil.createTextFeild(11622706,egret.HorizontalAlign.LEFT,"",24,185,170,400),this.addChild(this._distance),this._scoreTxt=t.ResUtil.createTextFeild(11622706,egret.HorizontalAlign.LEFT,"",24,535,131,136),this._giftItemArr=[];for(var h,d=table.TableGift.instance(),l=0;l<d.length;l++)6!==l&&(h=new n,h.data=d[l],this._giftItemArr[d[l].giftId]=h,h.x=105*l,6===l&&(h.x=525),h.y=200,this.addChild(h),h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGift,this));this._headMc=new t.PokerHead(110,110),this._headMc.x=30,this._headMc.y=35,this.addChild(this._headMc)},a.prototype.setRect=function(t){this.bgRect.x=-t},a.prototype.onCloseHandle=function(){this.parent.removeChild(this),this.destory()},a.prototype.table=function(){var t;return t=loadTable("TableGiftND_json")},a.prototype.onClickGift=function(e){if(this._data.uid==uniLib.NetMgr.UID)return void t.PublicManage.getInstance().showMildWarnShow("不能给自己送礼物");var n=e.currentTarget,a=new Cmd.SendGiftRoomCmd_C,i=new Cmd.GiftsInfo;i.giftsId=n.data.giftId,i.toUid=this._data.uid,i.fromUid=uniLib.NetMgr.UID,i.giftsNum=1,a.gift=i,t.PokerFunction.tcpSend(a),this.onCloseHandle()},a.prototype.reset=function(){this._data=null,this._idTxt.text="",this._nickTxt.text="",this._ipTxt.text="",this._distance.text="",this._diamondTxt.text="",this._scoreTxt.text="",this._headMc.visible=!1},a.prototype.setData=function(e){this._data=e;var n="public_DDZ6";if("男"==e.gender&&(n="public_DDZ7"),this._genderIcon?this._genderIcon.texture=t.ResUtil.createTexture(n):(this._genderIcon=t.ResUtil.createBitmapByName(n,467,65),this.addChild(this._genderIcon)),this._idTxt.text=e.uid.toString(),this._nickTxt.text=e.nickName,void 0!=e.ip&&(this._ipTxt.text=e.ip),t.GameView.Instance.bottomPoint){var a=new eui.Image("flyCoin");a.scaleX=a.scaleY=.6,a.x=500,a.y=126,this.addChild(a),e.points&&(this._diamondTxt.text=Math.floor(e.points)+"")}else void 0!=e.diamond&&(this._diamondTxt.text=Math.floor(e.diamond)+"");this._scoreTxt.text=e.points.toString(),this._headMc.headUrl=e.headUrl;for(var i=0;6>i;i++)this._giftItemArr[i+1]&&this._giftItemArr[i+1].setFlowerNum(0);if(e.flower instanceof Array)for(var i=0;i<e.flower.length;i++)this._giftItemArr[e.flower[i].id].setFlowerNum(e.flower[i].num)},a.prototype.diamondChange=function(t){"diamondChange"==t.param&&Number(this._idTxt.text)===uniLib.UserInfo.uid&&(this._diamondTxt.text=Math.floor(uniLib.UserInfo.chips)+"")},a.prototype.destory=function(){uniLib.Global.removeEventListener(uniLib.ZqEvent.EVENT_L2G,this.diamondChange,this),this.bgRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseHandle,this),this._headMc&&(this._headMc.destory(),this._headMc=null);var t=table.TableGift.instance();if(t)for(var e=0;e<t.length;e++){var a=new n;a.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGift,this),a.destory()}uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._data=null,this._idTxt=null,this._ipTxt=null,this._nickTxt=null,this._diamondTxt=null,this._genderIcon=null},a}(t.BaseVc);t.UserInfoPanel=e,__reflect(e.prototype,"game.UserInfoPanel");var n=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.initUI=function(){this._testBg=new egret.Bitmap(RES.getRes("testBg")),this._testBg.y=110,this._testBg.x=35,this._nameTxt=t.ResUtil.createTextFeild(419190,egret.HorizontalAlign.CENTER,"",20,5,110,100)},Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(e){this._nameTxt.text="0",this._giftIcon||(this._giftIcon=t.ResUtil.createBitmapByName("userInfo_freegift_DDZ"+e.giftId,17,0),this.addChildAt(this._giftIcon,0)),this._data=e,this.name=e.giftId.toString()},enumerable:!0,configurable:!0}),n.prototype.setFlowerNum=function(t){this._nameTxt.text=t.toString(),this._nameTxt.x=this._testBg.x+(this._testBg.width-this._nameTxt.width)/2},n.prototype.destory=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._data=null,this._nameTxt=null},n}(t.BaseVc);t.GiftItem=n,__reflect(n.prototype,"game.GiftItem")}(game||(game={}));var game;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.m_user=t,n.addListener(),n.touchEnabled=!0,n.touchChildren=!1,n}return __extends(n,e),Object.defineProperty(n.prototype,"user",{get:function(){return this.m_user},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this.removeListener(),this.clearYouImage(),uniLib.DisplayUtils.removeFromParent(this)},n.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestUserInfo,this),this.user.headUrlChanged.add(this.changedHead,this),this.user.nameChanged.add(this.nameChanged,this),this.user.pointChanged.add(this.pointChanged,this),this.user.trustStateChanged.add(this.trustChanged,this),this.user.diamondChanged.add(this.diamondChanged,this)},n.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestUserInfo,this),this.user.headUrlChanged.remove(this.changedHead),this.user.nameChanged.remove(this.nameChanged),this.user.pointChanged.remove(this.pointChanged),this.user.diamondChanged.remove(this.diamondChanged),this.user.trustStateChanged.remove(this.trustChanged)},n.prototype.changedHead=function(){if(null==this._headMc&&(this._headMc=new t.PokerHead(t.GameConstant.HeadWidth,t.GameConstant.HeadHeight),this._headMc.x=0,this._headMc.y=0,this._headMc.touchEnabled=!0,this.addChild(this._headMc)),null!=this.user.headUrl){this._headMc.headUrl=this.user.headUrl;var e=t.GameConstant.GetClientNoByUid(this.user.uid);t.GameConstant.isShowTeam&&(this._headMc.scaleX=this._headMc.scaleY=.6,2==e?this._headMc.x=-180:0==e?(this._headMc.x=24,this._headMc.y=48):1==e?(this._headMc.x=25,this._headMc.y=48):(this._headMc.x=24,this._headMc.y=48))}},Object.defineProperty(n.prototype,"headPoint",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),n.prototype.showRoomOwner=function(){this.roomOwner||(this.roomOwner=new egret.Bitmap(RES.getRes("room_owner")),this.roomOwner.name="roomOwner"),this.user.uid==t.RoomData.Instance.ownerId&&(this._headMc.addChild(this.roomOwner),this.roomOwner.x=0,this.roomOwner.y=0)},n.prototype.removeRoomOwner=function(){this.roomOwner&&this.roomOwner.parent&&this._headMc.removeChild(this.roomOwner)},n.prototype.showLordLogo=function(){this.lordImage||(this.lordImage=new egret.Bitmap(RES.getRes("lord")),this.lordImage.name="lord"),this.user.uid==t.RoomData.Instance.landlordUid&&(this._headMc.addChild(this.lordImage),this.lordImage.width=53,this.lordImage.height=53,this.lordImage.x=this._headMc.width-this.lordImage.width,this.lordImage.y=0)},n.prototype.removeLordLogo=function(){this.lordImage&&this.lordImage.parent&&this._headMc.removeChild(this.lordImage)},n.prototype.changeHeadIcon=function(){t.RoomData.Instance.landlordUid&&(this.changeEffect||(this.changeEffect=t.EffectCreate.Instance.changeEffect()),this.changeEffect.addEventListener(egret.Event.COMPLETE,this.onMcComplete,this),this.changeEffect.x=this._headMc.x,this.changeEffect.y=this._headMc.y,this.addChild(this.changeEffect),this.changeEffect.play())},n.prototype.onMcComplete=function(t){this.changeEffect.removeEventListener(egret.Event.COMPLETE,this.onMcComplete,this),this.changeEffect.parent&&(this.changeEffect.parent.removeChild(this.changeEffect),this.changeEffect.stop()),this.changeEffect=null,this.changeIdentity()},n.prototype.changeIdentity=function(){this._headMc.headUrl=null,this.identityHead||(this.identityHead=new egret.Bitmap),this.identityHead.anchorOffsetX=this.identityHead.width/2,this.identityHead.x=this._headMc.width/2,this.identityHead.y=(this._headMc.height-this.identityHead.height)/2,this._headMc.addChild(this.identityHead);var e=t.GameConstant.GetClientNoByUid(this.user.uid);1==e?this.identityHead.scaleX=1:this.identityHead.scaleX=-1},n.prototype.showOffline=function(){this.offLine||(this.offLine=new egret.Bitmap(RES.getRes("user_dropped_icon"))),this._headMc.addChild(this.offLine),this.offLine.width=t.GameConstant.HeadWidth,this.offLine.height=t.GameConstant.HeadHeight,this.offLine.x=(this._headMc.width-this.offLine.width)/2,this.offLine.y=(this._headMc.height-this.offLine.height)/2,this._headMc.setPlayerIconMask(this.offLine)},n.prototype.removeOffline=function(){this.offLine&&this.offLine.parent&&this.offLine.parent.removeChild(this.offLine),this.offLine=null},n.prototype.resetHeadIcon=function(){this.identityHead&&this.identityHead.parent&&this._headMc.removeChild(this.identityHead),this.changedHead(),this.removeLordLogo(),this.removeOffline(),this.removeKickIcon()},Object.defineProperty(n.prototype,"InfoGroup",{set:function(t){this.infoGroup.skin.playType.source=t?"user_we":"user_other"},enumerable:!0,configurable:!0}),n.prototype.addInfoGroup=function(){if(!this.infoGroup){if(this.infoGroup=new eui.Component,t.GameConstant.isRankMode){if(this.infoGroup.skinName=new InfoGroup_DZ_GSkin,t.PokerFunction.MainSeat){this.infoGroup.skin.playType.visible=!0;var e=t.PokerFunction.MainSeat.seatId}else this.infoGroup.skin.playType.visible=!1;var n=t.GameConstant.GetSeatSpriteByUid(this.m_user.uid).seatData.seatId,a=!0,i=!0;a=e%2==0?!0:!1,i=n%2==0?!0:!1,this.user.uid==uniLib.NetMgr.UID?this.infoGroup.skin.playType.source="user_we":this.infoGroup.skin.playType.source=a==i?"user_we":"user_other"}else this.infoGroup.skinName=new InfoGroup_DZ_Skin;this.infoGroup.x=(t.GameConstant.HeadWidth-this.infoGroup.width)/2,this.infoGroup.y=t.GameConstant.HeadHeight-8,this.addChild(this.infoGroup);var r=t.GameConstant.GetClientNoByUid(this.user.uid);t.GameConstant.isShowTeam&&2==r&&(this.infoGroup.x=-100,this.infoGroup.y=8)}},n.prototype.nameChanged=function(){this.addInfoGroup(),this.infoGroup.skin.nameLabel.text=this.user.nickName},n.prototype.pointChanged=function(){if(this.addInfoGroup(),t.GameConstant.isRankMode)t.GameView.Instance.setGuoIcon(!0);else{if(this.user.point)if(this.user.point>=1e4){var e=(this.user.point/1e4).toFixed(1);this.infoGroup.skin.scoreLabel.text=e+"万"}else this.infoGroup.skin.scoreLabel.text=(this.user.point%1==0?this.user.point:this.user.point.toFixed(2))+"";else this.infoGroup.skin.scoreLabel.text="0";this.user.uid==uniLib.NetMgr.UID&&t.GameView.Instance.showMyChips(this.infoGroup.skin.scoreLabel.text),t.GameView.Instance.setGuoIcon(!1)}},n.prototype.diamondChanged=function(){this.goldIconCountChanged(this.user.diamond)},n.prototype.trustChanged=function(){this.user.isTrust?(this.showTrustState(),this.user.uid==uniLib.NetMgr.UID&&t.CardLayer.Instance.trust()):(this.removeTrustState(),this.user.uid==uniLib.NetMgr.UID&&t.CardLayer.Instance.cancelTrust())},n.prototype.cancelEntrust=function(e){var n=new Cmd.HostUpdateRoomCmd_CS;n.yesOrNo=!1,n.uid=uniLib.NetMgr.UID,t.PokerFunction.tcpSend(n)},n.prototype.showTrustState=function(){this.trustImage||(this.trustImage=new egret.Bitmap(RES.getRes("user_ai_icon"))),this.trustLable||(this.trustLable=new egret.Bitmap(RES.getRes("game_host"))),this._headMc.addChild(this.trustImage),this._headMc.addChild(this.trustLable),this.trustImage.x=(this._headMc.width-this.trustImage.width)/2,this.trustImage.y=(this._headMc.height-this.trustImage.height)/2-9,this.trustLable.x=(this._headMc.width-this.trustLable.width)/2,this.trustLable.y=-this.trustLable.height-5+115,this.identityHead&&this.identityHead.visible&&(this.identityHead.visible=!1),this._headMc.setPlayerIconMask(this.trustImage)
},n.prototype.removeTrustState=function(){this.trustImage&&this.trustImage.parent&&(this._headMc.removeChild(this.trustImage),this.trustImage=null),this.trustLable&&this.trustLable.parent&&(this._headMc.removeChild(this.trustLable),this.trustLable=null),this.identityHead&&0==this.identityHead.visible&&(this.identityHead.visible=!0)},Object.defineProperty(n.prototype,"handCount",{get:function(){return this.handCardCount},enumerable:!0,configurable:!0}),n.prototype.handCardCountChanged=function(e){if(this.user.uid!=uniLib.NetMgr.UID){if(null==this.handCardCount){this.handCardCount=new eui.TextInput,this.handCardCount.skinName=new HandCardCount_DZ_Skin;var n=t.GameConstant.GetClientNoByUid(this.user.uid);t.GameConstant.isFourPeople?1==n||3==n?(this.handCardCount.x=-this.handCardCount.width+100,this.handCardCount.y=this._headMc.y-this.handCardCount.height-5):(this.handCardCount.x=t.GameConstant.HeadWidth-194,this.handCardCount.y=this._headMc.y-this.handCardCount.height+49):1==n||2==n||5==n?(this.handCardCount.x=-this.handCardCount.width+100,this.handCardCount.y=this._headMc.y-this.handCardCount.height+1):(3==n||4==n)&&(this.handCardCount.x=t.GameConstant.HeadWidth+6,this.handCardCount.y=this._headMc.y-this.handCardCount.height+37)}this.addChild(this.handCardCount);var a=t.PokerFunction.GetSeatDataByUid(this.user.uid),i=a.handCardSum;1==i?this.handCount.visible=!0:this.handCount.visible=!1,this.handCardCount.skin.countLabel.text=e+""}},n.prototype.goldIconCountChanged=function(e){null!=e&&(null==this.goldIconCount&&(this.goldIconCount=new eui.TextInput,this.goldIconCount.skinName=new GoldIconCount_DZ_Skin,this.user.uid==uniLib.NetMgr.UID?(this.goldIconCount.x=360,this.goldIconCount.y=this._headMc.y+80):1==t.GameConstant.GetClientNoByUid(this.user.uid)?(this.goldIconCount.x=-this.goldIconCount.width-24,this.goldIconCount.y=this._headMc.y+5):(this.goldIconCount.x=t.GameConstant.HeadWidth+16,this.goldIconCount.y=this._headMc.y+5)),this.goldIconCount.skin.countLabel.text=e+"")},n.prototype.showKickIcon=function(){null==this.kickIcon&&(this.kickIcon=new egret.Bitmap,this.kickIcon.texture=RES.getRes("kick_icon"),this.kickIcon.x=t.GameConstant.HeadWidth-this.kickIcon.width,1==t.GameConstant.GetClientNoByUid(this.user.uid)&&(this.kickIcon.x=0)),this.addChild(this.kickIcon)},n.prototype.removeKickIcon=function(){null!=this.kickIcon&&null!=this.kickIcon.parent&&this.kickIcon.parent.removeChild(this.kickIcon),this.kickIcon=null},n.prototype.requestUserInfo=function(e){var n=new Cmd.GetPersonalPanel_C;n.uid=this.user.uid,t.PokerFunction.tcpSend(n)},Object.defineProperty(n.prototype,"IsYou",{get:function(){return this.youImage},enumerable:!0,configurable:!0}),n.prototype.addYouImage=function(t){this.clearYouImage(),this.youImage=new eui.Image(t),this.addChild(this.youImage),this.youImage.x=this.x-8,this.youImage.y=this.y-8,this.youImage.touchEnabled=!1},n.prototype.clearYouImage=function(){this.youImage&&this.youImage.parent&&(this.removeChild(this.youImage),this.youImage=null)},n}(egret.Sprite);t.UserSprite=e,__reflect(e.prototype,"game.UserSprite")}(game||(game={}));var game;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.initUI=function(){this._mask=new egret.Sprite,this._mask.graphics.beginFill(0,.01),this._mask.graphics.drawRect(0,0,t.DataCache.defaultWidth,t.DataCache.defaultHeight),this._mask.graphics.endFill(),this._mask.touchEnabled=!0,this.addChild(this._mask);var e=uniLib.DisplayUtils.createBitmapByName("video_bg_DDZ");this.addChild(e),e.y=uniLib.Global.screenHeight/2+e.height/2,e.x=uniLib.Global.screenWidth/2-e.width/2,this._backBtn=new t.GameButton(["video_back1_DDZ","video_back2_DDZ"]),this.addChild(this._backBtn),this._backBtn.name="back",this._stopBtn=new t.GameButton(["video_stop1_DDZ","video_stop2_DDZ"]),this.addChild(this._stopBtn),this._stopBtn.name="stop",this._advanceBtn=new t.GameButton(["video_advance1_DDZ","video_advance2_DDZ"]),this.addChild(this._advanceBtn),this._advanceBtn.name="advance",this._closeBtn=new t.GameButton(["video_close1_DDZ","video_close2_DDZ"]),this.addChild(this._closeBtn),this._closeBtn.name="close",this._backBtn.x=e.x+2,this._stopBtn.x=this._backBtn.x+this._backBtn.width+5,this._advanceBtn.x=this._stopBtn.x+this._stopBtn.width+5,this._closeBtn.x=this._advanceBtn.x+this._advanceBtn.width+3,this._backBtn.y=this._stopBtn.y=this._advanceBtn.y=this._closeBtn.y=e.y+5,this._backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._stopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._advanceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},n.prototype.btnClick=function(e){var n=e.currentTarget.name;switch(n){case"back":uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_back");break;case"stop":uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_stop");break;case"advance":uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_advance");break;case"close":t.GameView.Instance.showVideoFinish(1)}},n.prototype.destory=function(){this._backBtn&&(this._backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._backBtn=null),this._stopBtn&&(this._stopBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._stopBtn=null),this._advanceBtn&&(this._advanceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._advanceBtn=null),this._closeBtn&&(this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._closeBtn=null),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n}(t.BaseVc);t.VideoPanel=e,__reflect(e.prototype,"game.VideoPanel")}(game||(game={}));var DZGameMain=function(t){function e(e){var n=t.call(this,e)||this;return n.isThemeLoadEnd=!1,game.GameViewConfig.mainMediatorName=uniLib.getQualifiedClassName(game.DZPokerMediator),"false"==uniLib.BrowersUtils.GetRequest("cacheres")&&(RES.web.Html5VersionController.prototype.getVirtualUrl=function(t){return t+="?v="+Math.random()}),n._gameInfo&&(game.DataCache.gameInfo=n._gameInfo),e&&e.destroyResOnExit&&(game.DataCache.destroyResOnExit=e.destroyResOnExit),n._gameInfo&&n._gameInfo.extData&&(game.DataCache.platParam=n._gameInfo.extData),n._gameInfo&&n._gameInfo.extData&&n._gameInfo.extData.video?(game.RoomInfo.getInstance().video=n._gameInfo.extData.video,game.RoomInfo.getInstance().videoUid=n._gameInfo.extData.videoUid):(game.RoomInfo.getInstance().video=0,game.RoomInfo.getInstance().videoUid=0),MJLobby.MJLobbyData.ShowGameLoading&&(uniLib.UIMgr.instance.showLoadingTimeout(DDZLoadingView),uniLib.UIMgr.instance.commonLoadUI=DDZLoadingView),console.error("是否是新的房间数据:"+game.RoomData.Instance.seatList.length),game.RoomData.Instance.clearSeatList(),GX.MulticastEvent.EventList.removeAllEvent(),game.GameData.iskPoker=!0,game.PokerFunction.handCardSort=function(t){return t.sort(function(t,e){return e-t})},"1"!=egret.localStorage.getItem("cardType")?game.GameConstant.PokerTextureType=0:game.GameConstant.PokerTextureType=1,n}return __extends(e,t),e.prototype.start=function(t){void 0===t&&(t=null);var e={};e.designWidth=1280,e.designHeight=720,e.debug=!0,e.logLevel=0,e.scaleMode=egret.StageScaleMode.FIXED_HEIGHT,MJLobby.ScreenFixedUtils.instance.init(egret.StageScaleMode.FIXED_HEIGHT),uniLib.init(e),RES.setMaxLoadingThread(6);var n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/DZ.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){this.preLoadEnd()},e.prototype.preLoadEnd=function(){uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),uniLib.Global.lobbyMode?uniLib.ResLoadMgr.instance.load(game.GameConstant.ResGroup_DDZ,this.startCreateScene,this.onItemLoadError,this,null):(uniLib.ResLoadMgr.instance.load(game.GameConstant.ResGroup_DDZ,this.startCreateScene,this.onItemLoadError,this,null),uniLib.ResLoadMgr.instance.load("common",this.startCreateScene,this.onItemLoadError,this,null))},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.groupName+"..."+t.itemsLoaded+"..."+t.itemsTotal+" has failed to load")},e.prototype.startCreateScene=function(){this._gameInfo&&(game.DataCache.gameInfo=this._gameInfo),this._gameInfo&&this._gameInfo.extData&&(game.DataCache.platParam=this._gameInfo.extData),game.GameData.iskPoker=!0,game.DataCache.langObj=JSON.parse(RES.getRes("ddz_GameTxt_cn_txt")),game.GameInfo.manage=game.PublicManage.getInstance(),game.DataCache.stageWidth=uniLib.Global.screenWidth,game.DataCache.stageHight=uniLib.Global.screenHeight,uniLib.UIMgr.instance.hideLoading(),uniLib.SceneMgr.instance.changeScene(game.PokerGameScene),new DDZ.EventManage,game.SoundHand.Instance.playDDZBg(),game.PokerData.isStandAlone&&(game.DDZStandAlone.Instance.initCardList(),game.DDZStandAlone.Instance.initUser())},e}(uniLib.GameDoc);__reflect(DZGameMain.prototype,"DZGameMain");var DDZ;!function(t){var e=function(){function t(){this.listener()}return t.prototype.listener=function(){GX.PokerEvent.Instance.tcpSendEvent.add(this.tcpSendEvent,this),GX.PokerEvent.Instance.landlordRobResult.add(this.landlordRobResult,this),GX.PokerEvent.Instance.calllordRobResult.add(this.calllordRobResult,this),GX.PokerEvent.Instance.playCard.add(this.PlayCard,this),GX.PokerEvent.Instance.dissolveRoomUpdate.add(this.dissolveRoom,this),GX.PokerEvent.Instance.systemMessage.add(this.showSystemMessage,this),GX.PokerEvent.Instance.leaveRoom.add(this.leaveRoom,this),GX.PokerEvent.Instance.roundResult.add(this.showLastHandcards,this),GX.PokerEvent.Instance.dealCardAnimation.add(game.EffectCreate.Instance.dealCardAnimation,game.EffectCreate.Instance),GX.PokerEvent.Instance.threeCardAnimation.add(game.EffectCreate.Instance.brightThreeCardEffect,game.EffectCreate.Instance),GX.PokerEvent.Instance.gameFinalSettle.add(this.gameFianlSettle,this),GX.PokerEvent.Instance.gmAvailableCardUpdate.add(this.gmAvailableCardUpdate,this),GX.PokerEvent.Instance.kickPlay.add(this.kickPlay,this),GX.PokerEvent.Instance.gameStateUpdate.add(this.gameStatusUpdate,this),GX.PokerEvent.Instance.SendGiftEvent.add(this.SendGiftEvent,this),GX.PokerEvent.Instance.callCardEvent.add(this.showCallCard,this),game.RoomData.Instance.propsEvent.add(this.checkRoomProps,this)},t.prototype.checkRoomProps=function(t){for(var e=0;e<t.length;e++)game.GameConstant.isGoldMode||95!=t[e]||(game.GameConstant.isGoldMode=!0),game.GameConstant.isShowTeam||10602!=t[e]||(game.GameConstant.isShowTeam=!0),10704==t[e]&&(game.GameConstant.isRankMode=!1);game.GameConstant.setTeamData();var n=game.RoomData.Instance.roomPlayProps,a=this.setPlayData(n);game.GameView.Instance.playLabels.text=a;var i=game.RoomData.Instance.maxuserNbr;6==i&&(game.GameConstant.isFourPeople=!1,game.GameView.Instance.VoiceBtn.y=560)},t.prototype.setPlayData=function(t){for(var e=game.RoomData.Instance.maxuserNbr,n=e+"人",a=0;a<t.length;a++)switch(t[a]){case 10700:n+="  三副牌",game.GameConstant.twoLineNum=21;break;case 10701:n+="  四副牌",game.GameConstant.twoLineNum=28;break;case 10702:n+="  小情人";break;case 10703:n+="  升级打锅";break;case 10704:n+="  抓人扣分";break;case 10718:n+="  带帽";break;case 10708:n+="  固定帮";break;case 10709:n+="  每局换帮";break;case 10716:n+="  10满";break;case 10717:n+="  A满";break;case 10710:n+="  5龙";break;case 10711:n+="  6龙";break;case 10712:n+="  不带炸",game.GameConstant.zhaProp=0,game.GameView.Instance.setHzBtnVisible(!1);break;case 10713:n+="  5炸",game.GameConstant.zhaProp=5;break;case 10714:n+="  6炸",game.GameConstant.zhaProp=6;break;case 10715:n+="  7炸",game.GameConstant.zhaProp=7}return n},t.prototype.tcpSendEvent=function(t){game.PokerData.isStandAlone&&game.DDZStandAlone.Instance.tcpSend(t)},t.prototype.SendGiftEvent=function(t){t&&t.gift&&game.EffectCreate.Instance.giftEffect(t.gift.giftsId,t.gift.toUid,t.gift.fromUid)},t.prototype.landlordRobResult=function(t){game.OperateLayer.Instance.addLandlordRobResult(t)},t.prototype.calllordRobResult=function(t){game.OperateLayer.Instance.addCalllordRobResult(t)},t.prototype.kickPlay=function(t){var e=game.PokerFunction.GetUserInfoByUid(t.uid);if(e&&e.gender&&game.SoundHand.Instance.playRedouble(e.gender,t.yesOrNo),0!=t.yesOrNo){var n=game.GameConstant.GetSeatSpriteByUid(t.uid);n&&n.showKickIcon()}},t.prototype.PlayCard=function(t,e){void 0===e&&(e=!0),game.OperateLayer.Instance.removeChangeTeam(),game.OperateLayer.Instance.removePickOutCard();game.PokerFunction.GetSeatDataByUid(t.uid);game.GameView.Instance.gameState==Cmd.GameStatus.GameStatus_PayTribute?t.cardList&&(t.uid==uniLib.NetMgr.UID&&game.OperateLayer.Instance.removeTributetion(),game.OperateLayer.Instance.addSelectCard(t.cardList)):(game.DDZAI.Instance.setPlayCard(t.uid,t.cardList),game.OperateLayer.Instance.playCard(t,e))},t.prototype.dissolveRoom=function(t){this._dismissPanel?this._dismissPanel.setData(t):(this._dismissPanel=new game.DismissPanel,this._dismissPanel.x=uniLib.Global.screenWidth-this._dismissPanel.width>>1,this._dismissPanel.y=uniLib.Global.screenHeight-this._dismissPanel.height>>1,this._dismissPanel.setData(t),game.GameInfo.topLayer.addChild(this._dismissPanel))},t.prototype.removeDissPanel=function(){this._dismissPanel&&this._dismissPanel.parent&&this._dismissPanel.parent.removeChild(this._dismissPanel),this._dismissPanel=null},t.prototype.gameStatusUpdate=function(t){t&&(t.status==Cmd.GameStatus.GameStatus_Pause?t.desc?game.GameView.Instance.showSuspendPrompt(!0,t.desc):game.GameView.Instance.showSuspendPrompt(!0):t.status==Cmd.GameStatus.GameStatus_Playing?(game.GameView.Instance.showSuspendPrompt(!1),game.GameView.Instance.gameState=Cmd.GameStatus.GameStatus_Playing,game.OperateLayer.Instance.removeTributetion(),game.OperateLayer.Instance.removeChangeTeam()):t.status==Cmd.GameStatus.GameStatus_PayTribute&&(game.GameView.Instance.gameState=Cmd.GameStatus.GameStatus_PayTribute))},t.prototype.showSystemMessage=function(t){switch(this.removeDissPanel(),t.msgType){case Cmd.SysMessageCmd_S.MsgType.Text:game.PublicManage.getInstance().showMildWarnShow(t.msg);break;case Cmd.SysMessageCmd_S.MsgType.DissolveRoom:this.showMessageBox(t);break;case Cmd.SysMessageCmd_S.MsgType.BackToLobby:var e=new MJLobby.MessageItem;e.text=t.msg,e.title="",MJLobby.MessageQueue.Instance.push(e),game.GameView.exitGame();break;case Cmd.SysMessageCmd_S.MsgType.Bounce:var n=new MJLobby.MessageItem;n.text=t.msg,n.title="",MJLobby.MessageQueue.Instance.push(n);break;case Cmd.SysMessageCmd_S.MsgType.NotEnoughMoney:this.showMessageTips(t)}},t.prototype.showCallCard=function(t){(null!=t.callCard||null!=t.callUid)&&game.OperateLayer.Instance.showCallCard(t.callCard,t.callUid)},t.prototype.showMessageBox=function(t){this.msgTips||(this.msgTips=new game.messageBox(!1)),this.msgTips.x=uniLib.Global.screenWidth-this.msgTips.width>>1,this.msgTips.y=uniLib.Global.screenHeight-this.msgTips.height>>1,this.msgTips.setData("",t.msg,["确定"],[this.msgConfirmHandler],this),game.GameInfo.topLayer.addChild(this.msgTips)},t.prototype.removeMessageBox=function(){this.msgTips&&(game.GameInfo.topLayer.removeChild(this.msgTips),this.msgTips=null)},t.prototype.msgConfirmHandler=function(t){this.msgTips&&(game.GameInfo.topLayer.removeChild(this.msgTips),this.msgTips=null,game.GameView.exitGame())},t.prototype.showMessageTips=function(t){var e=new game.MsgBoxPanel;e.x=uniLib.Global.screenWidth-e.width>>1,e.y=uniLib.Global.screenHeight-e.height>>1,game.GameInfo.topLayer.addChild(e);var n=function(){e&&e.parent&&(e.parent.removeChild(e),e=null)};e.setData(t.msg,["确定"],[n],this)},t.prototype.leaveRoom=function(t){game.GameView.exitGame(),this.clearTimer()},t.prototype.showLastHandcards=function(t){if(game.OperateLayer.Instance.removeOperateMain(),game.GameView.Instance.setBtnsVisible(!1),this.roundResultData=t,this.leftTime=3e3,game.DDZAI.Instance.clearPlayCard(),1!=game.RoomInfo.getInstance().video&&!game.PokerFunction.MainSeat.isReady){t.otherCardList&&game.OperateLayer.Instance.playNineCard(t.otherCardList);for(var e=0;e<game.RoomData.Instance.seatList.length;e++){var n=game.RoomData.Instance.seatList[e],a=this.roundResultData.resultList;if(!(a&&a instanceof Array))break;var i=this.roundResultData.resultList.first(function(t){return t.user.uid==n.user.uid}).cardList;if(null!=i){var r=new Cmd.PlayCardCmd_CS;if(r.uid=n.user.uid,r.cardList=i,r.cardListType=0,null!=r.cardList&&r.cardList.length){var o=game.CardLayer.Instance.getCardList(r);game.CardLayer.Instance.updataResultCardPosition(o,r.uid)}}}egret.clearInterval(this.timer),this.timer=egret.setInterval(this.updateTimer,this,100)}},t.prototype.updateTimer=function(){this.leftTime=this.leftTime-100,1e3==this.leftTime&&this.roundResultData.honor&&this.showGameHoner(this.roundResultData.honor),0==this.leftTime&&(this.showRoundResult(this.roundResultData),this.leftTime=0,egret.clearInterval(this.timer))},t.prototype.clearTimer=function(){this.timer&&(egret.clearInterval(this.timer),this.timer=null)},t.prototype.showGameHoner=function(t){if(t&&t instanceof Array){game.OperateLayer.Instance.addCardTypeEffect();for(var e=0,n=t;e<n.length;e++){var a=n[e];a==Cmd.GameHonor.GameHonor_Spring?game.EffectCreate.Instance.playChuntian():a==Cmd.GameHonor.GameHonor_SpringReverse&&game.EffectCreate.Instance.playFanChun()}}},t.clearResultTimer=function(){for(var e=0,n=t.ResultTimer;e<n.length;e++){var a=n[e];egret.clearTimeout(a)}t.ResultTimer.clear()},t.prototype.showRoundResult=function(e){if(game.PokerFunction.MainSeat&&!game.PokerFunction.MainSeat.isReady){game.GameView.Instance.removeYouImage(),game.GameView.Instance.removeOneCard(),game.GameView.Instance.goldCard=null;var n=e.winnerList,a=!1;if(n&&n instanceof Array&&0!=n.length||(a=!0),a){var i=game.LiuJuResultPanel.Instance;return game.GameInfo.topLayer.addChild(i),void i.setData(e)}if(0==game.GameConstant.isRankMode){for(var r=e.resultList,o=function(e,n){var a=r[e],i=(a.user.uid==uniLib.NetMgr.UID,egret.setTimeout(function(){game.EffectCreate.Instance.pointNotic(a.user.uid,a.profit)},s,800));t.ResultTimer.push(i)},s=this,h=0,d=r.length;d>h;h++)o(h,d);return void(e.haveNextRound&&game.GameView.Instance.setReadyBtnVisible(!0))}var l=game.RoundResultPanel.Instance;game.GameInfo.topLayer.addChild(l),l.setData(e)}},t.prototype.gameFianlSettle=function(t){game.GameInfo.topLayer.removeChildren();var e=new game.GameOverPanel;game.GameInfo.topLayer.addChild(e),e.setData(t),t.recordList=null!=t.recordList&&t.recordList instanceof Array?t.recordList:[];t.recordList.first(function(t){return null!=t.user&&t.user.uid==uniLib.NetMgr.UID});game.RoomData.Instance.clearSeatList(),GX.MulticastEvent.EventList.removeAllEvent()},t.prototype.gmAvailableCardUpdate=function(t){var e=t,n=game.TestPanel.Instance;n.x=(uniLib.Global.screenWidth-n.width)/2,n.y=80,game.GameInfo.topLayer.addChild(n),n.setCardList(e.cardList)},t}();e.ResultTimer=[],t.EventManage=e,__reflect(e.prototype,"DDZ.EventManage")}(DDZ||(DDZ={}));var game;!function(t){var e=function(e){function n(a){var i=e.call(this,n.NAME,a)||this;t.GameInfo.uiLayer.addChild(t.GameView.Instance),i.initGame();var r=new t.DZVoiceChat;r.name="voiceVc";var o=r.updateBtnRes(["NDvoice_btn1_ddz","NDvoice_btn2_ddz"]);return t.GameView.Instance.VoiceBtn=o,t.GameInfo.uiLayer.addChild(r),i.facade.registerMediator(new t.DZVoiceChatMediator(r)),0!=uniLib.Global.is_sandbox&&(r.visible=!1),GX.PokerEvent.Instance.systemMessage.add(i.showSystemMessage,i),i}return __extends(n,e),n.prototype.uiHandle=function(t){},n.prototype.listNotificationInterests=function(){return[t.MahjongFourFacadeConst.NOTIFY_COMMON_CHAT,t.MahjongFourFacadeConst.USERINFO_DATA,t.MahjongFourFacadeConst.SEND_GIFTS_NOTICE,t.MahjongFourFacadeConst.DISS_REQUEST_NOTICE,t.MahjongFourFacadeConst.ReturnIpAndGPS,t.MahjongFourFacadeConst.TIMEOUT_WAIT]},n.prototype.handleNotification=function(e){switch(e.getName()){case t.MahjongFourFacadeConst.TIMEOUT_WAIT:var n=e.getBody();t.GameView.Instance.updateTimeout(n);break;case t.MahjongFourFacadeConst.NOTIFY_COMMON_CHAT:var a=e.getBody();this.showChatPop(a);break;case t.MahjongFourFacadeConst.USERINFO_DATA:var i=e.getBody();this.showUserInfo(i);break;case t.MahjongFourFacadeConst.SEND_GIFTS_NOTICE:var r=e.getBody();if(!r||!r.gift)return;t.EffectCreate.Instance.giftEffect(r.gift.giftsId,r.gift.toUid,r.gift.fromUid);break;case t.MahjongFourFacadeConst.DISS_REQUEST_NOTICE:var o=t.PokerFunction.GetUserInfoByUid(uniLib.NetMgr.UID);o&&this.dissolveRoom(e.getBody());break;case t.MahjongFourFacadeConst.ReturnIpAndGPS:if(1==t.RoomInfo.getInstance().video)return;var s=e.getBody(),h=new t.GpsPanel;h.addUserGpsListIcon(s),t.PopupManager.addPopUp(h,!0,!0)}},n.prototype.dissolveRoom=function(t){},n.prototype.showSystemMessage=function(){this.removeDissPanel()},n.prototype.removeDissPanel=function(){this._dismissPanel&&this._dismissPanel.parent&&this._dismissPanel.parent.removeChild(this._dismissPanel),this._dismissPanel=null},n.prototype.showChatPop=function(e){var n=new t.ChatPop;t.GameInfo.topLayer.addChild(n),e.voiceId?n.showCommonChat(e.uid,String(e.voiceId)):e.words&&n.showCommonChat(e.uid,e.words)},n.prototype.showUserInfo=function(e){var n=new t.UserInfoPanel;n.x=uniLib.Global.screenWidth-n.width>>1,n.y=uniLib.Global.screenHeight-n.height>>1,n.setData(e),n.setRect&&n.setRect(n.x),t.GameInfo.topLayer.addChild(n)},n.prototype.ipWarnPanel=function(t){},n.prototype.initGame=function(){t.PokerData.isStandAlone||this.facade.sendNotification(t.MahjongFourFacadeConst.SEND_DATA,null,t.DataRequestCommand.CONNECT_GAME_SERVER)},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.facade.removeMediator(t.DZVoiceChatMediator.NAME)},n}(puremvc.Mediator);e.NAME="DZPokerMediator",t.DZPokerMediator=e,__reflect(e.prototype,"game.DZPokerMediator")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._isCancel=!1,t}return __extends(i,e),i.StartVoicePlaying=function(t){var e=!1;for(var n in i.VoicePlaying){var a=i.VoicePlaying[n];1==a&&(e=!0)}e||(i.soundOpen=uniLib.SoundMgr.instance.soundOpen,uniLib.SoundMgr.instance.soundOpen=!1,uniLib.SoundMgr.instance.pauseBgMusic()),i.VoicePlaying[t]=!0},i.StopVoicePlaying=function(t){i.VoicePlaying[t]=!1;var e=!1;for(var n in i.VoicePlaying){var a=i.VoicePlaying[n];1==a&&(e=!0)}e||(uniLib.SoundMgr.instance.soundOpen=i.soundOpen,uniLib.SoundMgr.instance.resumeBgMusic())},i.prototype.initUI=function(){this._startBtn=new t.GameButton(["game_voice1","game_voice2"]),this._startBtn.y=uniLib.Global.screenHeight-320,this._startBtn.x=uniLib.Global.screenWidth-this._startBtn.width-(71-this._startBtn.width),this.addChild(this._startBtn),this._startBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startRecord,this),this._recording=new a,this.addChild(this._recording),this._recording.x=(t.DataCache.defaultWidth-this._recording.width)/2,this._recording.y=(t.DataCache.defaultHeight-this._recording.height)/2,this._recording.addEventListener(t.UIEventConsts.RECORD_TIME_OUT,this.recordEvent,this),this._voiceArr=[],t.GameInfo.topLayer.addChild(this._recording)},i.prototype.updateBtnRes=function(e){return this._startBtn.y=380,this._startBtn.x=uniLib.Global.screenWidth-this._startBtn.width-10,6==t.RoomData.Instance.maxuserNbr&&(this._startBtn.y=550),this._startBtn},i.prototype.setVoiceVisible=function(t){this._startBtn.visible=t},i.prototype.test=function(){var t=new Cmd.VoiceChat_Brd;t.uid=uniLib.UserInfo.uid,t.time="15",t.url="",this.showVoice(t)},i.prototype.showVoice=function(e){var n=t.GameConstant.GetClientNoByUid(e.uid);if(!(n>2||0>n)){var a=this.getVoiceItem(n);t.GameInfo.topLayer.addChildAt(a,0);var i=new t.VoiceDataVo;i.time=Number(e.time),i.url=e.url,i.uid=e.uid,a.setData(i)}},i.prototype.getVoiceItem=function(e){if(this._voiceArr[e])return this._voiceArr[e];var a=t.GameConstant.SeatPosArr[e];if(!this._voiceArr[e]){var i=new n;0==e||2==e||3==e?i.x=a.x+t.GameConstant.HeadWidth:1==e&&(i.scaleX=-1,i.flip(),i.x=a.x),i.y=a.y+10,this._voiceArr[e]=i}return this._voiceArr[e]},i.prototype.recordEvent=function(t){this.stopRecord()},i.prototype.startRecord=function(t){this._isCancel=!1,this._curPosY=t.localY,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this),uniLib.ZQGameSdk.startRecord(),this._recording.startTimer()},i.prototype.checkCancel=function(t){t.localY>this._curPosY+20&&(this._isCancel=!0,egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this),uniLib.ZQGameSdk.stopRecord(),this._recording.stopTimer())},i.prototype.stopRecord=function(t){void 0===t&&(t=null),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this);var e=this._recording.stopTimer();if(1e3>e){uniLib.SetUniEventTimeout(this,function(){uniLib.ZQGameSdk.stopRecord()},1e3,1,this)}else uniLib.ZQGameSdk.stopRecord(this.onRecordBack,this)},i.prototype.onRecordBack=function(e){var n=e.data,a=t.GameConstant.GetClientNoByUid(uniLib.NetMgr.UID);this.getVoiceItem(a);if(0==e.code){var i=new t.VoiceDataVo;i.url=n.voiceUrl,i.time=Math.round(n.voiceDuration/1e3),i.nickName=uniLib.NetMgr.UID.toString(),i.text=n.text,i.status=0,isNaN(i.time)?t.GameInfo.manage.showMildWarnShow("语音发送失败"):0==this._isCancel&&this.dispatchEventWith(t.UIEventConsts.SEND_RECORD,!1,i)}else t.GameInfo.manage.showMildWarnShow(e.errMsg)},i.prototype.destory=function(){this._startBtn&&(this._startBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startRecord,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this),this._startBtn.destory()),this._startBtn=null,this._recording&&(t.ResUtil.removeFromParent(this._recording),this._recording.removeEventListener(t.UIEventConsts.RECORD_TIME_OUT,this.recordEvent,this),this._recording.destory()),this._recording=null;for(var e,n=0;n<this._voiceArr.length;n++)e=this._voiceArr[n],e&&(t.ResUtil.removeFromParent(e),e.destory(),e=null);this._voiceArr=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(t.BaseVc);e.VoicePlaying={},t.DZVoiceChat=e,__reflect(e.prototype,"game.DZVoiceChat");var n=function(n){function a(){var t=n.call(this)||this;return t._ifFlip=!1,t}return __extends(a,n),a.prototype.initUI=function(){this._bg=t.ResUtil.createBitmapByName("voice_paopao"),this._bg.scale9Grid=new egret.Rectangle(50,10,30,20),this.addChild(this._bg),this._soundIcon=t.ResUtil.createBitmapByName("voice_icon_ddz",24,11),this.addChild(this._soundIcon),this._timeTxt=t.ResUtil.createTextFeild(16777215,egret.HorizontalAlign.RIGHT,"",18,48,13,50),this.addChild(this._timeTxt)},a.prototype.onTimer=function(t){this._soundIcon.visible=!this._soundIcon.visible;var n=new Date,a=n.getTime(),i=Math.floor((a-this._startTime)/1e3);i>=this._soundTime&&(e.StopVoicePlaying(this.uid),this.stopTimer())},a.prototype.stopTimer=function(){this._soundIcon.visible=!0,this.visible=!1,this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.stop(),this._timer=null)},a.prototype.flip=function(){this._ifFlip=!0,this._timeTxt.skewY=180,this._timeTxt.textAlign=egret.HorizontalAlign.LEFT},a.prototype.setData=function(t){this.uid=t.uid,e.StartVoicePlaying(this.uid),t.uid!=uniLib.NetMgr.UID&&uniLib.ZQGameSdk.playRecord(t.url,this.playEndBack,this),t.time?this._timeTxt.text=t.time+"''":this._timeTxt.text="",this._soundTime=t.time?t.time:10,t.time<=3?this._bg.width=100:this._bg.width=100+5*(t.time-3),this._ifFlip?this._timeTxt.x=this._bg.width-12:this._timeTxt.x=this._bg.width-60,this.stopTimer(),this.visible=!0,this._timer=new egret.Timer(200),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start();var n=new Date;this._startTime=n.getTime()},a.prototype.playEndBack=function(t){this.stopTimer()},a.prototype.destory=function(){this.stopTimer(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._bg=null,this._soundIcon=null},a}(t.BaseVc);t.DZVoiceMc=n,__reflect(n.prototype,"game.DZVoiceMc");var a=function(e){function n(){var t=e.call(this)||this;return t._maxTime=15,t._msTime=0,t}return __extends(n,e),n.prototype.initUI=function(){var e=t.ResUtil.createBitmapByName("voice_recording_ddz");this.addChild(e),this._moving=new egret.DisplayObjectContainer,this._moving.x=104,this._moving.y=102;var n=t.ResUtil.createBitmapByName("voiceloading_ddz");n.x=-n.width/2,n.y=-n.height/2,this._moving.addChild(n),this.addChild(this._moving),this._time=t.ResUtil.createTextFeild(13031390,egret.HorizontalAlign.CENTER,"8''",22,74,136,75),this.addChild(this._time),this.visible=!1},n.prototype.startTimer=function(){this.stopTimer(),this.visible=!0,this._startTimer=new egret.Timer(50,0);var t=new Date;this._startTime=t.getTime(),this._startTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._startTimer.start()},n.prototype.stopTimer=function(){return this.visible=!1,this._startTimer&&(this._startTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._startTimer.stop(),this._startTimer=null),this._msTime},n.prototype.onTimer=function(e){var n=new Date,a=n.getTime(),i=Math.floor((a-this._startTime)/1e3);this._time.text=i+1+"''",this._moving.rotation+=15,i>=this._maxTime&&this.dispatchEventWith(t.UIEventConsts.RECORD_TIME_OUT),this._msTime=a-this._startTime},n.prototype.dispose=function(){this.stopTimer(),this._moving&&(uniLib.DisplayUtils.removeAllChildren(this._moving),uniLib.DisplayUtils.removeFromParent(this._moving)),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._moving=null,this._time=null},n}(t.BaseVc);t.DDZRecordingMc=a,__reflect(a.prototype,"game.DDZRecordingMc")}(game||(game={}));var game;!function(t){var e=function(e){function n(n){var a=e.call(this,t.VoiceChatMediator.NAME,n)||this;return a._voiceVc=n,a._voiceVc.addEventListener(t.UIEventConsts.SEND_RECORD,a.uiEventHandle,a),a}return __extends(n,e),n.prototype.uiEventHandle=function(e){var n=e.type;switch(n){case t.UIEventConsts.SEND_RECORD:var a=e.data,i=new Cmd.VoiceChat_C;i.url=a.url,i.time=a.time.toString(),i.words=a.text,this.sendNotification(t.MahjongFourFacadeConst.SEND_DATA,i,t.DataRequestCommand.GAME_DATA)}},n.prototype.listNotificationInterests=function(){return[t.MahjongFourFacadeConst.USER_ENTER_ROOM,t.MahjongFourFacadeConst.VOICE_NOTICE]},n.prototype.handleNotification=function(e){switch(e.getName()){case t.MahjongFourFacadeConst.VOICE_NOTICE:this._voiceVc.showVoice(e.getBody());break;case t.MahjongFourFacadeConst.USER_ENTER_ROOM:}},n.prototype.onRemove=function(){t.DZVoiceChat.VoicePlaying={},this._voiceVc&&(this._voiceVc.removeEventListener(t.UIEventConsts.SEND_RECORD,this.uiEventHandle,this),this._voiceVc.destory(),this._voiceVc=null),e.prototype.onRemove.call(this)},n}(puremvc.Mediator);e.NAME="DZVoiceChatMediator",t.DZVoiceChatMediator=e,__reflect(e.prototype,"game.DZVoiceChatMediator")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this.m_insatance||(this.m_insatance=new e),this.m_insatance},enumerable:!0,configurable:!0}),e.prototype.showConfirmPanel=function(e,n,a,i,r,o,s){void 0===a&&(a=null),void 0===i&&(i=null),void 0===o&&(o=0),void 0===s&&(s=!0);
var h=new t.messageBox(s);i||(i=""),h.setData(i,e,n,a,r,o),t.GameInfo.isAllSceneApa()?(h.x=Math.round((uniLib.Global.designWidth-h.width)/2),h.y=Math.round((uniLib.Global.designHeight*uniLib.ScreenUtils.scaleFactor-h.height)/2)):(h.x=Math.round((uniLib.Global.screenWidth-h.width)/2),h.y=Math.round((uniLib.Global.screenHeight*uniLib.ScreenUtils.scaleFactor-h.height)/2)),t.PopupManager.addPopUp(h,!0)},e}();t.PublicMethod=e,__reflect(e.prototype,"game.PublicMethod");var n=function(e){function n(t){var n=e.call(this)||this;return n.skinName=new boxPanel_2d5_new_Skin,n._needClose=t,n.closeButton.visible=t?!0:!1,n}return __extends(n,e),n.prototype.onClose=function(e){t.PopupManager.removePopUp(this),this.destory()},n.prototype.setData=function(t,e,n,a,i,r){void 0===n&&(n=null),void 0===a&&(a=null),void 0===i&&(i=null),void 0===r&&(r=0),this._backFn=a,this._backObj=i,this.title.text=t,this.info.text=e,1==n.length?(this.yesBtn.visible=!0,this.noBtn.visible=!1,this.yesBtn.horizontalCenter=0):2==n.length&&(this.yesBtn.visible=this.noBtn.visible=!0,this.yesBtn.horizontalCenter=118.5),this._backFn&&this._backFn[0]&&this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[0],this._backObj),this._backFn&&this._backFn[1]&&this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[1],this._backObj),this.yesBtn&&this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.noBtn&&this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.closeButton.visible&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},n.prototype.destory=function(){this.yesBtn&&(this._backFn&&this._backFn[0]&&this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[0],this._backObj),this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),uniLib.DisplayUtils.removeAllChildren(this.yesBtn),uniLib.DisplayUtils.removeFromParent(this.yesBtn),this.yesBtn=null),this.noBtn&&(this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this._backFn&&this._backFn[1]&&this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[1],this._backObj),uniLib.DisplayUtils.removeAllChildren(this.noBtn),uniLib.DisplayUtils.removeFromParent(this.noBtn),this.noBtn=null),this.closeButton.visible&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.title=null,this.info=null,this._backFn=null,this._backObj=null,t.ResUtil.removeFromParent(this),t.ResUtil.removeAllChildren(this)},n}(eui.Component);t.messageBox=n,__reflect(n.prototype,"game.messageBox")}(game||(game={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.gameList"},t}();t.gameList=e,__reflect(e.prototype,"DDZtable.gameList")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.PokerTableCard"},t}();t.PokerTableCard=e,__reflect(e.prototype,"DDZtable.PokerTableCard")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"DDZtable.TableCard"},t}();t.TableCard=e,__reflect(e.prototype,"DDZtable.TableCard")}(DDZtable||(DDZtable={})),table.TablePokerCard.cardPlace=function(t){var e=table.TablePokerCard.instance().first(function(e){return e.thisId==t});return null==e?0:e.point},table.TablePokerCard.hunCardArr=function(t){for(var e=[],n=table.TablePokerCard.instance().filter(function(e){return e.point==t}),a=0,i=n;a<i.length;a++){var r=i[a];e.push(r.thisId)}return e};var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableGift"},t}();t.TableGift=e,__reflect(e.prototype,"DDZtable.TableGift")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableGoodsConfig"},t}();t.TableGoodsConfig=e,__reflect(e.prototype,"DDZtable.TableGoodsConfig"),function(t){var e=function(){function t(){}return t}();t.GiftGoodsItem=e,__reflect(e.prototype,"DDZtable.TableGoodsConfig.GiftGoodsItem")}(e=t.TableGoodsConfig||(t.TableGoodsConfig={}))}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableMahjongMulti"},t}();t.TableMahjongMulti=e,__reflect(e.prototype,"DDZtable.TableMahjongMulti")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TablePlayTypeList"},t}();t.TablePlayTypeList=e,__reflect(e.prototype,"DDZtable.TablePlayTypeList")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableRoomCostConfig"},t}();t.TableRoomCostConfig=e,__reflect(e.prototype,"DDZtable.TableRoomCostConfig")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableServerReturnCode"},t}();t.TableServerReturnCode=e,__reflect(e.prototype,"DDZtable.TableServerReturnCode")}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableShopConfig"},t}();t.TableShopConfig=e,__reflect(e.prototype,"DDZtable.TableShopConfig"),function(t){var e=function(){function t(){}return t}();t.ShopGoodsItem=e,__reflect(e.prototype,"DDZtable.TableShopConfig.ShopGoodsItem")}(e=t.TableShopConfig||(t.TableShopConfig={})),function(t){var e=function(){function t(){}return t}();t.FirstShopGoodsItem=e,__reflect(e.prototype,"DDZtable.TableShopConfig.FirstShopGoodsItem")}(e=t.TableShopConfig||(t.TableShopConfig={}))}(DDZtable||(DDZtable={}));var DDZtable;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableVoice"},t}();t.TableVoice=e,__reflect(e.prototype,"DDZtable.TableVoice")}(DDZtable||(DDZtable={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,a){function i(t){e.call(a,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(a))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]),Cmd.OnRequestChangeSeatRoom_S=function(t){if(1!=game.RoomInfo.getInstance().video){var e=game.PokerFunction.GetUserInfoByUid(t.fromuid);if(e){var n=e.nickName+"请求和你更换座位?",a=function(){var e=new Cmd.ReturnChangeSeatRoom_C;e.fromuid=t.fromuid,e.isAgree=1,game.PokerFunction.tcpSend(e)},i=function(){var e=new Cmd.ReturnChangeSeatRoom_C;e.fromuid=t.fromuid,e.isAgree=0,game.PokerFunction.tcpSend(e)};game.PublicMethod.Instance.showConfirmPanel(n,["确定","取消"],[a,i],null,this,0,!1)}}};