function loadTable(t){var e=RES.getRes(t);return e}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){},i.prototype.destory=function(){t.ResUtil.removeFromParent(this),t.ResUtil.removeAllChildren(this)},i}(egret.DisplayObjectContainer);t.BaseVc=e,__reflect(e.prototype,"pdk.BaseVc")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableCard"},t}();t.TableCard=e,__reflect(e.prototype,"pdk.TableCard")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableGift"},t}();t.TableGift=e,__reflect(e.prototype,"pdk.TableGift")}(pdk||(pdk={}));var table;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TablePlayTypeList"},t}();t.TablePlayTypeList=e,__reflect(e.prototype,"table.TablePlayTypeList")}(table||(table={}));var RoleInfoDO=function(){function t(){this.uid=0,this.nickName=null,this.headUrl=null,this.chips=0,this.token=null,this.deviceId=0,this.gender=null,this.seatId=0,this.cardNum=0,this.bReady=0,this.ip=null,this.points=0,this.diamond=0,this.onlineState=0,this.cardsSet=[],this.isMyselfIn=!1,this.hostType=0,this._pos=[[20,590],[1140,150],[20,150]]}return t.prototype.updata=function(t){this.uid=t.uid,this.ip=t.ip,this.gender=t.gender,this.seatId=t.seatId,this.bReady=t.bReady,this.points=t.points,this.onlineState=t.onlineState,this.nickName=t.nickName,this.headUrl=t.headUrl,this.cardNum=t.cardNum,this.diamond=t.diamond,this.lat=t.lat,this.lng=t.lng,this.address=t.address,void 0==t.cardNum&&(this.cardNum=16),this.hostType=t.hostType},Object.defineProperty(t.prototype,"pos",{get:function(){var t=[[20,590],[uniLib.Global.screenWidth-140,150],[20,150]];return t},enumerable:!0,configurable:!0}),t.dispose=function(){},t}();__reflect(RoleInfoDO.prototype,"RoleInfoDO");var RoomInfoDO=function(){function t(){this.name=null,this.roomId=0,this.matchId=0,this.currentNum=1,this.totalNum=0,this.totalPlayers=0,this.roomType=!0,this.status=0,this.minBet=0,this.timer=0,this.restCardNum=0,this.payMode=0,this.lotteryInfo=[],this.resultData={},this.canHostMode=1,this.isShuffle=!1,this.isEvent=!1,this.playType=0}return t.prototype.updata=function(t){this.name=t.name,this.timer=t.timer,this.roomType=t.roomType,this.status=t.status,this.minBet=t.minBet,this.roomId=t.roomId,this.restCardNum=t.restCardNum,this.lotteryInfo=t.lotteryInfo,t.roomProps&&this.initRoomProps(t.roomProps),t.props?this.playTypeList=t.props:this.playTypeList=[11047],this.isEvent=1===t.isEvent?!0:!1,uniLib.Global.commEventInfo&&(this.eventInfo=uniLib.Global.commEventInfo)},t.prototype.initRoomProps=function(t){if(t&&!(t.length<=0))for(var e=0;e<t.length;e++)t[e].value||(t[e].value=0),t[e].id==Cmd.RoomPro.RoomPro_1&&(this.totalNum=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_2&&(this.playType=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_3&&(this.totalPlayers=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_4&&(this.payMode=t[e].value)},t.prototype.getPlayTypeByList=function(){for(var t=[],e=0;e<this.playTypeList.length;e++){var i=table.TablePlayTypeList.getPlayTypeDes(this.playTypeList[e]);t.push(i)}return ArrayUtil.isInArray(227,this.playTypeList)?this.playType=0:ArrayUtil.isInArray(228,this.playTypeList)?this.playType=1:this.playType=0,t},t.prototype.getHostMode=function(){1==ArrayUtil.isInArray(144,this.playTypeList)?this.canHostMode=1:this.canHostMode=0},t.prototype.getDisCardMode=function(){return this.playTypeList&&1==ArrayUtil.isInArray(10047,this.playTypeList)?!1:!0},t.prototype.dispose=function(){this.resultData=null,this.playTypeList=null,this.lotteryInfo=null},t}();RoomInfoDO.isDisCardNum=!0,__reflect(RoomInfoDO.prototype,"RoomInfoDO");var HeadLoader=function(){function t(){}return t.prototype.load=function(t,e,i,n){this.destroy(),this._completeFun=e,this._errorFun=i,this._callObj=n,this._headUrl=t;var s=this.getHeadCache(t);s?this._completeFun&&this._completeFun.call(this._callObj,s):(this._imageLoader=new egret.ImageLoader,this._imageLoader.addEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),this._imageLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this._imageLoader.load(this._headUrl))},t.prototype.loadCompleteHandler=function(t){this._imageLoader.removeEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),this._imageLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.saveHeadCache(this._headUrl,this._imageLoader.data),this._completeFun&&this._completeFun.call(this._callObj,this._imageLoader.data)},t.prototype.onIOError=function(t){this._imageLoader.removeEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),this._imageLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this._errorFun&&this._errorFun.call(this._callObj,[])},t.prototype.destroy=function(){this._imageLoader&&(this._imageLoader.removeEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),this._imageLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this._imageLoader=null),this._completeFun=null,this._errorFun=null,this._callObj=null,this._headUrl=null},t.prototype.getHeadCache=function(t){if(uniLib.Global.localCache){if(uniLib.Global.localCache[t])return uniLib.Global.localCache[t]}else uniLib.Global.localCache={};return null},t.prototype.saveHeadCache=function(t,e){uniLib.Global.localCache||(uniLib.Global.localCache={}),uniLib.Global.localCache[t]=e},t}();__reflect(HeadLoader.prototype,"HeadLoader");var pdk;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.initBg(t),i}return __extends(i,e),i.prototype.initBg=function(e){0!=e&&(this._initY=-13,1==e?(this._bg=t.ResUtil.createBitmapByName("msgPanel"),this._bg.scale9Grid=new egret.Rectangle(57,26,445,147)):(this._bg=t.ResUtil.createBitmapByName("msgBoxBg"),this._bg.scale9Grid=new egret.Rectangle(52,26,468,144)),this._bg.touchEnabled=!0,this._bg.width=577,this._bg.height=482-this._initY,this._bg.y=this._initY,this.addChild(this._bg),this._closeBtn=new t.GameButton(["userInfo_close1","userInfo_close2"]),this._closeBtn.x=this._bg.width-61,this._closeBtn.y=-20,this.addChild(this._closeBtn),this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandle,this),this.initPanel())},i.prototype.initPanel=function(){},i.prototype.hideClose=function(){this._closeBtn.visible=!1},Object.defineProperty(i.prototype,"title",{set:function(e){this._title||(this._title=t.ResUtil.createBitmapByName(e),this._title.x=Math.round((157-this._title.width)/2),this._title.y=14,this.addChild(this._title))},enumerable:!0,configurable:!0}),i.prototype.setSize=function(t,e){this._bg.width=t,this._bg.height=e-this._initY,this._closeBtn.x=this._bg.width-61},i.prototype.closeHandle=function(t){console.error("closeHandle"),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_PANEL))},i.prototype.destory=function(){e.prototype.destory.call(this),this._closeBtn&&(this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandle,this),this._closeBtn=null),this._bg=null,this._title=null},i}(t.BaseVc);t.BasePanel=e,__reflect(e.prototype,"pdk.BasePanel")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.touchEnabled=!0,i._needClose=t,i.initUI(),i}return __extends(i,e),i.prototype.initUI=function(){var e=t.ResUtil.createBitmapByName("msgBoxBg");if(e.scale9Grid=new egret.Rectangle(180,60,90,60),e.width=635,e.height=391,this.addChild(e),this.title=t.ResUtil.createTextFeild(4079177,egret.HorizontalAlign.CENTER,"",32,140,18,191),this.info=t.ResUtil.createTextFeild(4079177,egret.HorizontalAlign.CENTER,"",32,110,39,393),this.info.height=200,this.info.verticalAlign=egret.VerticalAlign.MIDDLE,this.info.lineSpacing=2,this.addChild(this.info),this.addChild(this.title),this._needClose){var i=new t.GameButton(["userInfo_close1","userInfo_close2"]);i.x=e.width-61,i.y=-10,i.addClickArea(20),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.addChild(i)}},i.prototype.onClose=function(e){t.PopupManager.removePopUp(this),this.destory()},i.prototype.setData=function(e,i,n,s,o,r){if(void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null),void 0===r&&(r=0),this._backFn=s,this._backObj=o,this.title.text=e,this.info.text=i,1==n.length){this.yesBtn=new t.GameButton(["button11","button12"]),this.yesBtn.x=Math.round((this.width-this.yesBtn.width)/2),this.yesBtn.y=this.height-105,this.addChild(this.yesBtn);var a=t.ResUtil.createBitmapByName("word_sure",65,8);this.yesBtn.addChild(a)}else if(2==n.length){this.yesBtn=new t.GameButton(["button11","button12"]),this.yesBtn.x=36,this.yesBtn.y=290,this.addChild(this.yesBtn);var a=t.ResUtil.createBitmapByName("word_sure",65,8);this.yesBtn.addChild(a),this.noBtn=new t.GameButton(["button21","button22"]),this.noBtn.x=336,this.noBtn.y=290,this.addChild(this.noBtn);var h=t.ResUtil.createBitmapByName("word_cancel",65,8);this.noBtn.addChild(h)}this._backFn&&this._backFn[0]&&this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[0],this._backObj),this._backFn&&this._backFn[1]&&this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[1],this._backObj),this.yesBtn&&this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.noBtn&&this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},i.prototype.destory=function(){this.yesBtn&&(this._backFn&&this._backFn[0]&&this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[0],this._backObj),this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),uniLib.DisplayUtils.removeAllChildren(this.yesBtn),uniLib.DisplayUtils.removeFromParent(this.yesBtn),this.yesBtn=null),this.noBtn&&(this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this._backFn&&this._backFn[1]&&this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[1],this._backObj),uniLib.DisplayUtils.removeAllChildren(this.noBtn),uniLib.DisplayUtils.removeFromParent(this.noBtn),this.noBtn=null),this.title=null,this.info=null,this._backFn=null,this._backObj=null,t.ResUtil.removeFromParent(this),t.ResUtil.removeAllChildren(this)},i}(egret.Sprite);t.MsgBox=e,__reflect(e.prototype,"pdk.MsgBox")}(pdk||(pdk={}));var UserInfoDO=function(){function t(){}return t.getUserSeat=function(t){void 0===t&&(t=0);for(var e=this.roleCurrentList.concat(),i=0;i<e.length;i++)if(t==e[i].uid)return e[i].seatId;return 1},t.getUserVoByUid=function(t){void 0===t&&(t=0);for(var e=this.roleCurrentList.concat(),i=0;i<e.length;i++)if(t==e[i].uid)return e[i];return null},t.getUserName=function(t){void 0===t&&(t=0);for(var e=this.roleCurrentList.concat(),i=0;i<e.length;i++)if(t==e[i].uid)return e[i].nickName;return""},t.getUidNotSendID=function(t){for(var e=[],i=this.roleCurrentList.concat(),n=0;n<i.length;n++)i[n].uid!=t&&e.push(i[n].uid);return e},t.getUserGender=function(t){void 0===t&&(t=0);for(var e=this.roleCurrentList.concat(),i=0;i<e.length;i++)if(t==e[i].uid){if("男"==e[i].gender)return 0;if("女"==e[i].gender)return 1}return 0},t.dispose=function(){this.roomInfo=null,this.actorInfo=null,this.roleCurrentList=null},t}();UserInfoDO.actorInfo=new RoleInfoDO,UserInfoDO.roomInfo=new RoomInfoDO,UserInfoDO.roleCurrentList=[],__reflect(UserInfoDO.prototype,"UserInfoDO");var pdk;!function(t){var e=function(){function t(){}return t}();e.defaultWidth=1280,e.defaultHeight=720,e.path="",e.destroyResOnExit=!1,e.globalRoomId=0,e.gameId=5166,e.zoneid=301,e.subGameType=0,e.robotId=0,e.robotNum=0,t.DataCache=e,__reflect(e.prototype,"pdk.DataCache")}(pdk||(pdk={}));var Cmd;!function(t){function e(t){if(uniLib.UIMgr.instance.hideLoading(),UserInfoDO.roomInfo.updata(t.roomInfo),t.role&&t.role.length>0)for(var e=0;e<t.role.length;e++)t.role[e].uid==UserInfoDO.actorInfo.uid&&(UserInfoDO.actorInfo.bReady=t.role[e].bReady);GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_ENTER_GAME)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_REMOTE_PLAYER,!1,!1,t.role)),t.roomInfo&&t.roomInfo.qiangGuanSec&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_QIANGGUAN_START,!1,!1,{uid:t.roomInfo.qiangGuanUid,sec:t.roomInfo.qiangGuanSec})),uniLib.Global.debugLevel>=1||(1==pdk.RoomInfo.getInstance().video&&(uniLib.UserInfo.uid=pdk.RoomInfo.getInstance().videoUid),null!=uniLib.Global.lastPingUpTimestamp&&(uniLib.Global.lastPing=Date.now()-uniLib.Global.lastPingUpTimestamp,uniLib.Global.lastPingUpTimestamp=null))}function i(t){0==t.resultCode&&ReqManager.ins.OnReadyGameReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.seatId)}function n(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_READY,!1,!1,t.resultCode)),console.log("准备游戏"+t)}function s(t){1==t.resultCode&&pdk.GameInfo.manage.showMildWarnShow("已经开局不能离开房间")}function o(t){null!=uniLib.Global.lastPingUpTimestamp&&(uniLib.Global.lastPing=Date.now()-uniLib.Global.lastPingUpTimestamp,uniLib.Global.lastPingUpTimestamp=null),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_CARD_SEND,!1,!1,t))}function r(t){t&&t.outCardGroup&&(UserInfoDO.canOprateList=t.outCardGroup),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_CAN_OPRITE_LIST,!1,!1,t))}function a(t){if(t.handCardSet.length&&t.uid==UserInfoDO.actorInfo.uid&&(pdk.MyUserInfo.getInstance().myHandsCards=t.handCardSet),t.handCardSet&&t.handCardSet instanceof Array&&UserInfoDO.roleCurrentList&&UserInfoDO.roleCurrentList instanceof Array)for(var e=void 0,i=UserInfoDO.roleCurrentList.length,n=0;i>n;n++)if(UserInfoDO.roleCurrentList[n].uid==t.uid){e=UserInfoDO.roleCurrentList[n],e.cardsSet=t.handCardSet;break}GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_MY_CARD,!1,!1,t)),uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_stop")}function h(t){pdk.GameInfo.manage.showMildWarnShow(t.desc)}function d(t){UserInfoDO.roomInfo.currentNum=t.curGameNbr,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_TEST)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,!1,!1,t)),t.handCardSet&&t.handCardSet.length>0&&(pdk.MyUserInfo.getInstance().myHandsCards=t.handCardSet),UserInfoDO.roomInfo.currentNum>=1&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SHARE_HIDE_VIEW))}function l(t){var e=new RoleInfoDO;e.updata(t.role),e.uid!==UserInfoDO.actorInfo.uid&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_ENTER,!1,!1,e)),e=null}function c(t){t.uid==UserInfoDO.actorInfo.uid?(GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_OUT_GAME)),pdk.DataCache.gameInfo&&pdk.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),uniLib.GameModuleUtils.ExitGame(),uniLib.Global.lobbyMode?RES.destroyRes("pdk_res",!0):(RES.destroyRes("PDKpreLoadAll",!0),uniLib.ResUtils.clearResConfigByGroupName(["PDKpreLoadAll"])),null!=uniLib.Global.lastPingUpTimestamp&&(uniLib.Global.lastPing=Date.now()-uniLib.Global.lastPingUpTimestamp,uniLib.Global.lastPingUpTimestamp=null)):GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_LEAVE,!1,!1,t.uid))}function p(t){t.uid==UserInfoDO.actorInfo.uid&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_LOTTERY,!1,!1,t)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_ACTION,!1,!1,t))}function u(t){t.nextHostType||(t.nextHostType=0),t.nextOpType||(t.nextOpType=1),t.roomId||(t.roomId=UserInfoDO.roomInfo.roomId),t.timer?0!=t.timer&&t.timer<1e3&&(t.timer=3e4):t.timer=3e4;for(var e=t.cardSet,i=-1,n=0;n<UserInfoDO.roleCurrentList.length;n++)if(UserInfoDO.roleCurrentList[n].uid==t.uid){i=n;break}if(t.uid==UserInfoDO.actorInfo.uid){var s=pdk.MyUserInfo.getInstance().myHandsCards;if(s&&s instanceof Array){if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n],r=s.indexOf(o);r>=0&&s.splice(r,1)}GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SELF_OUT_CARDS_TIP,!1,!1,s))}}else if(1==pdk.RoomInfo.getInstance().video&&e&&e.length>0){for(var n=0;n<e.length;n++){var o=e[n];if(UserInfoDO.roleCurrentList[i]&&UserInfoDO.roleCurrentList[i].cardsSet instanceof Array){var r=UserInfoDO.roleCurrentList[i].cardsSet.indexOf(o);r>=0&&UserInfoDO.roleCurrentList[i].cardsSet.splice(r,1)}}GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SELF_OUT_CARDS_TIP,!1,!1,UserInfoDO.roleCurrentList[i]))}t&&(UserInfoDO.canOprateList=null),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,!1,!1,t))}function _(t){UserInfoDO.roomInfo.currentNum=t.curGameNbr,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_GAME_START,!1,!1,t)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SHARE_HIDE_VIEW))}function m(t){pdk.MyUserInfo.getInstance().myHandsCards=[],GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_GAME_END)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_LOTTERY,!1,!1,t))}function f(t){UserInfoDO.roomInfo.resultData=t,pdk.GameData.getInstance().recordInfo=t,1==t.state&&GameEvnts.ins.dispatchEvent(new egret.Event(pdk.UIEventConsts.SHOW_RESULT_INFO,!1,!1,t))}function v(t){}function g(t){}function E(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_GAME_FIRST_ACTION,!1,!1,t))}function y(t){t.resultCode||(t.resultCode=0),t.resultCode==pdk.NetConsts.SUCCESS&&t.userNum>1&&pdk.GameInfo.manage.showMildWarnShow("解散房间已申请成功，请等待其它玩家选择")}function C(e){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.DISS_REQUEST_NOTICE,!1,!1,e)),t.gameDispatch&&t.gameDispatch("DISS_REQUEST_NOTICE",e)}function T(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.DISS_RESULT_NOTICE,!1,!1,t))}function I(e){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.DISS_RESULT_NOTICE,!1,!1,e)),t.gameDispatch&&t.gameDispatch("DISS_RESULT_NOTICE",e)}function L(e){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.DISS_NOTICE,!1,!1,e)),t.gameDispatch&&t.gameDispatch("DISS_NOTICE",e)}function G(e){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.VOICE_NOTICE,!1,!1,e)),t.gameDispatch&&t.gameDispatch("voice_notice",e)}function O(e){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_COMMON_CHAT,!1,!1,e)),t.gameDispatch&&t.gameDispatch("notify_common_chat",e)}function b(e){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_CHAT_RECORD,!1,!1,e)),t.gameDispatch&&t.gameDispatch("notify_chat_record",e)}function S(t){1!=pdk.RoomInfo.getInstance().video&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_GIFTS,!1,!1,t))}function U(t){}function P(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_STATUS,!1,!1,t))}function R(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.UPDATE_GPS_DATA,!1,!1,t))}function D(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_UPDATE_USER_POINT,!1,!1,t))}function A(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_AUTO_GAME,!1,!1,t.resultCode))}function k(t){t.uid==UserInfoDO.actorInfo.uid&&(UserInfoDO.actorInfo.hostType=t.hostType),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_AUTO,!1,!1,t))}function N(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_QIANGGUAN_START,!1,!1,t))}function x(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_QIANGGUAN_RESULT,!1,!1,t))}t.OnJoinRoomReq_S=e,t.OnChangeCardReq_S=i,t.OnReadyGameReq_S=n,t.OnOutRoomReq_S=s,t.OnOperatGameReq_S=o,t.OnPlayerGameOperat_S=r,t.OnSelfCardPokerCmd_S=a,t.OnSysMessagePokerCmd_S=h,t.OnReConnectPokerCmd_S=d,t.OnPlayerInGame_Brd=l,t.OnPlayerOutGame_Brd=c,t.OnPlayerAction_Brd=p,t.OnPlayerGameOperat_Brd=u,t.OnGameStart_Brd=_,t.OnGameEnd_Brd=m,t.OnFinalScorePokerCmd_Brd=f,t.OnFinalScorePokerCmd_S=v,t.OnGameAuto_Brd=g,t.OnSendGameTime_Brd=E,t.OnRequestDissolveRoom_S=y,t.OnRequestDissolveRoom_Brd=C,t.OnReplyDissolveRoom_S=T,t.OnSuccessDissolveRoom_Brd=I,t.OnReplyDissolveRoom_Brd=L,t.OnVoiceChat_Brd=G,t.OnCommonChat_Brd=O,t.OnVoiceChatRecord_S=b,t.OnSendGiftPokerCmd_Brd=S,t.OnSendGiftPokerCmd_S=U,t.OnOnlineStatePokerCmd_Brd=P,t.OnReturnIpAndGPSCmd_S=R,t.OnPdk_UpdatePointSeatRoom_S=D,t.OnPdk_RetHostCmd_S=A,t.OnPdk_RetHostCmd_Brd=k,t.OnRequestQiangGuan_Brd=N,t.OnReturnQiangGuan_Brd=x}(Cmd||(Cmd={}));var ReqManager=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.OnJoinRoomReq_C=function(t,e,i,n,s,o,r,a){void 0===o&&(o=0),void 0===r&&(r=0),void 0===a&&(a=0);var h=new Cmd.JoinRoomReq_C;h.uid=t,h.roomId=e,h.token=i,h.globalRoomId=n,h.gameId=s,uniLib.Global.lobbyMode||(h.subGameType=o,h.robotId=r,h.robotNum=a),pdk.ResUtil.trace("sendData:"+JSON.stringify(h)),uniLib.NetMgr.tcpSend(h),uniLib.Global.lastPingUpTimestamp=Date.now()},t.prototype.OnChangeCardReq_C=function(t,e,i){var n=new Cmd.ChangeCardReq_C;n.uid=t,n.roomId=e,n.cardSet=i,uniLib.NetMgr.tcpSend(n)},t.prototype.OnOutRoomReq_C=function(t,e){var i=new Cmd.OutRoomReq_C;i.uid=t,i.roomId=e,uniLib.NetMgr.tcpSend(i)},t.prototype.OnReadyGameReq_C=function(t,e,i,n){var s=new Cmd.ReadyGameReq_C;s.uid=t,s.roomId=e,s.seatId=i,n&&(s.shuffle=n),uniLib.NetMgr.tcpSend(s)},t.prototype.OnOperatGameReq_C=function(t,e,i,n,s){void 0===s&&(s=1);var o=new Cmd.OperatGameReq_C;o.opType=e,n&&(o.cardSet=n),3==o.opType&&(o.hostType=s),1==o.opType&&CardPanel.ins.ResetSelectCard(),uniLib.Global.lastPingUpTimestamp=Date.now(),uniLib.NetMgr.tcpSend(o)},t.prototype.OnCommonChat_C=function(t){uniLib.NetMgr.tcpSend(t)},t.prototype.OnReplyDissolveRoom_C=function(t){uniLib.NetMgr.tcpSend(t)},t.prototype.OnGetPersonalPanel_C=function(t){uniLib.NetMgr.tcpSend(t)},t.prototype.OnVoiceChat_C=function(t){uniLib.NetMgr.tcpSend(t)},t.prototype.OnSoundSet_C=function(t){null!=uniLib.Global.lastPingUpTimestamp&&(uniLib.Global.lastPing=Date.now()-uniLib.Global.lastPingUpTimestamp,uniLib.Global.lastPingUpTimestamp=null),uniLib.NetMgr.tcpSend(t)},t.prototype.OnRequestDissolveRoom_C=function(t){uniLib.NetMgr.tcpSend(t)},t.prototype.OnLeaveMahjongCmd_C=function(t){null!=uniLib.Global.lastPingUpTimestamp&&(uniLib.Global.lastPing=Date.now()-uniLib.Global.lastPingUpTimestamp,uniLib.Global.lastPingUpTimestamp=null),uniLib.NetMgr.tcpSend(t)},t.prototype.OnSendGiftPokerCmd_C=function(t){uniLib.NetMgr.tcpSend(t)},t.prototype.OnGetGPSLocationCmd_C=function(){function t(t){if(0==t.code){e.lng=t.data.longitude,e.lat=t.data.latitude;var i=new Cmd.GetGPSLocationCmd_C;i.lat=e.lat,i.lng=e.lng,t.data.address&&(i.address=t.data.address),uniLib.NetMgr.tcpSend(i)}}var e;e=uniLib.ZQGameSdk.getLocation(t,this)},t.prototype.OnPaoDeKuaiChangeRoomMahjongCmd_C=function(){var t=new Cmd.PaoDeKuaiChangeRoomMahjongCmd_C;uniLib.NetMgr.tcpSend(t)},t.prototype.OnRequestQiangGuan_C=function(t){var e=new Cmd.RequestQiangGuan_C;1==t&&(e.op=1),uniLib.NetMgr.tcpSend(e)},t}();__reflect(ReqManager.prototype,"ReqManager");var GameEvnts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.addGameEventListener=function(t,e,i){void 0===i&&(i=this),this.addEventListener(t,e,i)},e.prototype.removeGameEventListener=function(t,e){this.removeEventListener(t,e,this)},e.prototype.dispatchGameEvents=function(t,e){void 0===e&&(e=null),this.data=e;var i=new egret.Event(t,!1,!1,e);this.dispatchEvent(i)},e}(egret.EventDispatcher);GameEvnts.NOTIFY_HIDE_TEST="notify_hide_test",GameEvnts.NOTIFY_SHOW_TEST="notify_show_test",GameEvnts.NOTIFY_USER_ENTER_GAME="notify_user_enter_game",GameEvnts.NOTIFY_USER_OUT_GAME="notify_user_out_game",GameEvnts.NOTIFY_USER_READY="notify_user_ready",GameEvnts.SHOW_MAIN_SCENCE="show_main_scence",GameEvnts.HIDE_MAIN_SCENCE="hide_main_scence",GameEvnts.SHOW_UI_SCENCE="show_ui_scence",GameEvnts.HIDE_UI_SCENCE="hide_ui_scence",GameEvnts.NOTIFY_HIDE_LOGO="notify_hide_logo",GameEvnts.NOTIFY_SHOW_LOGO="notify_show_logo",GameEvnts.NOTIFY_SHOW_GPS="notify_show_gps",GameEvnts.UPDATE_GPS_DATA="update_gps_data",GameEvnts.NOTIFY_HIDE_LOADING="notify_hide_loading",GameEvnts.NOTIFY_SHOW_LOADING="notify_show_loading",GameEvnts.NOTIFY_HIDE_MAP="notify_hide_map",GameEvnts.SHARE_HIDE_VIEW="share_hide_view",GameEvnts.NOTIFY_SHOW_MAP="notify_show_map",GameEvnts.NOTIFY_SHOW_PANEL="notify_show_panel",GameEvnts.NOTIFY_HIDE_PANEL="notify_hide_panel",GameEvnts.NOTIFY_REMOTE_PLAYER="notify_remote_player",GameEvnts.NOTIFY_PLAYER_ENTER="notify_player_enter",GameEvnts.NOTIFY_PLAYER_LEAVE="notify_player_leave",GameEvnts.NOTIFY_HIDE_LOTTERY="notify_hide_lottery",GameEvnts.NOTIFY_SHOW_LOTTERY="notify_show_lottery",GameEvnts.NOTIFY_HIDE_OPERAT="notify_hide_operat",GameEvnts.NOTIFY_SHOW_OPERAT="notify_show_operat",GameEvnts.NOTIFY_HIDE_CARD="notify_hide_card",GameEvnts.NOTIFY_SHOW_MY_CARD="notify_show_my_card",GameEvnts.NOTIFY_HIDE_CLOCK="notify_hide_clock",GameEvnts.NOTIFY_SHOW_CLOCK="notify_show_clock",GameEvnts.NOTIFY_SHOW_MONEY="notify_show_money",GameEvnts.NOTIFY_HIDE_MONEY="notify_hide_money",GameEvnts.NOTIFY_PLAYER_STATUS="notify_player_status",GameEvnts.NOTIFY_GAME_START="notify_game_start",GameEvnts.NOTIFY_GAME_END="notify_game_end",GameEvnts.NOTIFY_SEND_CARDR="notify_send_card",GameEvnts.NOTIFY_PLAYER_AUTO="notify_player_auto",GameEvnts.NOTIFY_PLAYER_ACTION="notify_player_action",GameEvnts.NOTIFY_PLAYER_GAME_OPERAT="notify_player_game_operat",GameEvnts.NOTIFY_GAME_FIRST_ACTION="notify_game_first_action",GameEvnts.NOTIFY_USER_CARD_OPERAT="notify_user_card_operat",GameEvnts.NOTIFY_USER_CARD_SEND="notify_user_card_send",GameEvnts.NOTIFY_CAN_OPRITE_LIST="notify_can_oprete_list",GameEvnts.NOTIFY_PLAYER_CARD_OPERAT="notify_player_operat",GameEvnts.CLEAR_PLAYER_CARD="CLEAR_PLAYER_CARD",GameEvnts.NOTIFY_USER_AUTO_GAME="notify_user_auto_game",GameEvnts.NOTIFY_SHOW_PLAYER_WIN_EFFECT="notify_show_player_win_effect",GameEvnts.NOTIFY_SHOW_WIN_EFFECT="notify_show_win_effect",GameEvnts.NOTIFY_HIDE_WIN_EFFECT="notify_hide_win_effect",GameEvnts.NOTIFY_SHOW_MONEY_EFFECT="notify_show_money_effect",GameEvnts.NOTIFY_UPDATE_USER_POINT="NOTIFY_UPDATE_USER_POINT",GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME="notify_user_again_connect_game",GameEvnts.NOTIFY_REQ_PLAYER_INFO="notify_req_player_info",GameEvnts.NOTIFY_SHOW_SET_PANEL="notify_show_set_panel",GameEvnts.NOTIFY_SHOW_HELP_PANEL="notify_show_help_panel",GameEvnts.NOTIFY_SHOW_CHAT_PANEL="notify_show_chat_panel",GameEvnts.NOTIFY_REQ_PLAYER_GIFTS="notify_req_player_gifts",GameEvnts.NOTIFY_SHOW_AUTO="notify_show_quto",GameEvnts.NOTIFY_SHOW_GIFTS="notify_show_gifts",GameEvnts.DISS_NOTICE="DISS_NOTICE",GameEvnts.DISS_RESULT_NOTICE="DISS_RESULT_NOTICE",GameEvnts.DISS_REQUEST_NOTICE="DISS_REQUEST_NOTICE",GameEvnts.NOTIFY_CHAT_RECORD="notify_chat_record",GameEvnts.VOICE_NOTICE="voice_notice",GameEvnts.NOTIFY_COMMON_CHAT="notify_common_chat",GameEvnts.NOTIFY_QIANGGUAN_START="NOTIFY_QIANGGUAN_START",GameEvnts.NOTIFY_QIANGGUAN_RESULT="NOTIFY_QIANGGUAN_RESULT",GameEvnts.SHARE_PAI_GAME="share_pai_game",GameEvnts.SELF_OUT_CARDS_TIP="self_out_cards_tip",GameEvnts.REC_USER_INFO="rec_user_info",__reflect(GameEvnts.prototype,"GameEvnts");var MsgEvent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.addMsgEventListener=function(t,e,i){void 0===i&&(i=this),this.addEventListener(t,e,i)},e.prototype.removeMsgEventListener=function(t,e){this.removeEventListener(t,e,this)},e.prototype.dispatchMsgEvent=function(t,e){void 0===e&&(e=null),this.data=e;var i=new egret.Event(t,!1,!1,e);this.dispatchEvent(i)},e}(egret.EventDispatcher);MsgEvent.GET_USER_CHIPS="get_user_chips",__reflect(MsgEvent.prototype,"MsgEvent");var StageEvent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.addStageEventListener=function(t,e,i){void 0===i&&(i=this)},e.prototype.removeStageEventListener=function(t,e){},e.prototype.dispatchStageEvent=function(t,e){void 0===e&&(e=null)},e}(egret.EventDispatcher);StageEvent.STAGE_NOTIFY_SHOW_PANEL="stage_notify_show_panel",StageEvent.STAGE_NOTIFY_HIDE_PANEL="stage_notify_hide_panel",__reflect(StageEvent.prototype,"StageEvent");var LayerManager=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(){e.setup(this),pdk.GameInfo.topLayer=this.topLayer,egret.MainContext.instance.stage.setContentSize(1280,720),uniLib.Global.lobbyMode||(egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.setup=function(t){this._root=t,this._root.uiLayer.name="uiLayer",this._root.topLayer.name="topLayer",this._root.effectLayer.name="effectLayer",this._root.mainUILayer.name="mainUILayer",this._root.maskLayer.name="maskLayer",this._root.tipsLayer.name="tipsLayer"},Object.defineProperty(e,"uiLayer",{get:function(){return this._root.uiLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectLayer",{get:function(){return this._root.effectLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tipLayer",{get:function(){return this._root.tipsLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mainUILayer",{get:function(){return this._root.mainUILayer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"topLayer",{get:function(){return this._root.topLayer},enumerable:!0,configurable:!0}),e.closeLayer=function(t,e){void 0===e&&(e=!1),e?(t.touchEnabled=!0,t.touchChildren=!0):(t.touchEnabled=!1,t.touchChildren=!1)},e.removeLayer=function(){},e}(uniLib.GameScene);__reflect(LayerManager.prototype,"LayerManager");var MsgTipsManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.showError=function(t,e){void 0===e&&(e=16777062),this.init(),this._contentText.text=t,this._contentText.textColor=e,this._contentText.y=.5*(this.HIGHT-this._contentText.textHeight),this.startMove()},e.showSucc=function(t,e){void 0===e&&(e=65280),this.init(),this._contentText.text=t,this._contentText.textColor=e,this._contentText.y=.5*(this.HIGHT-this._contentText.textHeight),this.startMove()},e.init=function(){this._root||(this._root=new egret.Sprite,LayerManager.tipLayer.addChild(this._root)),!this._bg,this._contentText||(this._contentText=this.getDefaultMsgText(),this._root.addChild(this._contentText))},e.startMove=function(){var t=pdk.DataCache.stageWidth/2-this._root.width/2;this._root.x=t,this._root.y=200;egret.Tween.get(this._root,{loop:!1}).to({y:150},1500,egret.Ease.sineIn).wait(200).call(this.onCompleteHandler,this,[this._root])},e.onCompleteHandler=function(t){t&&egret.Tween.removeTweens(t),this.dispose()},e.getDefaultMsgText=function(){var t=new egret.TextField;return t.fontFamily="微软雅黑",t.size=24,t.textAlign=egret.HorizontalAlign.CENTER,t.multiline=!0,t.wordWrap=!0,t.width=this.WIDTH,t},e.dispose=function(){clearTimeout(this._timeID),this._root&&(DisplayUtil.removeAllChildren(this._root),DisplayUtil.removeFromParent(this._root)),this._contentText=null,this._bg=null,this._root=null},e}(egret.Sprite);MsgTipsManager._timeID=-1,__reflect(MsgTipsManager.prototype,"MsgTipsManager");var PDKGameMain=function(t){function e(e){var i=t.call(this,e)||this;
return i._gameInfo&&(pdk.DataCache.gameInfo=i._gameInfo),e&&e.destroyResOnExit&&(pdk.DataCache.destroyResOnExit=e.destroyResOnExit),i._gameInfo&&i._gameInfo.extData&&(pdk.DataCache.debug=0,pdk.DataCache.platParam=i._gameInfo.extData),i._gameInfo&&i._gameInfo.extData&&i._gameInfo.extData.video?(pdk.RoomInfo.getInstance().video=i._gameInfo.extData.video,pdk.RoomInfo.getInstance().videoUid=i._gameInfo.extData.videoUid):(pdk.RoomInfo.getInstance().video=0,pdk.RoomInfo.getInstance().videoUid=0),i.test(),i}return __extends(e,t),e.prototype.test=function(){uniLib.Global.lobbyMode||(uniLib.Global.debugLevel=1,pdk.DataCache.globalRoomId=0,pdk.DataCache.gameId=206,pdk.DataCache.zoneid=321,pdk.DataCache.subGameType=0,pdk.DataCache.robotId=0,pdk.DataCache.robotNum=2)},e.prototype.start=function(t){void 0===t&&(t=null);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var i={};i.designWidth=1280,i.designHeight=720,i.debug=!0,i.logLevel=0,uniLib.init(i),RES.setMaxLoadingThread(6),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(t){var e=t.target;e.removeEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),this.preLoadEnd()},e.prototype.preLoadEnd=function(){if(uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),uniLib.Global.lobbyMode)uniLib.ResLoadMgr.instance.load("pdk_res",this.createGameScene,null,this,null);else{var t=[];t=["gameCommon","pdk_res"],RES.createGroup("preLoadAll",t),uniLib.ResLoadMgr.instance.load("preLoadAll",this.createGameScene,null,this,null)}},e.prototype.createGameScene=function(){var t=Date.now();t-e.time<1e3||(e.time=t,pdk.DataCache.langObj=JSON.parse(RES.getRes("pdk_gameTxt_cn_txt")),pdk.GameInfo.manage=pdk.PublicManageTips.getInstance(),pdk.DataCache.stageWidth=pdk.DataCache.defaultWidth,pdk.DataCache.stageHight=pdk.DataCache.defaultHeight,uniLib.UIMgr.instance.hideLoading(),uniLib.SceneMgr.instance.changeScene(LayerManager),NetManager.ins.init(),ScenePanel.ins.show(),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SHOW_MAIN_SCENCE)),1==pdk.RoomInfo.getInstance().video&&(GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SHOW_UI_SCENCE)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_MAP))),uniLib.SoundMgr.instance.playBgMusic([pdk.SoundConsts.SET_TYPE+"_bg_mp3"]))},e}(uniLib.GameDoc);PDKGameMain.time=0,__reflect(PDKGameMain.prototype,"PDKGameMain");var Cmd;!function(t){var e;!function(t){t[t.RoomPro_0=0]="RoomPro_0",t[t.RoomPro_1=1]="RoomPro_1",t[t.RoomPro_2=2]="RoomPro_2",t[t.RoomPro_3=3]="RoomPro_3",t[t.RoomPro_4=4]="RoomPro_4",t[t.RoomPro_5=5]="RoomPro_5",t[t.RoomPro_6=6]="RoomPro_6"}(e=t.RoomPro||(t.RoomPro={}));var i=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RoleInfo"},t}();t.RoleInfo=i,__reflect(i.prototype,"Cmd.RoleInfo");var n=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.LotteryInfo"},t}();t.LotteryInfo=n,__reflect(n.prototype,"Cmd.LotteryInfo");var s=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RoomInfo"},t}();t.RoomInfo=s,__reflect(s.prototype,"Cmd.RoomInfo");var o=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.JoinRoomReq_C"},t}();t.JoinRoomReq_C=o,__reflect(o.prototype,"Cmd.JoinRoomReq_C");var r=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.JoinRoomReq_S"},t}();t.JoinRoomReq_S=r,__reflect(r.prototype,"Cmd.JoinRoomReq_S");var a=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OutRoomReq_C"},t}();t.OutRoomReq_C=a,__reflect(a.prototype,"Cmd.OutRoomReq_C");var h=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OutRoomReq_S"},t}();t.OutRoomReq_S=h,__reflect(h.prototype,"Cmd.OutRoomReq_S");var d=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReadyGameReq_C"},t}();t.ReadyGameReq_C=d,__reflect(d.prototype,"Cmd.ReadyGameReq_C");var l=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReadyGameReq_S"},t}();t.ReadyGameReq_S=l,__reflect(l.prototype,"Cmd.ReadyGameReq_S");var c=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OperatGameReq_C"},t}();t.OperatGameReq_C=c,__reflect(c.prototype,"Cmd.OperatGameReq_C");var p=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OperateCarSet"},t}();t.OperateCarSet=p,__reflect(p.prototype,"Cmd.OperateCarSet");var u=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OperatGameReq_S"},t}();t.OperatGameReq_S=u,__reflect(u.prototype,"Cmd.OperatGameReq_S");var _=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SelfCardPokerCmd_S"},t}();t.SelfCardPokerCmd_S=_,__reflect(_.prototype,"Cmd.SelfCardPokerCmd_S");var m=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SysMessagePokerCmd_S"},t}();t.SysMessagePokerCmd_S=m,__reflect(m.prototype,"Cmd.SysMessagePokerCmd_S");var f=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReConnectPokerCmd_S"},t}();t.ReConnectPokerCmd_S=f,__reflect(f.prototype,"Cmd.ReConnectPokerCmd_S");var v=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ChangeCardReq_C"},t}();t.ChangeCardReq_C=v,__reflect(v.prototype,"Cmd.ChangeCardReq_C");var g=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ChangeCardReq_S"},t}();t.ChangeCardReq_S=g,__reflect(g.prototype,"Cmd.ChangeCardReq_S");var E=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OutCardTrigger_S"},t}();t.OutCardTrigger_S=E,__reflect(E.prototype,"Cmd.OutCardTrigger_S");var y=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SendGameTime_Brd"},t}();t.SendGameTime_Brd=y,__reflect(y.prototype,"Cmd.SendGameTime_Brd");var C=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PlayerInGame_Brd"},t}();t.PlayerInGame_Brd=C,__reflect(C.prototype,"Cmd.PlayerInGame_Brd");var T=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PlayerOutGame_Brd"},t}();t.PlayerOutGame_Brd=T,__reflect(T.prototype,"Cmd.PlayerOutGame_Brd");var I=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.OnlineStatePokerCmd_Brd"},t}();t.OnlineStatePokerCmd_Brd=I,__reflect(I.prototype,"Cmd.OnlineStatePokerCmd_Brd");var L=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PlayerAction_Brd"},t}();t.PlayerAction_Brd=L,__reflect(L.prototype,"Cmd.PlayerAction_Brd");var G=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PlayerGameOperat_Brd"},t}();t.PlayerGameOperat_Brd=G,__reflect(G.prototype,"Cmd.PlayerGameOperat_Brd");var O=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PlayerGameOperat_S"},t}();t.PlayerGameOperat_S=O,__reflect(O.prototype,"Cmd.PlayerGameOperat_S");var b=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.outCardGroup"},t}();t.outCardGroup=b,__reflect(b.prototype,"Cmd.outCardGroup");var S=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GameStart_Brd"},t}();t.GameStart_Brd=S,__reflect(S.prototype,"Cmd.GameStart_Brd");var U=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GameEnd_Brd"},t}();t.GameEnd_Brd=U,__reflect(U.prototype,"Cmd.GameEnd_Brd");var P=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GameAuto_Brd"},t}();t.GameAuto_Brd=P,__reflect(P.prototype,"Cmd.GameAuto_Brd");var R=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PointsInfo"},t}();t.PointsInfo=R,__reflect(R.prototype,"Cmd.PointsInfo");var D=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.FinalScorePokerCmd_C"},t}();t.FinalScorePokerCmd_C=D,__reflect(D.prototype,"Cmd.FinalScorePokerCmd_C");var A=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.FinalScorePokerCmd_S"},t}();t.FinalScorePokerCmd_S=A,__reflect(A.prototype,"Cmd.FinalScorePokerCmd_S");var k=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.FinalScorePokerCmd_Brd"},t}();t.FinalScorePokerCmd_Brd=k,__reflect(k.prototype,"Cmd.FinalScorePokerCmd_Brd");var N=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserRecord"},t}();t.UserRecord=N,__reflect(N.prototype,"Cmd.UserRecord");var x=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GiftsInfo"},t}();t.GiftsInfo=x,__reflect(x.prototype,"Cmd.GiftsInfo");var B=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PropInfo"},t}();t.PropInfo=B,__reflect(B.prototype,"Cmd.PropInfo");var w=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserGifts"},t}();t.UserGifts=w,__reflect(w.prototype,"Cmd.UserGifts");var M=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserProp"},t}();t.UserProp=M,__reflect(M.prototype,"Cmd.UserProp");var H=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SetInfo"},t}();t.SetInfo=H,__reflect(H.prototype,"Cmd.SetInfo");var F=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.roomPropObj"},t}();t.roomPropObj=F,__reflect(F.prototype,"Cmd.roomPropObj");var Y=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SendGiftPokerCmd_C"},t}();t.SendGiftPokerCmd_C=Y,__reflect(Y.prototype,"Cmd.SendGiftPokerCmd_C");var W=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SendGiftPokerCmd_S"},t}();t.SendGiftPokerCmd_S=W,__reflect(W.prototype,"Cmd.SendGiftPokerCmd_S");var q=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SendGiftPokerCmd_Brd"},t}();t.SendGiftPokerCmd_Brd=q,__reflect(q.prototype,"Cmd.SendGiftPokerCmd_Brd");var V=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GetPersonalPanel_C"},t}();t.GetPersonalPanel_C=V,__reflect(V.prototype,"Cmd.GetPersonalPanel_C");var j=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GetPersonalPanel_S"},t}();t.GetPersonalPanel_S=j,__reflect(j.prototype,"Cmd.GetPersonalPanel_S");var Q=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestDissolveRoom_C"},t}();t.RequestDissolveRoom_C=Q,__reflect(Q.prototype,"Cmd.RequestDissolveRoom_C");var z=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestDissolveRoom_S"},t}();t.RequestDissolveRoom_S=z,__reflect(z.prototype,"Cmd.RequestDissolveRoom_S");var K=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestDissolveRoom_Brd"},t}();t.RequestDissolveRoom_Brd=K,__reflect(K.prototype,"Cmd.RequestDissolveRoom_Brd");var Z=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReplyDissolveRoom_C"},t}();t.ReplyDissolveRoom_C=Z,__reflect(Z.prototype,"Cmd.ReplyDissolveRoom_C");var X=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReplyDissolveRoom_S"},t}();t.ReplyDissolveRoom_S=X,__reflect(X.prototype,"Cmd.ReplyDissolveRoom_S");var J=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReplyDissolveRoom_Brd"},t}();t.ReplyDissolveRoom_Brd=J,__reflect(J.prototype,"Cmd.ReplyDissolveRoom_Brd");var $=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SuccessDissolveRoom_Brd"},t}();t.SuccessDissolveRoom_Brd=$,__reflect($.prototype,"Cmd.SuccessDissolveRoom_Brd");var te=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.VoiceChat_C"},t}();t.VoiceChat_C=te,__reflect(te.prototype,"Cmd.VoiceChat_C");var ee=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.VoiceChat_S"},t}();t.VoiceChat_S=ee,__reflect(ee.prototype,"Cmd.VoiceChat_S");var ie=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.VoiceChat_Brd"},t}();t.VoiceChat_Brd=ie,__reflect(ie.prototype,"Cmd.VoiceChat_Brd");var ne=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.VoiceObj"},t}();t.VoiceObj=ne,__reflect(ne.prototype,"Cmd.VoiceObj");var se=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.VoiceChatRecord_C"},t}();t.VoiceChatRecord_C=se,__reflect(se.prototype,"Cmd.VoiceChatRecord_C");var oe=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.VoiceChatRecord_S"},t}();t.VoiceChatRecord_S=oe,__reflect(oe.prototype,"Cmd.VoiceChatRecord_S");var re=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.CommonChat_C"},t}();t.CommonChat_C=re,__reflect(re.prototype,"Cmd.CommonChat_C");var ae=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.CommonChat_S"},t}();t.CommonChat_S=ae,__reflect(ae.prototype,"Cmd.CommonChat_S");var he=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.CommonChat_Brd"},t}();t.CommonChat_Brd=he,__reflect(he.prototype,"Cmd.CommonChat_Brd");var de=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SoundSet_C"},t}();t.SoundSet_C=de,__reflect(de.prototype,"Cmd.SoundSet_C");var le=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SetPingTimeNullUserPmd_Brd"},t}();t.SetPingTimeNullUserPmd_Brd=le,__reflect(le.prototype,"Cmd.SetPingTimeNullUserPmd_Brd");var ce=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SetSameIpWarn_S"},t}();t.SetSameIpWarn_S=ce,__reflect(ce.prototype,"Cmd.SetSameIpWarn_S");var pe=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.JsonCompressKey"},t}();t.JsonCompressKey=pe,__reflect(pe.prototype,"Cmd.JsonCompressKey");var ue=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.JsonCompressNullUserPmd_CS"},t}();t.JsonCompressNullUserPmd_CS=ue,__reflect(ue.prototype,"Cmd.JsonCompressNullUserPmd_CS");var _e=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestChangeUserNbrRoom_C"},t}();t.RequestChangeUserNbrRoom_C=_e,__reflect(_e.prototype,"Cmd.RequestChangeUserNbrRoom_C");var me=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestChangeUserNbrRoom_Brd"},t}();t.RequestChangeUserNbrRoom_Brd=me,__reflect(me.prototype,"Cmd.RequestChangeUserNbrRoom_Brd");var fe=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReturnChangeUserNbrRoom_C"},t}();t.ReturnChangeUserNbrRoom_C=fe,__reflect(fe.prototype,"Cmd.ReturnChangeUserNbrRoom_C");var ve=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GetGPSLocationCmd_C"},t}();t.GetGPSLocationCmd_C=ve,__reflect(ve.prototype,"Cmd.GetGPSLocationCmd_C");var ge=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GetGPSLocationCmd_Brd"},t}();t.GetGPSLocationCmd_Brd=ge,__reflect(ge.prototype,"Cmd.GetGPSLocationCmd_Brd");var Ee=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.IpGPS"},t}();t.IpGPS=Ee,__reflect(Ee.prototype,"Cmd.IpGPS");var ye=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestIpGPSCmd_C"},t}();t.RequestIpGPSCmd_C=ye,__reflect(ye.prototype,"Cmd.RequestIpGPSCmd_C");var Ce=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReturnIpAndGPSCmd_S"},t}();t.ReturnIpAndGPSCmd_S=Ce,__reflect(Ce.prototype,"Cmd.ReturnIpAndGPSCmd_S");var Te=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PaoDeKuaiChangeRoomMahjongCmd_C"},t}();t.PaoDeKuaiChangeRoomMahjongCmd_C=Te,__reflect(Te.prototype,"Cmd.PaoDeKuaiChangeRoomMahjongCmd_C");var Ie=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PaoDeKuaiChangeRoomMahjongCmd_S"},t}();t.PaoDeKuaiChangeRoomMahjongCmd_S=Ie,__reflect(Ie.prototype,"Cmd.PaoDeKuaiChangeRoomMahjongCmd_S");var Le=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.Pdk_UpdatePointSeatRoom_S"},t}();t.Pdk_UpdatePointSeatRoom_S=Le,__reflect(Le.prototype,"Cmd.Pdk_UpdatePointSeatRoom_S");var Ge=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.Pdk_ReqHostCmd_C"},t}();t.Pdk_ReqHostCmd_C=Ge,__reflect(Ge.prototype,"Cmd.Pdk_ReqHostCmd_C");var Oe=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.Pdk_RetHostCmd_S"},t}();t.Pdk_RetHostCmd_S=Oe,__reflect(Oe.prototype,"Cmd.Pdk_RetHostCmd_S");var be=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.Pdk_RetHostCmd_Brd"},t}();t.Pdk_RetHostCmd_Brd=be,__reflect(be.prototype,"Cmd.Pdk_RetHostCmd_Brd");var Se=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.Pdk_EventInfoMatchGroup"},t}();t.Pdk_EventInfoMatchGroup=Se,__reflect(Se.prototype,"Cmd.Pdk_EventInfoMatchGroup");var Ue=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestQiangGuan_Brd"},t}();t.RequestQiangGuan_Brd=Ue,__reflect(Ue.prototype,"Cmd.RequestQiangGuan_Brd");var Pe=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RequestQiangGuan_C"},t}();t.RequestQiangGuan_C=Pe,__reflect(Pe.prototype,"Cmd.RequestQiangGuan_C");var Re=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.ReturnQiangGuan_Brd"},t}();t.ReturnQiangGuan_Brd=Re,__reflect(Re.prototype,"Cmd.ReturnQiangGuan_Brd")}(Cmd||(Cmd={}));var NetManager=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.init=function(){uniLib.UIMgr.instance.showProcessBar(null,99,100,"正在连接游戏服务器...","",!0),1==uniLib.Global.debugLevel&&(UserInfoDO.roomInfo.roomId=222223),pdk.DataCache.gameInfo&&(pdk.DataCache.gameId=pdk.DataCache.gameInfo.gameId,1==pdk.RoomInfo.getInstance().video?pdk.DataCache.zoneid=311:pdk.DataCache.zoneid=pdk.DataCache.gameInfo.zoneInfo.zoneid),uniLib.NetMgr.init("http://114.119.4.183:7000/httplogin",pdk.DataCache.gameId,pdk.DataCache.zoneid,this.loginSucc,this.loginFail,this)},t.prototype.loginSucc=function(){return UserInfoDO.actorInfo.uid=uniLib.NetMgr.UID,1==pdk.RoomInfo.getInstance().video&&(UserInfoDO.actorInfo.uid=pdk.RoomInfo.getInstance().videoUid),UserInfoDO.actorInfo.token=uniLib.NetMgr.PlatToken,1==pdk.RoomInfo.getInstance().video?(this.loopback=!0,void uniLib.NetMgr.initSocket(this.loginSockSucss,this.loginSockFail,this,"","","",!1,!0)):void uniLib.NetMgr.initSocket(this.loginSockSucss,this.loginSockFail,this,"","","",!1,!0,uniLib.Global.gameGatewayUrl)},t.prototype.loginSockSucss=function(){uniLib.UIMgr.instance.showProcessBar(null,100,100,"正在进入房间...","",!0),0==pdk.RoomInfo.getInstance().video&&(GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.SHOW_UI_SCENCE)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_MAP))),pdk.DataCache.gameInfo&&(pdk.DataCache.subGameType=Number(uniLib.BrowersUtils.GetRequests("subGameType")),pdk.DataCache.robotId=Number(uniLib.BrowersUtils.GetRequests("robotId")),pdk.DataCache.robotNum=Number(uniLib.BrowersUtils.GetRequests("robotNum"))),pdk.DataCache.platParam&&(pdk.DataCache.globalRoomId=pdk.DataCache.platParam.globalRoomId,UserInfoDO.roomInfo.roomId=pdk.DataCache.platParam.roomId),1==pdk.RoomInfo.getInstance().video&&uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"pdk_load_start"),ReqManager.ins.OnJoinRoomReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.token,pdk.DataCache.globalRoomId,pdk.DataCache.gameId,pdk.DataCache.subGameType,pdk.DataCache.robotId,pdk.DataCache.robotNum)},t.prototype.loginSockFail=function(t){t?console.error("游戏服务器连接失败:"+JSON.stringify(t)):console.error("游戏服务器连接失败:")},t.prototype.loginFail=function(){console.error("http失败")},t.prototype.close=function(){},t.prototype.dispose=function(){this.close()},t}();__reflect(NetManager.prototype,"NetManager"),table.TablePlayTypeList.getPlayTypeDes=function(t){for(var e=0,i=table.TablePlayTypeList.instance();e<i.length;e++){var n=i[e];if(n.id==t)return n.desc}return""},table.TablePlayTypeList.instance=function(){return null==table.TablePlayTypeList.$instance&&(table.TablePlayTypeList.$instance=loadTable("TablePlayTypeList_json")),table.TablePlayTypeList.$instance},pdk.TableGift.instance=function(){return null==pdk.TableGift.$instance&&(pdk.TableGift.$instance=loadTable("TableGift_json")),pdk.TableGift.$instance},pdk.TableCard.instance=function(){return null==pdk.TableCard.$instance&&(pdk.TableCard.$instance=loadTable("PdkTableCard_json")),pdk.TableCard.$instance},pdk.TableCard.selectByCardId=function(t){for(var e=0,i=pdk.TableCard.instance();e<i.length;e++){var n=i[e];if(n.cardId==t)return n}},pdk.TableCard.selectByThisId=function(t){for(var e=0,i=pdk.TableCard.instance();e<i.length;e++){var n=i[e];if(n.thisId==t)return n}},pdk.TableCard.resSoundGift=function(t){var e="GiftSound"+t+"_mp3";return RES.hasRes(e)?e:""};var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ChipsUtil=function(){function t(){}return t.toByChips=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=null),t&&null!=i&&0!=e){DisplayUtil.removeAllChildren(t);for(var n=i.toString().length,s=0;n>s;s++){var o=DomainUtil.getBitmap("num_"+e.toString()+"_"+i.charAt(s));o.smoothing=!0,o.touchEnabled=!1,o.x=30*s,o.y=0,t.addChild(o)}}},t}();__reflect(ChipsUtil.prototype,"ChipsUtil");var DisplayUtil=function(){function t(){}return t.removeFromParent=function(t){t&&t.parent&&t.parent.numChildren>0&&t.parent.removeChild(t)},t.setNumChildren=function(t){t.parent.setChildIndex(t,t.parent.numChildren-1)},t.removeAllChildren=function(t){if(t)for(;t.numChildren>0;)this.removeFromParent(t.getChildAt(0))},t.removeChildrenByIndex=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.numChildren;(i>=n||0>=i)&&(i=n);for(var s=0;i-e>s;s++)n>e&&this.removeFromParent(t.getChildAt(e))},t.grayDisplay=function(t){if(t){var e=[];e=e.concat([.3086,.6094,.082,0,0]),e=e.concat([.3086,.6094,.082,0,0]),e=e.concat([.3086,.6094,.082,0,0]),e=e.concat([0,0,0,1,0]);var i=new egret.ColorMatrixFilter(e),n=[];n.push(i)}},t.removeTargetChildren=function(t,e){var i=[];i=t.split(",");for(var n,s=0;s<i.length;s++)n=e.getChildByName(i[s]),n&&e.removeChild(n)},t}();__reflect(DisplayUtil.prototype,"DisplayUtil");var DomainUtil=function(){function t(){}return t.getBitmap=function(t){var e=new egret.Bitmap(RES.getRes(t));return e?e:null},t.getMovieClip=function(t,e,i){var n,s=RES.getRes(e),o=RES.getRes(i),r=new egret.MovieClipDataFactory(s,o);return n=new egret.MovieClip(r.generateMovieClipData(t)),n.gotoAndStop(1),n.name=t,n?n:null},t}();__reflect(DomainUtil.prototype,"DomainUtil");var CardInfoDO=function(){function t(){this.move=!1,this.num=0,this.select=!1,this.name=null,this.seat=0,this.cardId=0,this.thisId=0,this._pos=[155,215,275,335,395,455,515,575,635,695,755,815,875,935,995,1055],this.startX=[155,600,50],this._x=0,this._y=0}return t.prototype.updata=function(t){this.name=t.name,this.thisId=t.thisId,this.cardId=t.cardId},Object.defineProperty(t.prototype,"x",{get:function(){return this._pos[this.seat]},enumerable:!0,configurable:!0}),t}();__reflect(CardInfoDO.prototype,"CardInfoDO");var JsonUtil=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._json={},e}return __extends(e,t),e.prototype.load=function(t,e){var i=new egret.URLRequest(t);i.method=egret.URLRequestMethod.POST,i.data=new egret.URLVariables(e);var n=new egret.URLLoader;n.addEventListener(egret.Event.COMPLETE,this.onCompleteHandler,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOErrorHandler,this),n.load(i)},e.prototype.onCompleteHandler=function(t){var e=t.target,i=e.data;i&&(this._json=JSON.parse(i.toString()),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE)))},e.prototype.onIOErrorHandler=function(t){},Object.defineProperty(e.prototype,"json",{get:function(){return this._json},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);__reflect(JsonUtil.prototype,"JsonUtil");var MathClass=function(){function t(){}return t.randRange=function(t,e){var i=e-t,n=Math.floor(Math.random()*i);return t+n},t}();__reflect(MathClass.prototype,"MathClass");var ViewPanel=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.create=function(){},t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.onDisposeViewPanelHandler=function(t){this.dispose()},t.prototype.show=function(){this.init()},t.prototype.dispose=function(){this.removeListener()},t}();__reflect(ViewPanel.prototype,"ViewPanel");var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName=new PDK_MsgBoxSkin,t}return __extends(i,e),i.show=function(e,n,s,o,r,a){var h=new i;h.x=uniLib.Global.screenWidth-h.width>>1,h.y=uniLib.Global.screenHeight-h.height>>1,h.setData(e,n,s,o,r,a),t.PopupManager.addPopUp(h,!0)},i.prototype.setData=function(t,e,i,n,s,o){this.titleLabel.text=t,this.desLabel.text=e,this.labelArray=i,this.funcArray=n,this._backObj=s,this.btnsGroup.removeChildren(),1==i.length?(this.btnsGroup.addChild(this.yesBtn),this.noBtn.parent&&this.btnsGroup.removeChild(this.noBtn)):2==i.length&&(this.btnsGroup.addChild(this.yesBtn),this.btnsGroup.addChild(this.noBtn)),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.onClickTap=function(t){t.target==this.yesBtn?(this.onClose(),this.funcArray[0]&&this.funcArray[0].call(this._backObj)):t.target==this.noBtn?(this.onClose(),this.funcArray[1]&&this.funcArray[1].call(this._backObj)):t.target==this.closeBtn&&this.onClose()},i.prototype.onClose=function(){t.PopupManager.removePopUp(this),this&&this.parent&&this.parent.removeChild(this.parent),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i}(eui.Component);t.MsgBoxPanel=e,__reflect(e.prototype,"pdk.MsgBoxPanel")}(pdk||(pdk={}));var ActorView=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nickBg=null,e._nickCaed=null,e._nick=null,e}return __extends(e,t),e.prototype.init=function(){this._info=null,this._isDisCardNum=!1},Object.defineProperty(e.prototype,"info",{get:function(){return this._info},set:function(t){(null==this._info||this._info!=t)&&(this._info=t,this._isDisCardNum=UserInfoDO.roomInfo.getDisCardMode(),this.setNick(this._info.nickName),this.getHead(this._info.headUrl),this.setPos(this._info.seatId),this.addListener(),this._startCardNum=this._info.cardNum,this.setNum(this._info.cardNum),this.setPoint(this._info.points))},enumerable:!0,configurable:!0}),e.prototype.create=function(){},e.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.EVENT_L2G,this.diamondChange,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_AUTO,this.setHost,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_STATUS,this.onPlayerStatusHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerAutoHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.resetNum,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_WIN_EFFECT,this.onPointHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainPointHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_UPDATE_USER_POINT,this.updateUserPoint,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_AUTO,this.setHost,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_UPDATE_USER_POINT,this.updateUserPoint,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_STATUS,this.onPlayerStatusHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerAutoHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_WIN_EFFECT,this.onPointHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainPointHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.resetNum,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.EVENT_L2G,this.diamondChange,this)},e.prototype.diamondChange=function(t){"diamondChange"==t.param&&this.info.uid==uniLib.UserInfo.uid&&(this.info.diamond=uniLib.UserInfo.chips)},e.prototype.onClickHandler=function(t){GameEvnts.ins.dispatchEventWith(pdk.UIEventConsts.SHOW_USER_INFO,!1,this.info)},e.prototype.updateUserPoint=function(t){var e=t.data;e.uid&&this._info.uid==e.uid&&this.setPoint(e.point)},e.prototype.onAgainPointHandler=function(t){for(var e=t.data,i=e.pointSet,n=0;n<i.length;n++)this._info.uid==i[n].uid&&this.setPoint(i[n].points)},e.prototype.onPointHandler=function(t){var e=t.data;if(!(e.length<1))for(var i=0;i<e.length;i++)this._info.uid==e[i].uid&&this.setPoint(e[i].totalpoint)},e.prototype.onPlayerStatusHandler=function(t){var e=t.data;e.uid==this._info.uid&&this.setState(e.state)},e.prototype.onPlayerAutoHandler=function(t){var e=t.data;e.uid==this.info.uid&&(this.info.cardNum=e.cardNum,this.setNum(e.cardNum))},e.prototype.setHost=function(t){var e=t.data;if(this._info.uid==e.uid){var i=t.data,n=1==i?!0:!1;n?(this._host&&DisplayUtil.removeFromParent(this._host),this._host=null,this._host||(this._host=pdk.ResUtil.createBitmapByName("pdk_game_host"),this.addChild(this._host)),this.info&&this.info.uid==UserInfoDO.actorInfo.uid?this._host.y=-25:this._host.y=-25,this._host.x=15):(this._host&&DisplayUtil.removeFromParent(this._host),this._host=null)}},e.prototype.setState=function(t){var e=null;this._statusTxt&&DisplayUtil.removeFromParent(this._statusTxt),this._statusTxt=null,this._statusbg&&DisplayUtil.removeFromParent(this._statusbg),this._statusbg=null,2==t&&(e="leave"),0==t&&(this._statusbg=DomainUtil.getBitmap("pdk_seat_gray_png"),this._statusbg.smoothing=!0,this.addChild(this._statusbg),this._statusbg.x=5,this._statusbg.y=5),null!=e&&(this._statusTxt=DomainUtil.getBitmap(e),this._statusTxt.smoothing=!0,this.addChild(this._statusTxt),this._statusTxt.x=30,this._statusTxt.y=40)},e.prototype.setPoint=function(t){void 0===t&&(t=0),this._pointTxt&&(DisplayUtil.removeFromParent(this._pointTxt),this._pointTxt=null),this._pointTxt=new egret.TextField,this.addChild(this._pointTxt),this._pointTxt.text="",this._pointTxt.textColor=16777215,this._pointTxt.type="微软雅黑",this._pointTxt.size=24,UserInfoDO.roomInfo&&UserInfoDO.roomInfo.playTypeList instanceof Array&&-1!=UserInfoDO.roomInfo.playTypeList.indexOf(95)?this._pointTxt.text="金豆:"+t.toString():this._pointTxt.text="积分:"+t.toString(),this._pointTxt.x=(this._nickBg.width-this._pointTxt.width)/2,this._pointTxt.y=this._nickBg.y+35,this._numTxt?UserInfoDO.actorInfo&&this._info.uid==UserInfoDO.actorInfo.uid&&(this._pointTxt.y=90,this._pointTxt.x=this._numTxt.x+380):UserInfoDO.actorInfo&&this._info.uid==UserInfoDO.actorInfo.uid&&(this._pointTxt.y=90,this._pointTxt.x=this._nick.x+250)},e.prototype.setNick=function(t){this._nickBg&&DisplayUtil.removeFromParent(this._nickBg),this._nickBg=null,this._nickBg=DomainUtil.getBitmap("seat_kuang_png"),this._nickBg.smoothing=!0,this.addChild(this._nickBg),this._nickBg.x=0,this._nickBg.y=130,this._nickCaed&&DisplayUtil.removeFromParent(this._nickCaed),this._nickCaed=null,this._isDisCardNum&&this.info.uid!=UserInfoDO.actorInfo.uid&&(this._nickCaed=DomainUtil.getBitmap("seat_card_png"),this._nickCaed.smoothing=!0,this._nickCaed.width=30,this._nickCaed.height=40,this.addChild(this._nickCaed),this._nickCaed.x=20,this._nickCaed.y=200),this._nick&&(DisplayUtil.removeFromParent(this._nick),this._nick=null),this._nick=new egret.TextField,this.addChild(this._nick),this._nick.text="",this._nick.textColor=16777215,this._nick.type="微软雅黑",this._nick.size=24,this._nick.text=t,this.info.uid==UserInfoDO.actorInfo.uid?(this._nick.y=90,this._nick.x=this.x+170):(this._nick.x=0,this._nick.y=this._nickBg.y,this._nick.x=(this._nickBg.width-this._nick.width)/2)
},e.prototype.setNum=function(t){void 0===t&&(t=0),this._nickCaed&&this._isDisCardNum&&(this._numTxt&&(DisplayUtil.removeFromParent(this._numTxt),this._numTxt=null),this._numTxt=new egret.TextField,this.addChild(this._numTxt),this._numTxt.text="",this._numTxt.textColor=12386298,this._numTxt.type="微软雅黑",this._numTxt.size=40,this._numTxt.text=""+t.toString(),this._numTxt.y=200,this._numTxt.x=60,this.info.uid==UserInfoDO.actorInfo.uid&&(this._numTxt.text=""))},e.prototype.setPos=function(t){this.x=this.info.pos[this.info.seatId-1][0],this.y=this.info.pos[this.info.seatId-1][1]},e.prototype.getHead=function(t){void 0===t&&(t=null),this._bg&&(DisplayUtil.removeFromParent(this._bg),this._bg=null),this._bg=DomainUtil.getBitmap("pdk_seat_bg_png"),this._bg.smoothing=!0,this.addChild(this._bg),this._bg.x=0,this._bg.y=0,this._bg.touchEnabled=!0,this.imgLoader=new egret.ImageLoader,this.imgLoader.once(egret.Event.COMPLETE,this.onCompleteFunc,this),this.imgLoader.crossOrigin="anonymous",this.imgLoader.load(t)},e.prototype.onCompleteFunc=function(t){var e=t.currentTarget;this.headBmp&&(DisplayUtil.removeFromParent(this.headBmp),this.headBmp=null),this.headBmp=new egret.Bitmap(e.data),this.headBmp.width=100,this.headBmp.height=100;var i=new egret.Shape;i.graphics.beginFill(16711680),i.graphics.drawCircle(24,24,48),i.graphics.endFill(),this.addChild(i),i.x=34,i.y=34,this.headBmp.mask=i,this.addChild(this.headBmp),this.headBmp.x=8,this.headBmp.y=8,this.imgLoader=null},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),DisplayUtil.removeAllChildren(this),this._host=null,this._statusbg=null,this.imgLoader=null,this._pointTxt=null,this._numTxt=null,this._info=null,this._bg=null,this._statusTxt=null,this.headBmp=null},e.prototype.resetNum=function(){console.error("resetNum"),this.setNum(this._startCardNum)},e}(egret.Sprite);__reflect(ActorView.prototype,"ActorView",["IPanel"]);var BaseCard=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._info=null},Object.defineProperty(e.prototype,"info",{get:function(){return this._info},set:function(t){(null==this._info||this._info!=t)&&(this._info=t,this.setBmp(this._info.cardId))},enumerable:!0,configurable:!0}),e.prototype.create=function(){},e.prototype.addListener=function(){},e.prototype.removeListener=function(){},e.prototype.setBmp=function(t){void 0===t&&(t=null);var e=t.toString(),i=e.charAt(0)+"_"+e.slice(1,e.length);this._bitmap||(this._bitmap=DomainUtil.getBitmap("TableCard_"+i),this._bitmap.smoothing=!0,this._bitmap.width=CardPanel.PlayCardWidth,this._bitmap.height=CardPanel.PlayCardHeight,this.addChild(this._bitmap))},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this._bitmap&&DisplayUtil.removeFromParent(this._bitmap),this._bitmap=null,DisplayUtil.removeAllChildren(this),DisplayUtil.removeFromParent(this)},e}(egret.Sprite);__reflect(BaseCard.prototype,"BaseCard",["IPanel"]);var CardView=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_darken=!1,e.m_selected=!1,e}return __extends(e,t),e.prototype.init=function(){this._info=null,this.touchEnabled=!0},Object.defineProperty(e.prototype,"info",{get:function(){return this._info},set:function(t){(null==this._info||this._info!=t)&&(this._info=t,this._info.move=!1,this.setBmp(this._info.cardId),this.setPos(this._info.seat),this.addListener())},enumerable:!0,configurable:!0}),e.prototype.create=function(){},e.prototype.addListener=function(){},e.prototype.removeListener=function(){},e.prototype.setPos=function(t){1==this._info.num?this.x=this.info.x-5:this.x=this.info.x-5,this.y=460},Object.defineProperty(e.prototype,"darken",{get:function(){return this.m_darken},set:function(t){this.m_darken!=t&&(this.m_darken=t,this.darkenChanged(t))},enumerable:!0,configurable:!0}),e.prototype.darkenChanged=function(t){this._cardMask.visible=t},Object.defineProperty(e.prototype,"selected",{get:function(){return this.m_selected},set:function(t){this.m_selected=t,this.info.select=t,this.selectChanged(t)},enumerable:!0,configurable:!0}),e.prototype.selectChanged=function(t){t?this.y=440:this.y=460},e.prototype.setBmp=function(t){void 0===t&&(t=null);var e=t.toString(),i=e.charAt(0)+"_"+e.slice(1,e.length);1==pdk.RoomInfo.getInstance().video,this._bitmap||(this._bitmap=DomainUtil.getBitmap("TableCard_"+i),this._bitmap.smoothing=!0,this._bitmap.width=CardPanel.CardWidth,this._bitmap.height=CardPanel.CardHeight,this.addChild(this._bitmap),this._cardMask||(this._cardMask=DomainUtil.getBitmap("club_70_png"),this._cardMask.smoothing=!0,this.height=this._bitmap.height,this.width=this._bitmap.width,this._cardMask.x=this._bitmap.x,this._cardMask.y=this._bitmap.y,this._cardMask.width=this._bitmap.width,this._cardMask.height=this._bitmap.height,this._cardMask.visible=!1,this.addChild(this._cardMask)))},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._bitmap&&uniLib.DisplayUtils.removeFromParent(this._bitmap),this._cardMask&&uniLib.DisplayUtils.removeFromParent(this._cardMask),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._info=null,this._bitmap=null,this._cardMask=null},e}(egret.Sprite);__reflect(CardView.prototype,"CardView",["IPanel"]);var BonesEffectPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.create(),this.addListener()},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameEndHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_WIN_EFFECT,this.onShowWinHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_HIDE_WIN_EFFECT,this.onHideWinHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_LOTTERY,this.onShowLotteryHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this)},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameEndHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_WIN_EFFECT,this.onShowWinHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_HIDE_WIN_EFFECT,this.onHideWinHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_LOTTERY,this.onShowLotteryHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this)},e.prototype.onGameEndHandler=function(){this.clearJingBao(),this._starEffect&&(this._starEffect.animation.stop(),DisplayUtil.removeFromParent(this._starEffect.display)),this._paixingEffect&&(this._paixingEffect.animation.stop(),DisplayUtil.removeFromParent(this._paixingEffect.display)),this._gameEffect&&(this._gameEffect.animation.stop(),DisplayUtil.removeFromParent(this._gameEffect.display)),this._type&&DisplayUtil.removeFromParent(this._type)},e.prototype.onHideWinHandler=function(){},e.prototype.create=function(){this._warnBitArr=[],this._warnEffectArr=[],this._type=DomainUtil.getBitmap("pdk_card_type_2"),this._gameEffect=uniLib.DisplayUtils.createDragonBonesDisplay("paodekuai_game_ske_json","paodekuai_game_texture_json","paodekuai_game_texture_png","MovieClip"),dragonBones.WorldClock.clock.add(this._gameEffect),this._gameEffect.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onGameEvent,this),this._starEffect=uniLib.DisplayUtils.createDragonBonesDisplay("paodekuai_game_ske_json","paodekuai_game_texture_json","paodekuai_game_texture_png","MovieClip"),dragonBones.WorldClock.clock.add(this._starEffect),this._starEffect.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onStarEvent,this),this._paixingEffect=uniLib.DisplayUtils.createDragonBonesDisplay("paodekuai_paixing_effect_ske_json","paodekuai_paixing_effect_tex_json","paodekuai_paixing_effect_tex_png","MovieClip"),dragonBones.WorldClock.clock.add(this._paixingEffect),this._paixingEffect.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onAnimationEvent,this)},e.prototype.onShowWinHandler=function(t){if(t.data)for(var e=t.data,i=0;i<e.length;i++)e[i].point>0&&(e[i].uid==UserInfoDO.actorInfo.uid&&(this.createMyWinEffect(),this.creatStarEffect()),this.createPlayerWin(e[i].uid))},e.prototype.creatStarEffect=function(){this._starEffect.animation.play("xingxing",0),this.addChild(this._starEffect.display),this._starEffect.display.x=640,this._starEffect.display.y=160},e.prototype.createMyWinEffect=function(){this._gameEffect.animation.play("guang"),this.addChild(this._gameEffect.display),this._gameEffect.display.x=640,this._gameEffect.display.y=160;var t=UserInfoDO.getUserGender(UserInfoDO.actorInfo.uid);uniLib.SoundMgr.instance.playSound("voice_pdk_"+t+"_win_mp3")},e.prototype.createPlayerWin=function(t){this._gameEffect.animation.play("lizibaozha"),this.addChild(this._gameEffect.display);var e=UserInfoDO.getUserSeat(t),i=UserInfoDO.actorInfo.pos[e-1][0]+60,n=UserInfoDO.actorInfo.pos[e-1][1]+50;this._gameEffect.display.x=i,this._gameEffect.display.y=n},e.prototype.onPlayerGameOperatHandler=function(t){var e=t.data;if(1==e.opType){var i=UserInfoDO.getUserSeat(e.uid);this.showType(e.cardSetType,i,e.cardSet.length)}e.cardNum<2&&0!=e.cardNum&&this.createWarn(e)},e.prototype.createWarn=function(t){var e,i,n=UserInfoDO.getUserSeat(t.uid),s=UserInfoDO.actorInfo.pos[n-1][0]+30,o=UserInfoDO.actorInfo.pos[n-1][1]+240;null==this._warnEffectArr[n]?(i=uniLib.DisplayUtils.createDragonBonesDisplay("paodekuai_jingbao_effect_ske_json","paodekuai_jingbao_effect_tex_json","paodekuai_jingbao_effect_tex_png","MovieClip"),dragonBones.WorldClock.clock.add(i),this._warnEffectArr[n]=i,i.animation.play("jingbaoqi"),this.addChild(i.display)):i=this._warnEffectArr[n],null==this._warnBitArr[n]?(e=new egret.Bitmap,this.addChild(e),this._warnBitArr[n]=e):e=this._warnBitArr[n],e.texture=RES.getRes("pdk_war_bg_"+t.cardNum),1==n&&(o=UserInfoDO.actorInfo.pos[n-1][1]-30),i.display.x=s,i.display.y=o,e.x=s+20,e.y=o-20},e.prototype.onShowLotteryHandler=function(t){for(var e=t.data.lotteryInfo,i=[],n=0;n<e.length;n++)e[n].handCardSet||(e[n].handCardSet=[]),i.push(e[n].handCardSet.length);var s=ArrayUtil.isInArray(16,i);s&&this.showType(99,1)},e.prototype.showType=function(t,e,i){if(void 0===t&&(t=1),7==t)return void this.playEffect("feijidaichibang",0);if(4==t)return void this.playEffect("liandui",e);if(6==t)return void(i?3==i?this.playEffect("sanbudai",e):4==i?this.playEffect("sandaiyi",e):this.playEffect("sandaier",e):this.playEffect("sandaier",e));if(3==t)return void this.playEffect("shunzi",e);if(8==t)return void this.playEffect("sidaisan",e);if(9==t)return void this.playEffect("zhadan",0);if(99!=t&&2==t){this.addChild(this._type);var n=pdk.DataCache.defaultWidth/2-65,s=285;2==e&&(n=UserInfoDO.actorInfo.pos[e-1][0]-145,s=UserInfoDO.actorInfo.pos[e-1][1]+30),3==e&&(n=UserInfoDO.actorInfo.pos[e-1][0]+120,s=UserInfoDO.actorInfo.pos[e-1][1]+30),this._type.x=n,this._type.y=s,egret.Tween.get(this._type,{loop:!1}).to({alpha:0},700,egret.Ease.sineIn).wait(500).call(this.onCompleteHandler,this,[this._type])}},e.prototype.onCompleteHandler=function(t){t&&(egret.Tween.removeTweens(t),uniLib.DisplayUtils.removeFromParent(t))},e.prototype.playEffect=function(t,e){void 0===e&&(e=0),this.addChild(this._paixingEffect.display),this._paixingEffect.animation.play(t,1),this._paixingEffect.animation.timeScale=1,"chuntian"==t&&(this._paixingEffect.animation.timeScale=2);var i=uniLib.Global.screenWidth/2,n=520;2==e&&(i=UserInfoDO.actorInfo.pos[e-1][0]-150,n=UserInfoDO.actorInfo.pos[e-1][1]+70),3==e&&(i=UserInfoDO.actorInfo.pos[e-1][0]+240,n=UserInfoDO.actorInfo.pos[e-1][1]+70),this._paixingEffect.display.x=i,this._paixingEffect.display.y=n},e.prototype.onAnimationEvent=function(){this._paixingEffect.animation.stop(),DisplayUtil.removeFromParent(this._paixingEffect.display)},e.prototype.onGameEvent=function(t){this._gameEffect.animation.stop(),DisplayUtil.removeFromParent(this._gameEffect.display)},e.prototype.onStarEvent=function(t){this._starEffect.animation.stop(),DisplayUtil.removeFromParent(this._starEffect.display)},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.clearJingBao=function(){for(var t=0;t<this._warnBitArr.length;t++){var e=this._warnBitArr[t];uniLib.DisplayUtils.removeFromParent(e)}this._warnBitArr=[];for(var t=0;t<this._warnEffectArr.length;t++){var i=this._warnEffectArr[t];i&&(dragonBones.WorldClock.clock.remove(i),i.animation.stop(),i.display&&uniLib.DisplayUtils.removeFromParent(i.display))}this._warnEffectArr=[]},e.prototype.dispose=function(){this.clearJingBao(),this._paixingEffect&&(this._paixingEffect.removeEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onAnimationEvent,this),dragonBones.WorldClock.clock.remove(this._paixingEffect),this._paixingEffect.animation.stop(),this._paixingEffect.display&&uniLib.DisplayUtils.removeFromParent(this._paixingEffect.display)),this._paixingEffect=null,this._gameEffect&&(this._gameEffect.removeEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onGameEvent,this),dragonBones.WorldClock.clock.remove(this._gameEffect),this._gameEffect.animation.stop(),this._gameEffect.display&&uniLib.DisplayUtils.removeFromParent(this._gameEffect.display)),this._gameEffect=null,this._starEffect&&(this._starEffect.removeEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onStarEvent,this),dragonBones.WorldClock.clock.remove(this._starEffect),this._starEffect.animation.stop(),this._starEffect.display&&uniLib.DisplayUtils.removeFromParent(this._starEffect.display)),this._starEffect=null,this._type&&uniLib.DisplayUtils.removeFromParent(this._type),this._type=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},e}(egret.Sprite);BonesEffectPanel._ins=null,__reflect(BonesEffectPanel.prototype,"BonesEffectPanel",["IPanel"]);var GiftsPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.create(),this.addListener()},e.prototype.create=function(){this._facePanel=[];for(var t=0;4>t;t++){var e=new egret.Sprite;this._facePanel.push(e),this.addChild(e)}this._quickTalkPanel=[];for(var t=0;4>t;t++){var e=new egret.Sprite;this._quickTalkPanel.push(e),this.addChild(e)}this._talkPanel=[];for(var t=0;4>t;t++){var e=new egret.Sprite;this._talkPanel.push(e),this.addChild(e)}},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_GIFTS,this.onShowGiftsHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_COMMON_CHAT,this.onCommonChat,this),GameEvnts.ins.addGameEventListener(pdk.UIEventConsts.SHOW_RESULT_INFO,this.onShowResultPanel,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_GIFTS,this.onShowGiftsHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_COMMON_CHAT,this.onCommonChat,this),GameEvnts.ins.removeEventListener(pdk.UIEventConsts.SHOW_RESULT_INFO,this.onShowResultPanel,this)},e.prototype.onShowResultPanel=function(t){this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e.prototype.onCommonChat=function(t){var e=t.data;e.voiceId?this.showCommonChat(e.uid,String(e.voiceId)):e.words&&this.showCommonTalk(e.uid,e.words)},e.prototype.showCommonChat=function(t,e){var i=UserInfoDO.getUserSeat(t),n=UserInfoDO.getUserGender(t);switch(i){case 1:this._facePanel[i].x=UserInfoDO.actorInfo.pos[i-1][0]+60,this._facePanel[i].y=UserInfoDO.actorInfo.pos[i-1][1]-80,this._quickTalkPanel[i].x=UserInfoDO.actorInfo.pos[i-1][0]+60,this._quickTalkPanel[i].y=UserInfoDO.actorInfo.pos[i-1][1]-80;break;case 2:this._facePanel[i].x=UserInfoDO.actorInfo.pos[i-1][0]-110,this._facePanel[i].y=UserInfoDO.actorInfo.pos[i-1][1],this._quickTalkPanel[i].x=UserInfoDO.actorInfo.pos[i-1][0]-180,this._quickTalkPanel[i].y=UserInfoDO.actorInfo.pos[i-1][1]+50;break;case 3:this._facePanel[i].x=UserInfoDO.actorInfo.pos[i-1][0]+100,this._facePanel[i].y=UserInfoDO.actorInfo.pos[i-1][1],this._quickTalkPanel[i].x=UserInfoDO.actorInfo.pos[i-1][0]+120,this._quickTalkPanel[i].y=UserInfoDO.actorInfo.pos[i-1][1]+50}var s;if("1"==e.charAt(0)){s=e.substr(1,e.length-1);var o=uniLib.DisplayUtils.createMovieClicp("face_"+s+"_new");this._facePanel[i].addChild(o),o.scaleX=1,o.scaleY=1,o.play(-1);var r=function(){o.stop(),this._facePanel[i].removeChild(o)};uniLib.SetUniEventTimeout(this,r,2e3,1,this)}else"2"==e.charAt(0)&&(s=e.substr(1,e.length-1),uniLib.SoundMgr.instance.playSound(pdk.SoundConsts.COMMON+"_"+n+"_"+s+"_mp3"),this.creatChatPop(i,pdk.GameData.getInstance().ShortTalkArr[s],this._quickTalkPanel[i]),egret.Tween.get(this._quickTalkPanel[i]).wait(3e3).call(this.quickTalkCompelete,this,[this._quickTalkPanel[i],i]))},e.prototype.showCommonTalk=function(t,e){var i=UserInfoDO.getUserSeat(t);switch(i){case 0:this._talkPanel[i].x=pdk.PositionData.seatPosArr[i-1].x+100,this._talkPanel[i].y=pdk.PositionData.seatPosArr[i-1].y*uniLib.ScreenUtils.scaleFactor;break;case 1:this._talkPanel[i].x=pdk.PositionData.seatPosArr[i-1].x+50,this._talkPanel[i].y=pdk.PositionData.seatPosArr[i-1].y*uniLib.ScreenUtils.scaleFactor-60;break;case 2:this._talkPanel[i].x=pdk.PositionData.seatPosArr[i-1].x-180,this._talkPanel[i].y=pdk.PositionData.seatPosArr[i-1].y*uniLib.ScreenUtils.scaleFactor+50;break;case 3:this._talkPanel[i].x=pdk.PositionData.seatPosArr[i-1].x+120,this._talkPanel[i].y=pdk.PositionData.seatPosArr[i-1].y*uniLib.ScreenUtils.scaleFactor+50}this.creatChatPop(i,e,this._talkPanel[i]),egret.Tween.get(this._talkPanel[i]).wait(3e3).call(this.talkCompelete,this,[this._talkPanel[i],i])},e.prototype.showCompelete=function(t,e){t&&egret.Tween.removeTweens(t),uniLib.DisplayUtils.removeAllChildren(this._facePanel[e])},e.prototype.quickTalkCompelete=function(t,e){t&&egret.Tween.removeTweens(t),uniLib.DisplayUtils.removeAllChildren(this._quickTalkPanel[e])},e.prototype.talkCompelete=function(t,e){t&&egret.Tween.removeTweens(t),uniLib.DisplayUtils.removeAllChildren(this._talkPanel[e])},e.prototype.creatChatPop=function(t,e,i){var n=DomainUtil.getBitmap("chat_pop");n.scale9Grid=new egret.Rectangle(28,33,13,5),n.width=245,i.addChild(n);var s=pdk.ResUtil.createTextFeild(1456961,egret.HorizontalAlign.LEFT,"",28,35,10,210,!1,4);s.text=e,i.addChild(s),n.height=10+s.height+20,2==t?(n.scaleX=-1,n.x=180,s.x=-45):1==t&&(n.y+=100,n.x+=50,s.y=n.y+10,s.x+=40),n=null,s=null},e.prototype.onShowGiftsHandler=function(t){t.data&&this.showGift(t.data)},e.prototype.showGift=function(t){this._giftArr=[];var e=UserInfoDO.getUserSeat(t.gift.fromUid),i=[];if(i=0==t.gift.toUid?UserInfoDO.getUidNotSendID(t.gift.fromUid):[t.gift.toUid],!(i.length<=0)){this._removeGiftItemsEvent&&this._removeGiftItemsEvent.stop(),this._removeGiftItemsEvent=new uniLib.UniEvent(this,this.countTime,2500,1,this);for(var n=0;n<i.length;n++)this.sendGift(t.gift.giftsId,i[n],e)}},e.prototype.sendGift=function(t,e,i){var n,s,o;n=new pdk.GiftAnItem,n.giftId=t,o=UserInfoDO.getUserSeat(e),s=pdk.PositionData.seatPosArr[o-1],n.x=pdk.PositionData.seatPosArr[i-1].x+48,n.y=(pdk.PositionData.seatPosArr[i-1].y+46)*uniLib.ScreenUtils.scaleFactor,this._giftArr.push(n),LayerManager.topLayer.addChild(n),egret.Tween.get(n).to({x:s.x+48,y:(s.y+46)*uniLib.ScreenUtils.scaleFactor},400,egret.Ease.circOut).call(this.giftMoveEnd,this,[n])},e.prototype.countTime=function(){this.removeGiftItems(),this._removeGiftItemsEvent=null},e.prototype.removeGiftItems=function(){if(this._giftArr){for(var t=0;t<this._giftArr.length;t++){var e=this._giftArr[t];e&&(e.destory(),uniLib.DisplayUtils.removeFromParent(e))}this._giftArr=[]}},e.prototype.giftMoveEnd=function(t){egret.Tween.removeTweens(t),t.play()},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._effect&&DisplayUtil.removeAllChildren(this._effect),this._effect=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(GiftsPanel.prototype,"GiftsPanel",["IPanel"]);var MonEPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_MONEY_EFFECT,this.onShowMoneyHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_MONEY_EFFECT,this.onShowMoneyHandler,this)},e.prototype.onGameStartHandler=function(t){this._money&&DisplayUtil.removeAllChildren(this._money),this._money=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e.prototype.onShowMoneyHandler=function(t){if(t.data){this._money||(this._money=new egret.Sprite,this.addChild(this._money)),DisplayUtil.removeAllChildren(this._money);for(var e=0,i=0,n=0,s=t.data,o=0;o<s.length;o++){var r=new egret.Sprite;this._money.addChild(r),s[o].point>0?ChipsUtil.toByChips(r,2,"+"+s[o].point):ChipsUtil.toByChips(r,3,""+s[o].point),n=UserInfoDO.getUserSeat(s[o].uid),1==n&&(e=UserInfoDO.actorInfo.pos[n-1][0]+135,i=UserInfoDO.actorInfo.pos[n-1][1]+15),2==n&&(e=UserInfoDO.actorInfo.pos[n-1][0]-120,i=UserInfoDO.actorInfo.pos[n-1][1]+35),3==n&&(e=UserInfoDO.actorInfo.pos[n-1][0]+135,i=UserInfoDO.actorInfo.pos[n-1][1]+35),r.x=e,r.y=i}this.moneyEffect()}},e.prototype.moneyEffect=function(){egret.Tween.get(this._money,{loop:!1}).to({x:this._money.x,y:this._money.y-20},500,egret.Ease.sineIn).wait(1e3).call(this.onMoneyCompleteHandler,this,[this])},e.prototype.onMoneyCompleteHandler=function(){this._money&&egret.Tween.removeTweens(this._money),this._money&&(DisplayUtil.removeAllChildren(this._money),DisplayUtil.removeFromParent(this._money)),this._money=null},e.prototype.removeAll=function(){this._money&&DisplayUtil.removeAllChildren(this._money),this._money=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this.removeAll(),DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(MonEPanel.prototype,"MonEPanel",["IPanel"]);var ShuffleEffectPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.create=function(){},e.prototype.addListener=function(){},e.prototype.removeListener=function(){},e.prototype.show=function(){this.addListener()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this.removeShuffleMc(),DisplayUtil.removeAllChildren(this)},e.prototype.addShuffleMc=function(t){uniLib.SoundMgr.instance.playSound("pdk_sound_shufflecard_mp3"),this._shuffleMc=uniLib.DisplayUtils.createMovieClicp("shuffle_mc"),this.addChild(this._shuffleMc),this._shuffleMc.scaleX=1,this._shuffleMc.scaleY=1,this._shuffleMc.x=(uniLib.Global.screenWidth-400)/2,this._shuffleMc.y=(uniLib.Global.screenHeight-this._shuffleMc.height)/2-20,this._shuffleMc.frameRate=18,this._shuffleMc.play(1);var e=UserInfoDO.getUserVoByUid(t);e&&(this._shuffleLabel=new eui.Label,this._shuffleLabel.text=e.nickName+"正在洗牌中...",this._shuffleLabel.textColor=6403263,this._shuffleLabel.x=(uniLib.Global.screenWidth-this._shuffleLabel.width)/2,this._shuffleLabel.y=uniLib.Global.screenHeight/2+120,this.addChild(this._shuffleLabel))},e.prototype.removeShuffleMc=function(){this._shuffleMc&&this._shuffleMc.parent&&(this._shuffleMc.stop(),this.removeChild(this._shuffleMc),this._shuffleMc=null),this._shuffleLabel&&this._shuffleLabel.parent&&(this.removeChild(this._shuffleLabel),this._shuffleLabel=null)},e}(egret.Sprite);__reflect(ShuffleEffectPanel.prototype,"ShuffleEffectPanel",["IPanel"]);var DragonBones=dragonBones.DragonBones,EffectPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){this._mon||(this._mon=MonEPanel.ins,this.addChild(this._mon)),this._mon.show(),this._gifts||(this._gifts=GiftsPanel.ins,this.addChild(this._gifts)),this._gifts.show(),this._bones||(this._bones=BonesEffectPanel.ins,this.addChild(this._bones)),this._bones.show(),this._shuffleEffect||(this._shuffleEffect=ShuffleEffectPanel.ins,this.addChild(this._shuffleEffect)),this._shuffleEffect.show()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.onUserEnterGameHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_OUT_GAME,this.onUserOutGameHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.onUserEnterGameHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_OUT_GAME,this.onUserOutGameHandler,this)},e.prototype.onUserEnterGameHandler=function(t){this.create()},e.prototype.onUserOutGameHandler=function(t){this.dispose()},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._mon&&this._mon.dispose(),this._mon=null,this._gifts&&this._gifts.dispose(),this._gifts=null,this._bones&&this._bones.dispose(),this._bones=null,this._shuffleEffect&&this._shuffleEffect.dispose(),this._shuffleEffect=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(EffectPanel.prototype,"EffectPanel",["IPanel"]);var ActionPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._timer=30,e._opSeat=0,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.create=function(){},e.prototype.addListener=function(){},e.prototype.removeListener=function(){},e.prototype.onPlayerActionHandler=function(t){},e.prototype.onGameEndHandler=function(t){this.removeAll()},e.prototype.onGameFirstActionHandler=function(t){var e=t.data;if(this._timer=e.timer,e.uid==UserInfoDO.actorInfo.uid)this.createTips(450,395),this.createColock(this._timer,596,390),1==UserInfoDO.roomInfo.currentNum&&this.send(300,300);else{var i=UserInfoDO.getUserSeat(e.uid),n=UserInfoDO.actorInfo.pos[i-1][0],s=UserInfoDO.actorInfo.pos[i-1][1]+20;3==i&&(n+=120),2==i&&(n-=85),this.createColock(this._timer,n,s),1==UserInfoDO.roomInfo.currentNum&&this.send(n,s)}},e.prototype.send=function(t,e){this._card||(this._card=new egret.Sprite,this.addChild(this._card));var i=DomainUtil.getBitmap("TableCard_2_3");if(i.smoothing=!0,i.scaleX=.4,i.scaleY=.4,this._card.addChild(i),this._card.x=500,this._card.y=400,this._card){egret.Tween.get(this._card,{loop:!1}).to({x:t+50,y:e+100},300,egret.Ease.sineIn).wait(500).call(this.onCompleteHandler,this,[this._card])}},e.prototype.onCompleteHandler=function(t){t&&(egret.Tween.removeTweens(t),DisplayUtil.removeAllChildren(t),DisplayUtil.removeFromParent(t)),this._card&&(this._card=null)},e.prototype.onAgainConnectPokerHandler=function(t){var e=t.data;if(this.removeAll(),e.uid&&void 0!=e.uid){var i=e.uid;if(this._opSeat=UserInfoDO.getUserSeat(e.preUid),e.cardSet&&(e.uid=t.data.preUid,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,!1,!1,e))),this._timer=e.timer,this._opSeat=UserInfoDO.getUserSeat(i),e.uid&&2==e.opType)if(i==UserInfoDO.actorInfo.uid)this.createPass(1,130,492);else{var n=UserInfoDO.actorInfo.pos[this._opSeat-1][0],s=UserInfoDO.actorInfo.pos[this._opSeat-1][1]+30;3==this._opSeat&&(n+=120),2==this._opSeat&&(n-=180),this.createPass(this._opSeat,n,s)}if(this._opSeat=UserInfoDO.getUserSeat(i),1==e.opType)if(i==UserInfoDO.actorInfo.uid)this.createTips(450,395),this.createColock(this._timer,596,390);else{var n=UserInfoDO.actorInfo.pos[this._opSeat-1][0],s=UserInfoDO.actorInfo.pos[this._opSeat-1][1]+20;3==this._opSeat&&(n+=120),2==this._opSeat&&(n-=85),this.createColock(this._timer,n,s)}}},e.prototype.onPlayerGameOperatHandler=function(t){var e=t.data;if(this._opSeat=UserInfoDO.getUserSeat(e.uid),this.removeAll(),2==e.opType)if(e.uid==UserInfoDO.actorInfo.uid)this.createPass(1,130,492);else{var i=UserInfoDO.actorInfo.pos[this._opSeat-1][0],n=UserInfoDO.actorInfo.pos[this._opSeat-1][1]+30;3==this._opSeat&&(i+=120),2==this._opSeat&&(i-=180),this.createPass(this._opSeat,i,n)}if(1==e.opType&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,!1,!1,e)),this._timer=e.timer,e.nextUid==UserInfoDO.actorInfo.uid)1==e.nextOpType&&(1==e.nextHostType||(this.createTips(450,395),this.createColock(this._timer,596,390)));else{var s=UserInfoDO.getUserSeat(e.nextUid),i=UserInfoDO.actorInfo.pos[s-1][0],n=UserInfoDO.actorInfo.pos[s-1][1]+20;3==s&&(i+=120),2==s&&(i-=85),this.createColock(this._timer,i,n)}},e.prototype.createPass=function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=100),this._pass||(this._pass=new egret.Sprite,this.addChild(this._pass)),DisplayUtil.removeAllChildren(this._pass);var n=null,s=null;1==t&&(s="没有大过上家的牌",n="pdk_game_guo_1"),2==t&&(s="要不起",n="pdk_game_guo_2"),3==t&&(s="要不起",n="pdk_game_guo_2"),4==t&&(s="选择的牌型不合理",n="pdk_game_guo_1"),this._pass.x=e,this._pass.y=i;var o=DomainUtil.getBitmap(n);o.smoothing=!0,o.touchEnabled=!1,this._pass.addChild(o);var r=new egret.TextField;1==t?r.textColor=16766976:r.textColor=16777215,r.text=s,1==t&&(r.x=400,r.y=20),3==t&&(r.x=50,r.y=14),2==t&&(r.x=35,r.y=14),4==t&&(r.x=390,r.y=20),this._pass.addChild(r)},e.prototype.createTips=function(t,e){void 0===t&&(t=100),void 0===e&&(e=100),this._tips||(this._tips=new egret.Sprite,this.addChild(this._tips)),this._tips.x=t,this._tips.y=e,DisplayUtil.removeAllChildren(this._tips);var i=DomainUtil.getBitmap("pdk_game_tishi_1");i.smoothing=!0,this._tips.name="tishi",this._tips.touchEnabled=!0,this._tips.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTapHandler,this),this._tips.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsBeginpHandler,this),this._tips.addChild(i)},e.prototype.onTipsBeginpHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_tishi_2");i.smoothing=!0,e.addChild(i)},e.prototype.onTipsTapHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_tishi_1");i.smoothing=!0,e.addChild(i),ReqManager.ins.OnOperatGameReq_C(UserInfoDO.actorInfo.uid,1,UserInfoDO.roomInfo.roomId,null)},e.prototype.createColock=function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=100);var n={};n.timer=t,n.x=e,n.y=i,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_CLOCK,!1,!1,n))},e.prototype.removeAll=function(){this._card&&DisplayUtil.removeAllChildren(this._card),this._card=null,this._tips&&DisplayUtil.removeAllChildren(this._tips),this._tips=null,this._pass&&DisplayUtil.removeAllChildren(this._pass),this._pass=null,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_CLOCK))
},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._timer=0,this._opSeat=0,this._tips&&DisplayUtil.removeAllChildren(this._tips),this._tips=null,this._pass&&DisplayUtil.removeAllChildren(this._pass),this._pass=null,this._card&&DisplayUtil.removeAllChildren(this._card),this._card=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(ActionPanel.prototype,"ActionPanel",["IPanel"]);var AutoPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._optType=0,e._optId=0,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_AUTO,this.onShowAutoHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_AUTO_GAME,this.onUserReqAutoHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_AUTO,this.onShowAutoHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this)},e.prototype.onUserReqAutoHandler=function(t){var e=t.data;this._optId=0,0==e&&this.createTuoGuan(538,580)},e.prototype.onGameStartHandler=function(t){this._optId=0,this._auto&&(DisplayUtil.removeAllChildren(this._auto),DisplayUtil.removeFromParent(this._auto)),this._auto=null},e.prototype.onPlayerGameOperatHandler=function(t){var e=t.data;if(this._optType=0,this._optId=0,e.nextUid){this._optId=e.nextUid;UserInfoDO.getUserSeat(e.nextUid);e.nextHostType&&1==e.nextHostType&&(this._optType=1,e.nextUid==UserInfoDO.actorInfo.uid&&this.createTuoGuan(538,580))}},e.prototype.onShowAutoHandler=function(t){this._optId==UserInfoDO.actorInfo.uid&&this.createTuoGuan(538,580)},e.prototype.createTuoGuan=function(t,e){void 0===t&&(t=100),void 0===e&&(e=100),this._auto&&(DisplayUtil.removeAllChildren(this._auto),DisplayUtil.removeFromParent(this._auto)),this._auto=null,this._auto=new egret.Sprite,this.addChild(this._auto),this._auto.x=t,this._auto.y=e,DisplayUtil.removeAllChildren(this._auto);var i=DomainUtil.getBitmap("pdk_game_tg_1");i.smoothing=!0,this._auto.name="tg",this._auto.touchEnabled=!0,this._auto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTgTapHandler,this),this._auto.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTgBeginpHandler,this),this._auto.addChild(i)},e.prototype.onTgBeginpHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_tg_2");i.smoothing=!0,e.addChild(i)},e.prototype.onTgTapHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_tg_1");if(i.smoothing=!0,e.addChild(i),ReqManager.ins.OnOperatGameReq_C(UserInfoDO.actorInfo.uid,3,UserInfoDO.roomInfo.roomId,null,0),this._optId==UserInfoDO.actorInfo.uid){var n={};n.nextUid=UserInfoDO.actorInfo.uid,n.nextOpType=1,n.timer=3e4,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,!1,!1,n))}this._auto&&(DisplayUtil.removeAllChildren(this._auto),DisplayUtil.removeFromParent(this._auto)),this._auto=null},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._auto&&(DisplayUtil.removeAllChildren(this._auto),DisplayUtil.removeFromParent(this._auto)),this._auto=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(AutoPanel.prototype,"AutoPanel",["IPanel"]);var CardPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cardBeginX=0,e._cardEndX=0,e.list=[],e._cardPos=[155,205,255,305,355,405,455,505,555,605,655,705,755,805,855,905,955,1005,1055],e._enddPos=[50,80,110,140,170,200,230,260,290,310,340,370,400,430,460,490,520,550,580,610,640,670,700,730,760,790,820,850,880,910,940,970,1e3,1030,1060,1090,1110,1140],e.isStartMove=!1,e.startX=0,e.playCardSprites=new Array,e.lotteryCardSprite=new Array,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.create(),this.addListener()},e.prototype.create=function(){this._cardArr=[],this._baseArr=[]},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_SHOW_MY_CARD,this.onShowMyCardHandler,this),GameEvnts.ins.addEventListener(GameEvnts.SELF_OUT_CARDS_TIP,this.onUserCardBackHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,this.onPlayerCardHandler,this),GameEvnts.ins.addEventListener(GameEvnts.CLEAR_PLAYER_CARD,this.onClearPlayerCardHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_CARD_OPERAT,this.onUserOperatCardHandler,this),GameEvnts.ins.addEventListener(pdk.UIEventConsts.SHOW_RESULT_INFO,this.onGameStartHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_SHOW_LOTTERY,this.onShowLotteryHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_CARD_SEND,this.onTipCardHandler,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSatgeHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainConnectPokerHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_MY_CARD,this.onShowMyCardHandler,this),GameEvnts.ins.removeEventListener(pdk.UIEventConsts.SHOW_RESULT_INFO,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.SELF_OUT_CARDS_TIP,this.onUserCardBackHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,this.onPlayerCardHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.CLEAR_PLAYER_CARD,this.onClearPlayerCardHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_CARD_OPERAT,this.onUserOperatCardHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_LOTTERY,this.onShowLotteryHandler,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSatgeHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainConnectPokerHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_CARD_SEND,this.onTipCardHandler,this)},e.prototype.onAgainConnectPokerHandler=function(t){var e=t.data;if(this._playerCard||(this._playerCard=new egret.Sprite,this.addChild(this._playerCard),this._playerCard.name="playerCard"),DisplayUtil.removeAllChildren(this._playerCard),this._player3||(this._player3=new egret.Sprite,this.addChild(this._player3)),DisplayUtil.removeAllChildren(this._player3),this._player2||(this._player2=new egret.Sprite,this.addChild(this._player2)),DisplayUtil.removeAllChildren(this._player2),this._handCard||(this._handCard=new egret.Sprite,this.addChild(this._handCard)),this._handCard.name="handCard",DisplayUtil.removeAllChildren(this._handCard),!(e.handCardSet.length<=0)){var i=this.sortCard(e.handCardSet);this._handCard||(this._handCard=new egret.Sprite,this.addChild(this._handCard)),this._handCard.name="_handCard",DisplayUtil.removeAllChildren(this._handCard),1!=pdk.RoomInfo.getInstance().video&&(this._handCard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCardTouch,this),this._handCard.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCardTouch,this),this._handCard.addEventListener(egret.TouchEvent.TOUCH_END,this.onCardTouch,this),this._handCard.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCardTouch,this));for(var n=Math.round(i.length/2),s=[],o=0;o<i.length;o++){var r=new CardInfoDO;r.updata(pdk.TableCard.selectByThisId(i[o])),r.seat=8-n+o,s.push(r)}for(var o=0;o<s.length;o++)this.createCard(s[o]);this.updataCardPoint()}},e.prototype.onCardTouch=function(t){if(t.type==egret.TouchEvent.TOUCH_BEGIN)this.isStartMove=!0,this.startX=t.stageX,this.onMoveTouch(this.startX,t.stageX);else if(t.type==egret.TouchEvent.TOUCH_MOVE){if(!this.isStartMove)return;this.onMoveTouch(this.startX,t.stageX)}else if(t.type==egret.TouchEvent.TOUCH_END||t.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE){if(!this.isStartMove)return;this.isStartMove=!1,this.onEndTouch(this.startX,t.stageX)}},e.prototype.onEndTouch=function(t,e){for(var i=0,n=this._cardArr;i<n.length;i++){var s=n[i];s.darken=!1,this.checkCollide(s,t,e)&&(s.selected=!s.selected)}},e.prototype.onMoveTouch=function(t,e){for(var i=0,n=this._cardArr;i<n.length;i++){var s=n[i];this.checkCollide(s,t,e)?s.darken=!0:s.darken=!1}},e.prototype.checkCollide=function(t,i,n){var s=this._handCard.getChildAt(this._handCard.numChildren-1)==t?e.CardWidth:e.CardGap;return t.x>=i&&t.x<=n||t.x+s>=i&&t.x+s<=n||t.x>=n&&t.x<=i||t.x+s>=n&&t.x+s<=i||t.x<=i&&t.x+s>=n||t.x<=n&&t.x+s>=i?!0:!1},e.prototype.onShowLotteryHandler=function(t){for(var e=0;e<this._baseArr.length;e++){var i=this._baseArr[e];i.dispose()}this._baseArr=[];for(var n=t.data.lotteryInfo,s=0;s<n.length;s++)n[s].role.uid!=UserInfoDO.actorInfo.uid&&this.createLotteryCard(n[s].role.uid,n[s].handCardSet);t.data.leftCard&&this.showLeftCard(t.data.leftCard)},e.prototype.onTouchSatgeHandler=function(t){void 0===t&&(t=null),""==t.currentTarget.name&&""==t.target.name&&(this.list=[],this.onSortCard())},e.prototype.onSortCard=function(){if(this._handCard&&this._handCard&&this._handCard.numChildren>0)for(var t=this._handCard.numChildren,e=0;t>e;e++){var i=this._handCard.getChildAt(e);i.selected=!1}},e.prototype.onGameStartHandler=function(t){this.disposeAll()},e.prototype.onClearPlayerCardHandler=function(t){var e=t.data;if(!e.uid){for(var i=0,n=this.playCardSprites;i<n.length;i++){var s=n[i];s&&s.parent&&s.parent.removeChild(s)}for(var o=0,r=this.lotteryCardSprite;o<r.length;o++){var s=r[o];s&&s.parent&&uniLib.DisplayUtils.removeFromParent(s)}}},e.prototype.onPlayerCardHandler=function(t){this._playerCard||(this._playerCard=new egret.Sprite,this.addChild(this._playerCard),this._playerCard.name="playerCard");var e=t.data;if(null!=e){var i=e.cardSet,n=UserInfoDO.getUserVoByUid(e.uid);if(n){var s=n.seatId;if(i&&i.length>0)for(var o=0,r=this.playCardSprites;o<r.length;o++){var a=r[o];a&&a.parent&&a.parent.removeChild(a)}this.playCardSprites[s]&&this.playCardSprites[s].parent&&this.playCardSprites[s].parent.removeChild(this.playCardSprites[s]);var h=this.getPlayCardSprite(e.cardSet,e.uid);this.playCardSprites[s]=h,this._playerCard.addChild(h);var d=new egret.Point;1==s?(d.x=(uniLib.Global.screenWidth-h.width)/2,d.y=290-h.height/2):2==s?(d.x=uniLib.Global.screenWidth-180-h.width,d.y=210-h.height/2,1==pdk.RoomInfo.getInstance().video&&(d.y=300)):3==s&&(d.x=139,d.y=210-h.height/2,1==pdk.RoomInfo.getInstance().video&&(d.y=300)),h.x=d.x,h.y=d.y}}},e.prototype.getPlayCardSprite=function(t,i){var n=new egret.Sprite;if(!(t&&t instanceof Array&&t.length)){var s=new egret.Bitmap(RES.getRes("pdk_game_guo_2"));n.addChild(s),n.width=s.width,n.height=s.height;new eui.TextInput;return n.name="1",n}var o,r;if(1==i?r=3:(o=UserInfoDO.getUserVoByUid(i),o.seatId=o.seatId),o||1==i){for(var a=this.sortCard(t),h=[],d=0;d<a.length;d++){var l=new CardInfoDO;l.updata(pdk.TableCard.selectByThisId(a[d])),h.push(l)}for(var d=0;d<h.length;d++){var c=new BaseCard;this._baseArr.push(c),c.info=h[d],c.x=d*e.PlayCardGap,n.addChild(c),d>=e.MaxCardNumLine&&1!=r&&(c.x=(e.GetWidthForCardNumber(e.MaxCardNumLine)-e.GetWidthForCardNumber(t.length-e.MaxCardNumLine))/2+e.PlayCardGap*(d-e.MaxCardNumLine),c.y=50)}return n.name="2",t.length>=e.MaxCardNumLine&&1!=r?(n.width=e.GetWidthForCardNumber(e.MaxCardNumLine),n.height=e.PlayCardHeight+50):(n.width=e.GetWidthForCardNumber(t.length),n.height=e.PlayCardHeight),n}},e.prototype.updataCardPoint=function(){for(var t=this._handCard.numChildren,i=this.handCardX,n=0;t>n;n++){var s=this._handCard.getChildAt(n);egret.Tween.removeTweens(s),s.x=i+e.CardGap*n}},e.prototype.onUserCardBackHandler=function(t){if(this.list=[],t.data.uid)return void this.createLotteryCard(t.data.uid,t.data.cardsSet,t.data.seatId);var e;if(e=t.data,pdk.MyUserInfo.getInstance().myHandsCards.length<=0)return void(this._handCard.numChildren&&DisplayUtil.removeAllChildren(this._handCard));if(e.length<=0)for(var i=this._handCard.numChildren,n=0;i>n;n++){var s=this._handCard.getChildAt(n);1==s.info.select&&(s.selected=!1)}else{this._handCard||(this._handCard=new egret.Sprite,this.addChild(this._handCard)),DisplayUtil.removeAllChildren(this._handCard),this._handCard.cacheAsBitmap=!0;for(var o=this.sortCard(e),i=Math.round(o.length/2),r=[],n=0;n<o.length;n++){var a=new CardInfoDO;a.updata(pdk.TableCard.selectByThisId(o[n])),a.seat=8-i+n,r.push(a)}for(var n=0;n<r.length;n++)this.createCard(r[n],r.length%2);this.updataCardPoint()}},e.prototype.onTipCardHandler=function(t){var e=t.data;1==e.opType&&(e.handCardSet?this.selsect(e.handCardSet):5335==pdk.DataCache.gameId&&ReqManager.ins.OnOperatGameReq_C(UserInfoDO.actorInfo.uid,4,UserInfoDO.roomInfo.roomId,null))},e.prototype.getOprateCards=function(t){if(UserInfoDO.canOprateList)for(var e=0;e<UserInfoDO.canOprateList.length;e++)for(var i=UserInfoDO.canOprateList[e],n=i.thisId.length,s=0;n>s&&-1!=t.indexOf(i.thisId[s]);s++)if(s==n-1)return i;return null},e.prototype.touchOutsidHandler=function(t){if(this._handCard)for(var e=this._handCard.numChildren,i=0;e>i;i++){var n=this._handCard.getChildAt(i);n._cardMask.visible=!1}},e.prototype.onShowMyCardHandler=function(t){if(t.data)if(t.data.shuffleUid&&1!=pdk.RoomInfo.getInstance().video){var e=this;uniLib.SetUniEventTimeout(this,function(){ShuffleEffectPanel.ins.addShuffleMc(t.data.shuffleUid)},500,1,this,null),uniLib.SetUniEventTimeout(this,function(){ShuffleEffectPanel.ins.removeShuffleMc(),e.sendCards(t)},3800,1,this,null)}else this.sendCards(t)},e.prototype.sendCards=function(t){var e=t.data.uid,i=UserInfoDO.getUserSeat(e);if(1==pdk.RoomInfo.getInstance().video&&(2==i||3==i))return void this.createLotteryCard(e,t.data.handCardSet,t.data.seatId);var n=this.sortCard(t.data.handCardSet);if(0!=n.length){this._handCard||(this._handCard=new egret.Sprite,this.addChild(this._handCard)),DisplayUtil.removeAllChildren(this._handCard),1!=pdk.RoomInfo.getInstance().video&&(this._handCard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCardTouch,this),this._handCard.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCardTouch,this),this._handCard.addEventListener(egret.TouchEvent.TOUCH_END,this.onCardTouch,this),this._handCard.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCardTouch,this));for(var s=Math.round(n.length/2),o=[],r=0;r<n.length;r++){var a=new CardInfoDO;a.updata(pdk.TableCard.selectByThisId(n[r])),a.seat=8-s+r,o.push(a)}for(var r=0;r<o.length;r++)this.createCard(o[r]);this.updataCardPoint()}},e.prototype.onUserOperatCardHandler=function(t){for(var e=[],i=this._handCard.numChildren,n=0;i>n;n++){var s=this._handCard.getChildAt(n);1==s.info.select&&e.push(s.info.thisId)}e.length>0&&ReqManager.ins.OnOperatGameReq_C(UserInfoDO.actorInfo.uid,2,UserInfoDO.roomInfo.roomId,e)},e.prototype.createLotteryCard=function(t,e,i){void 0===i&&(i=0);var n=UserInfoDO.getUserSeat(t);if(this.lotteryCardSprite[n]&&this.lotteryCardSprite[n].parent&&this.lotteryCardSprite[n].parent.removeChild(this.lotteryCardSprite[n]),e&&e.length){this._playerCard||(this._playerCard=new egret.Sprite,this.addChild(this._playerCard),this._playerCard.name="playerCard");var s=this.getPlayCardSprite(e,t);this.lotteryCardSprite[n]=s,this._playerCard.addChild(s);var o=new egret.Point;1==n?(o.x=(uniLib.Global.screenWidth-s.width)/2,o.y=370-s.height/2):2==n?(o.x=uniLib.Global.screenWidth-150-s.width,o.y=100):3==n&&(o.x=139,o.y=100),s.x=o.x,s.y=o.y}},e.prototype.showLeftCard=function(t){var e=this.getPlayCardSprite(t,1);e&&this._playerCard&&(this._playerCard.addChild(e),e.x=139,e.y=100)},e.prototype.ResetSelectCard=function(){if(this._handCard)for(var t=this._handCard.numChildren,e=0;t>e;e++){var i=this._handCard.getChildAt(e);i.selected=!1}},e.prototype.selsect=function(t){if(this._handCard){for(var e=this._handCard.numChildren,i=0;e>i;i++){var n=this._handCard.getChildAt(i);if(n.selected)return}for(var i=0;e>i;i++)for(var s=0;s<t.length;s++){var n=this._handCard.getChildAt(i);n.info.thisId==t[s]&&(n.selected=!0)}}},e.prototype.sortCard=function(t){if(!t&&0==t.length)return null;if(t.length<1)return null;for(var e,i=0;i<t.length;i++)for(var n=t.length-1;n>i;n--)pdk.TableCard.selectByThisId(t[n-1]).point<pdk.TableCard.selectByThisId(t[n]).point&&(e=t[n-1],t[n-1]=t[n],t[n]=e);for(var i=0;i<t.length;i++)pdk.TableCard.selectByThisId(t[i]).point<2&&(e=t[i],t.splice(i,1),t.unshift(e));for(var i=0;i<t.length;i++)2==pdk.TableCard.selectByThisId(t[i]).point&&(e=t[i],t.splice(i,1),t.unshift(e));return t},e.prototype.createCard=function(t,e){if(void 0===e&&(e=0),t){1==e&&(t.num=1);var i=new CardView;i.info=t,i.name=t.thisId.toString(),i.touchEnabled=!0,this._cardArr.push(i),this._handCard.addChild(i),i=null}},e.prototype.dealCardAnimation=function(){for(var t=this,i=this._cardArr,n=0,s=i;n<s.length;n++){var o=s[n];o.parent&&(egret.Tween.removeTweens(o),o.parent.removeChild(o))}for(var r=function(n){egret.setTimeout(function(){var s=i[n];if(s&&t._handCard){var o=t.handCardX;s.x=o+(t._handCard.numChildren-1)*e.CardGap,t._handCard.addChild(s),t.cardAnimation()}},a,e.DealCardTime*(n+1))},a=this,h=0;h<i.length;h++)r(h)},e.prototype.cardAnimation=function(){if(this._handCard)for(var t=this._handCard.numChildren,i=this.handCardX,n=0;t>n;n++){var s=this._handCard.getChildAt(n);egret.Tween.removeTweens(s),egret.Tween.get(s).to({x:i+e.CardGap*n},e.DealCardTime)}},e.GetWidthForCardNumber=function(t){return e.PlayCardWidth+(t-1)*e.PlayCardGap},Object.defineProperty(e.prototype,"handCardWidth",{get:function(){if(this._handCard){var t=this._handCard.numChildren;return e.CardWidth+t*e.CardGap}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handCardX",{get:function(){return(uniLib.Global.screenWidth-this.handCardWidth)/2+50},enumerable:!0,configurable:!0}),e.prototype.disposeAll=function(){for(var t=0;t<this._baseArr.length;t++){var e=this._baseArr[t];e.dispose()}this._baseArr=[];for(var t=0;t<this._cardArr.length;t++){var e=this._cardArr[t];e.dispose()}this._cardArr=[],this._handCard&&(this._handCard.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCardTouch,this),this._handCard.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCardTouch,this),this._handCard.removeEventListener(egret.TouchEvent.TOUCH_END,this.onCardTouch,this),this._handCard.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCardTouch,this),DisplayUtil.removeAllChildren(this._handCard),DisplayUtil.removeFromParent(this._handCard)),this._handCard=null,this._myCard&&(DisplayUtil.removeAllChildren(this._myCard),DisplayUtil.removeFromParent(this._myCard)),this._myCard=null,this._playerCard&&(DisplayUtil.removeAllChildren(this._playerCard),DisplayUtil.removeFromParent(this._playerCard)),this._playerCard=null,this._player3&&(DisplayUtil.removeAllChildren(this._player3),DisplayUtil.removeFromParent(this._player3)),this._player3=null,this._player2&&(DisplayUtil.removeAllChildren(this._player2),DisplayUtil.removeFromParent(this._player2)),this._player2=null},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this._cardEndX=null,this._cardBeginX=null,this.list=[],this.removeListener(),this.disposeAll(),DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);CardPanel.CardGap=60,CardPanel.DealCardTime=150,CardPanel.CardWidth=155,CardPanel.CardHeight=216,CardPanel.PlayCardWidth=82,CardPanel.PlayCardHeight=114,CardPanel.PlayCardGap=40,CardPanel.MaxCardNumLine=8,__reflect(CardPanel.prototype,"CardPanel",["IPanel"]);var ClockPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._index=0,e._bg=null,e._sign=null,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){DisplayUtil.removeAllChildren(this),this._bg||(this._bg=DomainUtil.getBitmap("pdk_game_clock")),this._bg.parent||this.addChild(this._bg),this._sign||(this._sign=new egret.Sprite),this._sign.parent||this.addChild(this._sign),this.uniTimer&&(this.uniTimer.stop(),this.uniTimer=null),this.uniTimer=uniLib.SetUniTimerTimeout(this,this.toClock,1e3,!1,this),this.toClock()},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_END,this.onHideClockHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.onHideClockHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_CLOCK,this.onShowClockHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_HIDE_CLOCK,this.onHideClockHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_END,this.onHideClockHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onHideClockHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_CLOCK,this.onShowClockHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_HIDE_CLOCK,this.onHideClockHandler,this)},e.prototype.toClock=function(){this._sign||(this._sign=new egret.Sprite,this.addChild(this._sign)),this._sign&&DisplayUtil.removeAllChildren(this._sign);var t=this._index.toString().charAt(0),e=DomainUtil.getBitmap("num_1_"+t);if(this._sign.addChild(e),this._index>9){e.x=19,e.y=25;var i=this._index%10,n=DomainUtil.getBitmap("num_1_"+i);this._sign.addChild(n),n.x=40,n.y=25}else e.x=30,e.y=25;this._index<1&&UserInfoDO.roomInfo.roomType&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_AUTO)),this._index--,this._index<0&&(this._index=0)},e.prototype.onShowClockHandler=function(t){this._index=0;var e=t.data;this._index=e.timer/1e3,this.x=e.x,this.y=e.y,this.create()},e.prototype.onHideClockHandler=function(t){this._index=0,this._bg&&DisplayUtil.removeFromParent(this._bg),this._bg=null,this._sign&&(DisplayUtil.removeAllChildren(this._sign),DisplayUtil.removeFromParent(this._sign)),this._sign=null,this.uniTimer&&(this.uniTimer.stop(),this.uniTimer=null),DisplayUtil.removeAllChildren(this)},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._index=0,this._bg&&DisplayUtil.removeFromParent(this._bg),this._bg=null,this._sign&&(DisplayUtil.removeAllChildren(this._sign),DisplayUtil.removeFromParent(this._sign)),this._sign=null,this.uniTimer&&(this.uniTimer.stop(),this.uniTimer=null),DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(ClockPanel.prototype,"ClockPanel",["IPanel"]);var LotteryPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_LOTTERY,this.onShowLotteryHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_HIDE_LOTTERY,this.onHideLotteryHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_LOTTERY,this.onShowLotteryHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_HIDE_LOTTERY,this.onHideLotteryHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameStartHandler,this)},e.prototype.onGameStartHandler=function(t){UserInfoDO.roomInfo.resultData={},this._start&&(DisplayUtil.removeAllChildren(this._start),DisplayUtil.removeFromParent(this._start)),this._start=null,this._okBtn&&(DisplayUtil.removeAllChildren(this._okBtn),DisplayUtil.removeFromParent(this._okBtn)),this._okBtn=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this),this._changeBtn&&(this._changeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeRoom,this),uniLib.DisplayUtils.removeFromParent(this._changeBtn),this._changeBtn.destory()),this._changeBtn=null,this._shuffleBtn&&(this._shuffleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShuffleClick,this),uniLib.DisplayUtils.removeFromParent(this._shuffleBtn)),this._shuffleBtn=null,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_WIN_EFFECT))},e.prototype.onChangeRoom=function(){ReqManager.ins.OnPaoDeKuaiChangeRoomMahjongCmd_C()},e.prototype.onShowLotteryHandler=function(t){var e=t.data;this.createLottery(uniLib.Global.screenWidth/2-280,100,e.lotteryInfo),this.showShuffleBtn(e.shuffleUid,e.shuffleCost)},e.prototype.createLottery=function(t,e,i){void 0===t&&(t=100),void 0===e&&(e=100),this._start&&(DisplayUtil.removeAllChildren(this._start),DisplayUtil.removeFromParent(this._start)),this._start=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this);var n=1,s=this.createMask(uniLib.Global.screenWidth,uniLib.Global.screenHeight);this.addChild(s);for(var o=0;o<i.length;o++)0==i[o].winType&&i[o].role.uid==UserInfoDO.actorInfo.uid&&(n=0);var r=DomainUtil.getBitmap("pdk_game_lottery_list_"+n.toString());this.addChild(r),r.x=t+46,r.y=e+99;var a=DomainUtil.getBitmap("pdk_game_lottery_"+n.toString());a.smoothing=!0,a.touchEnabled=!1,this.addChild(a),a.x=t-6,a.y=e;for(var h=[],o=0;o<i.length;o++){var d="",l=new egret.TextField,c=new egret.TextField;0==i[o].winType?(c.textColor=16642464,l.textColor=16642464):(c.textColor=14803422,l.textColor=14803422),d=i[o].point>0?"+":"";var p={};p.uid=i[o].role.uid,p.point=i[o].point,p.totalpoint=i[o].totalpoint,h.push(p),c.text=d+i[o].point,c.size=24,this.addChild(c),c.x=t+380,c.y=e+156+58*o;var u=i[o].role;if(l.text=u.nickName,l.size=24,l.width=192,this.addChild(l),l.x=t+150,l.y=e+156+58*o,i[o].boomNum>0){var _=uniLib.DisplayUtils.createBitmapByName("fanben");_.x=t+420,_.y=c.y-10,this.addChild(_)}}if(GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_WIN_EFFECT,!1,!1,h)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_MONEY_EFFECT,!1,!1,h)),h=[],UserInfoDO.roomInfo.currentNum!=UserInfoDO.roomInfo.totalNum){this._start||(this._start=new egret.Sprite,this.addChild(this._start)),DisplayUtil.removeAllChildren(this._start),this._start.x=t+200,this._start.y=e+318;var m=DomainUtil.getBitmap("pdk_game_start_1");m.smoothing=!0,this._start.touchEnabled=!0,this._start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgTapHandler,this),this._start.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAgBeginpHandler,this),this._start.addChild(m),UserInfoDO.roomInfo.playTypeList instanceof Array&&-1!=UserInfoDO.roomInfo.playTypeList.indexOf(95)&&(this._changeBtn||(this._changeBtn=new pdk.GameButton(["pdk_changeRoom_1","pdk_changeRoom_2"])),this._changeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeRoom,this),this._changeBtn.x=t+80,this._changeBtn.y=e+318,this._start.x=t+320,this.addChild(this._changeBtn))}else this.yesBtn||(this.yesBtn=new pdk.GameButton(["pdk_game_start_1","pdk_game_start_1"])),this.yesBtn.x=36,this.yesBtn.y=398,this.addChild(this.yesBtn),this.yesBtn.x=t+158,this.yesBtn.y=e+340,this.yesBtn.touchEnabled=!0,this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkBeginpHandler,this),this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.oOkTapHandler,this);!this._shuffleBtn&&ArrayUtil.isInArray(88,UserInfoDO.roomInfo.playTypeList)&&(this._shuffleBtn=new eui.Button,this._shuffleBtn.skinName="PDK_ShuffleSkin",this._shuffleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShuffleClick,this),this._shuffleBtn.x=t+410,this._shuffleBtn.y=e+318-100,this.addChild(this._shuffleBtn),this._shuffleBtn.visible=!1)},e.prototype.showShuffleBtn=function(t,e){void 0===e&&(e=.1),t==uniLib.NetMgr.UID&&this._shuffleBtn&&(this._shuffleBtn.visible=!0,this._shuffleBtn.cost.text=""+(e?e:0))},e.prototype.onShuffleClick=function(){ReqManager.ins.OnReadyGameReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.seatId,1)},e.prototype.onOkBeginpHandler=function(t){},e.prototype.oOkTapHandler=function(t){this.numChildren>0&&DisplayUtil.removeAllChildren(this),1!=pdk.RoomInfo.getInstance().video&&GameEvnts.ins.dispatchEvent(new egret.Event(pdk.UIEventConsts.SHOW_RESULT_INFO,!1,!1,UserInfoDO.roomInfo.resultData))},e.prototype.onAgBeginpHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_start_2");i.smoothing=!0,e.addChild(i)},e.prototype.onAgTapHandler=function(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_WIN_EFFECT)),ReqManager.ins.OnReadyGameReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.seatId)},e.prototype.onHideLotteryHandler=function(t){this._start&&(DisplayUtil.removeAllChildren(this._start),DisplayUtil.removeFromParent(this._start)),this._start=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e.prototype.createMask=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new egret.Shape;return this.addChild(i),i.graphics.clear(),i.graphics.beginFill(10066329,.1),i.graphics.drawRect(0,0,t,e),i.graphics.endFill(),i},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._start&&DisplayUtil.removeAllChildren(this._start),this._start=null,this._okBtn&&DisplayUtil.removeAllChildren(this._okBtn),this._okBtn=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(LotteryPanel.prototype,"LotteryPanel",["IPanel"]);var OperatPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._timer=30,e._opSeat=0,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener(),this._lastOpType=[2,2]},e.prototype.create=function(){},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_AUTO,this.onShowAutoHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_AUTO_GAME,this.onUserReqAutoHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameEndHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameEndHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_HIDE_OPERAT,this.onHideOperatHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_CARD_SEND,this.onUserCardSendHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_FIRST_ACTION,this.onGameFirstActionHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainConnectPokerHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_QIANGGUAN_START,this.showGrabPanel,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_QIANGGUAN_RESULT,this.showGrabResult,this)
},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_QIANGGUAN_RESULT,this.showGrabResult,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_QIANGGUAN_START,this.showGrabPanel,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_AUTO,this.onShowAutoHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_AUTO_GAME,this.onUserReqAutoHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_END,this.onGameEndHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameEndHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_HIDE_OPERAT,this.onHideOperatHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_CARD_SEND,this.onUserCardSendHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_FIRST_ACTION,this.onGameFirstActionHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainConnectPokerHandler,this)},e.prototype.onShowAutoHandler=function(t){this._timer=0,this._opSeat=0,this.removeV()},e.prototype.onUserReqAutoHandler=function(t){this._timer=0,this._opSeat=0,this.removeV()},e.prototype.onPlayerActionHandler=function(t){},e.prototype.onGameEndHandler=function(t){this._timer=0,this._opSeat=0,this.removeV()},e.prototype.onGameFirstActionHandler=function(t){this.removeGrabPanel();var e=t.data;if(this._timer=e.timer,e.uid==UserInfoDO.actorInfo.uid)this.createTips(uniLib.Global.screenWidth/2-240,355),this.createChuPai(uniLib.Global.screenWidth/2+60,355),this.createColock(this._timer,uniLib.Global.screenWidth/2-44,350),1==UserInfoDO.roomInfo.currentNum&&this.send(1032,440);else{var i=UserInfoDO.getUserSeat(e.uid),n=UserInfoDO.actorInfo.pos[i-1][0],s=UserInfoDO.actorInfo.pos[i-1][1];3==i&&(n+=120),2==i&&(n-=85),this.createColock(this._timer,n,s),1==UserInfoDO.roomInfo.currentNum&&this.send(UserInfoDO.actorInfo.pos[i-1][0],UserInfoDO.actorInfo.pos[i-1][1])}GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.CLEAR_PLAYER_CARD,!1,!1,{uid:e.uid}))},e.prototype.send=function(t,e){this._card&&(DisplayUtil.removeAllChildren(this._card),DisplayUtil.removeFromParent(this._card),this._card=null),console.error(t+"....."+e),this._card=new egret.Sprite,this.addChild(this._card);var i=DomainUtil.getBitmap("TableCard_1_3");this._card.addChild(i),this._card.anchorOffsetX=i.width/2,this._card.anchorOffsetY=i.height/2,this._card.x=uniLib.Global.screenWidth/2,this._card.y=uniLib.Global.screenHeight/2-100,this._card.scaleX=.6,this._card.scaleY=.6,this._card&&egret.Tween.get(this._card,{loop:!1}).wait(200).to({x:t+60,y:e+60,scaleX:.2,scaleY:.2},500,egret.Ease.sineIn).wait(200).call(this.onCompleteHandler,this,[this._card])},e.prototype.onCompleteHandler=function(t){t&&(egret.Tween.removeTweens(t),DisplayUtil.removeAllChildren(t),DisplayUtil.removeFromParent(t)),this._card&&(this._card=null)},e.prototype.onUserCardSendHandler=function(t){var e=t.data;e.cardSet&&(this._tips&&DisplayUtil.removeAllChildren(this._tips),this._send&&DisplayUtil.removeAllChildren(this._send)),1==e.resultCode&&this.createPass(4,125,325)},e.prototype.onAgainConnectPokerHandler=function(t){var e=t.data;if(e.uid&&void 0!=e.uid){this.removeV(),this.removeGrabPanel();var i=e.uid;if(this._opSeat=UserInfoDO.getUserSeat(e.preUid),e.cardSet&&(e.uid=e.preUid,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,!1,!1,e))),this._timer=e.timer,this._opSeat=UserInfoDO.getUserSeat(i),e.uid)if(2==e.opType)if(i==UserInfoDO.actorInfo.uid)this.createPass(1,150,540);else{this._lastOpType[this._opSeat-1]=2;var n=UserInfoDO.actorInfo.pos[this._opSeat-1][0],s=UserInfoDO.actorInfo.pos[this._opSeat-1][1]+30;3==this._opSeat&&(n+=120),2==this._opSeat&&(n-=170),this.createPass(this._opSeat,n,s,e.uid)}else 3==e.opType&&(this.checkBuChu()||this.createPass(2,uniLib.Global.screenWidth/2-60,540,e.uid));if(this._opSeat=UserInfoDO.getUserSeat(i),1==e.opType)if(i==UserInfoDO.actorInfo.uid)this.createTips(uniLib.Global.screenWidth/2-240,355),this.createChuPai(uniLib.Global.screenWidth/2+60,355),this.checkBuChu()&&e.preUid?(this.createBuchu(uniLib.Global.screenWidth/2+60,355),this.createChuPai(uniLib.Global.screenWidth/2+260,355)):this.createChuPai(uniLib.Global.screenWidth/2+60,355),this.createColock(this._timer,uniLib.Global.screenWidth/2-44,350);else{this._lastOpType[this._opSeat-1]=1;var n=UserInfoDO.actorInfo.pos[this._opSeat-1][0],s=UserInfoDO.actorInfo.pos[this._opSeat-1][1]+120;3==this._opSeat&&(n+=120),2==this._opSeat&&(n-=85),console.error(n),this.createColock(this._timer,n,s)}}},e.prototype.onPlayerGameOperatHandler=function(t){var e=t.data,i=e.uid;if(this._opSeat=UserInfoDO.getUserSeat(i),null!=this._opSeat){this.removeV();var n=e.opType;if(2==n)if(i==UserInfoDO.actorInfo.uid)this.createPass(1,150,540);else{this._lastOpType[this._opSeat-1]=2;var s=UserInfoDO.actorInfo.pos[this._opSeat-1][0],o=UserInfoDO.actorInfo.pos[this._opSeat-1][1]+30;3==this._opSeat&&(s+=120),2==this._opSeat&&(s-=170),this.createPass(this._opSeat,s,o,i)}3==n&&(this.checkBuChu()||this.createPass(2,uniLib.Global.screenWidth/2-60,540,i)),1==n&&(this._lastOpType[this._opSeat-1]=1,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,!1,!1,e))),this._timer=e.timer;var r=e.nextUid,a=e.nextOpType,h=e.nextHostType,d=e.cardNum;if(r==UserInfoDO.actorInfo.uid)1==a&&(1==h||(this.createTips(uniLib.Global.screenWidth/2-240,355),this.createColock(this._timer,uniLib.Global.screenWidth/2-44,350),this.checkBuChu()?(this.createBuchu(uniLib.Global.screenWidth/2+60,355),this.createChuPai(uniLib.Global.screenWidth/2+260,355)):this.createChuPai(uniLib.Global.screenWidth/2+60,355)));else{var l=UserInfoDO.getUserSeat(r);if(null==l)return;var s=UserInfoDO.actorInfo.pos[l-1][0],o=UserInfoDO.actorInfo.pos[l-1][1]+120;3==l&&(s+=120),2==l&&(s-=85),d>0&&this.createColock(this._timer,s,o)}r&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.CLEAR_PLAYER_CARD,!1,!1,{uid:r}))}},e.prototype.onHideOperatHandler=function(t){this.removeV()},e.prototype.createPass=function(t,e,i,n){if(void 0===e&&(e=100),void 0===i&&(i=100),2==t||3==t)return void GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_PLAYER_CARD_OPERAT,!1,!1,{uid:n}));this._pass||(this._pass=new egret.Sprite,this.addChild(this._pass)),DisplayUtil.removeAllChildren(this._pass);var s=null,o=null;if(1!=t||(s="pdk_game_guo_1",5335!=pdk.DataCache.gameId)){if(2==t&&(s="pdk_game_guo_2"),3==t&&(s="pdk_game_guo_2"),4==t)return o="出牌不符合规则",s="pdk_game_guo_3",5113==pdk.DataCache.gameId?void 0:void pdk.GameInfo.manage.showMildWarnShow(o);this._pass.y=i;var r=DomainUtil.getBitmap(s);if(r.smoothing=!0,r.touchEnabled=!1,this._pass.addChild(r),this._pass.x=(uniLib.Global.screenWidth-this._pass.width)/2,4==t){var a=new egret.TextField;a.textColor=16777215,a.x=400,a.y=16,a.text=o,this._pass.addChild(a)}}},e.prototype.checkBuChu=function(){return ArrayUtil.isInArray(10050,UserInfoDO.roomInfo.playTypeList)},e.prototype.createBuchu=function(t,e){void 0===t&&(t=100),void 0===e&&(e=100),this._passBtn||(this._passBtn=new egret.Sprite,this.addChild(this._passBtn)),this._passBtn.visible=!0,this._passBtn.x=t,this._passBtn.y=e,DisplayUtil.removeAllChildren(this._passBtn);var i=DomainUtil.getBitmap("pdk_buchu_png");i.smoothing=!0,this._passBtn.name="buchu",this._passBtn.touchEnabled=!0,this._passBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuChuTapHandler,this),this._passBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBuChuBeginpHandler,this),this._passBtn.addChild(i),1==pdk.RoomInfo.getInstance().video},e.prototype.onBuChuTapHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_buchu_png");i.smoothing=!0,e.addChild(i),ReqManager.ins.OnOperatGameReq_C(UserInfoDO.actorInfo.uid,4,UserInfoDO.roomInfo.roomId,null)},e.prototype.onBuChuBeginpHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_buchu_1_png");i.smoothing=!0,e.addChild(i)},e.prototype.createChuPai=function(t,e){void 0===t&&(t=100),void 0===e&&(e=100),this._send||(this._send=new egret.Sprite,this.addChild(this._send)),this._send.visible=!0,this._send.x=t,this._send.y=e,DisplayUtil.removeAllChildren(this._send);var i=DomainUtil.getBitmap("pdk_game_chupai_1");i.smoothing=!0,this._send.name="tishi",this._send.touchEnabled=!0,this._send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChuPaiTapHandler,this),this._send.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onChuPaiBeginpHandler,this),this._send.addChild(i),1==pdk.RoomInfo.getInstance().video&&(this._send.visible=!1)},e.prototype.onChuPaiBeginpHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_chupai_2");i.smoothing=!0,e.addChild(i)},e.prototype.onChuPaiTapHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_chupai_1");i.smoothing=!0,e.addChild(i),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_USER_CARD_OPERAT))},e.prototype.createTips=function(t,e){void 0===t&&(t=100),void 0===e&&(e=100),this._tips||(this._tips=new egret.Sprite,this.addChild(this._tips)),this._tips.visible=!0,this._tips.x=t,this._tips.y=e,DisplayUtil.removeAllChildren(this._tips);var i=DomainUtil.getBitmap("pdk_game_tishi_1");i.smoothing=!0,this._tips.name="tishi",this._tips.touchEnabled=!0,this._tips.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTapHandler,this),this._tips.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsBeginpHandler,this),this._tips.addChild(i),1==pdk.RoomInfo.getInstance().video&&(this._tips.visible=!1)},e.prototype.onTipsBeginpHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_tishi_2");i.smoothing=!0,e.addChild(i),e=null},e.prototype.onTipsTapHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap("pdk_game_tishi_1");i.smoothing=!0,e.addChild(i),ReqManager.ins.OnOperatGameReq_C(UserInfoDO.actorInfo.uid,1,UserInfoDO.roomInfo.roomId,null),e=null},e.prototype.createColock=function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=100);var n={};n.timer=t,n.x=e,n.y=i,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_CLOCK,!1,!1,n))},e.prototype.removeV=function(){this._card&&(DisplayUtil.removeAllChildren(this._card),DisplayUtil.removeFromParent(this._card)),this._card=null,this._tips&&(DisplayUtil.removeAllChildren(this._tips),DisplayUtil.removeFromParent(this._tips)),this._tips=null,this._send&&(DisplayUtil.removeAllChildren(this._send),DisplayUtil.removeFromParent(this._send)),this._send=null,this._pass&&(DisplayUtil.removeAllChildren(this._pass),DisplayUtil.removeFromParent(this._pass)),this._pass=null,this._passBtn&&(DisplayUtil.removeAllChildren(this._passBtn),DisplayUtil.removeFromParent(this._passBtn)),this._passBtn=null,GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_CLOCK))},e.prototype.showGrabResult=function(t){var e=t&&t.uid?t.uid:null;if(e){var i=(t.op?t.op:this._timer,UserInfoDO.getUserSeat(e));if(e==UserInfoDO.actorInfo.uid)this.createPass(1,150,540);else{var n=UserInfoDO.actorInfo.pos[i-1][0],s=UserInfoDO.actorInfo.pos[i-1][1]+30;3==i&&(n+=120),2==i&&(n-=170),this.createPass(i,n,s,e)}}},e.prototype.showGrabPanel=function(t){var e=t.data,i=e.sec?e.sec:this._timer;this._grabPanel||(this._grabPanel=new QiangGuanPanel,this._grabPanel.y=uniLib.Global.screenHeight-350,this._grabPanel.init(),this.addChild(this._grabPanel)),this._grabPanel.show(),this.createColock(1e3*i,uniLib.Global.screenWidth/2-44,350)},e.prototype.removeGrabPanel=function(){this._grabPanel&&this._grabPanel.hide()},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_CLOCK)),this._timer=0,this._opSeat=0,this._tips&&DisplayUtil.removeAllChildren(this._tips),this._tips=null,this._send&&DisplayUtil.removeAllChildren(this._send),this._send=null,this._pass&&DisplayUtil.removeAllChildren(this._pass),this._pass=null,this._card&&DisplayUtil.removeAllChildren(this._card),this._card=null,this._passBtn&&DisplayUtil.removeAllChildren(this._passBtn),this._passBtn=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(OperatPanel.prototype,"OperatPanel",["IPanel"]);var PlayerPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seatId=0,e._list=[],e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_PLAYER_ENTER,this.onPlayerEnterHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_PLAYER_LEAVE,this.onRemoteRoleLeaveHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_REMOTE_PLAYER,this.onRemoteRoleEnterHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_ENTER,this.onPlayerEnterHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_LEAVE,this.onRemoteRoleLeaveHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_REMOTE_PLAYER,this.onRemoteRoleEnterHandler,this)},e.prototype.onRemoteRoleEnterHandler=function(t){this._list=t.data;for(var e=0;e<this._list.length;e++){var i=new RoleInfoDO;i.updata(this._list[e]),i.uid==UserInfoDO.actorInfo.uid&&(this._seatId=i.seatId,i.seatId=1,UserInfoDO.actorInfo.updata(i))}if(0==this._seatId&&(this._seatId=1),1==this._seatId)for(var e=0;e<this._list.length;e++){var i=new RoleInfoDO;i.updata(this._list[e]),this.createRemote(i)}if(2==this._seatId)for(var e=0;e<this._list.length;e++){var n=0,i=new RoleInfoDO;i.updata(this._list[e]),2==i.seatId&&(n=1),3==i.seatId&&(n=2),1==i.seatId&&(n=3),i.seatId=n,this.createRemote(i)}if(3==this._seatId)for(var e=0;e<this._list.length;e++){var n=0,i=new RoleInfoDO;i.updata(this._list[e]),3==i.seatId&&(n=1),1==i.seatId&&(n=2),2==i.seatId&&(n=3),i.seatId=n,this.createRemote(i)}},e.prototype.onPlayerEnterHandler=function(t){var e=new RoleInfoDO;e.updata(t.data);var i=0;1==this._seatId&&this.createRemote(e),2==this._seatId&&(2==e.seatId&&(i=1),3==e.seatId&&(i=2),1==e.seatId&&(i=3),e.seatId=i,this.createRemote(e)),3==this._seatId&&(3==e.seatId&&(i=1),1==e.seatId&&(i=2),2==e.seatId&&(i=3),e.seatId=i,this.createRemote(e))},e.prototype.onRemoteRoleLeaveHandler=function(t){if(this.removeRemote(t.data),UserInfoDO.roleCurrentList.length>0)for(var e=0;e<UserInfoDO.roleCurrentList.length;e++)UserInfoDO.roleCurrentList[e].uid==t.data&&UserInfoDO.roleCurrentList.splice(e,1)},e.prototype.createRemote=function(t){if(t){for(var e=0;e<UserInfoDO.roleCurrentList.length;e++)if(UserInfoDO.roleCurrentList[e].uid==t.uid)return;2==UserInfoDO.roomInfo.totalPlayers&&1!=pdk.RoomInfo.getInstance().video&&3==t.seatId&&(t.seatId=2);var i=new ActorView;i.info=t,i.name=t.uid.toString(),this.addChild(i);for(var e=0;e<UserInfoDO.roleCurrentList.length;e++)if(UserInfoDO.roleCurrentList[e].uid==t.uid)return void(UserInfoDO.roleCurrentList[e]=t);UserInfoDO.roleCurrentList.push(t);for(var n=-1,s=-1,e=0;e<UserInfoDO.roleCurrentList.length;e++)UserInfoDO.roleCurrentList[e].uid==UserInfoDO.actorInfo.uid&&(n=e),1==UserInfoDO.roleCurrentList[e].seatId&&(s=e);n!=s&&n>=0&&s>=0&&(UserInfoDO.roleCurrentList[s].seatId=UserInfoDO.roleCurrentList[n].seatId,UserInfoDO.roleCurrentList[n].seatId=1)}},e.prototype.removeRemote=function(t){if(t)for(var e=this.numChildren,i=0;e>i;i++)if(this.getChildAt(i).name==t){this.getChildAt(i).name=null;var n=this.getChildAt(i);return n.dispose(),n&&n.parent&&n.parent.removeChild(n),void(n=null)}},e.prototype.disposeAll=function(){var t=this.numChildren-1;if(t>0){var e=this.getChildAt(t);e.dispose(),e=null,t--}},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this.disposeAll(),this._seatId=0,this._list=[],DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(PlayerPanel.prototype,"PlayerPanel",["IPanel"]);var SoundPanel=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.addListener()},t.prototype.create=function(){},t.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this)},t.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onGameStartHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_GAME_OPERAT,this.onPlayerGameOperatHandler,this)},t.prototype.onGameStartHandler=function(t){uniLib.SoundMgr.instance.playSound(pdk.SoundConsts.SET_TYPE+"_send_mp3")},t.prototype.onPlayerGameOperatHandler=function(t){var e=t.data;if(e.uid)var i=UserInfoDO.getUserGender(e.uid);if(2==e.opType&&uniLib.SoundMgr.instance.playSound(pdk.SoundConsts.SET_TYPE+"_"+i+"_pass_mp3"),e.cardSetType){var n=e.cardSetType;if(1==n||2==n){var s=pdk.TableCard.selectByThisId(e.cardSet[0]).point;1==s&&(s=14),2==s&&(s=15),uniLib.SoundMgr.instance.playSound(pdk.SoundConsts.SET_TYPE+"_"+i+"_"+n+"_"+s+"_mp3")}var o=null;n>2&&(3==n&&(o=pdk.SoundConsts.SET_TYPE+"_"+i+"_3"),4==n&&(o=pdk.SoundConsts.SET_TYPE+"_"+i+"_4"),5==n&&(o=pdk.SoundConsts.SET_TYPE+"_"+i+"_6"),6==n&&(o=e.cardSet&&5==e.cardSet.length?pdk.SoundConsts.SET_TYPE+"_"+i+"_6":e.cardSet&&3==e.cardSet.length?pdk.SoundConsts.SET_TYPE+"_"+i+"_6_0":pdk.SoundConsts.SET_TYPE+"_"+i+"_6_1"),7==n&&(o=pdk.SoundConsts.SET_TYPE+"_"+i+"_7",uniLib.SoundMgr.instance.playSound(pdk.SoundConsts.SET_TYPE+"_"+n+"_mp3")),8==n&&(o=e.cardSet&&6==e.cardSet.length?pdk.SoundConsts.SET_TYPE+"_"+i+"_8_1":pdk.SoundConsts.SET_TYPE+"_"+i+"_8"),9==n&&(o=pdk.SoundConsts.SET_TYPE+"_"+i+"_9",uniLib.SoundMgr.instance.playSound(pdk.SoundConsts.SET_TYPE+"_"+n+"_mp3")))}o&&uniLib.SoundMgr.instance.playSound(o+"_mp3")},t.prototype.removeAll=function(){},t.prototype.show=function(){this.init()},t.prototype.hide=function(){},t.prototype.dispose=function(){this.removeListener()},t}();__reflect(SoundPanel.prototype,"SoundPanel");var GamePanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){console.error("GamePanel"),this._sound||(this._sound=SoundPanel.ins),this._sound.show(),this._player||(this._player=PlayerPanel.ins,this.addChild(this._player)),this._player.show(),this._action||(this._action=ActionPanel.ins,this.addChild(this._action)),this._action.show(),this._card||(this._card=CardPanel.ins,this.addChild(this._card)),this._card.show(),this._auto||(this._auto=AutoPanel.ins,this.addChild(this._auto)),this._auto.show(),this._operat||(this._operat=OperatPanel.ins,this.addChild(this._operat)),this._operat.show(),this._clock||(this._clock=ClockPanel.ins,this.addChild(this._clock)),this._clock.show(),this._lottery||(this._lottery=LotteryPanel.ins,LayerManager.topLayer.addChild(this._lottery)),this._lottery.show()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.onUserEnterGameHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_OUT_GAME,this.onUserOutGameHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.onUserEnterGameHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_OUT_GAME,this.onUserOutGameHandler,this)},e.prototype.onUserEnterGameHandler=function(t){this.create()},e.prototype.onUserOutGameHandler=function(t){this.dispose(),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_MAP)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.HIDE_UI_SCENCE)),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.HIDE_MAIN_SCENCE))},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._auto&&this._auto.dispose(),this._auto=null,this._card&&this._card.dispose(),this._card=null,this._player&&this._player.dispose(),this._player=null,this._operat&&this._operat.dispose(),this._operat=null,this._lottery&&this._lottery.dispose(),this._lottery=null,this._action&&this._action.dispose(),this._action=null,this._clock&&this._clock.dispose(),this._clock=null,this._sound&&this._sound.dispose(),this._sound=null,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(GamePanel.prototype,"GamePanel",["IPanel"]);var MapPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_MAP,this.onShowMapHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_HIDE_MAP,this.onHideMapHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_MAP,this.onShowMapHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_HIDE_MAP,this.onHideMapHandler,this)},e.prototype.create=function(){this.showMap(0,0)},e.prototype.onShowMapHandler=function(t){this.create()},e.prototype.onHideMapHandler=function(t){this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e.prototype.showMap=function(t,e){var i=DomainUtil.getBitmap("PDK_bg_png");i.smoothing=!0,i.width=uniLib.Global.screenWidth,i.height=uniLib.Global.screenHeight,this.addChild(i),i.touchEnabled=!1,i.x=t,i.y=e;var n=DomainUtil.getBitmap("PDk_bottom_png");n.x=10,n.y=uniLib.Global.screenHeight-n.texture._bitmapHeight,n.width=uniLib.Global.screenWidth-20,this.addChild(n);var s=DomainUtil.getBitmap("PDK_top_png");s.x=(uniLib.Global.screenWidth-s.texture._bitmapWidth)/2,s.y=0,this.addChild(s);var o=pdk.ResUtil.createTextFeild(7186632,egret.HorizontalAlign.LEFT,"版本：",18,uniLib.Global.screenWidth-140,uniLib.Global.screenHeight-20,200);o.text=uniLib.Global.version.toString(),this.addChild(o)},e.prototype.show=function(){this.init()},e.prototype.hide=function(){},e.prototype.dispose=function(){this.removeListener(),this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(MapPanel.prototype,"MapPanel",["IPanel"]);var SeatPlay=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seatId=0,e}return __extends(e,t),e.prototype.init=function(){console.error("SeatPlay"),this._readyIconArr=[],this._qiangOrBuQiangIconArr=[];for(var t,e,i=[new egret.Point(uniLib.Global.screenWidth/2-50,pdk.ResUtil.changeYAxis(480)),new egret.Point(uniLib.Global.screenWidth-303,275),new egret.Point(200,275)],n=0;3>n;n++)t=pdk.ResUtil.createBitmapByName("label_ready_png"),t.x=i[n].x,t.y=i[n].y,this.addChild(t),t.visible=!1,this._readyIconArr.push(t);for(var s=[new egret.Point(uniLib.Global.screenWidth/2-50,pdk.ResUtil.changeYAxis(180)),new egret.Point(uniLib.Global.screenWidth-303,275),new egret.Point(200,275)],n=0;3>n;n++)e=pdk.ResUtil.createBitmapByName("pdk_game_qiangguan_icon"),e.x=s[n].x,e.y=s[n].y,this.addChild(e),e.visible=!1,this._qiangOrBuQiangIconArr.push(e);this.addListener()},e.prototype.create=function(){this.init()},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_REMOTE_PLAYER,this.showReady,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_ACTION,this.defaulReady,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_START,this.resetReady,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.reLoadReady,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_LEAVE,this.removeReadIcon,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_PLAYER_LEAVE,this.removeReadIcon,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_QIANGGUAN_RESULT,this.showQiangOrBuQiangIcon,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_GAME_FIRST_ACTION,this.hideQiangOrBuQiangIcon,this)},e.prototype.removeListener=function(){this.removeEventListener(GameEvnts.NOTIFY_REMOTE_PLAYER,this.showReady,this),this.removeEventListener(GameEvnts.NOTIFY_PLAYER_ACTION,this.defaulReady,this),this.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.resetReady,this),this.removeEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.reLoadReady,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_PLAYER_LEAVE,this.removeReadIcon,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_QIANGGUAN_RESULT,this.showQiangOrBuQiangIcon,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_FIRST_ACTION,this.hideQiangOrBuQiangIcon,this)},e.prototype.hide=function(){},e.prototype.show=function(){},e.prototype.dispose=function(){if(this._readyIconArr){for(var t=0;3>t;t++)pdk.ResUtil.removeFromParent(this._readyIconArr[t]);this._readyIconArr=null}if(this._qiangOrBuQiangIconArr){for(var t=0;3>t;t++)pdk.ResUtil.removeFromParent(this._qiangOrBuQiangIconArr[t]);this._qiangOrBuQiangIconArr=null}this.removeListener()},e.prototype.showQiangOrBuQiangIcon=function(t){var e=t.data,i=UserInfoDO.getUserSeat(e.uid);1==e.op?this._qiangOrBuQiangIconArr[i-1].texture=RES.getRes("pdk_game_qiangguan_icon"):this._qiangOrBuQiangIconArr[i-1].texture=RES.getRes("pdk_game_buqiangguan_icon"),this._qiangOrBuQiangIconArr[i-1].visible=!0},e.prototype.hideQiangOrBuQiangIcon=function(){if(this._qiangOrBuQiangIconArr)for(var t=0;3>t;t++)this._qiangOrBuQiangIconArr[t].visible=!1},e.prototype.showReady=function(t){var e=!1,i=t.data;if(i.length){for(var n=new RoleInfoDO,s=0;s<i.length;s++)n.updata(i[s]),n.uid==UserInfoDO.actorInfo.uid&&(this._seatId=n.seatId);if(i.length<=UserInfoDO.roomInfo.totalPlayers){if(1==this._seatId)for(var s=0;s<i.length;s++){var o=n.seatId;e=1==n.bReady?!0:!1,o&&(this._readyIconArr[o-1].visible=e)}if(2==this._seatId)for(var s=0;s<i.length;s++){var n=new RoleInfoDO;n.updata(i[s]);var r=0;2==n.seatId&&(r=1),3==n.seatId&&(r=2),1==n.seatId&&(r=3),2==UserInfoDO.roomInfo.totalPlayers&&3==r&&(r=2),e=1==n.bReady?!0:!1,r&&(this._readyIconArr[r-1].visible=e)}if(3==this._seatId)for(var s=0;s<i.length;s++){var n=new RoleInfoDO;n.updata(i[s]);var r=0;3==n.seatId&&(r=1),1==n.seatId&&(r=2),2==n.seatId&&(r=3),2==UserInfoDO.roomInfo.totalPlayers&&3==r&&(r=2),e=1==n.bReady?!0:!1,r&&(this._readyIconArr[r-1].visible=e)}}}},e.prototype.defaulReady=function(t){var e=t.data;if(e){var i=e.opSeat,n=0;1==this._seatId&&i&&(pdk.MyUserInfo.getInstance().myHandsCards&&pdk.MyUserInfo.getInstance().myHandsCards.length>0?this._readyIconArr[i-1].visible=!1:this._readyIconArr[i-1].visible=!0),2==this._seatId&&(2==i&&(n=1),3==i&&(n=2),1==i&&(n=3),2==UserInfoDO.roomInfo.totalPlayers&&3==n&&(n=2),n&&(pdk.MyUserInfo.getInstance().myHandsCards&&pdk.MyUserInfo.getInstance().myHandsCards.length>0?this._readyIconArr[n-1].visible=!1:this._readyIconArr[n-1].visible=!0)),3==this._seatId&&(3==i&&(n=1),1==i&&(n=2),2==i&&(n=3),2==UserInfoDO.roomInfo.totalPlayers&&3==n&&(n=2),n&&(pdk.MyUserInfo.getInstance().myHandsCards&&pdk.MyUserInfo.getInstance().myHandsCards.length>0?this._readyIconArr[n-1].visible=!1:this._readyIconArr[n-1].visible=!0))}},e.prototype.resetReady=function(){for(var t=0;3>t;t++)this._readyIconArr[t].visible=!1},e.prototype.removeReadIcon=function(t){var e=t.data;console.error(e),console.error("removeReadIcon"),console.error("this._seatId"+this._seatId);var i=UserInfoDO.getUserSeat(e);if(console.error("seat"+i),null!=i){var n=i-this._seatId;console.error("befor+clientNum"+n),0>i-1&&(console.error(UserInfoDO.roomInfo.totalPlayers),n=n+UserInfoDO.roomInfo.totalPlayers-1),console.error("clientNum"+n),this._readyIconArr[n]&&(this._readyIconArr[n].visible=!1)}},e.prototype.reLoadReady=function(t){var e=t.data;e.handCardSet&&e.handCardSet.length>0&&this.resetReady()},e}(egret.DisplayObjectContainer);__reflect(SeatPlay.prototype,"SeatPlay",["IPanel"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var pdk;!function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=null),void 0===n&&(n=!0);var s=e.call(this)||this;return s.srcArr=t,s._label=i,s._autoDestory=n,s.initUI(),s.addEventListener(egret.Event.REMOVED_FROM_STAGE,s.onRemove,s),s}return __extends(i,e),i.prototype.onRemove=function(t){this._autoDestory&&this.destory()},i.prototype.initUI=function(){var e;e=this.srcArr[0],this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this._icon?this._icon.texture=t.ResUtil.createTexture(e):(this._icon=t.ResUtil.createBitmapByName(e),this.addChild(this._icon)),this._label&&(this._labelTxt=t.ResUtil.createTextFeild(16777215,egret.HorizontalAlign.CENTER,this._label,25,0,8,this._icon.width),this.addChild(this._labelTxt))},i.prototype.onTouchBegin=function(e){this._icon.texture=t.ResUtil.createTexture(this.srcArr[1]),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i.prototype.onTouchEnd=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._icon.texture=t.ResUtil.createTexture(this.srcArr[0])},i.prototype.addClickArea=function(t){this._area||(this._area=new egret.Sprite,this._area.touchEnabled=!0,this.addChild(this._area)),this._area.graphics.clear(),this._area.graphics.beginFill(16711680,0),this._area.graphics.drawRect(-t,-t,this._icon.width+2*t,this._icon.height+2*t),this._area.graphics.endFill()},i.prototype.destory=function(){this.touchEnabled=!1,egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.ResUtil.removeFromParent(this),t.ResUtil.removeAllChildren(this),this._area=null,this._icon=null,this._label=null,this._labelTxt=null},i}(egret.Sprite);t.GameButton=e,__reflect(e.prototype,"pdk.GameButton");var i=function(){function t(){}return t.setGreen=function(t){void 0===t&&(t=0),1==t&&(this.green="green_",this.greenFont=5284689,this.greenFanghao=5284689,this.resetFont=7337615)},t}();i.green="",i.greenFont=7055559,i.greenFanghao=7186632,i.resetFont=16774656,t.ColorConst=i,__reflect(i.prototype,"pdk.ColorConst")}(pdk||(pdk={}));var pdkui;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._source=null,t&&(i.source=t),i}return __extends(i,e),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this.parseSource())},enumerable:!0,configurable:!0}),i.prototype.parseSource=function(){var e=this._source;e&&"string"==typeof e?t.ResUtil.getAsset(this._source,this.contentChanged,this):this.$setBitmapData(e)},i.prototype.contentChanged=function(t,e){e===this._source&&egret.is(t,"egret.Texture")&&(this.$setBitmapData(t),t&&this.dispatchEventWith(egret.Event.COMPLETE))
},i}(egret.Bitmap);t.Image=e,__reflect(e.prototype,"pdkui.Image")}(pdkui||(pdkui={}));var OnlineLoadCmd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LOAD_OVER="loadOver",e.LOAD_PROGRESS="loadProgress",e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.lobbyStart=function(){if(uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),uniLib.Global.lobbyMode)uniLib.ResLoadMgr.instance.load("pdk_res",this.onResCompleteHandler,null,this,null);else{var t=[];t=["gameCommon","pdk_res"],RES.createGroup("preLoadAll",t),uniLib.ResLoadMgr.instance.load("preLoadAll",this.onResCompleteHandler,null,this,null)}},e.prototype.gameStart=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigHandler,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigHandler=function(t){uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigHandler,this);var e=[];e=["gameCommon","pdk_res"],RES.createGroup("PDKpreLoadAll",e),uniLib.ResLoadMgr.instance.load("PDKpreLoadAll",this.onResCompleteHandler,null,this,null)},e.prototype.onResCompleteHandler=function(t){this.overLoad()},e.prototype.onResErrorHandler=function(t){},e.prototype.onResProgressHandler=function(t){this.dispatchEvent(new egret.Event(this.LOAD_PROGRESS,!1,!1,t))},e.prototype.overLoad=function(){this.dispatchEvent(new egret.Event(this.LOAD_OVER))},e}(egret.EventDispatcher);__reflect(OnlineLoadCmd.prototype,"OnlineLoadCmd");var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.colorList=[65280,16753920,14423100],t.pingGradient=[300,600],t.init(),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return this._instance||(this._instance=new i),this._instance},enumerable:!0,configurable:!0}),i.clearInstance=function(){this._instance&&(this._instance=null)},i.prototype.init=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight,this.pingText||(this.pingText=uniLib.DisplayUtils.createTextLabel(65280,egret.HorizontalAlign.CENTER,"45ms",20,200,30)),this.addChild(this.pingText),egret.clearInterval(this.pingTimer),this.pingTimer=egret.setInterval(this.updatePing,this,1500)},i.prototype.updatePing=function(){this.pingText&&(this.pingText.text=(uniLib.Global.lastPing?uniLib.Global.lastPing:45)+"ms"),uniLib.Global.lastPing>this.pingGradient[1]?this.pingText.textColor=this.colorList[2]:uniLib.Global.lastPing>this.pingGradient[0]?this.pingText.textColor=this.colorList[1]:this.pingText.textColor=this.colorList[0]},i.prototype.setPingPos=function(t,e){this.pingText&&(this.pingText.x=t,this.pingText.y=e)},i.prototype.setpingGradient=function(t){if(t instanceof Array&&t.length==this.pingGradient.length)for(var e=t.length,i=0;e>i;i++)this.pingGradient[i]=t[i]},i.prototype.setPingTextColorList=function(t){if(t instanceof Array&&t.length==this.colorList.length)for(var e=t.length,i=0;e>i;i++)this.colorList[i]=t[i]},i.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),egret.clearInterval(this.pingTimer),t.ResUtil.removeFromParent(this),t.ResUtil.removeAllChildren(this),this.pingText=null,i.clearInstance()},i}(egret.Sprite);t.Ping=e,__reflect(e.prototype,"pdk.Ping")}(pdk||(pdk={}));var pdkui;!function(t){var e=function(){function t(){}return t.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();t.ResUtil=e,__reflect(e.prototype,"pdkui.ResUtil")}(pdkui||(pdkui={}));var pdk;!function(t){var e=function(t){function e(e,i,n,s){var o=t.call(this)||this;return o._textSize=20,o._textColor=9803157,o._strokeColor=5769877,o._textSelectColor=16777215,o.touchEnabled=!0,o.normalImage=new pdkui.Image(e),o.normalImage.fillMode=egret.BitmapFillMode.SCALE,o.addChild(o.normalImage),i&&(o.downImage=new pdkui.Image(i),o.downImage.fillMode=egret.BitmapFillMode.SCALE),o._text=n,""!=o._text&&(o._label=new egret.TextField,o._label.fontFamily="微软雅黑",o._label.text=n,o._label.size=20,o._label.width=o.width,o._label.textAlign=egret.HorizontalAlign.CENTER,o.addChild(o._label)),o.name=s,o}return __extends(e,t),e.prototype.updateSize=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=-1),-1!=t&&(this.width=t,this.normalImage.width=t,this.downImage&&(this.downImage.width=t)),-1!=e&&(this.height=e,this.normalImage.height=e,this.downImage&&(this.downImage.height=e)),this._label&&(this._label.width=this.width,this._label.y=(this.height-this._label.height)/2)},Object.defineProperty(e.prototype,"scale9Grid",{set:function(t){this.normalImage.scale9Grid=t,this.downImage&&(this.downImage.scale9Grid=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"select",{set:function(t){t?(this.downImage&&this.addChildAt(this.downImage,1),this._label&&this.setTextStatus(this._text,this._textSelectColor,this._strokeColor,this._textSize)):(this.downImage&&this.downImage.parent&&this.downImage.parent.removeChild(this.downImage),this._label&&this.setTextStatus(this._text,this._textColor,null,this._textSize))},enumerable:!0,configurable:!0}),e.prototype.setTextColor=function(t,e,i,n){this._textColor=t,this._strokeColor=i,this._textSelectColor=e,this._textSize=n},e.prototype.setTextStatus=function(t,e,i,n){void 0!=i||null!=i?this._label.textFlow=[{text:t,style:{textColor:e,size:n,strokeColor:i,stroke:1}}]:(this._label.text=t,this._label.textFlow=[{text:t,style:{textColor:e,size:n,strokeColor:i,stroke:0}}])},e}(egret.Sprite);t.ToggleButton=e,__reflect(e.prototype,"pdk.ToggleButton")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=new PDK_GpsPanelSkin,t.init(),t}return __extends(n,e),n.prototype.init=function(){this.addEvent(),this.resetPanel()},n.prototype.resetPanel=function(){this.dis_0_1.visible=this.dis_0_2.visible=this.dis_1_2.visible=!1,this.line_0_1.visible=this.line_0_2.visible=this.line_1_2.visible=!1},n.prototype.updateGps=function(){var t=UserInfoDO.roleCurrentList;t instanceof Array&&t.length>0&&this.setData(t)},n.prototype.getNearset=function(t){},n.prototype.setData=function(t){if(t&&t.length>0){for(var e=0;e<t.length;e++){var n=t[e];if(n.uid){var s=UserInfoDO.getUserSeat(n.uid)-1;if(s>=0){var o=new i(n);this["seat_"+s].addChild(o),o.horizontalCenter=0,o.top=0}}}2==t.length?this.addDisItem(t[0],t[1]):3==t.length&&(this.addDisItem(t[0],t[1]),this.addDisItem(t[1],t[2]),this.addDisItem(t[0],t[2]))}},n.prototype.addDisItem=function(t,e){var i=UserInfoDO.getUserSeat(t.uid)-1,n=UserInfoDO.getUserSeat(e.uid)-1;if(0/0!==i&&0/0!==n){var s=i>n?n+"_"+i:i+"_"+n;if(this["line_"+s].visible=!0,this["dis_"+s].visible=!0,t.lat&&e.lat){var o=Math.floor(this.getDistance(t.lat,t.lng,e.lat,e.lng));o>1e3?this["labe_"+s].text=Math.floor(o/1e3)+"km":this["labe_"+s].text=o+"m"}else this["labe_"+s].text="距离未知"}},n.prototype.getDistance=function(t,e,i,n){return uniLib.Utils.getDistance(t,e,i,n)},n.prototype.addEvent=function(){this._backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackHandler,this)},n.prototype.removeEvent=function(){this._backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackHandler,this)},n.prototype.onBackHandler=function(e){this.dispatchEvent(new egret.Event(t.UIEventConsts.CLOSE))},n.prototype.destory=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeAllChildren(this)},n}(eui.Component);t.DistancePanel=e,__reflect(e.prototype,"pdk.DistancePanel");var i=function(t){function e(e){var i=t.call(this)||this;return i.skinName=PDK_GpsItemSkin,i.init(e),i}return __extends(e,t),e.prototype.init=function(t){if(t.uid){var e="";e=t.headUrl?t.headUrl:"",this.headImg.source=e}t.address?(this.addressLabe.text=t.address,this.noAddressIcon.visible=!1):(this.addressLabe.text="未获取到位置信息",this.noAddressIcon.visible=!0)},e}(eui.ItemRenderer);t.DistanceItem=i,__reflect(i.prototype,"pdk.DistanceItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initUI=function(){this.touchEnabled=!0,this.touchChildren=!0;var e=t.ResUtil.createBitmapByName("game_common1");e.scale9Grid=new egret.Rectangle(152,130,64,31),e.width=1080,e.height=610,e.x=uniLib.Global.screenWidth-e.width>>1,e.y=uniLib.Global.screenHeight-e.height>>1,this.addChild(e),this._scroll=new egret.ScrollView,this._scroll.width=430,this._scroll.height=500,this._scroll.x=uniLib.Global.screenWidth/2-this._scroll.width,this._scroll.y=150,this.addChild(this._scroll),this._scroll.horizontalScrollPolicy="off",this._scroll.verticalScrollPolicy="on";var i=t.ResUtil.createBitmapByName("help_bamboo");i.x=e.x+28,i.y=e.y+20,this.addChild(i);var n=t.ResUtil.createBitmapByName("help_bamboo");n.scaleX=-1,n.x=e.x+e.width-32,n.y=e.y+20,this.addChild(n);var s=t.ResUtil.createBitmapByName("help_line");s.x=e.x+(e.width-s.width)/2,s.y=150,s.height=500,this.addChild(s),this._closeBtn=new eui.Button,this._closeBtn.skinName=new PDK_CloseButtonSkin,this._closeBtn.width=140,this._closeBtn.height=85,this._closeBtn.x=e.x+e.width-this._closeBtn.width,this._closeBtn.y=e.y,this.addChild(this._closeBtn),this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandle,this);var o=t.ResUtil.createBitmapByName("help_txt2");o.x=270,o.y=70,this.addChild(o);var r=t.ResUtil.createBitmapByName("help_txt1");r.x=770,r.y=70,this.addChild(r),this._txt_left=t.ResUtil.createTextFeild(402982,egret.HorizontalAlign.LEFT,"",24,0,20,430),this._txt_left.lineSpacing=6;var a="";RES.hasRes("help_206_txt")&&(a=RES.getRes("help_206_txt")),this._txt_left.textFlow=(new egret.HtmlTextParser).parser(a),this.addChild(this._txt_left),this._scroll.setContent(this._txt_left),this._txt_right=t.ResUtil.createTextFeild(12734997,egret.HorizontalAlign.CENTER,"",30,uniLib.Global.screenWidth/2+10,180,430),this._txt_right.height=300,this._txt_right.verticalAlign=egret.VerticalAlign.MIDDLE,this._txt_right.lineSpacing=6,this._txt_right.textFlow=(new egret.HtmlTextParser).parser(a),this.addChild(this._txt_right);var h=UserInfoDO.roomInfo.totalPlayers.toString()+"<font>人房 \n</font>",d=UserInfoDO.roomInfo.getPlayTypeByList();if(d.length<=0)return void(this._txt_right.textFlow=(new egret.HtmlTextParser).parser("房主什么都没选择,你们随意"));for(var l=0;l<d.length;l++)h=h+d[l]+"  ";this._txt_right.textFlow=(new egret.HtmlTextParser).parser(h)},i.prototype.destory=function(){e.prototype.destory.call(this),this._closeBtn&&this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandle,this),this._closeBtn=null,this._scroll&&this._scroll.removeChildren(),this._scroll=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.closeHandle=function(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_PANEL))},i}(t.BaseVc);t.gameHelpPanel=e,__reflect(e.prototype,"pdk.gameHelpPanel")}(pdk||(pdk={}));var IconPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isCancel=!1,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.IconPanel=function(){if(this._ins)throw new Error("Sington已经创建!")},e.prototype.init=function(){this.create()},e.prototype.create=function(){this.touchChildren=!0,this.touchEnabled=!0,this.numChildren>0&&DisplayUtil.removeAllChildren(this),this._chat||(this._chat=new egret.Sprite,this.addChild(this._chat)),this._help||(this._help=new egret.Sprite,this.addChild(this._help)),this._voice||(this._voice=new egret.Sprite,this.addChild(this._voice)),this._setting||(this._setting=new egret.Sprite,this.addChild(this._setting)),this.createDef(this._help,"game_help",uniLib.Global.screenWidth-180,10),this.createDef(this._setting,"game_NDsetting",uniLib.Global.screenWidth-80,10),this.createDef(this._chat,"game_NDchat",uniLib.Global.screenWidth-80,470),this.createDef(this._voice,"game_NDvoice_btn",uniLib.Global.screenWidth-80,570),this._recording=new pdk.RecordingMc,this.addChild(this._recording),this._recording.x=(uniLib.Global.screenWidth-this._recording.width)/2,this._recording.y=(uniLib.Global.screenHeight-this._recording.height)/2,this._recording.addEventListener(pdk.UIEventConsts.RECORD_TIME_OUT,this.recordEvent,this),this._voiceArr=[],this.addListener(),this._gpsBtn=new pdk.GameButton(["gps_2","gps_2"]),this._gpsBtn.touchEnabled=!0,this._gpsBtn.x=10,this._gpsBtn.y=10,this._gpsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGps,this),this.addChild(this._gpsBtn),this._host||(this._host=new pdk.GameButton(["game_NDoperate_host1","game_NDoperate_host2"]),this._host.x=this._help.x-this._host.width-50,this._host.y=this._help.y,this._host.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHostHandle,this),this.addChild(this._host),this._host.visible=!1)},e.prototype.addListener=function(){this.addEventListener(pdk.UIEventConsts.SEND_RECORD,this.uiEventHandle,this),GameEvnts.ins.addEventListener(GameEvnts.VOICE_NOTICE,this.onVoiceNotice,this)},e.prototype.removeListener=function(){this.removeEventListener(pdk.UIEventConsts.SEND_RECORD,this.uiEventHandle,this),GameEvnts.ins.removeEventListener(GameEvnts.VOICE_NOTICE,this.onVoiceNotice,this)},e.prototype.onHostHandle=function(){if(UserInfoDO.actorInfo){var t=new Cmd.Pdk_ReqHostCmd_C;t.hostType=1==UserInfoDO.actorInfo.hostType?0:1,uniLib.NetMgr.tcpSend(t)}},e.prototype.onVoiceNotice=function(t){this.showVoice(t.data)},e.prototype.uiEventHandle=function(t){var e=t.data,i=new Cmd.VoiceChat_C;i.url=e.url,i.time=e.time.toString(),i.words=e.text,ReqManager.ins.OnVoiceChat_C(i)},e.prototype.recordEvent=function(t){this.stopRecord()},e.prototype.createDef=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0);var s=DomainUtil.getBitmap(e+"1");t||(t=new egret.Sprite,this.addChild(t)),s.smoothing=!0,t.addChild(s),t.x=i,t.y=n,t.touchEnabled=!0,t.name=e,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsTouchBeginHandler,this),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTouchTapHandler,this)},e.prototype.onTipsTouchBeginHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap(e.name+"2");i.smoothing=!0,e.addChild(i),"game_NDvoice_btn"==e.name&&this.startRecord(t)},e.prototype.startRecord=function(t){var e=new Date;return e.getTime()-this._recording.startTime<3e3?void pdk.PublicManageTips.getInstance().showMildWarnShow("操作速度过快,请稍后再试"):(this._isCancel=!1,this._curPosY=t.localY,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this),this.stopSound(),uniLib.ZQGameSdk.startRecord(),void this._recording.startTimer())},e.prototype.checkCancel=function(t){t.localY>this._curPosY+20&&(this._isCancel=!0,egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this),this.resumeSound(),uniLib.ZQGameSdk.stopRecord(),this._recording.stopTimer())},e.prototype.stopRecord=function(t){void 0===t&&(t=null),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopRecord,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.checkCancel,this);var e=this._recording.stopTimer();if(1e3>e){var i=this;setTimeout(function(){i.resumeSound(),uniLib.ZQGameSdk.stopRecord()},1e3)}else uniLib.ZQGameSdk.stopRecord(this.onRecordBack,this)},e.prototype.showVoice=function(t){var e=UserInfoDO.getUserSeat(t.uid)-1;if(null!=e&&0/0!=e){var i=pdk.PositionData.seatPosArr[e];if(null!=i){this._voiceArr[e]||(this._voiceArr[e]=new pdk.VoiceMc,0==e||2==e?this._voiceArr[e].x=i.x+100:(this._voiceArr[e].scaleX=-1,this._voiceArr[e].x=i.x-76,this._voiceArr[e].flip()),this._voiceArr[e].y=i.y+25,pdk.GameInfo.topLayer.addChildAt(this._voiceArr[e],0));var n=new pdk.VoiceDataVo;n.time=Number(t.time),n.url=t.url,n.uid=t.uid,this._voiceArr[e].setData(n),(1==e||2==e)&&(this._voiceArr[e].x=i.x-11)}}},e.prototype.onRecordBack=function(t){var e=this,i=t.data;if(0==t.code){var n=new pdk.VoiceDataVo;n.url=i.voiceUrl,n.time=Math.round(i.voiceDuration/1e3),n.nickName=UserInfoDO.actorInfo.uid.toString(),n.text=i.text,n.status=0,isNaN(n.time)?pdk.GameInfo.manage.showMildWarnShow("语音发送失败"):0==this._isCancel&&this.dispatchEventWith(pdk.UIEventConsts.SEND_RECORD,!1,n)}else pdk.GameInfo.manage.showMildWarnShow(t.errMsg);isNaN(i.voiceDuration)?setTimeout(function(){e.resumeSound()},1e3):setTimeout(function(){e.resumeSound()},i.voiceDuration)},e.prototype.stopSound=function(){this._soundValue=uniLib.SoundMgr.instance.soundOpen,uniLib.SoundMgr.instance.soundOpen=!1,uniLib.SoundMgr.instance.pauseBgMusic()},e.prototype.resumeSound=function(){uniLib.SoundMgr.instance.soundOpen=this._soundValue,uniLib.SoundMgr.instance.resumeBgMusic()},e.prototype.onTipsTouchTapHandler=function(t){var e=t.currentTarget;DisplayUtil.removeAllChildren(t.currentTarget);var i=DomainUtil.getBitmap(e.name+"1");i.smoothing=!0,e.addChild(i),"game_NDsetting"==e.name&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_PANEL,!1,!1,"setting")),"game_help"==e.name&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_PANEL,!1,!1,"help")),"game_NDchat"==e.name&&GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_PANEL,!1,!1,"chat"))},e.prototype.showGps=function(t){GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_SHOW_GPS))},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._recording&&(this._recording.removeEventListener(pdk.UIEventConsts.RECORD_TIME_OUT,this.recordEvent,this),this._recording.destory()),this._recording=null,this._host&&(this._host.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHostHandle,this),DisplayUtil.removeAllChildren(this._host),DisplayUtil.removeFromParent(this._host)),this._host=null,this._chat&&(this._chat.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsTouchBeginHandler,this),this._chat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTouchTapHandler,this),DisplayUtil.removeAllChildren(this._chat),DisplayUtil.removeFromParent(this._chat)),this._chat=null,this._help&&(this._help.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsTouchBeginHandler,this),this._help.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTouchTapHandler,this),DisplayUtil.removeAllChildren(this._help),DisplayUtil.removeFromParent(this._help)),this._help=null,this._voice&&(this._voice.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsTouchBeginHandler,this),this._voice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTouchTapHandler,this),DisplayUtil.removeAllChildren(this._voice),DisplayUtil.removeFromParent(this._voice)),this._voice=null,this._setting&&(this._setting.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTipsTouchBeginHandler,this),this._setting.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipsTouchTapHandler,this),DisplayUtil.removeAllChildren(this._setting),DisplayUtil.removeFromParent(this._setting)),this._setting=null,this._gpsBtn&&(this._gpsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showGps,this),DisplayUtil.removeAllChildren(this._gpsBtn),DisplayUtil.removeFromParent(this._gpsBtn)),this._gpsBtn=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(IconPanel.prototype,"IconPanel",["IPanel"]);var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._startTime=0,t._ifFlip=!1,t}return __extends(i,e),i.prototype.initUI=function(){this._bg&&DisplayUtil.removeFromParent(this._bg),this._bg=null,this._bg=t.ResUtil.createBitmapByName("voice_paopao"),this._bg.scale9Grid=new egret.Rectangle(50,10,30,20),this.addChild(this._bg),this._soundIcon&&DisplayUtil.removeFromParent(this._soundIcon),this._soundIcon=null,this._soundIcon=t.ResUtil.createBitmapByName("voice_icon",24,11),this.addChild(this._soundIcon),this._timeTxt&&DisplayUtil.removeFromParent(this._timeTxt),this._timeTxt=null,this._timeTxt=t.ResUtil.createTextFeild(16777215,egret.HorizontalAlign.RIGHT,"",18,48,13,50),this.addChild(this._timeTxt)},i.prototype.onTimer=function(t){this._soundIcon.visible=!this._soundIcon.visible;var e=new Date,i=e.getTime(),n=Math.floor((i-this._startTime)/1e3);n>=this._soundTime&&this.stopTimer()},i.prototype.stopTimer=function(){this._soundIcon.visible=!0,this.visible=!1,this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.stop(),this._timer=null)},i.prototype.flip=function(){this._ifFlip=!0,this._timeTxt.skewY=180,this._timeTxt.textAlign=egret.HorizontalAlign.LEFT},i.prototype.setData=function(t){t.uid!=UserInfoDO.actorInfo.uid&&uniLib.ZQGameSdk.playRecord(t.url,this.playEndBack,this),t.time?this._timeTxt.text=t.time+"''":this._timeTxt.text="",this._soundTime=t.time?t.time:10,t.time<=3?this._bg.width=100:this._bg.width=100+5*(t.time-3),this._ifFlip?this._timeTxt.x=this._bg.width-12:this._timeTxt.x=this._bg.width-60,this.stopTimer(),this.visible=!0,this._timer=new egret.Timer(200),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start();var e=new Date;this._startTime=e.getTime()},i.prototype.playEndBack=function(t){this.stopTimer()},i.prototype.destory=function(){this.stopTimer(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._bg=null,this._soundIcon=null},i}(t.BaseVc);t.VoiceMc=e,__reflect(e.prototype,"pdk.VoiceMc");var i=function(e){function i(){var t=e.call(this)||this;return t._maxTime=15,t._msTime=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"startTime",{get:function(){return this._startTime},enumerable:!0,configurable:!0}),i.prototype.initUI=function(){var e=t.ResUtil.createBitmapByName("voice_recording");this.addChild(e),this._moving=new egret.DisplayObjectContainer,this._moving.x=104,this._moving.y=102;var i=t.ResUtil.createBitmapByName("voiceloading");i.x=-i.width/2,i.y=-i.height/2,this._moving.addChild(i),this.addChild(this._moving),this._time=t.ResUtil.createTextFeild(13031390,egret.HorizontalAlign.CENTER,"8''",22,74,136,75),this.addChild(this._time),this.visible=!1},i.prototype.startTimer=function(){this.stopTimer(),this.visible=!0,this._startTimer=new egret.Timer(50,0);var t=new Date;this._startTime=t.getTime(),this._startTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._startTimer.start()},i.prototype.stopTimer=function(){return this.visible=!1,this._startTimer&&(this._startTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._startTimer.stop(),this._startTimer=null),this._msTime},i.prototype.onTimer=function(e){var i=new Date,n=i.getTime(),s=Math.floor((n-this._startTime)/1e3);this._time.text=s+1+"''",this._moving.rotation+=15,s>=this._maxTime&&this.dispatchEventWith(t.UIEventConsts.RECORD_TIME_OUT),this._msTime=n-this._startTime},i.prototype.dispose=function(){this.stopTimer(),this._moving&&(uniLib.DisplayUtils.removeAllChildren(this._moving),uniLib.DisplayUtils.removeFromParent(this._moving)),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._moving=null,this._time=null},i}(t.BaseVc);t.RecordingMc=i,__reflect(i.prototype,"pdk.RecordingMc")}(pdk||(pdk={}));var Cmd;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserBaseInfo"},t}();t.UserBaseInfo=e,__reflect(e.prototype,"Cmd.UserBaseInfo");var i=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserInfoGetLbyCmd_C"},t}();t.UserInfoGetLbyCmd_C=i,__reflect(i.prototype,"Cmd.UserInfoGetLbyCmd_C");var n=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserInfoGetLbyCmd_S"},t}();t.UserInfoGetLbyCmd_S=n,__reflect(n.prototype,"Cmd.UserInfoGetLbyCmd_S");var s=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.LeaveMahjongCmd_C"},t}();t.LeaveMahjongCmd_C=s,__reflect(s.prototype,"Cmd.LeaveMahjongCmd_C");var o=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.LeaveMahjongCmd_S"},t}();t.LeaveMahjongCmd_S=o,__reflect(o.prototype,"Cmd.LeaveMahjongCmd_S");var r=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RewardObj"},t}();t.RewardObj=r,__reflect(r.prototype,"Cmd.RewardObj")}(Cmd||(Cmd={}));var pdk;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initUI=function(){var e=t.ResUtil.createBitmapByName("setting_checkbg");this.addChild(e),this._checkIcon=t.ResUtil.createBitmapByName("setting_check",16,16),this.addChild(this._checkIcon),this.check=!1},Object.defineProperty(i.prototype,"check",{set:function(t){this._check=t,this._checkIcon.visible=t},enumerable:!0,configurable:!0}),i.prototype.destory=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._checkIcon=null},i}(t.BaseVc);t.CheckMc=e,__reflect(e.prototype,"pdk.CheckMc")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.destory=function(){this._dice&&(this._dice.animation.stop(),this._dice.hasEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT)&&this._dice.removeEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this._dice.hasEventListener(dragonBones.AnimationEvent.COMPLETE)&&this._dice.removeEventListener(dragonBones.AnimationEvent.COMPLETE,this.animation_event,this),dragonBones.WorldClock.clock.remove(this._dice),uniLib.DisplayUtils.destoryDragonBonesArmature(this._dice,"shaizi"),this._dice.display&&t.ResUtil.removeFromParent(this._dice.display),this._dice=null),this._timerOutId&&(egret.clearTimeout(this._timerOutId),this._timerOutId=0),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._index=null},i.prototype.onStartThrow=function(){this._dice||(this._dice=uniLib.DisplayUtils.createDragonBonesDisplay("dice_drag_json","dice_json","dice_png","MovieClip"),this._dice.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this._dice.addEventListener(dragonBones.AnimationEvent.COMPLETE,this.animation_event,this),dragonBones.WorldClock.clock.add(this._dice)),this._dice.display.y=t.DataCache.defaultHeight/2-120,this._dice.display.x=t.DataCache.defaultWidth/2+22,this.addChild(this._dice.display),this.play()},i.prototype.play=function(){dragonBones.WorldClock.clock.contains(this._dice)||dragonBones.WorldClock.clock.add(this._dice),this._dice.animation.gotoAndPlay("shaizi",0,-1,1)},i.prototype.frame_event=function(t){if("DiceChange"==t.frameLabel){this._dice.getSlot("mohu_04"),this._dice.getSlot("mohu_02")}},i.prototype.animation_event=function(e){var i=this;this._index++,this._index>=1?this._timerOutId=egret.setTimeout(function(){t.ResUtil.removeFromParent(i._dice.display)},this,1e3):this._timerOutId=egret.setTimeout(function(){i.play()},this,1e3)},i}(egret.DisplayObjectContainer);t.DiceMc=e,__reflect(e.prototype,"pdk.DiceMc")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this,0)||this;return t._colorArr=[11199223,11199223,11199223],t._dissGame=0,t.initPanel(),t}return __extends(i,e),i.prototype.initPanel=function(){this.touchEnabled=!0;var e=new eui.Image;e.source="game_common2",e.width=630,e.height=550,e.y=-10,this.addChild(e),this.yesBtn=new t.GameButton(["game_common_sure","game_common_sure"]),this.yesBtn.x=36,this.yesBtn.y=410,this.addChild(this.yesBtn),this.yesBtn.visible=!0,this.noBtn=new t.GameButton(["game_common_cancel","game_common_cancel"]),this.noBtn.x=346,this.noBtn.y=410,this.addChild(this.noBtn),this.noBtn.visible=!0,this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgreeHandler,this),this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefuse,this),this.info=t.ResUtil.createTextFeild(11199223,egret.HorizontalAlign.LEFT,"",28,50,75,500),this.info.lineSpacing=10,this.addChild(this.info);for(var i=0;4>i;i++)this["_userName"+i]=t.ResUtil.createTextFeild(11199223,egret.HorizontalAlign.LEFT,"",32,137,206+60*i,160),this.addChild(this["_userName"+i]),this["_status"+i]=t.ResUtil.createTextFeild(11199223,egret.HorizontalAlign.CENTER,"",32,323,206+60*i,160),this.addChild(this["_status"+i]);this._timeTxt=t.ResUtil.createTextFeild(11199223,egret.HorizontalAlign.RIGHT,"",25,540,20,50),this.addChild(this._timeTxt)},i.prototype.stopTimer=function(){this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this._timer.stop(),this._timer=null)},i.prototype.timerHandle=function(t){var e=new Date,i=e.getTime(),n=this._totalTime-(i-this._startTime)/1e3;n>0&&(this._timeTxt.text=Math.floor(this._totalTime-(i-this._startTime)/1e3).toString())},i.prototype.setData=function(e){if(this._dissGame=1,e.waitTime){this._dissGame=0,this._totalTime=e.waitTime,this.stopTimer();var i=new Date;this._startTime=i.getTime(),this._timer=new egret.Timer(200,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this._timer.start(),this._timeTxt.text=this._totalTime.toString()}var n=UserInfoDO.getUserVoByUid(e.uid);if(n){var s=t.DataCache.langObj.uiTxt.DismissPanel.info,o=s.split("#"),r=n.nickName.substr(0,10);if(5113==t.DataCache.gameId&&(o[1]="\n申请解散房间请问是否同意(超过1分钟未做选择,则默认同意)？"),e.waitTime)var a=o[0]+r+o[1];else var a;this.info.text=a}var h=UserInfoDO.roleCurrentList;this._userList=[];for(var d=0,l=0;l<h.length;l++)if(h[l]){var c=h[l].nickName;c.length>5&&(c=c.substr(0,5)),this["_userName"+d].text=c,this["_status"+d].text=t.DataCache.langObj.uiTxt.DismissPanel.status0,this["_status"+d].textColor=this._colorArr[0],this._userList.push(h[l].uid),h[l].uid==e.uid&&(this["_status"+d].textColor=this._colorArr[1],this["_status"+d].text=t.DataCache.langObj.uiTxt.DismissPanel.status1),d++}e.uid==uniLib.UserInfo.uid&&this.enableBtns()},i.prototype.enableBtns=function(){this.yesBtn&&(this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgreeHandler,this),this.yesBtn.visible=!1),this.noBtn&&(this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefuse,this),this.noBtn.visible=!1)},i.prototype.updateStatus=function(e,i){0==e&&(e=2);var n=this._userList.indexOf(i);n>=0&&(this["_status"+n].text=t.DataCache.langObj.uiTxt.DismissPanel["status"+e],this["_status"+n].textColor=this._colorArr[e])},i.prototype.onAgreeHandler=function(e){0==this._dissGame&&this.dispatchEventWith(t.UIEventConsts.DISMISS_BACK,!1,1)},i.prototype.onRefuse=function(e){0==this._dissGame&&this.dispatchEventWith(t.UIEventConsts.DISMISS_BACK,!1,0)},i.prototype.destory=function(){this.enableBtns(),this.yesBtn&&this.yesBtn.destory(),this.yesBtn=null,this.noBtn&&this.noBtn.destory(),this.noBtn=null,this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this._timer.stop()),this._timer=null,this.info=null,this._timeTxt=null,this._userList=null,e.prototype.destory.call(this)},i}(t.BasePanel);t.DismissPanel=e,__reflect(e.prototype,"pdk.DismissPanel")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._noticeArr=[],t}return __extends(i,e),i.prototype.initUI=function(){this._buffer=30;var e=t.ResUtil.createBitmapByName("mjl_lobby_systembg");e.scale9Grid=new egret.Rectangle(75,20,20,20),e.width=924,this._txtWidth=828,this.addChild(e),this._msgTxt=t.ResUtil.createTextFeild(16777215,egret.HorizontalAlign.LEFT,"系统公告",32,55,16),this._msgTxt.multiline=!1,uniLib.Global.addEventListener(uniLib.ZqEvent.CHAT_GM,this.onNoticeCome,this),uniLib.Global.addEventListener(uniLib.ZqEvent.CHAT_HORN,this.onNoticeCome,this),uniLib.Global.addEventListener(uniLib.ZqEvent.CHAT_SYSTEM,this.onNoticeCome,this),uniLib.Global.addEventListener(uniLib.ZqEvent.CHAT_IMPORTANT,this.onNoticeCome,this),this._txtMc=new egret.DisplayObjectContainer,this._txtMc.addChild(this._msgTxt),this._txtMc.x=75,this.addChild(this._txtMc),this._txtMc.scrollRect=new egret.Rectangle(0,0,this._txtWidth,e.height),this.visible=!1
},i.prototype.startScroll=function(){this.visible=!0,egret.Tween.removeTweens(this._msgTxt),this._msgTxt.x=this._txtWidth+this._buffer;var t=this._msgTxt.textWidth<this._txtWidth?this._txtWidth:this._msgTxt.textWidth;egret.Tween.get(this._msgTxt).to({x:-(this._msgTxt.textWidth+this._buffer)},20*(t+this._buffer)).call(this.scrollEnd,this)},i.prototype.scrollEnd=function(){egret.Tween.removeTweens(this._msgTxt),this.visible=!1},i.prototype.onNoticeCome=function(t){var e=t.param;null==this._noticeArr&&(this._noticeArr=[]),this._noticeArr.push(e.info),this._msgTxt.text=this._noticeArr.shift(),this.startScroll()},i.prototype.destory=function(){e.prototype.destory.call(this),this.scrollEnd(),this._txtMc&&(uniLib.DisplayUtils.removeAllChildren(this._txtMc),uniLib.DisplayUtils.removeFromParent(this._txtMc)),this._txtMc=null,this._msgTxt=null,this._noticeArr=null},i}(t.BaseVc);t.GameSysMsg=e,__reflect(e.prototype,"pdk.GameSysMsg")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.index=0,t}return __extends(i,e),i.prototype.initUI=function(){},Object.defineProperty(i.prototype,"giftId",{set:function(t){this._giftId=t,this._effectMc||(this._effectMc=uniLib.DisplayUtils.createDragonBonesDisplay("gift_effect_drag_json","gift_effect_json","gift_effect_png","MovieClip"),dragonBones.WorldClock.clock.add(this._effectMc),this._effectMc.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onAnimationEvent,this)),this._effectMc.animation.gotoAndStopByFrame("gift"+this._giftId,0),this.addChild(this._effectMc.display)},enumerable:!0,configurable:!0}),i.prototype.onAnimationEvent=function(){if(this.index++,4!=this._giftId&&3!=this._giftId){if(2==this.index){if(!this._effectMc)return;this._effectMc.animation.stop("gift"+this._giftId),this.destory(),this.index=0}}else if(1==this.index){if(!this._effectMc)return;this._effectMc.animation.stop("gift"+this._giftId),this.destory(),this.index=0}},i.prototype.play=function(){if(null!=this._effectMc){dragonBones.WorldClock.clock.contains(this._effectMc)||dragonBones.WorldClock.clock.add(this._effectMc),4!=this._giftId&&3!=this._giftId?this._effectMc.animation.play("gift"+this._giftId):this._effectMc.animation.play("gift"+this._giftId);var e=t.TableCard.resSoundGift(this._giftId);""!=e&&uniLib.SoundMgr.instance.playSound(e)}},i.prototype.destory=function(){this._effectMc&&(this._effectMc.animation.stop(),this._effectMc.removeEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onAnimationEvent,this),uniLib.DisplayUtils.destoryDragonBonesArmature(this._effectMc,"gift"+this._giftId),this._effectMc.display&&this.removeChild(this._effectMc.display)),this._effectMc=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(t.BaseVc);t.GiftAnItem=e,__reflect(e.prototype,"pdk.GiftAnItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(i,n){var s=e.call(this)||this;return s._width=i,s._height=n,s._headMc=t.ResUtil.createBitmapByName("defaultHead"),s._headMc.width=s._width,s._headMc.height=s._height,s.addChild(s._headMc),s}return __extends(i,e),i.prototype.destory=function(){t.ResUtil.removeAllChildren(this),t.ResUtil.removeFromParent(this),this._headLoad&&(this._headLoad.destroy(),this._headLoad=null),this._headMc=null},Object.defineProperty(i.prototype,"headUrl",{set:function(e){this._headUrl&&this._headUrl==e||(this._headUrl=e,this._headMc.texture=t.ResUtil.createTexture("defaultHead"),this._headLoad||(this._headLoad=new HeadLoader),this._headLoad.load(this._headUrl,this.loaded,null,this))},enumerable:!0,configurable:!0}),i.prototype.loaded=function(t){this._headMc?this._headMc.bitmapData=t:(this._headMc=new egret.Bitmap(t),this.addChild(this._headMc))},i}(egret.Sprite);t.HeadMc=e,__reflect(e.prototype,"pdk.HeadMc")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._step=.1,t._barPosArr=[new egret.Point(38,120),new egret.Point(120,36),new egret.Point(38,7),new egret.Point(8,36)],t._lightPosArr=[new egret.Point(17,85),new egret.Point(87,18),new egret.Point(18,16),new egret.Point(16,17)],t._dirPosArr=[new egret.Point(68,104),new egret.Point(106,66),new egret.Point(68,29),new egret.Point(29,66)],t}return __extends(i,e),i.prototype.initLight=function(e){this._seatId=e,this._highBar||(this._highBar=t.ResUtil.createBitmapByName("count_bar"+(e+1)),this.addChild(this._highBar)),this._highBar.x=this._barPosArr[e].x,this._highBar.y=this._barPosArr[e].y,this._highLight||(this._highLight=t.ResUtil.createBitmapByName("count_light"+(e+1)),this.addChild(this._highLight)),this._highLight.x=this._lightPosArr[e].x,this._highLight.y=this._lightPosArr[e].y,this._highLight.visible=!1,this._highBar.visible=!1},i.prototype.setDir=function(e){this._grayDirIcon?this._grayDirIcon.texture=t.ResUtil.createTexture("count_direction"+e+"1"):(this._grayDirIcon=t.ResUtil.createBitmapByName("count_direction"+e+"1"),this.addChild(this._grayDirIcon)),this._grayDirIcon.x=this._dirPosArr[this._seatId].x-Math.round(this._grayDirIcon.width/2),this._grayDirIcon.y=this._dirPosArr[this._seatId].y-Math.round(this._grayDirIcon.height/2),this._lightDirIcon?this._lightDirIcon.texture=t.ResUtil.createTexture("count_direction"+e+"2"):(this._lightDirIcon=t.ResUtil.createBitmapByName("count_direction"+e+"2"),this.addChild(this._lightDirIcon)),this._lightDirIcon.x=this._grayDirIcon.x,this._lightDirIcon.y=this._grayDirIcon.y,this._lightDirIcon.visible=!1},i.prototype.flash=function(t){void 0===t&&(t=0),this.stopTimer(),this._highLight.visible=!0,this._highBar.visible=!0,this._lightDirIcon.visible=!0,this._highLight.alpha=1,1!=t&&(this._timer=new egret.Timer(40,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start())},i.prototype.onTimer=function(t){this._highLight.alpha>=1?this._step=-Math.abs(this._step):this._highLight.alpha<=0&&(this._step=Math.abs(this._step)),this._highLight.alpha+=this._step},i.prototype.stopTimer=function(){this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer=null)},i.prototype.stop=function(){this._highLight.visible=!1,this._highBar.visible=!1,this._lightDirIcon.visible=!1,this.stopTimer()},i.prototype.destory=function(){this.stopTimer(),this._grayDirIcon=null,this._lightDirIcon=null,this._highBar=null,this._highLight=null},i}(t.BaseVc);t.HighLightItem=e,__reflect(e.prototype,"pdk.HighLightItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this._bg=t.ResUtil.createBitmapByName("tipsBg"),this._bg.width=1.2*this._bg.width,this._bg.height=1.2*this._bg.height,this.addChild(this._bg),this._text=t.ResUtil.createTextFeild(16777215,egret.HorizontalAlign.CENTER,"",30,88,10,786),this._text.multiline=!0,this.addChild(this._text)},i.prototype.setText=function(e){e&&(this._text.text=e,this._bg.height=2*this._text.textHeight,this.x=Math.round((uniLib.Global.screenWidth-this.width)/2),this._bg.x=(this.width-this._bg.width)/2,this.y=t.DataCache.defaultHeight,egret.Tween.get(this).to({y:Math.round((t.DataCache.defaultHeight-this.height)/2)-60},500,egret.Ease.circOut).call(this.showDelay,this))},i.prototype.showDelay=function(){egret.Tween.get(this).wait(2e3).to({y:-this.height},500,egret.Ease.circOut).call(this.destory,this)},i.prototype.destory=function(){egret.Tween.removeTweens(this),t.ResUtil.removeAllChildren(this),t.ResUtil.removeFromParent(this),this._bg=null,this._text=null},i}(egret.Sprite);t.MildAlertVC=e,__reflect(e.prototype,"pdk.MildAlertVC")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(t,n,s,o,r){void 0===s&&(s=i.LEFT),void 0===o&&(o=null),void 0===r&&(r=!0);var a=e.call(this)||this;return a._defaultAsstes="num",a._spacing=-1,a._width=t,a._height=n,a._align=s,a._hideZero=r,o&&(a._defaultAsstes=o),a.init(),a}return __extends(i,e),i.prototype.init=function(){this._numMc=new egret.Sprite,this.addChild(this._numMc)},Object.defineProperty(i.prototype,"spacing",{set:function(t){this._spacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){if(this._value=e,this.clear(),0!=e||!this._hideZero){for(var n,s,o=t.ResUtil.currencyFormat(e),r=0;r<o.length&&(s=o.charAt(r),","==s&&(s="10"),n=t.ResUtil.createBitmapByName(this._defaultAsstes+s),!(this._numMc.width+n.width>this._width));r++)"10"==s&&"num"==this._defaultAsstes&&(n.y=12),n.x=this._numMc.width>0?this._numMc.width+this._spacing:this._numMc.width,this._numMc.addChild(n);switch(this._align){case i.LEFT:this._numMc.x=0;break;case i.MIDDLE:this._numMc.x=Math.round((this._width-this._numMc.width)/2);break;case i.RIGHT:this._numMc.x=this._width-this._numMc.width}}},enumerable:!0,configurable:!0}),i.prototype.clear=function(){for(var t=this._numMc.numChildren,e=0;t>e;e++)this._numMc.removeChildAt(0)},i.prototype.getNumblerF=function(t){var e=1;return e=","==t?12:Number(t)+1},i.prototype.destory=function(){this._numMc.parent.removeChild(this._numMc),this._numMc=null,this.clear(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(egret.Sprite);e.LEFT=1,e.MIDDLE=2,e.RIGHT=3,t.NumBitmapFormat=e,__reflect(e.prototype,"pdk.NumBitmapFormat")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=new PDK_TotalRecordSkin,t.width=uniLib.Global.screenWidth,t.list.itemRenderer=i,t.addListener(),t}return __extends(n,e),n.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.destory=function(){this.removeListener()},n.prototype.onClickTap=function(e){e.target==this.closeButton?this.dispatchEventWith(t.UIEventConsts.EXIT_GAME):e.target==this.shareButton?this.share():e.target==this._againBtn&&this.oneMoreAgain()},n.prototype.share=function(){var e=new uniLib.WXShareVo;e.shareWay=0;var i=1;uniLib.Utils.isIOS()&&(i=.6);var n=new egret.Bitmap(uniLib.DisplayUtils.catchScreenToTex(this,new egret.Rectangle(0,0,this.width,this.height),i));e.shareImageData=uniLib.DisplayUtils.catchScreen(n,new egret.Rectangle(0,0,this.width,this.height)),e.title="跑得快";var s=[5113,5241,5242];s=[],-1!=s.indexOf(t.DataCache.gameId)?uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,e,!1):uniLib.ZQGameSdk.share(e,null,this)},n.prototype.oneMoreAgain=function(){this.parent.removeChild(this),this.dispatchEventWith(t.UIEventConsts.EXIT_GAME),uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"game_request_continue")},n.prototype.setData=function(e){var i=e.recordInfo;if(i){this.gameNameLabel.text=t.RoomInfo.getInstance().getPlayType()+"   "+UserInfoDO.roomInfo.currentNum+"局",t.DataCache.platParam?this.roomIdLabel.text="房号: "+t.DataCache.platParam.roomId+(e.matchId?"		匹配号: "+e.matchId:""):this.roomIdLabel.text="房号: 13058091314   16局";var n=new Date,s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();if(this.timeLabel.text=s+"  "+this.setTimeFormat(n.getHours())+":"+this.setTimeFormat(n.getMinutes())+":"+this.setTimeFormat(n.getSeconds()),this.list.dataProvider=new eui.ArrayCollection(i),i&&4!=i.length){var o=new eui.HorizontalLayout;2==i.length?(o.paddingLeft=220,o.gap=200):3==i.length&&(o.paddingLeft=60,o.gap=100),this.list.layout=o}}},n.prototype.setTimeFormat=function(t){var e="";return e=10>t?"0"+t:t+""},n.prototype.onAgain=function(e){this.dispatchEventWith(t.UIEventConsts.EXIT_GAME),uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"game_request_continue")},n}(eui.Component);t.TotalRecordPanel=e,__reflect(e.prototype,"pdk.TotalRecordPanel");var i=function(e){function i(){var t=e.call(this)||this;return t.redPack=0,t.skinName=new PDK_TotalRecordItemSkin,t}return __extends(i,e),i.prototype.dataChanged=function(){var e=this.data;this._headMc||(this._headMc=new t.HeadMc(this.headMask.width-1,this.headMask.height-1),this._headMc.x=this.headMask.x,this._headMc.y=this.headMask.y,this.addChildAt(this._headMc,this.getChildIndex(this.headMask)+1)),this._headMc.headUrl=e.headurl?e.headurl:"",this.nameLabel.text=e.nickname?e.nickname:"",this.hostImage.visible=e.isOwner?e.isOwner:!1,this.winnerImage.visible=!1,e.isWinner&&(this.winnerImage.visible=!0),this.idLabel.text=e.uid?e.uid.toString():"",this.label1.text="赢牌次数  "+(e.winNum?e.winNum.toString():"0"),this.label2.text="炸弹次数  "+(e.boomNum?e.boomNum.toString():"0"),null!=e.springedNum&&null!=e.springNum?(this.label3.text="闷牌次数  "+(e.springNum?e.springNum.toString():"0"),this.label4.text="被闷次数  "+(e.springedNum?e.springedNum.toString():"0")):(this.label3.text="春天次数  "+(e.springNum?e.springNum.toString():"0"),this.label4.parent&&this.label4.parent.removeChild(this.label4)),e.totalScore>=0?(this.pointLabel.text="+"+e.totalScore.toString(),this.pointLabel.font="win_fnt"):(this.pointLabel.text=e.totalScore.toString(),this.pointLabel.font="lose_fnt")},i}(eui.ItemRenderer);t.TotalRecordItem=i,__reflect(i.prototype,"pdk.TotalRecordItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=new PDK_UserInfoSkin,t.width=uniLib.Global.screenWidth,t.list.itemRenderer=i,t.reset(),t}return __extends(n,e),n.prototype.addListener=function(){this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseTap,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemTap,this),uniLib.Global.addEventListener(uniLib.ZqEvent.EVENT_L2G,this.diamondChange,this)},n.prototype.removeListener=function(){this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListItemTap,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemTap,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.EVENT_L2G,this.diamondChange,this)},n.prototype.onCloseTap=function(){this.dispatchEventWith(t.UIEventConsts.CLOSE)},n.prototype.onListItemTap=function(e){if(null!=this._data){var i=this.gitData[e.itemIndex],n=1;if(this._data.uid==uniLib.UserInfo.uid&&(n=t.RoomInfo.getInstance().userList.length-1),0>=n)return t.GameInfo.manage.showMildWarnShow(t.DataCache.langObj.msgTxt.noOtherPlayer),void this.dispatchEventWith(t.UIEventConsts.CLOSE);if(this._data.uid==uniLib.UserInfo.uid){var s=new Cmd.GiftsInfo;s.giftsId=i.giftId,s.toUid=0,s.fromUid=this._data.uid,s.giftsNum=1,this.dispatchEventWith(t.UIEventConsts.GIFT_SEND,!1,s)}else{var s=new Cmd.GiftsInfo;s.giftsId=i.giftId,s.toUid=this._data.uid,s.fromUid=uniLib.UserInfo.uid,s.giftsNum=1,this.dispatchEventWith(t.UIEventConsts.GIFT_SEND,!1,s)}}},n.prototype.diamondChange=function(t){"diamondChange"==t.param},Object.defineProperty(n.prototype,"gitData",{get:function(){var e=t.TableGift.instance();return(5148==t.DataCache.gameId||5149==t.DataCache.gameId)&&(e=e.filter(function(t){return"砖头"!=t.giftName&&"炸弹"!=t.giftName&&"房卡"!=t.giftName})),5113==t.DataCache.gameId&&(e=e.filter(function(t){return"黄瓜"!=t.giftName&&"房卡"!=t.giftName})),e},enumerable:!0,configurable:!0}),n.prototype.setData=function(e){var i=this;if(this._data=e,this.nameLabel.text="昵称："+e.nickName,this.idLabel.text="ID："+e.uid.toString(),this.ipLabel.text="IP："+(e.ip?e.ip:""),this.diamondLabel.text="钻石："+e.diamond.toFixed(1).toString(),this.pointLabel.text="积分："+e.points.toString(),this.headImage.mask=this.headMask,ScenePanel.Load(e.headUrl,function(t){i.headImage.texture=t},null,this),"男"==e.gender?this.sexImage.source="userInfo_man":this.sexImage.source="userInfo_woman",this.addressLabe.text=e.address?e.address:"未获取到位置信息",this.getDis(uniLib.NetMgr.UID,e.uid),this.list.dataProvider=new eui.ArrayCollection(this.gitData),5113==t.DataCache.gameId){var n=new eui.HorizontalLayout;n.$gap=10,this.list.layout=n}},n.prototype.getDis=function(t,e){var i=UserInfoDO.getUserVoByUid(t),n=UserInfoDO.getUserVoByUid(e);if(i&&n)if(i.lat&&n.lat){var s=Math.floor(uniLib.Utils.getDistance(i.lat,i.lng,n.lat,n.lng));s>1e3?this.distanceLabel.text=Math.floor(s/1e3)+"km":this.distanceLabel.text=s+"m"}else this.distanceLabel.text="距离未知"},n.prototype.reset=function(){this._data=null,this.nameLabel.text="",this.idLabel.text="",this.ipLabel.text="",this.diamondLabel.text="",this.pointLabel.text="",this.distanceLabel.text=""},n.prototype.destory=function(){this.removeListener()},n}(eui.Component);t.UserInfoPanel=e,__reflect(e.prototype,"pdk.UserInfoPanel");var i=function(t){function e(){var e=t.call(this)||this;return e.skinName=new PDK_UserInfoItemSkin,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.nameLabel.text=t.giftName,RES.hasRes("userInfo_free_gift"+t.giftId)?this.iconImage.source="userInfo_free_gift"+t.giftId:this.iconImage.source="userInfo_gift"+t.giftId},e}(eui.ItemRenderer);t.GiftItem=i,__reflect(i.prototype,"pdk.GiftItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t}();e.SUCCESS=0,e.CANCLEOPEARET=1,e.PRIORITY=32,t.NetConsts=e,__reflect(e.prototype,"pdk.NetConsts")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t}();e.ZU_JIAN="ZU_JIAN",e.AAA="aaa",t.PlatConsts=e,__reflect(e.prototype,"pdk.PlatConsts")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t}();e.START="Start_mp3",e.DISCARD="DiscardSound_mp3",e.DEAL="DealSound_mp3",e.DRAW="DrawSound_mp3",e.DICE="DiceSound_mp3",e.CLICK="ButtonSound_mp3",e.COUNT_FAN="CountFanSound_mp3",e.DRAW_OTHER_TURN="otherTurn_mp3",e.DRAW_MY_TURN="myTurn_mp3",e.COMMON="pdk_common_chat",e.WIN="win_mp3",e.LOSE="lose_mp3",e.HU_MUSIC="hu_music_mp3",e.BG_MUSIC="bg_mp3",e.LIGHT="light_mp3",e.SET_TYPE="voice_pdk",t.SoundConsts=e,__reflect(e.prototype,"pdk.SoundConsts")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t}();e.EXIT_GAME="exit_game",e.SHOW_BANKER="SHOW_BANKER",e.ACTION_DISCARD="action_discard",e.ACTION_CANCEL="action_cancel",e.ACTION_WIN="action_win",e.ACTION_READYHAND="action_readyhand",e.ACTION_CHOW="action_chow",e.ACTION_BEGIN_CHOW="action_begin_chow",e.ACTION_STOP_CHOW="action_stop_chow",e.ACTION_PONG="action_pong",e.ACTION_KONG="action_kong",e.ACTION_BEGIN_KONG="action_begin_kong",e.ACTION_TRUSTEESHIP="action_trusteeship",e.ACTION_RECORD="action_record",e.START_READYHAND="start_readyhand",e.ARROW_READYHAND="arrow_readyhand",e.STOP_ARROW_READYHAND="stop_arrow_readyhand",e.STOP_READYHAND="stop_readyhand",e.READY="ready",e.GET_SCORE_DATA="GET_SCORE_DATA",e.SHOW_USER_INFO="SHOW_USER_INFO",e.GIFT_SEND="GIFT_SEND",e.CLOSE="CLOSE",e.DESTORY="DESTORY",e.SHOW_SETTING="SHOW_SETTING",e.SHOW_HELP="SHOW_HELP",e.SHOW_STOP_SERVICE="SHOW_STOP_SERVICE",e.SHOW_GM_Tool="SHOW_GM_CHAT",e.REQUEST_CHANGE_USERNUM="request_change_usernum",e.AGREE_CHANGE_USERNUM="agree_change_usernum",e.SHOW_SHORT_CHAT="SHOW_SHORT_CHAT",e.ACTION_OPERATE="action_operate",e.DISMISS_GAME="DISMISS_GAME",e.DISMISS_BACK="DISMISS_BACK",e.SHARE_GAME="share_game",e.RECORD_TIME_OUT="RECORD_TIME_OUT",e.RECORD_CANCEL="RECORD_CANCEL",e.SEND_RECORD="SEND_RECORD",e.SEND_COMMON_CHAT="send_common_chat",e.SEND_COMMON_TALK="send_common_talk",e.SEND_CHAT_RECORD="send_chat_record",e.GM_SELECT_HANDCARD="gm_select_handcard",e.GM_SELECT_HEAPCARD="gm_select_heapcard",e.GM_SELECT_CARDS="gm_select_cards",e.REMOVE_READYHAND="remove_readyhand",e.ACTION_HOST="action_host",e.USER_DODISCARD="user_dodiscard",e.USER_DODISCARD_FAIL="user_dodiscard_fail",e.SHOW_RESULT_INFO="show_result_info",t.UIEventConsts=e,__reflect(e.prototype,"pdk.UIEventConsts")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t.prototype.destory=function(){t.main=null,t.stage=null,t.mainUILayer=null,t.uiLayer=null,t.topLayer=null,t.manage=null},t}();t.GameInfo=e,__reflect(e.prototype,"pdk.GameInfo")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){this.myHandsCards=[]}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setData=function(t){this.userId=t.uid,this.gender=t.gender,this.remainder=t.points,this.nickName=t.nickname},t}();t.MyUserInfo=e,__reflect(e.prototype,"pdk.MyUserInfo")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"seatPosArr",{get:function(){return[new egret.Point(35,570),new egret.Point(uniLib.Global.screenWidth-140,150),new egret.Point(20,150),new egret.Point(20,264)]},enumerable:!0,configurable:!0}),t}();e.wallCardPosArr=[new egret.Point(243,94),new egret.Point(902,73),new egret.Point(855,443),new egret.Point(183,476)],e.cardSpaceXArr=[36,0,-36,0],e.cardSpaceYArr=[0,24,0,-24],e.cardsRowNum=18,e.cardsTotalNum=144,t.PositionData=e,__reflect(e.prototype,"pdk.PositionData")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function e(){this.video=0,this.videoUid=0,this.recvCache=[],this.payMode=0,this.playType=1,this.curNumber=1,this.totalNumber=1,this.heapCardNum=0,this.isStart=!1,this.isShowGMTool=!1,this.GM_Mode=!1,this.host_mode=0,this.playerNumber=1,this.goldenCard=[],this.userList=[],this.languageMode="pu",this.bankerId=-1,this.bankerSeatId=-1,this.buyHorse=!1,this.canHostMode=1,this.isHostMode=0,this.outCardSuccArr=[]}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.destory=function(){},e.prototype.setBankerInfo=function(t){this.bankerId=t,this.bankerSeatId=this.getSeatNoByUserId(t)},e.prototype.getRemainCardNum=function(){return this.heapCardNum},e.prototype.initRoomProps=function(t){if(t&&!(t.length<=0))for(var e=0;e<t.length;e++)t[e].value||(t[e].value=0),t[e].id==Cmd.RoomPro.RoomPro_1&&(this.totalNumber=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_2&&(this.playType=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_3&&(this.playerNumber=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_4&&(this.payMode=t[e].value),t[e].id==Cmd.RoomPro.RoomPro_5&&(this.goldMulti=t[e].value)},e.prototype.initUserList=function(e){for(var i=0;i<e.length;i++){var n=e[i],s=new t.UserVo(n);this.userList.push(s)}},e.prototype.addUser=function(t){for(var e=0;e<this.userList.length;e++)if(this.userList[e].uid==t.uid)return void(this.userList[e]=t);this.userList.push(t)},e.prototype.getUserVoByUid=function(e){var i=new Cmd.UserBaseInfo;i.uid=111111,i.gender="女",i.nickname="111111";for(var n=new t.UserVo(i),s=0;s<this.userList.length;s++)if(this.userList[s].uid==e)return this.userList[s];return n},e.prototype.removeUser=function(t){for(var e=0;e<this.userList.length;e++)if(this.userList[e].uid==t){this.userList.splice(e,0);break}},e.prototype.getSeatNo=function(i){var n=uniLib.UserInfo.uid;1==t.RoomInfo.getInstance().video&&(n=t.RoomInfo.getInstance().videoUid);var s=e.getInstance().getUserVoByUid(UserInfoDO.actorInfo.uid).seatId;return(i+4-s)%4},e.prototype.getSeatNoByUserId=function(t){var e=this.getUserVoByUid(t);if(e){var i=e.seatId;return this.getSeatNo(i)}return 0},e.prototype.getPayMode=function(){var t="半自摸";return 1==this.payMode?t="房主支付":2==this.payMode&&(t="均摊支付"),t},e.prototype.getPlayType=function(){var t="跑得快";return t},e.prototype.getOtherUid=function(){for(var t=[],e=0;e<this.userList.length;e++)this.userList[e].uid!=UserInfoDO.actorInfo.uid&&t.push(this.userList[e].uid);return t},e.prototype.getUidNotSendID=function(t){for(var e=[],i=0;i<this.userList.length;i++)this.userList[i].uid!=t&&e.push(this.userList[i].uid);return e},e.prototype.getHostMode=function(){1==ArrayUtil.isInArray(144,this.playTypeList)?this.canHostMode=1:this.canHostMode=0},e}();t.RoomInfo=e,__reflect(e.prototype,"pdk.RoomInfo")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initUI=function(){this.chatGroup=[],this.chatCoverGroup=[];for(var t=0;6>t;t++)this.creatChatItem(t)},i.prototype.creatChatItem=function(e){var i=t.ResUtil.createBitmapByName("chat_select");i.x=420,i.y=61+56*e,i.width=460,i.height=30,i.visible=!1,i.name="short_chatbg",this.addChild(i);var n=t.ResUtil.createTextFeild(1456961,egret.HorizontalAlign.LEFT,"",28,420,61+56*e,i.width);n.text=e+1+"."+t.GameData.getInstance().ShortTalkArr[e],this.addChild(n);var s=uniLib.DisplayUtils.createMask(0,i.width,i.height,0);s.name="short_"+e,s.x=420,s.y=56*(e+1),s.touchEnabled=!0,this.addChild(s),this.chatGroup.push(i),this.chatCoverGroup.push(s),s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),s.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),s.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this)},i.prototype.onClick=function(e){var i="2"+e.target.name.charAt(6);this.dispatchEventWith(t.UIEventConsts.SEND_COMMON_CHAT,!1,i)},i.prototype.onClickBegin=function(t){var e=Number(t.target.name.charAt(6));this.chatGroup[e].visible=!0},i.prototype.onClickEnd=function(t){var e=Number(t.target.name.charAt(6));this.chatGroup[e].visible=!1},i.prototype.destory=function(){for(var t=0;t<this.chatCoverGroup.length;t++){var e=this.chatCoverGroup[t];e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),uniLib.DisplayUtils.removeAllChildren(e),uniLib.DisplayUtils.removeFromParent(e)}uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this.chatGroup=[],this.chatCoverGroup=[]},i}(t.BaseVc);t.ChatItem=e,__reflect(e.prototype,"pdk.ChatItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initUI=function(){this._scroll=new egret.ScrollView,this.addChild(this._scroll),this._scroll.verticalScrollPolicy="on",this._scroll.horizontalScrollPolicy="off",this._scroll.width=360,this._scroll.height=475,this.faceGroup=[],this.faceBgGroup=[],this._facePanel=new egret.Sprite,this.addChild(this._facePanel);for(var t=1;18>=t;t++)this.creatFaceItem(t);this._scroll.setContent(this._facePanel)},i.prototype.creatFaceItem=function(e){var i=t.ResUtil.createBitmapByName("faceBg");this._facePanel.addChild(i),i.touchEnabled=!0;var n=t.ResUtil.createBitmapByName("face_select");n.name="short_facebg",n.visible=!1,this._facePanel.addChild(n);var s=t.ResUtil.createBitmapByName("face"+e);s.name="short_"+e,s.touchEnabled=!0,s.scaleX=s.scaleY=.9,s.x=116*Math.floor((e-1)%3)+25,s.y=107*Math.floor((e-1)/3)+20,n.x=s.x,n.y=s.y,i.x=n.x,i.y=n.y,this._facePanel.addChild(s),this.faceGroup.push(s),this.faceBgGroup.push(n),s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onFaceBegin,this),s.addEventListener(egret.TouchEvent.TOUCH_END,this.onFaceEnd,this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFaceClick,this),s.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onFaceEnd,this)},i.prototype.onFaceClick=function(e){var i=e.target.name,n="1"+i.slice(6,i.length);this.dispatchEventWith(t.UIEventConsts.SEND_COMMON_CHAT,!1,n);var s=Number(i.slice(6,i.length));this.faceBgGroup[s-1].visible=!1},i.prototype.onFaceBegin=function(t){var e=t.target.name,i=Number(e.slice(6,e.length));this.faceBgGroup[i-1].visible=!0},i.prototype.onFaceEnd=function(t){var e=t.target.name,i=Number(e.slice(6,e.length));this.faceBgGroup[i-1].visible=!1},i.prototype.destory=function(){for(var t=0;t<this.faceGroup.length;t++){var e=this.faceGroup[t];e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onFaceBegin,this),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFaceClick,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onFaceEnd,this)}uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this.faceGroup=[],this.faceBgGroup=[]},i}(t.BaseVc);t.FaceItem=e,__reflect(e.prototype,"pdk.FaceItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.initUI=function(){this._itemGroup=[],this._voiceBtn=new t.GameButton(["yaya_record","yaya_record"]),this._voiceBtn.x=14,this._voiceBtn.y=146,this.addChild(this._voiceBtn),this._inputBg=t.ResUtil.createBitmapByName("yaya_chat_bg",58,147),this.addChild(this._inputBg),this._curIndex=0,this.resetBtn(),this._voiceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._voiceMc=new egret.Sprite,this._voiceMc.name="short_mc",this.addChild(this._voiceMc),this._scrollView=t.ResUtil.createScroll(this._voiceMc,350,250,20,5),this._scrollView.horizontalScrollPolicy="off",this._scrollView.verticalScrollPolicy="on",this.addChild(this._scrollView),this._tempTip=t.ResUtil.createTextFeild(3355443,egret.HorizontalAlign.CENTER,"暂无数据",20,0,110,335),this.addChild(this._tempTip)},n.prototype.initData=function(t){if(null!=t[0]){this._itemGroup=[],uniLib.DisplayUtils.removeAllChildren(this._voiceMc),this._tempTip.visible=!1;for(var e=0;e<t.length;e++)this.showOneVoice(t[e]);t.length>3&&this._scrollView.setScrollPosition(80*(t.length-3),0)}},n.prototype.showOneVoice=function(t){var e=new i;e.name="short_"+t.uid,e.setData(t),0!=this._voiceMc.height&&(e.y=this._voiceMc.height),e.touchChildren=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPlayVoice,this),this._voiceMc.addChild(e),this._itemGroup.push(e)},n.prototype.onPlayEnd=function(t){var e=t.currentTarget;e.removeEventListener(i.PLAY_END,this.onPlayEnd,this),this._curVoice=null},n.prototype.onPlayVoice=function(t){var e=t.currentTarget;this._curVoice==t.currentTarget?(e.stopPlay(),e.removeEventListener(i.PLAY_END,this.onPlayEnd,this)):(this._curVoice&&(this._curVoice.stopPlay(),this._curVoice.removeEventListener(i.PLAY_END,this.onPlayEnd,this)),e.startPlay(),e.addEventListener(i.PLAY_END,this.onPlayEnd,this),this._curVoice=e)},n.prototype.onClick=function(t){t.currentTarget==this._voiceBtn?this._curIndex=0:this._curIndex=1,this.resetBtn()},n.prototype.resetBtn=function(){0==this._curIndex?(this._inputBg.visible=!1,this._voiceBtn.visible=!1):(this._inputBg.visible=!0,this._voiceBtn.visible=!0)},n.prototype.destory=function(){this._voiceBtn&&(this._voiceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._voiceBtn.destory()),this._voiceBtn=null;for(var t=0;t<this._itemGroup.length;t++){var e=this._itemGroup[t];e.removeEventListener(i.PLAY_END,this.onPlayEnd,this),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPlayVoice,this),e.destory()}this._voiceMc&&uniLib.DisplayUtils.removeAllChildren(this._voiceMc),this._voiceMc=null,this._scrollView=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._inputBg=null,this._curVoice=null},n}(t.BaseVc);t.RecordItem=e,__reflect(e.prototype,"pdk.RecordItem");var i=function(e){function i(){var t=e.call(this)||this;return t._second=0,t._totalWidth=300,t}return __extends(i,e),i.prototype.initUI=function(){this._content=uniLib.DisplayUtils.createMask(0,300,80,0),this._content.touchEnabled=!0,this._content.name="short_record_content",this.addChild(this._content),this._nameTxt=t.ResUtil.createTextFeild(10505256,egret.HorizontalAlign.LEFT,"me",18,0,5,150),this._content.addChild(this._nameTxt),this._timeTxt=t.ResUtil.createTextFeild(10505256,egret.HorizontalAlign.LEFT,"me",13,10+this._nameTxt.width,10,150),this._content.addChild(this._timeTxt),this._voiceIcon=t.ResUtil.createBitmapByName("chat_pop",0,30),this._voiceIcon.name="short_sound_pop",this._voiceIcon.scale9Grid=new egret.Rectangle(31,9,10,21),this._voiceIcon.width=300,this._content.addChild(this._voiceIcon),this._soundIcon=t.ResUtil.createBitmapByName("yaya_voice_icon",20,40),this._soundIcon.name="short_sound_icon",this._content.addChild(this._soundIcon),this._voiceLenTxt=t.ResUtil.createTextFeild(3355443,egret.HorizontalAlign.LEFT,"3''",22,142,45,50),this._voiceLenTxt.x=this._voiceIcon.width-this._voiceLenTxt.width,this._voiceLenTxt.name="short_voice_len",this._content.addChild(this._voiceLenTxt),this._voiceIcon.touchEnabled=!0},i.prototype.stopTimer=function(){this._soundIcon.visible=!0,this._timer_200&&(this._timer_200.stop(),this._timer_200=null),this._second=0
},i.prototype.onTimer=function(t){this._second++;var e=1e3*Number(this.data.time);this._second>=e/200?this.stopPlay():this._soundIcon.visible=!this._soundIcon.visible},i.prototype.startPlay=function(){this._data.uid!=UserInfoDO.actorInfo.uid&&uniLib.ZQGameSdk.playRecord(this._data.url,this.playEndBack,this),this._voiceIcon.texture=t.ResUtil.createTexture("yaya_voice2"),this.stopTimer(),this._timer_200&&(this._timer_200.stop(),this._timer_200=null),this._timer_200=uniLib.SetUniTimerTimeout(this,this.onTimer,200,!1,this)},i.prototype.stopPlay=function(){uniLib.ZQGameSdk.stopPlayRecord(this._data.url),this.stopTimer(),this._voiceIcon.texture=t.ResUtil.createTexture("chat_pop")},i.prototype.playEndBack=function(t){this.stopTimer()},Object.defineProperty(i.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){this._data=t,this._voiceLenTxt.text=t.time+"''",this._timeTxt.text=t.timestamp;var e=Number(t.time);5>e?this._voiceIcon.width=5/15*this._totalWidth:this._voiceIcon.width=e/15*this._totalWidth,this._voiceLenTxt.x=this._voiceIcon.width-this._voiceLenTxt.width},i.prototype.destory=function(){e.prototype.destory.call(this),this.stopTimer(),this._content&&(uniLib.DisplayUtils.removeAllChildren(this._content),uniLib.DisplayUtils.removeFromParent(this._content)),this._data=null,this._content=null,this._nameTxt=null,this._soundIcon=null,this._voiceIcon=null,this._timeTxt=null,this._voiceLenTxt=null},i}(t.BaseVc);i.PLAY_END="playEnd",t.RecordVoiceItem=i,__reflect(i.prototype,"pdk.RecordVoiceItem")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName=new PDK_ChatSkin,t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){for(var e=1;31>=e;e++){var i=new eui.RadioButton;i.skinName=new PDK_FaceButtonSkin,i.iconDisplay.texture=RES.getRes("face_DDZ"+e),i.groupName="face",i.value=e,this.faceGroup.addChild(i)}for(var e=0;e<t.GameData.getInstance().ShortTalkArr.length;e++){var n=new eui.RadioButton;n.skinName=new PDK_ChatRadioButtonSkin,n.groupName="chat",n.value=e,n.label=e+1+"."+t.GameData.getInstance().ShortTalkArr[e],n.y=56*e,this.chatGroup.addChild(n)}this.touchEnabled=!1,this.chatRadioButton.selected=!0,this.chatScroller.visible=!0,this.btnGroup=[],this.chatRadioButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRaduiButtonTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.faceRadioButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRaduiButtonTap,this),this.faceGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFaceGroupTap,this),this.chatGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroupTap,this),this.textField.name="short_input",this.textField.size=28,this.textField.type=egret.TextFieldType.INPUT,this.textField.text="请输入聊天内容",this.touchEnabled=!0,this.textField.addEventListener(egret.FocusEvent.FOCUS_IN,this.onTextFieldFocusIn,this),this.textField.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),this.sendBtn.name="short_send",this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendClickHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},i.prototype.onChatGroupTap=function(e){var i=e.target;if(i instanceof eui.RadioButton){var n="2"+i.value;this.dispatchEventWith(t.UIEventConsts.SEND_COMMON_CHAT,!1,n)}},i.prototype.onFaceGroupTap=function(e){var i=e.target;if(i instanceof eui.RadioButton){var n="1"+i.value;this.dispatchEventWith(t.UIEventConsts.SEND_COMMON_CHAT,!1,n)}},i.prototype.onRaduiButtonTap=function(t){t.target==this.chatRadioButton?this.chatScroller.visible=!0:t.target==this.faceRadioButton&&(this.chatScroller.visible=!1)},i.prototype.onTouchTap=function(t){t.target==this.textField&&t.target.setFocus()},i.prototype.sendClickHandler=function(e){var i=this.textField.text;return-1!=i.indexOf("请输入聊天内容")?void(this.textField.text=""):(this.dispatchEventWith(t.UIEventConsts.SEND_COMMON_TALK,!1,i),void(this.textField.text=""))},i.prototype.onTextFieldFocusIn=function(t){t.target.setFocus(),-1!=this.textField.text.indexOf("请输入聊天内容")&&(this.textField.text="")},i.prototype.onTextFieldFocusOut=function(t){""==this.textField.text&&(this.textField.text="请输入聊天内容")},i.prototype.btnClickHandler=function(t){var e=t.currentTarget.name;switch(e){case"short_chat":this.initBarStatus(),this.btnGroup[0].select=!0,this._yetOpen&&(this._yetOpen.visible=!1);break;case"short_record":this.initBarStatus(),this.btnGroup[1].select=!0,this.createRecordYetOpen()}},i.prototype.createRecordYetOpen=function(){this._yetOpen||(this._yetOpen=t.ResUtil.createTextFeild(1456961,egret.HorizontalAlign.CENTER,"此功能暂未开放",30),this.addChild(this._yetOpen),this._yetOpen.x=540,this._yetOpen.y=280),this._yetOpen.visible=!0},i.prototype.createBarBtn=function(e,i,n,s,o,r){var a=new t.ToggleButton(e,i,"",n);a.select=s,a.x=o,a.y=r,this.addChild(a),this.btnGroup.push(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClickHandler,this)},i.prototype.initBarStatus=function(){for(var t=0;t<this.btnGroup.length;t++){var e=this.btnGroup[t];e.select=!1}},i.prototype.destory=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this);for(var t=0;t<this.btnGroup.length;t++){var e=this.btnGroup[t];e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClickHandler,this)}this.chatRadioButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRaduiButtonTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.faceRadioButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRaduiButtonTap,this),this.faceGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFaceGroupTap,this),this.chatGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroupTap,this),this.textField.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onTextFieldFocusIn,this),this.textField.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendClickHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.sendBtn=null,uniLib.DisplayUtils.removeAllChildren(this._content),uniLib.DisplayUtils.removeFromParent(this._content),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.setRecordData=function(t){},i.prototype.onClose=function(e){this.visible=!1,t.PopupManager.removePopUp(this)},i}(eui.Component);t.RoomFacePanel=e,__reflect(e.prototype,"pdk.RoomFacePanel")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){this.goldOutCardSet=[],this._audioPlayMode=!1,this.waitCard=0,this.TempeLocation=[[(uniLib.Global.screenWidth-1136)/2+20,600],[(uniLib.Global.screenWidth-1136)/2+1140,150],[(uniLib.Global.screenWidth-1136)/2+20,150]],this.ShortTalkArr=["又断线了，网络怎么这么差啊！","各位，真不好意思，我要离开一会","你的牌打得也忒好了！","下次咱们再玩吧！","不要走，决战到天亮！","快点吧，都等得我花都谢了！"],this.recordInfo=null}return t.prototype.destory=function(){t.instance=null},t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},Object.defineProperty(t.prototype,"isMyTime",{get:function(){return this._isMyTime},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioPlayMode",{get:function(){return this._audioPlayMode},set:function(t){this._audioPlayMode=t},enumerable:!0,configurable:!0}),t}();t.GameData=e,__reflect(e.prototype,"pdk.GameData")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(t){this.bReady=0,this.handCardNum=0,this.setdata(t)}return t.prototype.setdata=function(t){this.uid=t.uid,this.seatId=t.seatId,this.points=t.points,this.gender=t.gender,this.bReady=t.bReady,this.diamond=t.diamond,this.headUrl=t.headurl,this.nickName=t.nickname,this.remainder=t.points,this.onlineState=t.onlineState,t.handCardNum?this.handCardNum=t.handCardNum:this.handCardNum=0},t.prototype.getGender=function(){var t;return t="男"==this.gender?0:1},t}();t.UserVo=e,__reflect(e.prototype,"pdk.UserVo")}(pdk||(pdk={}));var pdk;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._soundType=e,i.load(),i}return __extends(e,t),e.prototype.load=function(){var t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.SOUND,t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var e="resource/assets/sound/"+this._soundType,i=new egret.URLRequest(e);t.load(i)},e.prototype.onLoadComplete=function(t){var i=t.target,n=i.data;this.dispatchEventWith(e.LOADED,!1,{type:this._soundType,data:n})},e}(egret.EventDispatcher);e.LOADED="loaded",t.SoundLoader=e,__reflect(e.prototype,"pdk.SoundLoader")}(pdk||(pdk={}));var pdkui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._hAlign="left",e.tf=new egret.BitmapText,e.addChild(e.tf),e}return __extends(e,t),Object.defineProperty(e.prototype,"hAlign",{set:function(t){this._hAlign!=t&&(this._hAlign=t,this.updatePos())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.tf.font},set:function(t){this.tf.font=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{set:function(t){this.tf.letterSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{set:function(t){this.tf.lineSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.tf.text},set:function(t){this.tf.text=t,this.updatePos()},enumerable:!0,configurable:!0}),e.prototype.updatePos=function(){var t=0;switch(this._hAlign){case egret.HorizontalAlign.LEFT:t=0;break;case egret.HorizontalAlign.RIGHT:t=this.width-this.tf.width;break;case egret.HorizontalAlign.CENTER:t=this.width/2-this.tf.width/2;break;default:t=0}this.tf.x=t},e}(egret.Sprite);t.AlignBitmapText=e,__reflect(e.prototype,"pdkui.AlignBitmapText")}(pdkui||(pdkui={}));var ArrayUtil=function(){function t(){}return t.mergeArray=function(t,e){var i,n=new Array;i=t.length>=e.length?t.length:e.length;for(var s=0;i>s;s++)t[s]&&n.push(t[s]),e[s]&&n.push(e[s]);return n},t.removeByValue=function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n]==e)return t.splice(n,1),t;return t},t.removeValue=function(t,e){for(var i=t.length,n=i-1;n>=0;n--)if(t[n]==e)return t.splice(n,1),t;return t},t.isInArray=function(t,e){for(var i=!1,n=0;n<e.length;n++)if(e[n]==t)return!0;return i},t.numberResolveToArray=function(t,e){for(var i=[],n=0;n<e.length;n++){for(;t>=e[n];)i.push(e[n]),t-=e[n];if(0==t)break}return i},t.deepcopy=function(t){for(var e=[],i=0,n=t.length;n>i;i++)t[i]instanceof Array?e[i]=this.deepcopy(t[i]):e[i]=t[i];return e},t.reverse=function(t){for(var e=[],i=t.length,n=0;i>n;n++)e.unshift(t[n]);return e},t}();__reflect(ArrayUtil.prototype,"ArrayUtil");var pdk;!function(t){var e=function(){function t(){}return t.addPopUp=function(t,e,i,n,s,o){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===s&&(s=0),void 0===o&&(o=0),null==this._popUpMask&&(this._popUpMask=new egret.Sprite,this._popUpMask.graphics.beginFill(0,.3),this._popUpMask.graphics.drawRect(0,0,uniLib.Global.screenWidth,uniLib.Global.screenHeight),this._popUpMask.graphics.endFill(),this._popUpMask.touchEnabled=!0),e?this._popUpMask.visible=!0:this._popUpMask.visible=!1,LayerManager.tipLayer.addChild(this._popUpMask),LayerManager.tipLayer.addChild(t);var r,a;i?(r=s?uniLib.Global.screenWidth-s>>1:uniLib.Global.screenWidth-t.width>>1,a=o?uniLib.Global.screenHeight*uniLib.ScreenUtils.scaleFactor-o>>1:uniLib.Global.screenHeight*uniLib.ScreenUtils.scaleFactor-t.height>>1):(r=t.x,a=t.y),n?(t.y=t.y-200,t.x=r,t.alpha=0,egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:r,y:a,alpha:1})):(t.x=r,t.y=a)},t.removePopUp=function(t,e){void 0===e&&(e=!1),null!=this._popUpMask&&(this._popUpMask.visible=!1),e?(egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:t.y-200,alpha:0}).call(this.removeTarget,this,[t])):t.parent&&t.parent.removeChild(t)},t.removeTarget=function(t){t.alpha=1,egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t)},t}();t.PopupManager=e,__reflect(e.prototype,"pdk.PopupManager")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function e(){this.showList=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.showVideoCommonPanel=function(e,i,n,s,o,r,a){void 0===n&&(n=null),void 0===s&&(s=null),void 0===r&&(r=0),void 0===a&&(a=!0);var h=new t.MsgBox(!0);h.setData(s,e,i,n,o,r),h.x=Math.round((t.DataCache.defaultWidth-h.width)/2),h.y=Math.round((t.DataCache.defaultHeight*uniLib.ScreenUtils.scaleFactor-h.height)/2),LayerManager.topLayer.addChild(h)},e.prototype.showMildWarnShow=function(e){if(t.ResUtil.trace("轻度提示："+e),e){var i=new t.MildAlertVC;if(i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),i.setText(e),LayerManager.tipLayer.addChild(i),this.showList.length>0)for(var n=0;n<this.showList.length;n++)this.showList[n].y-=i.height;this.showList.push(i)}},e.prototype.removeStage=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),this.showList.splice(this.showList.indexOf(e),1),e.destory(),e=null},e.prototype.showConfirmPanel=function(e,i,n,s,o,r,a){void 0===n&&(n=null),void 0===s&&(s=null),void 0===r&&(r=0),void 0===a&&(a=!0);var h=new t.MsgBox(a);s||(s=""),h.setData(s,e,i,n,o,r),h.x=Math.round((t.DataCache.defaultWidth-h.width)/2),h.y=Math.round((t.DataCache.defaultHeight*uniLib.ScreenUtils.scaleFactor-h.height)/2),t.PopupManager.addPopUp(h,!0)},e.prototype.showMask=function(){this.maskMc||(this.maskMc=new egret.Sprite,this.maskMc.graphics.beginFill(0,.5),this.maskMc.graphics.drawRect(0,0,t.DataCache.defaultWidth,t.DataCache.defaultHeight),this.maskMc.graphics.endFill()),t.GameInfo.topLayer.addChild(this.maskMc)},e.prototype.hideMask=function(){this.maskMc&&t.GameInfo.topLayer.removeChild(this.maskMc)},e.prototype.showMarket=function(){},e.prototype.backHall=function(){},e}();t.PublicManageTips=e,__reflect(e.prototype,"pdk.PublicManageTips")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t.getURLData=function(){if(!this.initParams){this.initParams={};var e=window.location.search;if(""==e)return;if("?"==e.charAt(0)){e=e.slice(1),t.trace("getURLData"+e);for(var i,n=e.split(/&/),s=0;s<n.length;s++)i=n[s].split(/=/),2==i.length&&(this.initParams[i[0]]=i[1],t.trace("getURLData1"+i[0],i[1]))}}return this.initParams},t.createBitmapByName=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=new egret.Bitmap,s=RES.getRes(t);return n.texture=s,n.smoothing=!0,n.x=e,n.y=i,n},t.createTexture=function(t){var e=RES.getRes(t);return e},t.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];uniLib.Console.log(t.join(","))},t.randRange=function(t,e){var i=e-t,n=Math.floor(Math.random()*i);return t+n},t.currencyFormat=function(t,e){void 0===e&&(e=-1);var i=Math.abs(t).toString(),n="";0>t&&(n="-");var s="";if(i.indexOf(".")>-1&&(s=i.substring(i.indexOf("."),i.length),i=i.substring(0,i.indexOf("."))),-1!=e)for(;i.length<e;)i="0"+i;for(var o=i.split(""),r=o.length,a=1,h=r-1;h>0;h--,a++)a/3==1&&(a=0,o[h]=","+o[h]);return n+o.join("")+s},t.backToNumber=function(t){var e=/,/g;return t=t.replace(e,""),Math.round(Number(t))},t.getCharLength=function(t){var e=new egret.ByteArray;return e.writeUTF(t),e.position=0,e.bytesAvailable},t.createMovieClip=function(t,e,i){var n,s=RES.getRes(e),o=RES.getRes(i),r=new egret.MovieClipDataFactory(s,o);return n=new egret.MovieClip(r.generateMovieClipData(t)),n.gotoAndStop(1),n.name=t,n},t.createTextFeild=function(t,e,i,n,s,o,r,a,h){void 0===s&&(s=0),void 0===o&&(o=0),void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===h&&(h=0);var d=new egret.TextField;return-1!=r&&(d.width=r),d.fontFamily="微软雅黑",d.bold=a,d.textColor=t,d.textAlign=e,d.text=i,d.size=n,d.lineSpacing=h,d.x=s,d.y=o,d.multiline=!1,d},t.createFontText=function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=-1),s||(s=RES.getRes("betTipText_fnt"));var o=new egret.BitmapText;return-1!=n&&(o.width=n),o.font=s,o.text=t,o.x=e,o.y=i,o},t.createScroll=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var o=new egret.ScrollView;return o.width=e,o.height=i,o.x=n,o.y=s,o.setContent(t),o},t.removeFromParent=function(t){t&&t.parent&&t.parent.removeChild(t)},t.removeAllChildren=function(t){for(;t.numChildren>0;)this.removeFromParent(t.getChildAt(0))},t.getTimeStr2=function(){var t=new Date,e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" >>> ";return e},t.numFormat=function(t,e){void 0===e&&(e=0);var i,n="",s="";0>t&&(t=-t,s="-");var o,r;o=[1e9,1e6,1e3],r=["B","M","K"],i=String(t);for(var a=0;a<o.length;a++)if(t>=o[a]){n=r[a],i=-1==e?String(t/o[a]):String(this.setDot(t/o[a],e));break}if(-1!=i.indexOf(".")){for(var h=0;e>h;h++)0==Number(i.charAt(i.length-1))&&(i=h+1==e?i.slice(0,i.length-2):i.slice(0,i.length-1));"."==i.charAt(i.length-1)&&(i=i.slice(0,i.length-1))}return s+i.concat(n)},t.setDot=function(t,e){return void 0===e&&(e=-1),e>0?Math.floor(t*Math.pow(10,e))/Math.pow(10,e):0==e?Math.floor(t):t},t.changeYAxis=function(t){return uniLib.Global.screenHeight-(640-t)},t}();t.ResUtil=e,__reflect(e.prototype,"pdk.ResUtil")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function e(){this._soundRes={},this._curSounds=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e){var i;if(this._soundRes[e])i=this._soundRes[e],this.play(i);else{var n=new t.SoundLoader(e);n.addEventListener(t.SoundLoader.LOADED,this.onSoundLoaded,this)}},e.prototype.stopSound=function(){for(var t,e=this._curSounds.length,i=0;e>i;i++)t=this._curSounds[0],t.stop(),t.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._curSounds.splice(0,1)},e.prototype.play=function(t){var e=t.play(0,1);e.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._curSounds.push(e)},e.prototype.startPlay=function(t){var e=t.data,i=e.play(0,1);i.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._curSounds.push(i)},e.prototype.onSoundComplete=function(t){var e=t.currentTarget;e.stop(),e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this);var i=this._curSounds.indexOf(e);this._curSounds.splice(i,1)},e.prototype.onSoundLoaded=function(e){e.currentTarget.removeEventListener(t.SoundLoader.LOADED,this.onSoundLoaded,this);var i=e.data.data;this._soundRes[e.data.type]=i,this.play(i)},e}();t.SoundManager=e,__reflect(e.prototype,"pdk.SoundManager")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"table.TableVoice"},t}();t.TableVoice=e,__reflect(e.prototype,"pdk.TableVoice")}(pdk||(pdk={}));var pdk;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.dirArr=[[1,2,3,4],[2,3,4,1],[3,4,1,2],[4,1,2,3]],t._step=.1,t}return __extends(i,e),i.prototype.initUI=function(){var e=t.ResUtil.createBitmapByName("count_bg");this.addChild(e),this._dirArr=[];for(var i,n=0;4>n;n++)i=new t.HighLightItem,i.initLight(n),this.addChild(i),this._dirArr.push(i),i.setDir(n+1);this._countNum1=t.ResUtil.createBitmapByName("count_num0",47,53),this._countNum2=t.ResUtil.createBitmapByName("count_num0",66,53),this.addChild(this._countNum1),this.addChild(this._countNum2)},i.prototype.setEast=function(t){for(var e=this.dirArr[t],i=0;4>i;i++){var n=e[i];this._dirArr[n-1].setDir(i+1)}},i.prototype.setCount=function(t,e,i){void 0===i&&(i=0),t||(t=0),this._countSecond=e,this._dirArr[this._countSeatId]&&this._dirArr[this._countSeatId].stop(),this._dirArr[t].flash(i),this._countSeatId=t,this.stopTimer(),this.startCount()},i.prototype.startCount=function(){this._countIndex=0,this._timer=new egret.Timer(100),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start()},i.prototype.onTimer=function(e){this._countIndex++;var i=this._countSecond-Math.floor(this._countIndex/10);i>=99?(this._countNum1.texture=t.ResUtil.createTexture("green_num9"),this._countNum2.texture=t.ResUtil.createTexture("green_num9"),this._countNum1.alpha>=1?this._step=-Math.abs(this._step):this._countNum1.alpha<=0&&(this._step=Math.abs(this._step)),this._countNum1.alpha+=this._step,this._countNum2.alpha+=this._step):i>0?(this._countNum1.texture=t.ResUtil.createTexture("count_num"+Math.floor(i/10)),this._countNum2.texture=t.ResUtil.createTexture("count_num"+i%10),this._countNum1.alpha=1,this._countNum2.alpha=1):0>=i&&(this._countNum1.texture=t.ResUtil.createTexture("count_num0"),this._countNum2.texture=t.ResUtil.createTexture("count_num0"),this._countNum1.alpha=1,this._countNum2.alpha=1,this.stopTimer())},i.prototype.stopTimer=function(){this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer=null)},i.prototype.reset=function(){this.stopTimer();for(var e=0;4>e;e++)this._dirArr[e].stop();this._countNum1.texture=t.ResUtil.createTexture("count_num0"),this._countNum2.texture=t.ResUtil.createTexture("count_num0")},i.prototype.destory=function(){this.stopTimer();for(var t=0;t<this._dirArr.length;t++){var e=this._dirArr[t];e.destory()}this._dirArr=null,this._countNum1=null,this._countNum2=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(t.BaseVc);e.HEIGHT=134,e.OFFSET_Y=70,t.CountVc=e,__reflect(e.prototype,"pdk.CountVc")}(pdk||(pdk={}));var pdk;!function(t){var e=function(){function t(){}return t}();t.VoiceDataVo=e,__reflect(e.prototype,"pdk.VoiceDataVo")}(pdk||(pdk={}));var QiangGuanPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._grabBtn||(this._grabBtn=new pdk.GameButton(["pdk_game_qiangguan1","pdk_game_qiangguan2"]),this.addChild(this._grabBtn),this._grabBtn.x=uniLib.Global.screenWidth/2-this._grabBtn.width-100),this._passBtn||(this._passBtn=new pdk.GameButton(["pdk_game_buqiangguan1","pdk_game_buqiangguan2"]),this.addChild(this._passBtn),this._passBtn.x=uniLib.Global.screenWidth/2+100),this.visible=this.touchEnabled=this.touchChildren=!1},e.prototype.onClick=function(t){t.target==this._grabBtn?ReqManager.ins.OnRequestQiangGuan_C(1):t.target==this._passBtn&&ReqManager.ins.OnRequestQiangGuan_C(),this.hide()},e.prototype.addListener=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this),this._grabBtn&&this._grabBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._passBtn&&this._passBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.removeListener=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this),this._grabBtn&&this._grabBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._passBtn&&this._passBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.show=function(){this.visible=this.touchEnabled=this.touchChildren=!0,this.addListener()},e.prototype.hide=function(){this.visible=this.touchEnabled=this.touchChildren=!1,this.removeListener()},e.prototype.dispose=function(){this.removeListener(),this._grabBtn&&this._grabBtn.destory(),this._grabBtn=null,this._passBtn&&this._passBtn.destory(),this._passBtn=null},e}(egret.DisplayObjectContainer);__reflect(QiangGuanPanel.prototype,"QiangGuanPanel");var pdk;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=new PDK_SettingSkin,i.width=uniLib.Global.screenWidth,i.addListener(),i.soundSlider.value=100*uniLib.SoundMgr.instance.soundVolume,i.musicSlider.value=100*uniLib.SoundMgr.instance.musicVolume,i.voiceControlCloseRadioButton.selected=!0,0==uniLib.SoundMgr.instance.soundVolume?i.soundButton.currentState="up":i.soundButton.currentState="upAndSelected",0==uniLib.SoundMgr.instance.musicVolume?i.musciButton.currentState="up":i.musciButton.currentState="upAndSelected",(t.RoomInfo.getInstance().languageMode="pu")?i.mandarinRadioButton.selected=!0:i.dialectRadioButton.selected=!0,206==t.DataCache.gameId?(i.mandarinRadioButton.visible=!0,i.dialectRadioButton.visible=!0,i.lanauageTitile.visible=!0):(i.mandarinRadioButton.visible=!1,i.dialectRadioButton.visible=!1,i.lanauageTitile.visible=!1),i}return __extends(i,e),i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.soundSlider.addEventListener(egret.Event.CHANGE,this.OnSoundChange,this),this.musicSlider.addEventListener(egret.Event.CHANGE,this.OnMusicChange,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.soundSlider.removeEventListener(egret.Event.CHANGE,this.OnSoundChange,this),this.musicSlider.removeEventListener(egret.Event.CHANGE,this.OnMusicChange,this)},i.prototype.destory=function(){this.removeListener()},i.prototype.OnSoundChange=function(t){uniLib.SoundMgr.instance.soundVolume=this.soundSlider.value/100,uniLib.Utils.setLocalStorage("SoundVolime",uniLib.SoundMgr.instance.soundVolume),this.updataSoundVolime()},i.prototype.OnMusicChange=function(t){uniLib.SoundMgr.instance.musicVolume=this.musicSlider.value/100,uniLib.Utils.setLocalStorage("SoundVolime",uniLib.SoundMgr.instance.musicVolume),this.updataMusicVolime()},i.prototype.updataSoundVolime=function(){0==this.soundSlider.value?this.soundButton.currentState="up":this.soundButton.currentState="upAndSelected"},i.prototype.updataMusicVolime=function(){0==this.musicSlider.value?this.musciButton.currentState="up":this.musciButton.currentState="upAndSelected"},i.prototype.onClickTap=function(e){e.target==this.dismissButton?(this.dispatchEventWith(t.UIEventConsts.DISMISS_GAME),this.destory()):e.target==this.replaceButton?uniLib.ZQGameSdk.getConfig("确定要更新游戏吗?","","确定","取消"):e.target==this.dialectRadioButton||e.target==this.mandarinRadioButton?this.updataLanguage():e.target==this.closeButton?this.dispatchEventWith(t.UIEventConsts.CLOSE):e.target==this.voiceControlOpenRadioButton||e.target==this.voiceControlCloseRadioButton||(e.target==this.soundButton?"upAndSelected"==this.soundButton.currentState?this.soundSlider.value>0&&(this.soundSlider.value=0,this.soundButton.currentState="up",uniLib.SoundMgr.instance.soundOpen&&(uniLib.SoundMgr.instance.soundVolume=0,uniLib.SoundMgr.instance.soundOpen=!1)):"up"==this.soundButton.currentState&&this.soundSlider.value<this.soundSlider.maximum&&(this.soundSlider.value=this.soundSlider.maximum,this.soundButton.currentState="upAndSelected",uniLib.SoundMgr.instance.soundVolume=1,uniLib.SoundMgr.instance.soundOpen=!0):e.target==this.musciButton&&("upAndSelected"==this.musciButton.currentState?this.musicSlider.value>0&&(this.musicSlider.value=0,this.musciButton.currentState="up",uniLib.SoundMgr.instance.musicOpen&&(uniLib.SoundMgr.instance.musicVolume=0,uniLib.SoundMgr.instance.musicOpen=!1)):"up"==this.musciButton.currentState&&(this.musicSlider.value<this.musicSlider.maximum&&(this.musicSlider.value=this.musicSlider.maximum,this.musciButton.currentState="upAndSelected"),uniLib.SoundMgr.instance.musicVolume=1,uniLib.SoundMgr.instance.musicOpen=!0)))},i.prototype.updataLanguage=function(){return 5113==t.DataCache.gameId?void(t.RoomInfo.getInstance().languageMode="pu"):(this.mandarinRadioButton.selected?t.RoomInfo.getInstance().languageMode="pu":t.RoomInfo.getInstance().languageMode="cs",void uniLib.Utils.setLocalStorage("languageMode",t.RoomInfo.getInstance().languageMode))},i}(eui.Component);t.SettingPanel=e,__reflect(e.prototype,"pdk.SettingPanel")}(pdk||(pdk={}));var SharePanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener(),this._ready=new SeatPlay,this.addChild(this._ready),this._shareBtn=new pdk.GameButton(["game_wx_share","game_wx_share"]),this._shareBtn.touchEnabled=!0,this._shareBtn.touchChildren=!0,this._shareBtn.x=(uniLib.Global.screenWidth-this._shareBtn.width)/2-200,this._shareBtn.y=500,this._shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareBtnTouch,this),this.addChild(this._shareBtn),this._shareBtn.visible=!1,1==uniLib.Global.is_sandbox&&(this._shareBtn.visible=!1),this._backBtn=new pdk.GameButton(["game_backLobby1","game_backLobby2"]),this._backBtn.touchEnabled=!0,this._backBtn.touchChildren=!0,this._backBtn.x=20,this._backBtn.y=100,this._backBtn.visible=!1,this._backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackBtnTouch,this),this.addChild(this._backBtn),this._dissBtn=new pdk.GameButton(["game_dismiss","game_dismiss"]),this._dissBtn.touchEnabled=!0,this._dissBtn.touchChildren=!0,this._dissBtn.x=(uniLib.Global.screenWidth-this._dissBtn.width)/2+200,this._dissBtn.y=500,this._dissBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDissBtnTouch,this),this.addChild(this._dissBtn),this._dissBtn.visible=!1,this._changeIcon=new pdk.GameButton([pdk.ColorConst.green+"btn_ahead_start_2_png",pdk.ColorConst.green+"btn_ahead_start_1_png"]),this._changeIcon.touchEnabled=!0,this._changeIcon.x=uniLib.Global.screenWidth/2-this._changeIcon.width/2-7,this._changeIcon.y=uniLib.Global.screenHeight-105,this.addChild(this._changeIcon),this._changeIcon.visible=!1,this._readyBtn=new pdk.GameButton(["game_ready","game_ready"]),this._readyBtn.touchEnabled=!0,this._readyBtn.x=(uniLib.Global.screenWidth-this._readyBtn.width)/2,this._readyBtn.y=600,this._readyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReadyBtn,this),this.addChild(this._readyBtn),this.showEnterButtons()},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.SHARE_HIDE_VIEW,this.disposeBtn,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.showEnterButtons,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.SHARE_HIDE_VIEW,this.disposeBtn,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.showEnterButtons,this)},e.prototype.create=function(){},e.prototype.onReadyBtn=function(t){this._readyBtn.visible=!1,ReqManager.ins.OnReadyGameReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.seatId)},e.prototype.onShareBtnTouch=function(){this.showShare()},e.prototype.ShowChangeIcon=function(){this._changeIcon&&(this._changeIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showChangeUserNumConfirm,this),this._changeIcon.visible=!0)},e.prototype.showChangeUserNumConfirm=function(){if(UserInfoDO.roleCurrentList){if(1==UserInfoDO.roleCurrentList.length)return void pdk.PublicManageTips.getInstance().showMildWarnShow("当前房间只有您自己，不可提前开局");var t="是否将房间改为"+UserInfoDO.roleCurrentList.length+"人模式，提前开局？";pdk.MsgBoxPanel.show("",t,["确定","取消"],[this.onChangeTouchHandler],this)}},e.prototype.onChangeTouchHandler=function(t){var e=new Cmd.RequestChangeUserNbrRoom_C;uniLib.NetMgr.tcpSend(e)},e.prototype.showGps=function(t){},e.prototype.onBackBtnTouch=function(){this.exitGame()},e.prototype.onDissBtnTouch=function(){this.showDismissConfirm()},e.prototype.showDismissConfirm=function(){var t="是否确定解散房间";pdk.MsgBoxPanel.show("解散房间",t,["确定","取消"],[this.onDismissYesReqHandler],this)},e.prototype.onDismissYesReqHandler=function(t){var e=new Cmd.RequestDissolveRoom_C;ReqManager.ins.OnRequestDissolveRoom_C(e)},e.prototype.exitGame=function(){return 0==pdk.RoomInfo.getInstance().video?void ReqManager.ins.OnOutRoomReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId):(pdk.DataCache.gameInfo&&pdk.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),void uniLib.GameModuleUtils.ExitGame(!1))},e.prototype.showShare=function(){var t=new uniLib.WXShareVo;t.shareWay=0,pdk.DataCache.platParam&&(t.title=pdk.DataCache.platParam.shareInfo.title,t.description=pdk.DataCache.platParam.shareInfo.content,t.webpageUrl=pdk.DataCache.platParam.shareInfo.webPageUrl);
var e=[5113,5241,5242];e=[],-1!=e.indexOf(pdk.DataCache.gameId)?uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,t,!1):uniLib.ZQGameSdk.share(t,null,this)},e.prototype.showEnterButtons=function(){if(this._backBtn&&this._shareBtn&&this._dissBtn){if(pdk.DataCache.platParam){var t=Number(pdk.DataCache.platParam.roomId);if(1e5>t)return}this._backBtn.visible=!0,1!=uniLib.Global.is_sandbox&&(this._shareBtn.visible=!0),this._dissBtn.visible=!0,this._readyBtn.visible=!0,1==UserInfoDO.actorInfo.bReady&&(this._readyBtn.visible=!1)}},e.prototype.show=function(){this.init()},e.prototype.hide=function(){},e.prototype.disposeBtn=function(){this._shareBtn&&(this._shareBtn.destory(),pdk.ResUtil.removeFromParent(this._shareBtn),this._shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareBtnTouch,this)),this._shareBtn=null,this._backBtn&&(this._backBtn.destory(),pdk.ResUtil.removeFromParent(this._backBtn),this._backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackBtnTouch,this)),this._backBtn=null,this._dissBtn&&(this._dissBtn.destory(),pdk.ResUtil.removeFromParent(this._dissBtn),this._dissBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDissBtnTouch,this)),this._dissBtn=null,this._readyBtn&&(this._readyBtn.destory(),pdk.ResUtil.removeFromParent(this._readyBtn),this._readyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReadyBtn,this)),this._readyBtn=null,this._changeIcon&&(this._changeIcon.destory(),pdk.ResUtil.removeFromParent(this._changeIcon),this._changeIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showChangeUserNumConfirm,this)),this._changeIcon=null},e.prototype.dispose=function(){this.removeListener(),this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(SharePanel.prototype,"SharePanel",["IPanel"]);var ShowPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._requestUid=0,e._isClick=!0,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.ShowPanel=function(){if(this._ins)throw new Error("Sington已经创建!")},e.prototype.init=function(){this.addListener()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(pdk.UIEventConsts.SHOW_RESULT_INFO,this.onShowResultPanel,this),GameEvnts.ins.addEventListener(pdk.UIEventConsts.SHOW_USER_INFO,this.onUserInfoEventHandle,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_SHOW_PANEL,this.onShowPlaneHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_HIDE_PANEL,this.onHidePlaneHandler,this),GameEvnts.ins.addEventListener(GameEvnts.DISS_NOTICE,this.onDissNotice,this),GameEvnts.ins.addEventListener(GameEvnts.DISS_RESULT_NOTICE,this.onDissResultNotice,this),GameEvnts.ins.addEventListener(GameEvnts.DISS_REQUEST_NOTICE,this.onDissRequestNotice,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(pdk.UIEventConsts.SHOW_USER_INFO,this.onUserInfoEventHandle,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_PANEL,this.onShowPlaneHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_HIDE_PANEL,this.onHidePlaneHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.DISS_NOTICE,this.onDissNotice,this),GameEvnts.ins.removeEventListener(GameEvnts.DISS_RESULT_NOTICE,this.onDissResultNotice,this),GameEvnts.ins.removeEventListener(GameEvnts.DISS_REQUEST_NOTICE,this.onDissRequestNotice,this),GameEvnts.ins.removeEventListener(pdk.UIEventConsts.SHOW_RESULT_INFO,this.onShowResultPanel,this)},e.prototype.onShowResultPanel=function(t){var e=t.data;this._totalRecordPanel||(this._totalRecordPanel=new pdk.TotalRecordPanel,this._totalRecordPanel.setData(e),this._totalRecordPanel.addEventListener(pdk.UIEventConsts.EXIT_GAME,this.exitGame,this),pdk.PopupManager.addPopUp(this._totalRecordPanel,!0,!1,!1))},e.prototype.removeTotalPanel=function(){this._totalRecordPanel&&(this._totalRecordPanel.removeEventListener(pdk.UIEventConsts.EXIT_GAME,this.exitGame,this),pdk.PopupManager.removePopUp(this._totalRecordPanel),this._totalRecordPanel.destory(),this._totalRecordPanel=null)},e.prototype.onUserInfoEventHandle=function(t){this.showUserInfoPanel(t.data)},e.prototype.getUserData=function(t){var e=new Cmd.GetPersonalPanel_C;e.uid=t,ReqManager.ins.OnGetPersonalPanel_C(e),uniLib.NetMgr.setMsgTimeout(8,"GetPersonalPanel_C")},e.prototype.onDissNotice=function(t){if(this._dismissPanel){var e=t.data;this._dismissPanel.updateStatus(e.isAgree,e.uid)}},e.prototype.onDissResultNotice=function(t){var e,i=t.data,n="";i.bOk?(n="经玩家#同意，房间解散成功",e=i.agreeUsers):(n="由于玩家#拒绝，房间解散失败，游戏继续",e=i.disagreeUsers);var s=n.split("#");i.bOk?pdk.MsgBoxPanel.show("",s[0]+e.toString()+s[1],["确定"],[this.dismissok],this):pdk.MsgBoxPanel.show("",s[0]+e.toString()+s[1],["确定"],[],this),this.removeDissPanel()},e.prototype.onDissRequestNotice=function(t){var e=UserInfoDO.getUserVoByUid(t.data.uid);e&&this.showDissPanel(t.data)},e.prototype.showDissPanel=function(t){null!=t&&(this._dismissPanel&&this.removeDissPanel(),this._dismissPanel||(this._dismissPanel=new pdk.DismissPanel,this._dismissPanel.x=uniLib.Global.screenWidth-this._dismissPanel.width>>1,this._dismissPanel.y=uniLib.Global.screenHeight-this._dismissPanel.height>>1,this._dismissPanel.setData(t),this._dismissPanel.addEventListener(pdk.UIEventConsts.DISMISS_BACK,this.dissHandle,this)),pdk.PopupManager.addPopUp(this._dismissPanel,!0))},e.prototype.removeDissPanel=function(){this._dismissPanel&&(this._dismissPanel.removeEventListener(pdk.UIEventConsts.DISMISS_BACK,this.dissHandle,this),pdk.PopupManager.removePopUp(this._dismissPanel),this._dismissPanel.destory()),this._dismissPanel=null},e.prototype.dissHandle=function(t){switch(t.type){case pdk.UIEventConsts.DISMISS_BACK:var e=new Cmd.ReplyDissolveRoom_C;e.isAgree=t.data,ReqManager.ins.OnReplyDissolveRoom_C(e)}},e.prototype.onHidePlaneHandler=function(t){this.hide()},e.prototype.onShowPlaneHandler=function(t){var e;switch(t.data){case"setting":this.create(),this._settingPanel=new pdk.SettingPanel,LayerManager.mainUILayer.addChild(this._settingPanel),this._settingPanel.addEventListener(pdk.UIEventConsts.CLOSE,this.removeSetting,this),this._settingPanel.addEventListener(pdk.UIEventConsts.DISMISS_GAME,this.showDismissConfirm,this);break;case"help":this.create(),e=new pdk.gameHelpPanel,LayerManager.mainUILayer.addChild(e),e.x=pdk.DataCache.defaultWidth/2-e.width/2-90,e.y=pdk.DataCache.defaultHeight/2-e.height/2-50;break;case"chat":this.create(),this._shortChat=new pdk.RoomFacePanel,this._shortChat.y=10,this._shortChat.x=uniLib.Global.screenWidth/2-this._shortChat.width/2,this._shortChat.addEventListener(pdk.UIEventConsts.SEND_CHAT_RECORD,this.requestRecord,this),this._shortChat.addEventListener(pdk.UIEventConsts.SEND_COMMON_CHAT,this.commonChatHandler,this),this._shortChat.addEventListener(pdk.UIEventConsts.SEND_COMMON_CHAT,this.commonChatHandler,this),this._shortChat.addEventListener(pdk.UIEventConsts.SEND_COMMON_CHAT,this.commonChatHandler,this),this._shortChat.addEventListener(pdk.UIEventConsts.SEND_COMMON_TALK,this.commonTalkHandler,this),LayerManager.mainUILayer.addChild(this._shortChat)}},e.prototype.removeSetting=function(){this._settingPanel&&(this._settingPanel.parent.removeChild(this._settingPanel),this._settingPanel.removeEventListener(pdk.UIEventConsts.CLOSE,this.removeSetting,this),this._settingPanel.removeEventListener(pdk.UIEventConsts.DISMISS_BACK,this.showDismissConfirm,this),this._settingPanel.removeEventListener(pdk.UIEventConsts.AGREE_CHANGE_USERNUM,this.showDismissConfirm,this),this._settingPanel.destory(),this._settingPanel=null)},e.prototype.showDismissConfirm=function(){this.removeSetting();var t="是否确定解散房间";pdk.MsgBoxPanel.show("解散房间",t,["确定","取消"],[this.onDismissYesReqHandler],this)},e.prototype.onDismissYesReqHandler=function(t){var e=new Cmd.RequestDissolveRoom_C;ReqManager.ins.OnRequestDissolveRoom_C(e)},e.prototype.dismissok=function(t){this.removeDissPanel();var e=pdk.GameData.getInstance().recordInfo;e?(this._totalRecordPanel||(this._totalRecordPanel=new pdk.TotalRecordPanel,pdk.PopupManager.addPopUp(this._totalRecordPanel,!0,!1,!1)),this._totalRecordPanel.setData(e),this._totalRecordPanel.addEventListener(pdk.UIEventConsts.EXIT_GAME,this.exitGame,this)):this.exitGame()},e.prototype.exitGame=function(){return 0==pdk.RoomInfo.getInstance().video?void ReqManager.ins.OnOutRoomReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId):(pdk.DataCache.gameInfo&&pdk.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),void uniLib.GameModuleUtils.ExitGame(!1))},e.prototype.showUserInfoPanel=function(t){this._userInfoPanel?this._userInfoPanel.reset():(this._userInfoPanel=new pdk.UserInfoPanel,this._userInfoPanel.addEventListener(pdk.UIEventConsts.GIFT_SEND,this.onUserPanelHandle,this),this._userInfoPanel.addEventListener(pdk.UIEventConsts.CLOSE,this.onUserPanelHandle,this)),this._userInfoPanel.setData(t),this._userInfoPanel.addListener(),LayerManager.mainUILayer.addChild(this._userInfoPanel)},e.prototype.onUserPanelHandle=function(t){var e=this,i=t.type;switch(i){case pdk.UIEventConsts.GIFT_SEND:var n=new Cmd.SendGiftPokerCmd_C;n.gift=t.data,ReqManager.ins.OnSendGiftPokerCmd_C(n),pdk.PopupManager.removePopUp(this._userInfoPanel),this.hideUserInfo(),this._isClick=!1,setTimeout(function(){e._isClick=!0},2600);break;case pdk.UIEventConsts.CLOSE:pdk.PopupManager.removePopUp(this._userInfoPanel),this.hideUserInfo()}},e.prototype.hideUserInfo=function(){this._isClick=!0,this._requestUid=0},e.prototype.create=function(){this.touchChildren=!0,this.touchEnabled=!0,this.numChildren>0&&DisplayUtil.removeAllChildren(this)},e.prototype.requestRecord=function(){var t=new Cmd.VoiceChatRecord_C;ReqManager.ins.OnCommonChat_C(t)},e.prototype.commonTalkHandler=function(t){var e=this,i=t.data,n=new Cmd.CommonChat_C;n.words=i,ReqManager.ins.OnCommonChat_C(n),uniLib.NetMgr.setMsgTimeout(8,"CommonChat_C"),this._isClick=!1,setTimeout(function(){e._isClick=!0},3e3),this.hideShortChat()},e.prototype.commonChatHandler=function(t){var e=this,i=t.data,n=new Cmd.CommonChat_C;n.voiceId=Number(i),ReqManager.ins.OnCommonChat_C(n),this._isClick=!1,setTimeout(function(){e._isClick=!0},3e3),this.hideShortChat()},e.prototype.hideShortChat=function(){this._shortChat&&(this._shortChat.visible=!1,pdk.PopupManager.removePopUp(this._shortChat))},e.prototype.removeShortChat=function(){this._shortChat&&(this._shortChat.removeEventListener(pdk.UIEventConsts.SEND_CHAT_RECORD,this.requestRecord,this),this._shortChat.removeEventListener(pdk.UIEventConsts.SEND_COMMON_TALK,this.commonTalkHandler,this),this._shortChat.removeEventListener(pdk.UIEventConsts.SEND_COMMON_CHAT,this.commonChatHandler,this),this._shortChat.removeEventListener(pdk.UIEventConsts.SEND_COMMON_CHAT,this.commonChatHandler,this),this._shortChat.removeEventListener(pdk.UIEventConsts.SEND_COMMON_CHAT,this.commonChatHandler,this),this._shortChat.destory()),this._shortChat=null},e.prototype.updateSoundSet=function(){var t=pdk.RoomInfo.getInstance().musicSetInfo;null!=t&&(t.music=uniLib.SoundMgr.instance.musicOpen,t.sound=uniLib.SoundMgr.instance.soundOpen,t.control=pdk.GameData.getInstance().audioPlayMode,1==t.dialect?pdk.RoomInfo.getInstance().languageMode="pu":pdk.RoomInfo.getInstance().languageMode="lo")},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.numChildren>0&&DisplayUtil.removeAllChildren(this),LayerManager.mainUILayer.removeChildren()},e.prototype.dispose=function(){this.removeListener(),this.removeTotalPanel(),DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(ShowPanel.prototype,"ShowPanel",["IPanel"]);var SysPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._index=0,e.eventTime=0,e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.SysPanel=function(){if(this._ins)throw new Error("Sington已经创建!")},e.prototype.init=function(){this.addListener()},e.prototype.create=function(){this.touchChildren=!1,this.touchEnabled=!1,this.setGameInfo(UserInfoDO.roomInfo.roomId,UserInfoDO.roomInfo.currentNum,UserInfoDO.roomInfo.totalNum,UserInfoDO.roomInfo.matchId),this.createGameSys()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.onUserEnterGameHandler,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_GAME_START,this.onUpdateRound,this),uniLib.Global.addEventListener(uniLib.ZqEvent.NATIVE_TO_EGERET,this.onNativeMessage,this),uniLib.Global.addEventListener(uniLib.ZqEvent.EVENT_L2G,this.onLobbyMessage,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_AGAIN_CONNECT_GAME,this.onAgainHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_USER_ENTER_GAME,this.onUserEnterGameHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.onUpdateRound,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.NATIVE_TO_EGERET,this.onNativeMessage,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.EVENT_L2G,this.onLobbyMessage,this)},e.prototype.onLobbyMessage=function(t){t.param?t.param.data&&(console.log("赛事排名刷新"+t.param.data),this.eventUserNbr=t.param.data.userNumber,this.eventMyOrder=t.param.data.myOrder,UserInfoDO.roomInfo.isEvent&&(this.totalRoomRund.text=this.eventMyOrder+"/"+this.eventUserNbr)):t.param.event_pdk&&(console.log("跑得快赛事信息"+t.param.event_pdk),UserInfoDO.roomInfo.eventInfo=t.param.event_pdk)},e.prototype.onAgainHandler=function(t){this.onUpdateRound()},e.prototype.onUpdateRound=function(){this.setGameInfo(UserInfoDO.roomInfo.roomId,UserInfoDO.roomInfo.currentNum,UserInfoDO.roomInfo.totalNum,UserInfoDO.roomInfo.matchId)},e.prototype.onNativeMessage=function(t){t.param.cmd==uniLib.ZQGameSdk.NETSTATE&&0==t.param.code?(uniLib.ZQGameSdk.lastNetState&&uniLib.ZQGameSdk.lastNetState.data[uniLib.ZQGameSdk.NETSTATE]!=t.param.data[uniLib.ZQGameSdk.NETSTATE]&&uniLib.NetMgr.setMsgTimeout(5,"SoundSet_C")&&ReqManager.ins.OnSoundSet_C(new Cmd.SoundSet_C),t.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.NO_SIGNAL?(this._signalTxt.visible=!0,this._signal.visible=!1):t.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.WIFI?(this._signalTxt.visible=!1,this._signal.visible=!0,this._signal.texture=RES.getRes("pdk_game_wifi")):t.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.DATA_FLOWS?(this._signalTxt.visible=!1,this._signal.visible=!0,this._signal.texture=RES.getRes("pdk_game_data")):t.param.data[uniLib.ZQGameSdk.NETSTATE]==uniLib.NetState.WIFI_AND_DATA&&(this._signalTxt.visible=!1,this._signal.visible=!0,this._signal.texture=RES.getRes("pdk_game_wifi"))):t.param.cmd==uniLib.ZQGameSdk.BATTERY&&0==t.param.code&&(this._betteryPercent.width=t.param.data[uniLib.ZQGameSdk.BATTERY]/100*23)},e.prototype.onUserEnterGameHandler=function(t){this.create()},e.prototype.createGameSys=function(){this._timeTxt&&DisplayUtil.removeFromParent(this._timeTxt),this._timeTxt=null,this._timeTxt=pdk.ResUtil.createTextFeild(12386298,egret.HorizontalAlign.LEFT,"00:00",30,uniLib.Global.screenWidth/2-30,5,100),this._timeTxt.fontFamily="微软雅黑",this.addChild(this._timeTxt),this._dateTxt&&DisplayUtil.removeFromParent(this._dateTxt),this._dateTxt=null,this._dateTxt=pdk.ResUtil.createTextFeild(12386298,egret.HorizontalAlign.LEFT,"11-14",26,pdk.DataCache.defaultWidth-225,pdk.DataCache.defaultHeight-14,100);var t=DomainUtil.getBitmap("pdk_game_bettery");t.smoothing=!0,this.addChild(t),t.x=uniLib.Global.screenWidth-300,t.y=uniLib.Global.screenHeight-30,this._betteryPercent&&DisplayUtil.removeFromParent(this._betteryPercent),this._betteryPercent=null,this._betteryPercent=pdk.ResUtil.createBitmapByName("pdk_betteryPercent_png"),this._betteryPercent.scale9Grid=new egret.Rectangle(1,5,0,2),this._betteryPercent.x=t.x+3,this._betteryPercent.y=t.y+3,this._betteryPercent.width=23,this.addChild(this._betteryPercent),this._signal&&DisplayUtil.removeFromParent(this._signal),this._signal=null,this._signal=pdk.ResUtil.createBitmapByName("pdk_game_data"),this._signal.x=t.x+60,this._signal.y=t.y,this.addChild(this._signal),this._signalTxt&&DisplayUtil.removeFromParent(this._signalTxt),this._signalTxt=null,this._signalTxt=pdk.ResUtil.createTextFeild(16711680,egret.HorizontalAlign.LEFT,"没网络",13,this._signal.x-12,this._signal.y-2,100),this.addChild(this._signalTxt),this._signalTxt.visible=!1,this._signal.visible=!0,this.addChild(pdk.Ping.instance),pdk.Ping.instance.setPingPos(this._signalTxt.x-20,this._signalTxt.y+12),this._timer_1000&&(this._timer_1000.stop(),this._timer_1000=null),this._timer_1000=uniLib.SetUniTimerTimeout(this,this.countSecond,1e4,!1,this)},e.prototype.countSecond=function(){var t=new Date,e=t.getMonth()+1+"-"+this.setTimeFormat(t.getDate());this._dateTxt&&(this._dateTxt.text=e,this._timeTxt.text=this.setTimeFormat(t.getHours())+":"+this.setTimeFormat(t.getMinutes())),uniLib.ZQGameSdk.getNetStateType(),uniLib.ZQGameSdk.getBatteryPer(),this._index=this._index+1,this.visible,uniLib.NetMgr.checkMsgTimeout(5e3)&&uniLib.NetMgr.setMsgTimeout(5,"SoundSet_C")&&ReqManager.ins.OnSoundSet_C(new Cmd.SoundSet_C)},e.prototype.setGameInfo=function(t,e,i,n){this.roomIdTxt&&DisplayUtil.removeFromParent(this.roomIdTxt),this.roomIdTxt=null,this.roomIdTxt=new egret.TextField,this.addChild(this.roomIdTxt),this.roomIdTxt.text="",this.roomIdTxt.fontFamily="微软雅黑",this.roomIdTxt.size=28,this.roomIdTxt.textColor=12386298,this.roomIdTxt.text="房号:"+t.toString(),this.roomIdTxt.x=(uniLib.Global.screenWidth-this.roomIdTxt.width)/2,this.roomIdTxt.y=50,n&&(this.matchIdTxt||(this.matchIdTxt=new egret.TextField,this.matchIdTxt.fontFamily="微软雅黑",this.matchIdTxt.size=28,this.matchIdTxt.textColor=12386298),this.matchIdTxt.text="ID:"+n,this.matchIdTxt.y=50,this.matchIdTxt.x=uniLib.Global.screenWidth/2-this.matchIdTxt.width-50,this.addChild(this.matchIdTxt),this.roomIdTxt.x=uniLib.Global.screenWidth/2+50),this.curRoomRund&&DisplayUtil.removeFromParent(this.curRoomRund),this.curRoomRund=null,this.curRoomRund=new egret.TextField,this.addChild(this.curRoomRund),this.curRoomRund.text="",this.curRoomRund.fontFamily="微软雅黑",this.curRoomRund.size=32,this.curRoomRund.x=uniLib.Global.screenWidth/2-240,this.curRoomRund.y=5,this.curRoomRund.textColor=12386298,this.curRoomRund.text="第"+e.toString()+"局",this.totalRoomRund&&DisplayUtil.removeFromParent(this.totalRoomRund),this.totalRoomRund=null,this.totalRoomRund=new egret.TextField,this.addChild(this.totalRoomRund),this.totalRoomRund.text="",this.totalRoomRund.fontFamily="微软雅黑",this.totalRoomRund.size=32,this.totalRoomRund.x=uniLib.Global.screenWidth/2+160,this.totalRoomRund.y=5,this.totalRoomRund.textColor=12386298,this.totalRoomRund.text="共"+i.toString()+"局",UserInfoDO.roomInfo.playTypeList instanceof Array&&-1!=UserInfoDO.roomInfo.playTypeList.indexOf(95)&&(this.totalRoomRund.visible=this.curRoomRund.visible=!1),1==UserInfoDO.roomInfo.isEvent&&UserInfoDO.roomInfo.eventInfo&&(console.log("进入比赛场！"),this.curRoomRund.size=this.totalRoomRund.size=28,this.curRoomRund.x=370*uniLib.ScreenUtils.scaleFactor,this.curRoomRund.text="基础分"+UserInfoDO.roomInfo.eventInfo.bottomPoint+"\n淘汰分"+UserInfoDO.roomInfo.eventInfo.leavingPoint,this.totalRoomRund.text=UserInfoDO.roomInfo.eventInfo.myOrder+"/"+UserInfoDO.roomInfo.eventInfo.userNumber,this.totalRoomRund.x=800*uniLib.ScreenUtils.scaleFactor,this.eventTime=UserInfoDO.roomInfo.eventInfo.time,this.roomIdTxt.text=this.formateTime(this.eventTime),this.roomIdTxt.x=600*uniLib.ScreenUtils.scaleFactor,this.uniTimer&&this.uniTimer.stop(),this.uniTimer=uniLib.SetUniTimerTimeout(this,this.timeAdd,1e3,!1,this))},e.prototype.timeAdd=function(){this.eventTime++,this.roomIdTxt.text=this.formateTime(this.eventTime)},e.prototype.formateTime=function(t){var e="",i=Math.round(t/3600)+"",n=this.setTimeFormat(parseInt(t%3600/60+"")),s=this.setTimeFormat(t%3600%60);return e=i+":"+n+":"+s+" "},e.prototype.setTimeFormat=function(t){var e="";return e=10>t?"0"+t:t+""},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this.roomIdTxt=null,this.totalRoomRund=null,this.curRoomRund=null,this._dateTxt=null,this._timeTxt=null,this._signal=null,this._signalTxt=null,this._betteryPercent=null,this._timer_1000&&(this._timer_1000.stop(),this._timer_1000=null),this.matchIdTxt=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(SysPanel.prototype,"SysPanel",["IPanel"]);var TestPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectId=[],e.selectName=[],e.index=0,e.cardButtonArr=["确定","取消","重选"],e.cardArr=[],e}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.TestPanel=function(){if(this._ins)throw new Error("Sington已经创建!")},e.prototype.init=function(){this.addListener(),this.create()},e.prototype.create=function(){DisplayUtil.removeAllChildren(this),this.touchChildren=!0,this.touchEnabled=!0,uniLib.Global.debugLevel>=1&&(this.setGameCard(),this.setGameButton(),this.x=30,this.selectName=[],this.selectId=[],this.cardTxt=new egret.TextField,this.addChild(this.cardTxt),this.cardTxt.textColor=16777215,this.cardTxt.type="微软雅黑",this.cardTxt.text="",this.cardTxt.size=20,this.cardTxt.x=120,this.cardTxt.y=410)},e.prototype.addListener=function(){GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_HIDE_TEST,this.onHideTestHandler,this),GameEvnts.ins.addGameEventListener(GameEvnts.NOTIFY_SHOW_TEST,this.onShowTestHandler,this)},e.prototype.removeListener=function(){},e.prototype.onShowTestHandler=function(t){this.create()},e.prototype.onHideTestHandler=function(t){this.dispose()},e.prototype.onCardTouchHandler=function(t){if(this.selectName.length>=16)return this.selectName.length=16,void MsgTipsManager.showError("选择的牌型已满,请清空重选");this.selectName.push(t.currentTarget.text),this.selectId.push(Number(t.currentTarget.name)),this.cardTxt.text=this.selectName.toString(),this.removeChild(t.currentTarget);this.numChildren},e.prototype.setGameCard=function(){this.cardArr=[112,113,114,115,116,117,118,119,1110,1111,1112,1113,121,123,124,125,126,127,128,129,1210,1211,1212,1213,131,133,134,135,136,137,138,139,1310,1311,1312,1313,141,143,144,145,146,147,148,149,1410,1411,1412,1413];for(var t=0;t<this.cardArr.length;t++){var e=new egret.Shape;this.addChild(e),e.graphics.clear(),e.graphics.beginFill(6710886,1),e.graphics.drawRect(0,0,80,30),e.graphics.endFill();var i=new egret.TextField;this.addChild(i),i.textColor=16777215,i.type="微软雅黑",i.size=25,t%10==0&&this.index++,e.y=i.y=50*(this.index+1),e.x=i.x=120+100*(t%10),i.text=pdk.TableCard.selectByThisId(this.cardArr[t]).name,i.touchEnabled=!0,i.name=pdk.TableCard.selectByThisId(this.cardArr[t]).thisId.toString(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCardTouchHandler,this)}},e.prototype.setGameButton=function(){this.cardButtonArr=["确定","取消","重选"];for(var t=0;t<this.cardButtonArr.length;t++){var e=new egret.Shape;this.addChild(e),e.graphics.clear(),e.graphics.beginFill(6710886,1),e.graphics.drawRect(0,0,80,30),e.graphics.endFill();var i=new egret.TextField;this.addChild(i),i.textColor=16777215,i.type="微软雅黑",i.size=25,e.y=i.y=350,e.x=i.x=470+100*t,i.text=this.cardButtonArr[t].toString(),i.touchEnabled=!0,i.name=this.cardButtonArr[t].toString(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonTouchHandler,this)}},e.prototype.onButtonTouchHandler=function(t){"确定"==t.currentTarget.name&&(this.selectId.length>0?ReqManager.ins.OnChangeCardReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,this.selectId):ReqManager.ins.OnReadyGameReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.seatId),this.dispose()),"取消"==t.currentTarget.name&&(this.dispose(),ReqManager.ins.OnReadyGameReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId,UserInfoDO.actorInfo.seatId)),"重选"==t.currentTarget.name&&(this.cardArr=[],this.selectId=[],this.index=0,this.cardTxt=null,DisplayUtil.removeAllChildren(this),this.create())},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this.cardArr=[],this.selectId=[],this.index=0,this.cardTxt=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(TestPanel.prototype,"TestPanel",["IPanel"]);var pdk;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initUI=function(){this._mask=new egret.Sprite,this._mask.graphics.beginFill(0,.01),this._mask.graphics.drawRect(0,0,t.DataCache.defaultWidth,t.DataCache.defaultHeight),this._mask.graphics.endFill(),this._mask.touchEnabled=!0,this.addChild(this._mask);var e=uniLib.DisplayUtils.createBitmapByName("video_bg");this.addChild(e),e.y=uniLib.Global.screenHeight-160,e.x=uniLib.Global.screenWidth/2-e.width/2,this._backBtn=new t.GameButton(["video_back1","video_back2"]),this.addChild(this._backBtn),this._backBtn.name="back",this._stopBtn=new t.GameButton(["video_stop1","video_stop2"]),this.addChild(this._stopBtn),this._stopBtn.name="stop",this._advanceBtn=new t.GameButton(["video_advance1","video_advance2"]),this.addChild(this._advanceBtn),this._advanceBtn.name="advance",this._closeBtn=new t.GameButton(["video_close1","video_close2"]),this.addChild(this._closeBtn),this._closeBtn.name="close",this._backBtn.x=e.x+2,this._stopBtn.x=this._backBtn.x+this._backBtn.width+5,this._advanceBtn.x=this._stopBtn.x+this._stopBtn.width+5,this._closeBtn.x=this._advanceBtn.x+this._advanceBtn.width+3,this._backBtn.y=this._stopBtn.y=this._advanceBtn.y=this._closeBtn.y=e.y+5,this._backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._stopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._advanceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},i.prototype.btnClick=function(t){var e=t.currentTarget.name;switch(e){case"back":uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_back");break;case"stop":uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_stop");break;case"advance":uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_advance");break;case"close":this.showVideoFinish(1)}},i.prototype.showVideoFinish=function(e){var i=new t.MsgBoxPanel;i.x=uniLib.Global.screenWidth-i.width>>1,i.y=uniLib.Global.screenHeight-i.height>>1,LayerManager.tipLayer.addChild(i),0==e?i.setData("","录像播放完毕",["确定"],[this.videoExit],this):i.setData("","确定退出录像？",["确定"],[this.videoExit],this)},i.prototype.videoExit=function(){uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_close"),GameEvnts.ins.dispatchEvent(new egret.Event(GameEvnts.NOTIFY_HIDE_CLOCK)),this.dispatchEventWith(t.UIEventConsts.EXIT_GAME)},i.prototype.videoReplay=function(){uniLib.Global.dispatchEvent(uniLib.ZqEvent.EVENT_G2L,"video_replay")},i.prototype.destory=function(){this._backBtn&&(this._backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._backBtn=null),this._stopBtn&&(this._stopBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._stopBtn=null),this._advanceBtn&&(this._advanceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._advanceBtn=null),this._closeBtn&&(this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this._closeBtn=null),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(t.BaseVc);t.VideoPanel=e,__reflect(e.prototype,"pdk.VideoPanel")}(pdk||(pdk={}));var NavigatePanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.NavigatePanel=function(){if(this._ins)throw new Error("Sington已经创建!")},e.prototype.init=function(){this.addListener(),this.create()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_SHOW_GPS,this.showDistancePanel,this),GameEvnts.ins.addEventListener(GameEvnts.NOTIFY_GAME_START,this.hideTestPanel,this),GameEvnts.ins.addEventListener(GameEvnts.UPDATE_GPS_DATA,this.updateDistance,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_SHOW_GPS,this.showDistancePanel,this),GameEvnts.ins.removeEventListener(GameEvnts.NOTIFY_GAME_START,this.hideTestPanel,this),GameEvnts.ins.removeEventListener(GameEvnts.UPDATE_GPS_DATA,this.updateDistance,this)},e.prototype.create=function(){this.touchChildren=!0,this.touchEnabled=!0,this._seatPlay||(this._seatPlay=new SeatPlay,this.addChild(this._seatPlay)),this._seatPlay.init(),this._icon||(this._icon=IconPanel.ins,this.addChild(this._icon)),this._icon.show(),this._sysIcon||(this._sysIcon=SysPanel.ins,this.addChild(this._sysIcon)),this._sysIcon.show(),this._sharePanel||(this._sharePanel=SharePanel.ins,this.addChild(this._sharePanel)),this._sharePanel.show(),this._showPanel||(this._showPanel=ShowPanel.ins,this.addChild(this._showPanel)),this._showPanel.show(),!this._testIcon&&uniLib.Global.debugLevel>=1&&(this._testIcon=TestPanel.ins,this.addChild(this._testIcon),this._testIcon.show()),this.showVideoPanel()},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.hideTestPanel=function(t){this._testIcon&&this._testIcon.dispose()},e.prototype.showDistancePanel=function(){this._distancePanel||(this._distancePanel=new pdk.DistancePanel,pdk.GameInfo.topLayer.addChild(this._distancePanel),this._distancePanel.x=(uniLib.Global.screenWidth-this._distancePanel.width)/2,this._distancePanel.y=(uniLib.Global.screenHeight-this._distancePanel.height)/2,this._distancePanel.addEventListener(pdk.UIEventConsts.CLOSE,this.removeDistanceanel,this),this._distancePanel.updateGps())},e.prototype.removeDistanceanel=function(){this._distancePanel&&(this._distancePanel.removeEventListener(pdk.UIEventConsts.CLOSE,this.removeDistanceanel,this),this._distancePanel.destory(),pdk.GameInfo.topLayer.removeChild(this._distancePanel)),this._distancePanel=null},e.prototype.updateDistance=function(t){},e.prototype.showVideoPanel=function(){0!=pdk.RoomInfo.getInstance().video&&(this.showGameVc(!1),this._videoPanel=new pdk.VideoPanel,LayerManager.topLayer.addChild(this._videoPanel),this._videoPanel.addEventListener(pdk.UIEventConsts.VIDEO_BACK,this.videoDisEvent,this),this._videoPanel.addEventListener(pdk.UIEventConsts.VIDEO_STOP,this.videoDisEvent,this),this._videoPanel.addEventListener(pdk.UIEventConsts.VIDEO_ADVANCE,this.videoDisEvent,this),this._videoPanel.addEventListener(pdk.UIEventConsts.VIDEO_CLOSE,this.videoDisEvent,this),this._videoPanel.addEventListener(pdk.UIEventConsts.EXIT_GAME,this.exitGame,this))},e.prototype.exitGame=function(){return 0==pdk.RoomInfo.getInstance().video?void ReqManager.ins.OnOutRoomReq_C(UserInfoDO.actorInfo.uid,UserInfoDO.roomInfo.roomId):(pdk.DataCache.gameInfo&&pdk.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),void uniLib.GameModuleUtils.ExitGame(!1))},e.prototype.videoDisEvent=function(t){this.dispatchEventWith(t.type)},e.prototype.showGameVc=function(t){this._icon&&(this._icon.visible=t),this._testIcon&&(this._testIcon.visible=t),this._sharePanel&&(this._sharePanel.visible=t)},e.prototype.dispose=function(){this.removeListener(),this._sysIcon&&this._sysIcon.dispose(),this._sysIcon=null,this._icon&&this._icon.dispose(),this._icon=null,this._showPanel&&this._showPanel.dispose(),this._showPanel=null,this._testIcon&&this._testIcon.dispose(),this._testIcon=null,this._sharePanel&&this._sharePanel.dispose(),this._sharePanel=null,this._seatPlay&&this._seatPlay.dispose(),this._videoPanel&&(this._videoPanel.removeEventListener(pdk.UIEventConsts.VIDEO_BACK,this.videoDisEvent,this),this._videoPanel.removeEventListener(pdk.UIEventConsts.VIDEO_STOP,this.videoDisEvent,this),this._videoPanel.removeEventListener(pdk.UIEventConsts.VIDEO_ADVANCE,this.videoDisEvent,this),this._videoPanel.removeEventListener(pdk.UIEventConsts.VIDEO_CLOSE,this.videoDisEvent,this),this._videoPanel.removeEventListener(pdk.UIEventConsts.EXIT_GAME,this.exitGame,this),this._videoPanel.destory()),DisplayUtil.removeFromParent(this._videoPanel),this._videoPanel=null,this._seatPlay=null,DisplayUtil.removeAllChildren(this)
},e}(egret.Sprite);__reflect(NavigatePanel.prototype,"NavigatePanel",["IPanel"]);var UIPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){this.touchChildren=!0,this.touchEnabled=!0,this._navigate||(this._navigate=NavigatePanel.ins,this.addChild(this._navigate)),this._navigate.show()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.SHOW_UI_SCENCE,this.onUserShowUiHandler,this),GameEvnts.ins.addEventListener(GameEvnts.HIDE_UI_SCENCE,this.onUserHideUiHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.SHOW_UI_SCENCE,this.onUserShowUiHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.HIDE_UI_SCENCE,this.onUserHideUiHandler,this)},e.prototype.onUserShowUiHandler=function(t){this.create()},e.prototype.onUserHideUiHandler=function(t){this.dispose()},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._navigate&&this._navigate.dispose(),this._navigate=null,DisplayUtil.removeAllChildren(this)},e}(egret.Sprite);__reflect(UIPanel.prototype,"UIPanel",["IPanel"]);var ScenePanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.Load=function(t,i,n,s){e.HeadLoad.load(t,i,null,s)},Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.addListener()},e.prototype.create=function(){this._map||(this._map=MapPanel.ins,LayerManager.uiLayer.addChild(this._map)),this._map.show(),this._game||(this._game=GamePanel.ins,LayerManager.uiLayer.addChild(this._game)),this._ui||(this._ui=UIPanel.ins,LayerManager.uiLayer.addChild(this._ui)),this._ui.show(),this._eff||(this._eff=EffectPanel.ins,LayerManager.effectLayer.addChild(this._eff)),this._eff.show(),this._game.show()},e.prototype.addListener=function(){GameEvnts.ins.addEventListener(GameEvnts.SHOW_MAIN_SCENCE,this.onShowMainScenceHandler,this),GameEvnts.ins.addEventListener(GameEvnts.HIDE_MAIN_SCENCE,this.onHideMainScenceHandler,this)},e.prototype.removeListener=function(){GameEvnts.ins.removeEventListener(GameEvnts.SHOW_MAIN_SCENCE,this.onShowMainScenceHandler,this),GameEvnts.ins.removeEventListener(GameEvnts.HIDE_MAIN_SCENCE,this.onHideMainScenceHandler,this)},e.prototype.onShowMainScenceHandler=function(t){this.create()},e.prototype.onHideMainScenceHandler=function(t){this.dispose()},e.prototype.show=function(){this.init()},e.prototype.hide=function(){this.dispose()},e.prototype.dispose=function(){this.removeListener(),this._map&&this._map.dispose(),DisplayUtil.removeFromParent(this._map),this._map=null,this._game&&this._game.dispose(),DisplayUtil.removeFromParent(this._game),this._eff&&this._eff.dispose(),DisplayUtil.removeFromParent(this._eff),this._game=null,this._ui&&this._ui.dispose(),DisplayUtil.removeFromParent(this._ui),this._ui=null,DisplayUtil.removeAllChildren(this),UserInfoDO.dispose(),LayerManager.removeLayer()},e}(egret.Sprite);ScenePanel.HeadLoad=new HeadLoader,__reflect(ScenePanel.prototype,"ScenePanel",["IPanel"]);